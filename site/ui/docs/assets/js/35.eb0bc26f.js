(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{336:function(t,v,n){"use strict";n.r(v);var _=n(8),e=Object(_.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("p",{attrs:{id:"api"}}),t._v(" "),v("h1",{attrs:{id:"работа-с-api-сервера"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#работа-с-api-сервера"}},[t._v("#")]),t._v(" Работа с API сервера")]),t._v(" "),v("locale-warning",{attrs:{lang:"es"}}),t._v(" "),v("p",[t._v("Расширить возможности по использованию "),v("const",{attrs:{name:"product-server"}}),t._v(" можно с помощью RESTful API, доступного во всех версиях, в том числе и бесплатной.")],1),t._v(" "),v("p",{attrs:{id:"oauth2"}}),t._v(" "),v("h2",{attrs:{id:"принципы-работы-api-и-oauth-2-0"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#принципы-работы-api-и-oauth-2-0"}},[t._v("#")]),t._v(" Принципы работы API и OAuth 2.0")]),t._v(" "),v("p",[t._v("Раздел "),v("interface",{attrs:{all:"{API} {OAuth2}"}}),t._v(" предназначен для управления приложениями или сервисами, работающими с "),v("Const",{attrs:{name:"product-server"}}),t._v(" API. Управление доступом происходит согласно протоколу авторизации OAuth 2.0, подробнее о котором вы можете прочитать в "),v("a",{attrs:{href:"https://tools.ietf.org/html/rfc6749",target:"_blank",rel:"noopener noreferrer"}},[t._v("официальной документации к RFC 6749"),v("OutboundLink")],1),t._v(", а также во врезке ниже.")],1),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[v("Const",{attrs:{name:"empty-title"}})],1),t._v(" "),v("p",[t._v("Основная идея протокола OAuth 2.0 состоит в выдаче прав на доступ к API отдельным приложениям (client в терминологии OAuth) с ограниченной областью видимости и правами. Такой подход позволяет в любой момент отключить доступ конкретному приложению или его пользователю к ресурсам сервера. Протокол также позволяет безопасно авторизовать сторонние приложения и совершать действия на сервере через API от имени пользователя. При этом пользователь не должен сообщать свои логин или пароль стороннему приложению (метод Authorization Code).")])]),t._v(" "),v("p",[t._v("Каждое стороннее приложение обязано получить ключ доступа (access token) в результате процесса авторизации на "),v("Const",{attrs:{name:"product-server"}}),t._v(" по протоколу OAuth 2.0. Приложения, имеющие валидный ключ доступа, могут в любой момент обращаться к "),v("Const",{attrs:{name:"product-server"}}),t._v(" API, список вызовов которого "),v("to-site",{attrs:{alias:"api-tcs"}},[t._v("описан в документации")]),t._v(". Через данный раздел панели управления администратор "),v("Const",{attrs:{name:"product-server"}}),t._v(" имеет контроль не только над доступами сторонних приложений, но и над ключами, полученными через эти приложения.")],1),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[v("Const",{attrs:{name:"empty-title"}})],1),t._v(" "),v("p",[t._v("Примеры "),v("to-site",{attrs:{alias:"api-start"}},[t._v("работы с "),v("const",{attrs:{name:"company-name"}}),t._v(" API")],1),t._v(" показаны в нашем блоге.")],1)]),t._v(" "),v("p",[t._v("После авторизации приложение получает ключ доступа "),v("em",[t._v("(access token)")]),t._v(" с ограниченным временем жизни и с серверной либо пользовательской областью видимости. Например, серверная область видимости позволяет получать данные о любых конференциях, а пользовательская — только о конференциях, где пользователь является участником или владельцем. Область видимости определяется выбранным разработчиком стороннего приложения типом авторизации, а набор прав на доступ к ресурсам сервера определяется администратором сервера.")]),t._v(" "),v("table",[v("tr",[v("th",[t._v("\n            Метод авторизации OAuth 2.0\n        ")]),t._v(" "),v("th",[t._v("\n            Область видимости ключа доступа\n        ")]),t._v(" "),v("th",[t._v("\n            Результат авторизации\n        ")])]),t._v(" "),v("tr",[v("td",[v("b",[t._v("Client Credentials")]),t._v(" "),v("br"),t._v("\n            Приложение получает ключ доступа, область видимости которого не ограничена данными конкретного пользователя. Авторизация для пользователя не требуется. Рекомендуется использовать только для доверенных приложений.\n        ")]),t._v(" "),v("td",[t._v("\n            Не ограничена.\n        ")]),t._v(" "),v("td",[t._v("\n            Выдаётся ключ доступа "),v("i",[t._v("(access token)")]),t._v(" со временем жизни 1 час.\n        ")])]),t._v(" "),v("tr",[v("td",[v("b",[t._v("User Credentials")]),t._v(" (он же "),v("i",[t._v("Resource Owner Password Credentials Grant")]),t._v(")\n            "),v("br"),t._v("\n            Для получения ключа доступа необходимо передать логин и пароль пользователя, полученные на стороне приложения.\n        ")]),t._v(" "),v("td",[t._v("\n            Ограничена областью видимости авторизованного пользователя.\n        ")]),t._v(" "),v("td",[t._v("\n            Выдаётся ключ доступа на 1 час, а также ключ продления доступа "),v("i",[t._v("(refresh token)")]),t._v(" на 7 дней.\n        ")])]),t._v(" "),v("tr",[v("td",[v("b",[t._v("Authorization Code")]),t._v(" "),v("br"),t._v("\n            Ключ доступа "),v("i",[t._v("(access token)")]),t._v(" выдаётся после самостоятельной авторизации пользователя на стороне "),v("Const",{attrs:{name:"product-server"}}),t._v(". Логин и пароль пользователя приложению недоступны.\n        ")],1),t._v(" "),v("td",[t._v("\n            Ограничена областью видимости авторизованного пользователя.\n        ")]),t._v(" "),v("td",[t._v("\n            Выдаётся ключ доступа на 1 час, а также ключ продления доступа на 7 дней.\n        ")])]),t._v(" "),v("tr",[v("td",[v("b",[t._v("Refresh Token")]),t._v(" "),v("br"),t._v("\n            Данный метод авторизации позволяет получить новый ключ доступа (access token) на основе существующего ключа продления доступа (refresh token).\n        ")]),t._v(" "),v("td",[t._v("\n            Ограничена областью видимости пользователя, которому был выдан ключ продления доступа.\n        ")]),t._v(" "),v("td",[t._v("\n            Выдаётся новый ключ доступа на 1 час. Обновить его с помощью этого метода нельзя.\n        ")])])]),t._v(" "),v("p",[t._v("Каждый запрос на создание ключа доступа требует указания ID приложения (Application ID) и секрета приложения (Secret), которые можно получить и обновить, создав или, соответственно, отредактировав приложение в этом разделе. ID приложения создаётся автоматически и не может быть изменён в дальнейшем, в отличие от секрета приложения, который можно сгенерировать заново.")]),t._v(" "),v("p",{attrs:{id:"oauth2-permissions"}}),t._v(" "),v("h2",{attrs:{id:"описание-разрешении"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#описание-разрешении"}},[t._v("#")]),t._v(" Описание разрешений")]),t._v(" "),v("p",[t._v("Возможности стороннего приложения по работе с API зависят от выданных ему разрешений.")]),t._v(" "),v("table",[v("tr",[v("th",[t._v("\n            Разрешение\n        ")]),t._v(" "),v("th",[t._v("\n            Описание\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации о конференции\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление конференции\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.records:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации о записях конференций\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.participants:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение списка участников конференции\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.participants:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление участников конференции\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.invitations\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение и редактирование списка приглашённых в конференцию абонентов\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.sessions:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации об определённой сессии (активном сеансе видеосвязи)\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.sessions.participants:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение списка участников активной конференции и их ролей\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            conferences.sessions.podiums.participants\n        ")]),t._v(" "),v("td",[t._v("\n            Приглашение участника активной конференции на трибуну и удаление его с трибуны \n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            groups:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации о группе пользователей\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            groups:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление групп пользователей. Недоступно в LDAP\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            groups.users:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение списка пользователей группы\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            groups.users:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление пользователей групп. Недоступно в LDAP\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            users:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации о пользователях сервера\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            users:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление пользователей сервера. Недоступно в LDAP\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            users.addressbook:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение контактов из адресных книг пользователей\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            users.addressbook:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление контактов в адресной книге пользователей\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            users.avatar:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации об аватарах пользователей\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            users.avatar:write\n        ")]),t._v(" "),v("td",[t._v("\n            Добавление и удаление аватаров пользователей\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            templates.conferences:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение информации о шаблонах конференций\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            templates.conferences:write\n        ")]),t._v(" "),v("td",[t._v("\n            Создание, редактирование, удаление шаблонов конференций\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            logs.calls:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение списка конференций из логов сервера \n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            logs.calls.participants:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение списка участников конференции из логов сервера\n        ")])]),t._v(" "),v("tr",[v("td",[t._v("\n            logs.calls.invites:read\n        ")]),t._v(" "),v("td",[t._v("\n            Чтение списка приглашённых в конференцию пользователей из логов сервера\n        ")])])]),t._v(" "),v("p",[t._v("В документации к "),v("to-site",{attrs:{alias:"api-tcs"}},[v("Const",{attrs:{name:"product-server"}}),t._v(" API")],1),t._v(" для каждого метода указан набор разрешений, требуемых для его успешного вызова.")],1),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[v("Const",{attrs:{name:"empty-title"}})],1),t._v(" "),v("p",[t._v("Если OAuth-приложению требуется доступ как на чтение так и на запись некоторого параметра, то вместо указания разрешений "),v("code",[t._v("<permission>:read")]),t._v(" и "),v("code",[t._v("<permission>:write")]),t._v(" можно указать общее разрешение "),v("code",[t._v("<permission>")]),t._v(" если это доступно. Например, для того, чтобы приложение могло читать и редактировать учётные записи пользователей сервера, то вместо выбора обоих флажков "),v("code",[t._v("users:read")]),t._v(" и "),v("code",[t._v("users:write")]),t._v(" можно указать только один "),v("code",[t._v("users")]),t._v(".")])]),t._v(" "),v("p",{attrs:{id:"create-oauth2-application"}}),t._v(" "),v("h2",{attrs:{id:"форма-создания-нового-oauth-2-0-приложения"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#форма-создания-нового-oauth-2-0-приложения"}},[t._v("#")]),t._v(" Форма создания нового OAuth 2.0 приложения")]),t._v(" "),v("p",[t._v("Для добавления OAuth 2.0 приложения:")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("Нажмите "),v("interface",{attrs:{ru:"Создать новое приложение",en:"Create a new application"}}),t._v(".")],1)]),t._v(" "),v("li",[v("p",[t._v("Укажите его идентификатор в поле "),v("interface",{attrs:{ru:"Имя",en:"Name"}}),t._v(". Он используется только для отображения в списке приложений.")],1)]),t._v(" "),v("li",[v("p",[t._v("Для авторизации методом "),v("strong",[t._v("Authorization Code")]),t._v(" в поле "),v("interface",{attrs:{ru:"Переадресация URL",en:"Redirect URL"}}),t._v(" укажите URL-адрес, на который будет перенаправлено приложение. Для остальных методов авторизации можно указать адрес "),v("code",[t._v("https://localhost/")]),t._v(".")],1)]),t._v(" "),v("li",[v("p",[t._v("В списке "),v("interface",{attrs:{ru:"Разрешения",en:"Permissions"}}),t._v(" отметьте необходимые для вашего приложения "),v("a",{attrs:{href:"#oauth2-permissions"}},[t._v("права")]),t._v(".")],1)]),t._v(" "),v("li",[v("p",[t._v("Сохраните изменения с помощью кнопки "),v("interface",{attrs:{ru:"Создать",en:"Create"}}),t._v(".")],1)])]),t._v(" "),v("p",{attrs:{id:"edit-oauth2-application"}}),t._v(" "),v("h2",{attrs:{id:"страница-редактирования-приложения"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#страница-редактирования-приложения"}},[t._v("#")]),t._v(" Страница редактирования приложения")]),t._v(" "),v("p",[t._v("На странице приложения помимо редактирования его свойств возможно также увидеть список ключей доступа, которые были получены пользователями этого приложения. Вы можете в любой момент удалить ключи доступа для конкретных пользователей, что не позволит им более обращаться к ресурсам сервера через API.")]),t._v(" "),v("p",[t._v("Вы также можете "),v("interface",{attrs:{ru:"Перегенерировать",en:"Regenerate"}}),t._v(" секрет приложения, что может быть полезно в целях безопасности для прекращения доступа к серверу этому приложению, а также всем его новым пользователям. Обратите внимание, что ключи доступа и продления доступа, полученные с использованием старого секрета, продолжат работать до окончания их времени жизни.")],1),t._v(" "),v("toTopButton")],1)}),[],!1,null,null,null);v.default=e.exports}}]);