"use strict";(self.webpackChunk_tc_server_widgets=self.webpackChunk_tc_server_widgets||[]).push([[488],{78656:function(t,e,r){r.r(e),r.d(e,{default:function(){return F}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"directory-routes-container"},[e("div",{staticClass:"directory-routes-container__content"},[e("transition",{attrs:{name:"directory-routes-animations",mode:"out-in"}},[e("div",{staticClass:"directory-screen",attrs:{id:"main-directory-screen"}},[e("div",{staticClass:"directory-screen__tools",attrs:{id:"directory-screen-tools"}},[e("Search"),t._v(" "),e("Settings")],1),t._v(" "),e("list")],1)])],1),t._v(" "),e("user-card",{attrs:{user:t.$store.getters.getActiveUser},on:{close:function(e){return t.$store.commit("resetActiveUser")}}})],1)};s._withStripped=!0;var i=function(){var t=this,e=t._self._c;return e("div",[e("transition",{attrs:{name:"user-card-background"}},[t.user?e("div",{staticClass:"user-card__container",on:{click:function(e){return e.target!==e.currentTarget?null:t.$emit("close")}}}):t._e()]),t._v(" "),e("transition",{attrs:{name:"user-card"}},[t.user?e("div",{staticClass:"user-card"},[e("div",{staticClass:"user-card__content-container"},[e("div",{staticClass:"user-card__content-row"},[e("p",{staticClass:"user-card__header one-line"},[t._v("\n            "+t._s(t.$pgettext("Header","User profile"))+"\n          ")]),t._v(" "),e("TcButton",{staticClass:"user-card__button-close",attrs:{type:"icon",icon:"close"},on:{click:function(e){return t.$emit("close")}}})],1),t._v(" "),e("div",{staticClass:"user-card__content user-card__content--center"},[e("TcAvatar",{staticClass:"user-card__avatar",attrs:{src:t.user.data.avatar,name:t.user.display_name,icon:"owner"===t.user.status?"star":null,status:"owner"===t.user.status?"busy":t.user.status}}),t._v(" "),e("p",{staticClass:"user-card__desc--primary user-card__desc--profile",attrs:{title:t.user.display_name}},[t._v("\n            "+t._s(t.user.display_name)+"\n          ")]),t._v(" "),e("p",{staticClass:"user-card__desc--secondary user-card__desc--profile",attrs:{title:t.user.id}},[t._v("\n            "+t._s(t.user.id)+"\n          ")])],1)]),t._v(" "),e("div",{staticClass:"user-card__actions"},t._l(t.actions,(function(r){return e("a",{key:r.type,staticClass:"user-card__actions-item",attrs:{href:r.link},on:{click:function(e){return t.actionHandler(r.type,e)}}},[e("TcButton",{staticClass:"user-card__actions-item__button",class:"user-card__actions-item--".concat(r.type),attrs:{type:"icon",icon:r.icon}})],1)})),0),t._v(" "),e("div",{staticClass:"user-card__content-container"},t._l(t.information,(function(r,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:r.value,expression:"item.value"}],key:r.value+s,staticClass:"user-card__content"},[e("p",{staticClass:"user-card__desc--secondary one-line"},[t._v("\n            "+t._s(r.title)+"\n          ")]),t._v(" "),r.isLink?t._e():e("p",{staticClass:"user-card__desc--primary",attrs:{title:r.value}},[t._v("\n            "+t._s(r.value)+"\n          ")]),t._v(" "),r.isLink?e("a",{staticClass:"user-card__desc--primary user-card__link one-line",attrs:{href:"".concat(r.prefix,":").concat(r.value),title:r.value}},[t._v("\n            "+t._s(r.value)+"\n          ")]):t._e()])})),0)]):t._e()])],1)};i._withStripped=!0;var a=r(72505),o=r.n(a),n={name:"DirectoryUserCard",props:{user:{type:Object,default:null}},methods:{checkContact:function(){var t=this,e=this.user?this.user.id:null,r=this.$store.getters["auth/getAuthorizationUserInfo"]?this.$store.getters["auth/getAuthorizationUserInfo"].id:null,s=this.$store.getters["auth/getAccessToken"];if(!e||!r||!s)return clearInterval(this.checkContactTimer),this.checkContactTimer=null,void(this.userInAddressBook=!1);o().get("/api/v3.1/users/".concat(r,"/addressbook/").concat(e,"?access_token=").concat(s)).then((function(){t.userInAddressBook=!0})).catch((function(){t.userInAddressBook=!1}))},actionHandler:function(t,e){var r=this;if(this.sourceAppIsTrueconfRoom){e.preventDefault(),"add"===t&&(t=this.userInAddressBook?"deleteContact":"addContact");var s=this.user,i=s.id,a=s.display_name;return window.parent.postMessage(JSON.stringify({action:t,user:{id:i,displayName:a}}),"*"),void this.$emit("close")}"add"===t&&(setTimeout((function(){r.checkContact()}),50),this.checkContactTimer||(this.checkContactTimer=setInterval((function(){r.checkContact()}),1e3)))}},computed:{information:function(){return[{title:this.$pgettext("Title","First name"),value:this.user.data.first_name},{title:this.$pgettext("Title","Last name"),value:this.user.data.last_name},{title:"ID",value:this.user.data.uid||this.user.data.id,isLink:!0,prefix:"trueconf"},{title:"Email",value:this.user.data.email,isLink:!0,prefix:"mailto"},{title:this.$pgettext("Title","Groups"),value:this.groupsNames},{title:this.$pgettext("Title","Company"),value:this.user.data.company},{title:this.$pgettext("Title","Mobile phone"),value:this.user.data.mobile_phone},{title:this.$pgettext("Title","Work phone"),value:this.user.data.work_phone},{title:this.$pgettext("Title","Home phone"),value:this.user.data.home_phone}]},groupsNames:function(){var t=this;return this.user.data.groups.map((function(e){return"@no_group"!==e.id?e.display_name:t.$pgettext("Name of group","Users without group")})).join(", ")},actions:function(){var t=[{icon:"call",type:"call",link:this.linkToCall},{icon:this.userInAddressBook?"delete_sweep":"person_add",type:"add",link:this.linkToAddressBook},{icon:"chat",type:"chat",link:this.linkToChat,hidden:this.sourceAppIsTrueconfRoom}];return t.filter((function(t){return!t.hidden}))},linkToCall:function(){return"trueconf:".concat(this.user.id)},linkToChat:function(){return"trueconf:".concat(this.user.id,"&do=chat")},linkToAddressBook:function(){var t={do:this.userInAddressBook&&this.newClient?"remove_from_addressbook":"add_to_addressbook",display_name:this.user.display_name},e=Object.keys(t).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))})).join("&");return"trueconf:".concat(this.user.id,"&").concat(e)},newClient:function(){if(!this.$store.getters.getClientVersion)return!0;var t=this.$store.getters.getClientVersion.split(".");return t.length>0&&Number(t[0])>7||t.length>1&&Number(t[1])>4},sourceAppIsTrueconfRoom:function(){return"trueconf_room"===this.$store.state.appState.sourceApp}},data:function(){return{userInAddressBook:!1,checkContactTimer:null}},watch:{user:{handler:function(){this.checkContact()}},immediate:!0}},c=r(14486),l=(0,c.A)(n,i,[],!1,null,null,null).exports,u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"directory-search"},[e("TcTextField",{staticClass:"directory-search__input",attrs:{autofocus:"",icon:"search",placeholder:t.$pgettext("Hint","Enter user’s name, ID or email address"),title:t.$pgettext("Hint","Enter user’s name, ID or email address"),disabled:!t.$store.getters.directoryServersIsLoaded,action:t.search?{icon:"cancel",value:"clear",title:"Clear"}:null},on:{clear:function(e){t.search=""}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)};u._withStripped=!0;var d={name:"DirectorySearch",computed:{search:{get:function(){return this.$store.getters.getSearchValue},set:function(t){this.$store.commit("setSearchValue",t)}}},data:function(){return{searchTimeout:null}},watch:{search:{handler:function(t){var e=this;clearTimeout(this.searchTimeout),this.$store.getters.getSearchResult&&this.$store.commit("resetSearchResult"),this.$store.dispatch("abortSearchUsersByDirectory"),""!==t&&(this.searchTimeout=setTimeout((function(){e.$store.dispatch("searchUsersByDirectory",{searchValue:t})}),1e3))},immediate:!0}}},_=(0,c.A)(d,u,[],!1,null,null,null).exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"directory-settings"},[e("div",{staticClass:"directory-settings__back-to-top",class:{"directory-settings__back-to-top--hidden":t.scrollTop[t.currentMode]<99}},[e("p",{staticClass:"directory-settings__back-to-top__desc"},[t._v("\n      "+t._s(t.$pgettext("Text on the button","Back to top"))+"\n    ")]),t._v(" "),e("TcButton",{staticClass:"directory-settings__back-to-top__button",attrs:{type:"icon",icon:"keyboard_arrow_up"},on:{click:function(e){return t.backToTop({collapse:!1})}}})],1),t._v(" "),e("div",{staticClass:"directory-settings__tool"},[e("p",{staticClass:"directory-list__tool-desc one-line",class:{"directory-list__tool-desc--is-active":t.onlineFilter},attrs:{title:t.$pgettext("Filter status","Online users only")}},[t._v("\n      "+t._s(t.$pgettext("Filter status","Online users only"))+"\n    ")]),t._v(" "),e("TcSwitch",{model:{value:t.onlineFilter,callback:function(e){t.onlineFilter=e},expression:"onlineFilter"}})],1),t._v(" "),e("div",{staticClass:"directory-settings__tool directory-settings__tool--primary"},[e("TcButton",{staticClass:"directory-settings__button",attrs:{type:"text",text:t.$pgettext("Text on the button","Collapse all")},on:{click:function(e){return t.backToTop({collapse:!0})}}})],1)])};h._withStripped=!0;var m={name:"DirectorySettings",mounted:function(){this.addListenerForScroll("directory-list"),this.addListenerForScroll("directory-list-search")},methods:{collapseAll:function(){var t=this;"directory-list"===this.currentMode&&this.$store.commit("setServers",this.$store.getters.getDirectoryServerList),"directory-list-search"===this.currentMode&&Object.keys(this.$store.getters.getSearchResult).forEach((function(e){t.$set(t.$store.getters.getSearchResult[e],"isActive",!1)}))},backToTop:function(t){var e=this,r=t.collapse,s=document.getElementById(this.currentMode);if(s.scrollTop>0)return s.scrollTop=this.scrollTop[this.currentMode]-(this.scrollTop[this.currentMode]+100)/10,void setTimeout((function(){return e.backToTop({collapse:r})}),20);r&&this.collapseAll()},scrollHandler:function(t){this.scrollTop[t.srcElement.id]=t.srcElement.scrollTop},addListenerForScroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"directory-list";document.getElementById(e)?document.getElementById(e).addEventListener("scroll",this.scrollHandler,!1):setTimeout((function(){t.addListenerForScroll(e)}),1e3)}},computed:{currentMode:function(){return this.$store.getters.searchModeOn?"directory-list-search":"directory-list"},onlineFilter:{get:function(){return this.$store.getters.getOnlineFilter},set:function(t){this.$store.commit("setOnlineFilter",t)}}},data:function(){return{scrollTop:{"directory-list":0,"directory-list-search":0}}}},v=m,p=(0,c.A)(v,h,[],!1,null,null,null).exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"directory-list-container"},[t.$store.getters.directoryServersIsLoaded?t._e():e("div",{staticClass:"directory-list-container--center"},[e("TcPreloader",{staticClass:"directory-list__preloader",attrs:{type:"circle"}})],1),t._v(" "),!t.$store.getters.directoryServersIsLoaded||t.$store.getters.getDirectoryTree&&0!==t.$store.getters.directoryServersIsLoaded.length?t._e():e("div",{staticClass:"directory-list-container--center"},[e("p",{staticClass:"directory-list__desc"},[t._v("\n      "+t._s(t.$pgettext("Message","List is empty"))+"\n    ")])]),t._v(" "),t.$store.getters.directoryServersIsLoaded&&t.$store.getters.getDirectoryTree&&0===t.$store.getters.getSearchValue.length?e("virtual-list",{ref:"directoryList",staticClass:"directory-list",attrs:{size:48,remain:t.countOfItems,variable:t.getVariableHeight,id:"directory-list"}},t._l(t.directoryTreeList,(function(t,r){return e("item",{key:r.toString()+t.display_name||t.mode,attrs:{index:r,item:t,height:"user"===t.type?60:40}})})),1):t._e(),t._v(" "),t.$store.getters.directoryServersIsLoaded&&t.$store.getters.getDirectoryTree&&0!==t.$store.getters.getSearchValue.length?e("virtual-list",{ref:"directorySearch",staticClass:"directory-list",attrs:{size:48,remain:t.countOfItems,variable:t.getVariableHeight,id:"directory-list-search"}},t._l(t.directorySearchList,(function(t,r){return e("item",{key:r+t.display_name,attrs:{index:r,item:t,height:"user"===t.type?60:40}})})),1):t._e()],1)};y._withStripped=!0;var f=r(77929),g=r.n(f),C=function(){var t=this;return(0,t._self._c)("".concat(t.item.type,"-item"),{key:t.index+t.item.display_name,tag:"component",attrs:{value:t.item}})};C._withStripped=!0;var w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"server-item"},[e("TcButton",{staticClass:"directory-list__item",class:{"directory-list__item-server--is-active":t.value.isActive},on:{click:function(e){return t.actionHandler(t.value)}}},[e("div",{staticClass:"directory-list__item-slot"},["loading"!==t.value.state?e("div",{staticClass:"directory-list__item__icon-container",attrs:{"aria-hidden":""},domProps:{innerHTML:t._s(t.serverIcon)}}):t._e(),t._v(" "),"loading"===t.value.state?e("TcPreloader",{attrs:{type:"circle"}}):t._e(),t._v(" "),e("p",{staticClass:"directory-list__item-heading one-line",class:{"directory-list__item-heading--is-active":t.value.isActive},attrs:{title:t.serverName}},[t._v("\n        "+t._s(t.serverName)+"\n      ")]),t._v(" "),e("div",{staticClass:"directory-spacer"}),t._v(" "),e("transition",{attrs:{mode:"out-in",name:t.value.isActive?"directory-item-arrow-down-icon":"directory-item-arrow-right-icon"}},[e("i",{key:t.currentIcon,staticClass:"material-icons directory-list__item__icon",class:{"directory-list__item__icon--is-active":t.value.isActive}},[t._v(t._s(t.currentIcon))])])],1)]),t._v(" "),t.showError?e("DirectoryListItemError",{attrs:{errorCode:t.getErrorCode,isEmpty:t.isEmpty,value:t.value}}):t._e()],1)};w._withStripped=!0;var $={methods:{setError:function(t){var e;return t?"accessTokenInvalid"===(null===(e=t.response)||void 0===e?void 0:e.data.error.errors[0].reason)?"403":"Network Error"===t.message?"404":"000":""}}},x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"error-items"},[t.errorCode&&!t.isEmpty?e("div",{staticClass:"error-item",class:"group"===t.value.type?"error-item_group":""},[e("span",{staticClass:"error-item__text error-item__text_warning"},[t._v("\n      "+t._s(t.getError[0].text)+"\n    ")]),t._v(" "),e("span",{staticClass:"error-item__text error-item__text_warning"},[t._v("\n      "+t._s(t.errorCodeText)+"\n    ")]),t._v(" "),t.getError[0].description?e("span",{staticClass:"error-item__text"},[t._v("\n      "+t._s(t.getError[0].description)+"\n    ")]):t._e()]):t._e(),t._v(" "),t.isEmpty&&!t.errorCode?e("div",{staticClass:"error-item"},[e("span",{staticClass:"error-item__text"},[t._v("\n      "+t._s(t.$pgettext("Message shown for empty list","No items to display."))+"\n    ")])]):t._e()])};x._withStripped=!0;var I={name:"ErrorItem",props:{errorCode:{type:String,default:""},isEmpty:{type:Boolean,default:!1},value:{type:Object,default:null}},computed:{getError:function(){var t=this;return[{code:"403",text:this.$pgettext("An error message. An access token is an object required to provide users of one server access to the user groups of other server.","Access token of your server to the %host_name is invalid or has expired.").replace("%host_name",this.serverName),description:this.$pgettext("A notification","Please try again within an hour or contact your server administrator.")},{code:"404",text:this.$pgettext("An error message","Failed to connect to the %host_name server.").replace("%host_name",this.serverName)},{code:"400",text:this.$pgettext("An error message","Something went wrong."),description:""}].filter((function(e){return e.code===t.errorCode}))},serverName:function(){return"server"===this.value.type?this.value.display_name:this.value.owner.display_name},errorCodeText:function(){return this.$pgettext("A text hint. The word will be followed by an error code such as 402.","Error code: %error_code").replace("%error_code",this.errorCode)}}},k=(0,c.A)(I,x,[],!1,null,null,null).exports,T={name:"ServerItem",props:{value:{type:Object,default:null}},components:{DirectoryListItemError:k},mixins:[$],methods:{actionHandler:function(t){var e=this;"loading"!==t.state&&(t.isActive?this.$set(t,"isActive",!1):!t.isActive&&this.$store.getters.searchModeOn||t.itemKeys.length>0?this.$set(t,"isActive",!0):this.$store.dispatch("updateGroupByServer",{server:t}).then((function(){e.$set(t,"isActive",!0)})).catch((function(){e.$set(t,"isActive",!0)})))}},computed:{currentIcon:function(){return this.value.isActive?"keyboard_arrow_down":"keyboard_arrow_right"},serverName:function(){return this.value.data.alias&&0!==this.value.data.alias.length&&this.value.data.alias!==this.value.data.name?"".concat(this.value.data.alias," (").concat(this.value.data.name,")"):this.value.display_name},isEmpty:function(){return"loaded"===this.value.state&&this.value.isEmpty},getErrorCode:function(){return this.setError(this.value.error)},showError:function(){return this.value.isActive&&""!==this.value.error}},data:function(){return{serverIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.001 20"><defs><style>.a{fill:#06234e;}.b{fill:#00838f;}.c{fill:#fff;}.d{fill:none;}</style></defs><g transform="translate(-156 -71)"><g transform="translate(156 71.833)"><rect class="a" width="2.887" height="13.133" transform="translate(1.635 5.05)"/><rect class="a" width="2.887" height="13.133" transform="translate(15.213 5.05)"/><path class="b" d="M19.056,3.464V1.889H20V0H0V1.889H.944V3.464H0V5.355H20V3.464Z"/><ellipse class="c" cx="0.736" cy="0.736" rx="0.736" ry="0.736" transform="translate(16.754 1.783)"/><rect class="c" width="1.136" height="1.136" transform="translate(1.367 1.076)"/><rect class="c" width="1.136" height="1.136" transform="translate(3.07 1.076)"/><rect class="c" width="1.136" height="1.136" transform="translate(4.773 1.076)"/><rect class="c" width="1.136" height="1.136" transform="translate(1.367 2.779)"/><rect class="c" width="1.136" height="1.136" transform="translate(3.07 2.779)"/><rect class="c" width="1.136" height="1.136" transform="translate(4.773 2.779)"/><g transform="translate(0 8.662)"><path class="b" d="M19.056,307.064v-1.575H20V303.6H0v1.889H.944v1.575H0v1.892H20v-1.892Z" transform="translate(0 -303.6)"/><ellipse class="c" cx="0.736" cy="0.736" rx="0.736" ry="0.736" transform="translate(16.754 1.783)"/><rect class="c" width="1.136" height="1.136" transform="translate(1.367 1.076)"/><rect class="c" width="1.136" height="1.136" transform="translate(3.07 1.076)"/><rect class="c" width="1.136" height="1.136" transform="translate(4.773 1.076)"/><rect class="c" width="1.136" height="1.136" transform="translate(1.367 2.779)"/><rect class="c" width="1.136" height="1.136" transform="translate(3.07 2.779)"/><rect class="c" width="1.136" height="1.136" transform="translate(4.773 2.779)"/></g></g><rect class="d" width="20" height="20" transform="translate(156 71)"/></g></svg>'}}},A=(0,c.A)(T,w,[],!1,null,null,null).exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"group-item"},[t.showGroupButton?e("TcButton",{staticClass:"directory-list__item",class:{"directory-list__item-group--is-active":t.value.isActive},on:{click:function(e){return t.actionHandler(t.value)}}},[e("div",{staticClass:"directory-list__item-slot"},[e("div",{staticClass:"directory-list__item-line directory-list__item-server-line"},[e("div",{staticClass:"directory-list__item-line__el directory-list__item-server-line--left",class:{"directory-list__item-server-line--bottom":t.value.isLastItem}}),t._v(" "),e("div",{staticClass:"directory-list__item-line__el",class:{"directory-list__item-server-line--left":!t.value.isLastItem}})]),t._v(" "),"default"===t.value.mode?e("div",{staticClass:"directory-list__item-content"},["loading"!==t.value.state?e("div",{staticClass:"directory-list__item__icon-container",attrs:{"aria-hidden":""},domProps:{innerHTML:t._s(t.groupIcon)}}):t._e(),t._v(" "),"loading"===t.value.state?e("TcPreloader",{attrs:{type:"circle"}}):t._e(),t._v(" "),e("p",{staticClass:"directory-list__item-heading one-line",class:{"directory-list__item-heading--is-active":t.value.isActive},attrs:{title:t.groupName}},[t._v("\n          "+t._s(t.groupName)+"\n        ")]),t._v(" "),e("div",{staticClass:"directory-spacer"}),t._v(" "),e("transition",{attrs:{mode:"out-in",name:t.value.isActive?"directory-item-arrow-down-icon":"directory-item-arrow-right-icon"}},[e("i",{key:t.dropDownIcon,staticClass:"material-icons directory-list__item__icon",class:{"directory-list__item__icon--is-active":t.value.isActive}},[t._v(t._s(t.dropDownIcon))])])],1):t._e(),t._v(" "),"load-more"===t.value.mode?e("div",{staticClass:"directory-list__item-content directory-list__item-content--center"},["loading"!==t.value.owner.state?e("p",{staticClass:"directory-list__item-button-text one-line"},[t._v("\n          "+t._s(t.$pgettext("Text on the button","Load more"))+"\n        ")]):t._e(),t._v(" "),"loading"===t.value.owner.state?e("TcPreloader",{attrs:{type:"fountain"}}):t._e()],1):t._e()])]):t._e(),t._v(" "),t.showError?e("DirectoryListItemError",{attrs:{errorCode:t.getErrorCode,isEmpty:t.isEmpty,value:t.value}}):t._e()],1)};b._withStripped=!0;var S={name:"GroupItem",props:{value:{type:Object,default:null}},components:{DirectoryListItemError:k},mixins:[$],methods:{actionHandler:function(t){"loading"!==t.state&&("load-more"!==t.mode?t.isActive?this.$set(t,"isActive",!1):t.itemKeys.length>0?this.$set(t,"isActive",!0):this.updateUsersByGroup(t):this.$store.dispatch("updateGroupByServer",{server:t.owner}))},updateUsersByGroup:function(t){var e=this;this.$store.dispatch("updateUsersByGroup",{group:t}).then((function(){e.$store.getters.getOnlineFilter&&t.onlineUsersIsMissing&&-1!==t.next_page_id?e.updateUsersByGroup(t):e.$set(t,"isActive",!0)})).catch((function(){e.$set(t,"isActive",!0)}))}},computed:{dropDownIcon:function(){return this.value.isActive?"keyboard_arrow_down":"keyboard_arrow_right"},groupName:function(){return"@no_group"===this.value.id?this.$pgettext("Name of group","Users without group"):this.value.display_name},isEmpty:function(){return"loaded"===this.value.state&&this.value.isEmpty},getErrorCode:function(){return this.setError(this.value.error)},showGroupButton:function(){return!this.value.owner.error},showError:function(){return this.value.isActive&&""!==this.value.error}},data:function(){return{groupIcon:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n<style type="text/css">\n\t.directory-group-st0{fill:#06234E;}\n\t.directory-group-st1{fill:#0099A6;}\n\t.directory-group-st2{fill:#FFFFFF;}\n</style>\n<g>\n\t<path class="directory-group-st0" d="M17.9,4.7H9L7.2,2.3H0.8c-0.3,0-0.6,0.3-0.6,0.6v15.1c0,0,0,0,0.1,0l3.5-9.6C3.8,8.1,4,7.9,4.3,7.9h14.2V5.3\n\t\tC18.5,5,18.2,4.7,17.9,4.7z"/>\n</g>\n<path class="directory-group-st1" d="M18.7,6.9H2.5C1.9,6.9,1.4,7.4,1.3,8l-1.2,9.9c0,0.4,0.2,0.7,0.6,0.7h17.3c0.3,0,0.6-0.2,0.6-0.5l1.2-9.7\n\tC20,7.5,19.4,6.9,18.7,6.9z"/>\n<g>\n\t<circle id="XMLID_25_" class="directory-group-st2" cx="8.6" cy="11.6" r="1.9"/>\n\t<path id="XMLID_24_" class="directory-group-st2" d="M13.1,11.5c0,1-0.8,1.9-1.9,1.9c-0.3,0-0.6-0.1-0.9-0.2c0.4-0.4,0.6-0.9,0.6-1.5\n\t\tc0-0.7-0.3-1.3-0.7-1.7c0.3-0.2,0.7-0.3,1.1-0.3C12.3,9.6,13.1,10.5,13.1,11.5z"/>\n\t<path id="XMLID_22_" class="directory-group-st2" d="M10,13.4c-0.4,0.3-0.9,0.5-1.4,0.5c-0.5,0-1-0.2-1.3-0.4C7,13.6,6.8,13.8,6.5,14\n\t\tc-0.4,0.4-0.7,1-0.8,1.6h6C11.5,14.6,10.9,13.8,10,13.4z"/>\n\t<path id="XMLID_17_" class="directory-group-st2" d="M12.6,13.3c-0.4,0.3-0.8,0.4-1.3,0.4c0,0,0,0.1-0.1,0.1c0.5,0.4,0.8,1.1,1,1.8h2.1\n\t\tC14.1,14.4,13.5,13.7,12.6,13.3z"/>\n</g>\n</svg>\n'}}},E=(0,c.A)(S,b,[],!1,null,null,null).exports,L=function(){var t=this,e=t._self._c;return t.showUserButton?e("TcButton",{staticClass:"directory-list__item directory-list__item-user",attrs:{id:t.itemId},on:{click:function(e){return t.actionHandler(t.value)}}},[e("div",{staticClass:"directory-list__item-slot"},["group"===t.value.owner.type?e("div",{staticClass:"directory-list__item-line directory-list__item-server-line"},[e("div",{staticClass:"directory-list__item-line__el",class:{"directory-list__item-server-line--left":!t.value.owner.isLastItem}}),t._v(" "),e("div",{staticClass:"directory-list__item-line__el",class:{"directory-list__item-server-line--left":!t.value.owner.isLastItem}})]):t._e(),t._v(" "),e("div",{staticClass:"directory-list__item-line directory-list__item-group-line"},[e("div",{staticClass:"directory-list__item-line__el directory-list__item-group-line--left",class:{"directory-list__item-group-line--bottom":t.value.isLastItem}}),t._v(" "),e("div",{staticClass:"directory-list__item-line__el",class:{"directory-list__item-group-line--left":!t.value.isLastItem}})]),t._v(" "),"default"===t.value.mode?e("div",{staticClass:"directory-list__item-content"},[e("TcAvatar",{key:"avatar",staticClass:"directory-list__avatar",attrs:{src:t.value.data.avatar,name:t.value.display_name,icon:"owner"===t.value.status?"star":null,status:"owner"===t.value.status?"busy":t.value.status}}),t._v(" "),e("div",{key:"information",staticClass:"directory-item-user"},[e("p",{staticClass:"directory-item-user--primary one-line",attrs:{title:t.value.display_name}},[t._v("\n          "+t._s(t.value.display_name)+"\n        ")]),t._v(" "),e("p",{staticClass:"directory-item-user--secondary one-line",attrs:{title:t.value.id}},[t._v("\n          "+t._s(t.value.id)+"\n        ")])])],1):t._e(),t._v(" "),"load-more"===t.value.mode?e("div",{staticClass:"directory-list__item-content directory-list__item-content--center"},["loading"!==t.value.owner.state?e("p",{staticClass:"directory-list__item-button-text one-line"},[t._v("\n        "+t._s(t.$pgettext("Text on the button","Load more"))+"\n      ")]):t._e(),t._v(" "),"loading"===t.value.owner.state?e("TcPreloader",{attrs:{colorIsPrimary:"",type:"fountain"}}):t._e()],1):t._e(),t._v(" "),"refine-search"===t.value.mode?e("div",{staticClass:"directory-list__item-content directory-list__item-content--center"},[e("p",{staticClass:"directory-list__item-message"},[t._v("\n        "+t._s(t.$pgettext("Message","Too many search results. Please refine your search criteria."))+"\n      ")])]):t._e()])]):t._e()};L._withStripped=!0;var B={name:"UserItem",props:{value:{type:Object,default:null}},methods:{actionHandler:function(t){-1===window.navigator.userAgent.indexOf("Android")||"trueconf_room"===this.$store.state.appState.sourceApp?"default"!==t.mode?"refine-search"!==t.mode?this.updateUsersByGroup(t):document.getElementById("directory-search__input").focus():this.$store.commit("setActiveUser",t):window.open("trueconf:".concat(t.id,"&do=profile"))},updateUsersByGroup:function(t){var e=this;this.$store.dispatch("updateUsersByGroup",{group:t.owner,server:t.owner.owner}).then((function(){e.$store.getters.getOnlineFilter&&t.owner.onlineUsersIsMissing&&-1!==t.owner.next_page_id&&e.updateUsersByGroup(t)}))}},computed:{itemId:function(){var t=this.value.owner.id;return"group"===this.value.owner.type&&(t=this.value.owner.owner.id),"".concat(t,"-").concat(this.value.id)},showUserButton:function(){return!this.value.owner.error}},data:function(){return{}}},O=(0,c.A)(B,L,[],!1,null,null,null).exports,H={name:"ListItem",props:{item:{type:Object,default:null},index:{type:Number,default:0}},components:{ServerItem:A,GroupItem:E,UserItem:O},data:function(){return{}}},M=(0,c.A)(H,C,[],!1,null,null,null).exports,U={name:"DirectoryList",components:{virtualList:g(),Item:M},created:function(){this.$store.dispatch("updateServersInDirectory",{accessToken:this.$store.getters["auth/getAccessToken"]})},mounted:function(){this.updateCountOfItems(),window.addEventListener("resize",this.updateCountOfItems,!1),this.updateStatusTimer=setInterval(this.updateStatusesForUsers,15e3)},beforeDestroy:function(){window.removeEventListener("resize",this.updateCountOfItems,!1),clearInterval(this.updateStatusTimer)},methods:{getVariableHeight:function(t){return"user"===this.currentList[t].type?60:48},updateCountOfItems:function(){var t=this;clearTimeout(this.updateCountIfItemsTimeout);var e=document.getElementById("main-directory-screen"),r=document.getElementById("directory-screen-tools");this.countOfItems=Math.floor((e.clientHeight-r.clientHeight)/48),this.updateCountIfItemsTimeout=setTimeout((function(){t.countOfItems=Math.floor((e.clientHeight-r.clientHeight)/48)}),300)},updateStatusesForUsers:function(){var t=this;if(!this.$store.getters.searchModeOn){var e=this.$store.getters.getDirectoryTree;Object.keys(e).forEach((function(r){t.$store.dispatch("updateUsersStatusByServer",{server:e[r],users:Object.keys(e[r].users)})}))}if(this.$store.getters.searchModeOn){var r=this.$store.getters.getSearchResult;Object.keys(r).forEach((function(e){t.$store.dispatch("updateSearchUsersStatusByServer",{server:r[e],users:Object.keys(r[e].items)})}))}}},computed:{currentList:function(){return this.$store.getters.searchModeOn?this.directorySearchList:this.directoryTreeList},directoryTreeList:function(){var t=this,e=this.$store.getters.getDirectoryTree,r=[];Object.keys(e).forEach((function(s){var i=e[s];if(r.push(i),i.isActive){var a=i.items;i.itemKeys.forEach((function(e,s){var o=a[e];if(r.push(o),t.$set(o,"isEmpty",!1),o.isActive){t.$set(o,"isEmpty",!0);var n=o.items;o.itemKeys.forEach((function(e){var s=n[e];(!t.$store.getters.getOnlineFilter||"offline"!==s.status&&"unknown"!==s.status)&&(t.me&&s.id===t.me.uid||(r.push(s),t.$set(s,"isLastItem",!1),t.$set(o,"isEmpty",!1)))})),-1!==o.next_page_id&&r.push({id:"".concat(o.id,"-load-more"),type:"user",mode:"load-more",owner:o,display_name:"LOAD MORE",isLastItem:!0}),o.isEmpty||t.$set(r[r.length-1],"isLastItem",!0)}s===i.itemKeys.length-1&&-1===i.next_page_id&&t.$set(o,"isLastItem",!0)})),-1!==i.next_page_id&&r.push({id:"".concat(i.id,"-load-more"),type:"group",mode:"load-more",owner:i,isLastItem:!0})}}));var s=this.$refs.directoryList;return s&&s.forceRender(),r},directorySearchList:function(){var t=this,e=this.$store.getters.getSearchResult,r=[];Object.keys(e).forEach((function(s){var i=e[s];if(r.push(i),t.$set(i,"isEmpty",!1),i.isActive){t.$set(i,"isEmpty",!0);var a=i.items;i.itemKeys.forEach((function(e){var s=a[e];(!t.$store.getters.getOnlineFilter||"offline"!==s.status&&"unknown"!==s.status)&&(t.me&&s.id===t.me.uid||(r.push(s),t.$set(s,"isLastItem",!1),t.$set(i,"isEmpty",!1)))})),i.next_page_id&&-1!==i.next_page_id&&r.push({id:"".concat(i.id,"-refine-search"),type:"user",owner:i,mode:"refine-search",isLastItem:!0}),i.isEmpty||t.$set(r[r.length-1],"isLastItem",!0)}}));var s=this.$refs.directorySearch;return s&&s.forceRender(),r}},data:function(){return{countOfItems:1,updateStatusTimer:null,updateCountIfItemsTimeout:null}}},D={name:"DirectoryRoutesContainer",components:{UserCard:l,Search:_,Settings:p,List:(0,c.A)(U,y,[],!1,null,null,null).exports},created:function(){var t=new URLSearchParams(window.location.search);t.get("q")&&this.$store.commit("setSearchValue",decodeURIComponent(t.get("q")))},computed:{},data:function(){return{}}},F=(0,c.A)(D,s,[],!1,null,null,null).exports}}]);