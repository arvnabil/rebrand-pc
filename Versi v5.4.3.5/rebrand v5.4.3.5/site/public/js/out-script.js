/* jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(d,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=d.document?c(d,!0):function(b){if(!b.document){throw new Error("jQuery requires a window with a document")}return c(b)}:c(d)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++){if(null!=(e=arguments[h])){for(d in e){a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c))}}}return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return !m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a)){return !1}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}if(k.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++){if(d=b.apply(a[e],c),d===!1){break}}}else{for(e in a){if(d=b.apply(a[e],c),d===!1){break}}}}else{if(g){for(;f>e;e++){if(d=b.call(a[e],e,a[e]),d===!1){break}}}else{for(e in a){if(d=b.call(a[e],e,a[e]),d===!1){break}}}}return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d){a[e++]=b[d++]}if(c!==c){while(void 0!==b[d]){a[e++]=b[d++]}}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h){for(;g>f;f++){d=b(a[f],f,c),null!=d&&i.push(d)}}else{for(f in a){d=b(a[f],f,c),null!=d&&i.push(d)}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return +new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++){if(this[b]===a){return b}}return -1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a){return d}if(1!==(k=b.nodeType)&&9!==k){return[]}if(p&&!e){if(f=_.exec(a)){if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode){return d}if(h.id===j){return d.push(h),d}}else{if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j){return d.push(h),d}}}else{if(f[2]){return I.apply(d,b.getElementsByTagName(a)),d}if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName){return I.apply(d,b.getElementsByClassName(j)),d}}}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--){o[l]=s+qb(o[l])}w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x){try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--){d.attrHandle[c[e]]=b}}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return -1}}}return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++]){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return !0}}}return !1},B=b?function(a,b){if(a===b){return l=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b){return l=!0,0}var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g){return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0}if(f===g){return kb(a,b)}c=a;while(c=c.parentNode){h.unshift(c)}c=b;while(c=c.parentNode){i.unshift(c)}while(h[d]===i[d]){d++}return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b))){try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++]){b===a[f]&&(e=d.push(f))}while(e--){a.splice(d[e],1)}}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{while(b=a[d++]){c+=e(b)}}return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:1===l.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}}else{if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b)){break}}}}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;){a.push(d)}return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=lb(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=mb(b)}function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k){return b?0:k.slice(0)}h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter){!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d]){if(1===b.nodeType||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d]){if((1===b.nodeType||e)&&a(b,c,g)){return !0}}}else{while(b=b[d]){if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f){return j[2]=h[2]}if(i[d]=j,j[2]=a(b,c,g)){return !0}}}}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++){fb(a,b[d],c)}return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++){(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h))}return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){j=[],k=r.length;while(k--){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}k=r.length;while(k--){(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)}})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return !g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++){if(c=d.relative[a[i].type]){m=[rb(sb(m),c)]}else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++){if(d.relative[a[e].type]){break}}return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||0.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++]){if(o(l,g,h)){i.push(l);break}}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++]){o(r,s,g,h)}if(f){if(p>0){while(q--){r[q]||s[q]||(s[q]=G.call(i))}}s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--){f=wb(b[c]),f[u]?d.push(f):e.push(f)}f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b){return e}n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type]){break}if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a){return I.apply(e,f),e}break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b)){return m.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return m.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(v.test(b)){return m.filter(b,a,c)}b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a){return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++){if(m.contains(d[b],this)){return !0}}}))}for(b=0;e>b;b++){m.find(a,d[b],c)}return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return !!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||x).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b)){for(c in b){m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2]){return x.find(a)}this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c))){1===e.nodeType&&d.push(e),e=e[b]}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++){if(m.contains(this,c[b])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++){if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1){h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return !h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return !i},fireWith:function(a,c){return !h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return !!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1){for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++){c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f}}return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body){return setTimeout(m.ready)}m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H){if(H=m.Deferred(),"complete"===y.readyState){setTimeout(m.ready)}else{if(y.addEventListener){y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1)}else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}}}return H.promise(b)};var K="undefined",L;for(L in m(k)){break}k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else{c=void 0}}return c}function P(a){var b;for(b in a){if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b){return !1}}return !0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b){return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--){delete d[b[e]]}if(c?!P(d):!m.isEmptyObject(d)){return}}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--){g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])))}m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--){c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c){m.access(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b)){for(;i>h;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in {submit:!0,change:!0,focusin:!0}){c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1)}d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return !0}function bb(){return !1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--){f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--){if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--){g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g))}i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else{for(o in k){m.event.remove(a,o+b[j],c,d,!0)}}}m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),l=h}l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped()){b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault())}if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped()){(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type)){for(;i!=this;i=i.parentNode||this){if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++){d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d)}e.length&&g.push({elem:i,handlers:e})}}}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--){c=d[b],a[c]=f[c]}return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus){try{return this.focus(),!1}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void (this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1){d=bb}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f){for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++){!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b))}}return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++){m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;e>d;d++){m.event.add(b,c,h[c][d])}}}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events){m.removeEvent(b,d,e.handle)}b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a))){for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g){d[g]&&Bb(e,d[g])}}if(b){if(c){for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++){Ab(e,d[g])}}else{Ab(a,f)}}return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++){if(f=a[q],f||0===f){if("object"===m.type(f)){m.merge(p,f.nodeType?[f]:f)}else{if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--){h=h.lastChild}if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--){m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild){h.removeChild(h.firstChild)}h=o.lastChild}else{p.push(b.createTextNode(f))}}}}h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++]){if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++]){ob.test(f.type||"")&&c.push(f)}}}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++){if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events){for(e in g.events){n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle)}}j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild){a.removeChild(a.firstChild)}a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a){return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0}if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p)){return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)})}if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++){d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j)}if(f){for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++){d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")))}}i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++){c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get())}return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a){return a}a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c){return c?void delete this.get:(this.get=b).apply(this,arguments)}}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--){if(b=Tb[e]+c,b in a){return b}}return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++){d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))))}for(g=0;h>g;g++){d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"))}return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2){"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)))}return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e)){return e}d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c){return g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]}if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set" in g&&void 0===(c=g.set(a,c,d))))){try{i[b]=c}catch(j){}}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get" in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+T[d]+b]=f[d]||f[d-2]||f[0]}return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++){f[b[g]]=m.css(a,b[g],!1,d)}return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,m.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b){c=T[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++){if(d=e[f].call(c,b,a)){return d}}}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d]){continue}q=!0}o[d]=r&&r[d]||m.style(a,d)}else{j=void 0}}if(m.isEmptyObject(o)){"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j)}else{r?"hidden" in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o){m.style(a,b,o[b])}});for(d in o){g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}}function jc(a,b){var c,d,e,f,g;for(c in a){if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;d>c;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++){if(d=dc[f].call(j,a,k,j.opts)){return d}}return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)}},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&cc.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++){a=b[c],a()||b[c]!==a||b.splice(c--,1)}b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++){if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f){return b}g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--){if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0){try{d.selected=c=!0}catch(h){d.scrollHeight}}else{d.selected=!1}}return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType){while(c=f[e++]){d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)}}},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void (a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a)){return this.each(function(b){m(this).addClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(E)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++]){d.indexOf(" "+e+" ")<0&&(d+=e+" ")}g=m.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a)){return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(E)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++]){while(d.indexOf(" "+e+" ")>=0){d=d.replace(" "+e+" "," ")}}g=a?m.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++]){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")}})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++){if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0){return !0}}return !1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b){return null}try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c)){while(d=f[e++]){"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b){void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d])}return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0]){i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"))}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0] in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f)){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>t){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t){return v}h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t)){return v.abort()}u="abort";for(d in {success:1,error:1,complete:1}){v[d](k[d])}if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t)){throw w}x(-1,w)}}else{x(-1,"No Transport")}function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a)){return this.each(function(b){m(this).wrapAll(a.call(this,b))})}if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return !m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b)){m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==m.type(b)){d(a,b)}else{for(e in b){Vc(a+"["+e+"]",b[e],c,d)}}}}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a)){m.each(a,function(){e(this.name,this.value)})}else{for(c in a){Vc(c,a[c],b,e)}}return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc){Xc[a](void 0,!0)}}),k.cors=!!Yc&&"withCredentials" in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){void 0!==c[e]&&f.setRequestHeader(e,c[e]+"")}f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState)){if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e){4!==f.readyState&&f.abort()}else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd){return bd.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using" in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f){return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position")){a=a.offsetParent}return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void (f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});
/* jQuery UI - v1.9.2 - 2013-10-13
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(g,d){function c(e,a){var j,m,k,l=e.nodeName.toLowerCase();return"area"===l?(j=e.parentNode,m=j.name,e.href&&m&&"map"===j.nodeName.toLowerCase()?(k=g("img[usemap=#"+m+"]")[0],!!k&&b(k)):!1):(/input|select|textarea|button|object/.test(l)?!e.disabled:"a"===l?e.href||a:a)&&b(e)}function b(a){return g.expr.filters.visible(a)&&!g(a).parents().andSelf().filter(function(){return"hidden"===g.css(this,"visibility")}).length}var f=0,h=/^ui-id-\d+$/;g.ui=g.ui||{},g.ui.version||(g.extend(g.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),g.fn.extend({_focus:g.fn.focus,focus:function(e,a){return"number"==typeof e?this.each(function(){var j=this;setTimeout(function(){g(j).focus(),a&&a.call(j)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return a=g.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(g.css(this,"position"))&&/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?g(document):a},zIndex:function(j){if(j!==d){return this.css("zIndex",j)}if(this.length){for(var e,k,l=g(this[0]);l.length&&l[0]!==document;){if(e=l.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(k=parseInt(l.css("zIndex"),10),!isNaN(k)&&0!==k)){return k}l=l.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){h.test(this.id)&&g(this).removeAttr("id")})}}),g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(a){return function(e){return !!g.data(e,a)}}):function(k,j,e){return !!g.data(k,e[3])},focusable:function(a){return c(a,!isNaN(g.attr(a,"tabindex")))},tabbable:function(j){var e=g.attr(j,"tabindex"),k=isNaN(e);return(k||e>=0)&&c(j,!k)}}),g(function(){var e=document.body,a=e.appendChild(a=document.createElement("div"));a.offsetHeight,g.extend(a.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),g.support.minHeight=100===a.offsetHeight,g.support.selectstart="onselectstart" in a,e.removeChild(a).style.display="none"}),g("<a>").outerWidth(1).jquery||g.each(["Width","Height"],function(j,e){function k(q,o,n,r){return g.each(p,function(){o-=parseFloat(g.css(q,"padding"+this))||0,n&&(o-=parseFloat(g.css(q,"border"+this+"Width"))||0),r&&(o-=parseFloat(g.css(q,"margin"+this))||0)}),o}var p="Width"===e?["Left","Right"]:["Top","Bottom"],l=e.toLowerCase(),m={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};g.fn["inner"+e]=function(a){return a===d?m["inner"+e].call(this):this.each(function(){g(this).css(l,k(this,a)+"px")})},g.fn["outer"+e]=function(n,a){return"number"!=typeof n?m["outer"+e].call(this,n):this.each(function(){g(this).css(l,k(this,n,!0,a)+"px")})}}),g("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(g.fn.removeData=function(a){return function(e){return arguments.length?a.call(this,g.camelCase(e)):a.call(this)}}(g.fn.removeData)),function(){var a=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];g.ui.ie=a.length?!0:!1,g.ui.ie6=6===parseFloat(a[1],10)}(),g.fn.extend({disableSelection:function(){return this.bind((g.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),g.extend(g.ui,{plugin:{add:function(k,j,e){var l,m=g.ui[k].prototype;for(l in e){m.plugins[l]=m.plugins[l]||[],m.plugins[l].push([j,e[l]])}},call:function(n,l,k){var j,m=n.plugins[l];if(m&&n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType){for(j=0;m.length>j;j++){n.options[m[j][0]]&&m[j][1].apply(n.element,k)}}}},contains:g.contains,hasScroll:function(k,j){if("hidden"===g(k).css("overflow")){return !1}var e=j&&"left"===j?"scrollLeft":"scrollTop",l=!1;return k[e]>0?!0:(k[e]=1,l=k[e]>0,k[e]=0,l)},isOverAxis:function(k,j,a){return k>j&&j+a>k},isOver:function(k,j,e,l,o,m){return g.ui.isOverAxis(k,e,o)&&g.ui.isOverAxis(j,l,m)}}))})(jQuery);(function(g,d){var c=0,f=Array.prototype.slice,b=g.cleanData;g.cleanData=function(e){for(var a,h=0;null!=(a=e[h]);h++){try{g(a).triggerHandler("remove")}catch(j){}}b(e)},g.widget=function(k,p,j){var w,q,u,m,e=k.split(".")[0];k=k.split(".")[1],w=e+"-"+k,j||(j=p,p=g.Widget),g.expr[":"][w.toLowerCase()]=function(a){return !!g.data(a,w)},g[e]=g[e]||{},q=g[e][k],u=g[e][k]=function(h,a){return this._createWidget?(arguments.length&&this._createWidget(h,a),d):new u(h,a)},g.extend(u,q,{version:j.version,_proto:g.extend({},j),_childConstructors:[]}),m=new p,m.options=g.widget.extend({},m.options),g.each(j,function(h,a){g.isFunction(a)&&(j[h]=function(){var n=function(){return p.prototype[h].apply(this,arguments)},l=function(o){return p.prototype[h].apply(this,o)};return function(){var o,r=this._super,x=this._superApply;return this._super=n,this._superApply=l,o=a.apply(this,arguments),this._super=r,this._superApply=x,o}}())}),u.prototype=g.widget.extend(m,{widgetEventPrefix:q?m.widgetEventPrefix:k},j,{constructor:u,namespace:e,widgetName:k,widgetBaseClass:w,widgetFullName:w}),q?(g.each(q._childConstructors,function(h,a){var l=a.prototype;g.widget(l.namespace+"."+l.widgetName,u,a._proto)}),delete q._childConstructors):p._childConstructors.push(u),g.widget.bridge(k,u)},g.widget.extend=function(j){for(var e,p,l=f.call(arguments,1),m=0,k=l.length;k>m;m++){for(e in l[m]){p=l[m][e],l[m].hasOwnProperty(e)&&p!==d&&(j[e]=g.isPlainObject(p)?g.isPlainObject(j[e])?g.widget.extend({},j[e],p):g.widget.extend({},p):p)}}return j},g.widget.bridge=function(h,e){var j=e.prototype.widgetFullName||h;g.fn[h]=function(m){var n="string"==typeof m,k=f.call(arguments,1),a=this;return m=!n&&k.length?g.widget.extend.apply(null,[m].concat(k)):m,n?this.each(function(){var o,l=g.data(this,j);return l?g.isFunction(l[m])&&"_"!==m.charAt(0)?(o=l[m].apply(l,k),o!==l&&o!==d?(a=o&&o.jquery?a.pushStack(o.get()):o,!1):d):g.error("no such method '"+m+"' for "+h+" widget instance"):g.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+m+"'")}):this.each(function(){var l=g.data(this,j);l?l.option(m||{})._init():g.data(this,j,new e(m,this))}),a}},g.Widget=function(){},g.Widget._childConstructors=[],g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,e){e=g(e||this.defaultElement||this)[0],this.element=g(e),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=g.widget.extend({},this.options,this._getCreateOptions(),a),this.bindings=g(),this.hoverable=g(),this.focusable=g(),e!==this&&(g.data(e,this.widgetName,this),g.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(h){h.target===e&&this.destroy()}}),this.document=g(e.style?e.ownerDocument:e.document||e),this.window=g(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:g.noop,_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(g.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:g.noop,widget:function(){return this.element},option:function(h,j){var e,m,k,l=h;if(0===arguments.length){return g.widget.extend({},this.options)}if("string"==typeof h){if(l={},e=h.split("."),h=e.shift(),e.length){for(m=l[h]=g.widget.extend({},this.options[h]),k=0;e.length-1>k;k++){m[e[k]]=m[e[k]]||{},m=m[e[k]]}if(h=e.pop(),j===d){return m[h]===d?null:m[h]}m[h]=j}else{if(j===d){return this.options[h]===d?null:this.options[h]}l[h]=j}}return this._setOptions(l),this},_setOptions:function(h){var a;for(a in h){this._setOption(a,h[a])}return this},_setOption:function(h,a){return this.options[h]=a,"disabled"===h&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!a).attr("aria-disabled",a),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(h,j,e){var l,k=this;"boolean"!=typeof h&&(e=j,j=h,h=!1),e?(j=l=g(j),this.bindings=this.bindings.add(j)):(e=j,j=this.element,l=this.widget()),g.each(e,function(n,r){function q(){return h||k.options.disabled!==!0&&!g(this).hasClass("ui-state-disabled")?("string"==typeof r?k[r]:r).apply(k,arguments):d}"string"!=typeof r&&(q.guid=r.guid=r.guid||q.guid||g.guid++);var m=n.match(/^(\w+)\s*(.*)$/),s=m[1]+k.eventNamespace,p=m[2];p?l.delegate(p,s,q):j.bind(s,q)})},_off:function(h,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,h.unbind(a).undelegate(a)},_delay:function(k,h){function a(){return("string"==typeof k?j[k]:k).apply(j,arguments)}var j=this;return setTimeout(a,h||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a),this._on(a,{mouseenter:function(e){g(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){g(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a),this._on(a,{focusin:function(e){g(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){g(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(j,h,k){var e,m,l=this.options[j];if(k=k||{},h=g.Event(h),h.type=(j===this.widgetEventPrefix?j:this.widgetEventPrefix+j).toLowerCase(),h.target=this.element[0],m=h.originalEvent){for(e in m){e in h||(h[e]=m[e])}}return this.element.trigger(h,k),!(g.isFunction(l)&&l.apply(this.element[0],[h].concat(k))===!1||h.isDefaultPrevented())}},g.each({show:"fadeIn",hide:"fadeOut"},function(e,a){g.Widget.prototype["_"+e]=function(j,h,m){"string"==typeof h&&(h={effect:h});var k,l=h?h===!0||"number"==typeof h?a:h.effect||a:e;h=h||{},"number"==typeof h&&(h={duration:h}),k=!g.isEmptyObject(h),h.complete=m,h.delay&&j.delay(h.delay),k&&g.effects&&(g.effects.effect[l]||g.uiBackCompat!==!1&&g.effects[l])?j[e](h):l!==e&&j[l]?j[l](h.duration,h.easing,m):j.queue(function(n){g(this)[e](),m&&m.call(j[0]),n()})}}),g.uiBackCompat!==!1&&(g.Widget.prototype._getCreateOptions=function(){return g.metadata&&g.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(b){var a=!1;b(document).mouseup(function(){a=!1}),b.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(d){return c._mouseDown(d)}).bind("click."+this.widgetName,function(d){return !0===b.data(d.target,c.widgetName+".preventClickEvent")?(b.removeData(d.target,c.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!a){this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var c=this,e=1===d.which,f="string"==typeof this.options.cancel&&d.target.nodeName?b(d.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(d)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(!0===b.data(d.target,this.widgetName+".preventClickEvent")&&b.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(g){return c._mouseMove(g)},this._mouseUpDelegate=function(g){return c._mouseUp(g)},b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),a=!0,!0)):!0}},_mouseMove:function(c){return !b.ui.ie||document.documentMode>=9||c.button?this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1,this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted):this._mouseUp(c)},_mouseUp:function(c){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}})})(jQuery);(function(w,B){function m(d,c,a){return[parseInt(d[0],10)*(x.test(d[0])?c/100:1),parseInt(d[1],10)*(x.test(d[1])?a/100:1)]}function z(c,a){return parseInt(w.css(c,a),10)||0}w.ui=w.ui||{};var C,j=Math.max,b=Math.abs,g=Math.round,q=/left|center|right/,k=/top|center|bottom/,A=/[\+\-]\d+%?/,y=/^\w+/,x=/%$/,f=w.fn.position;w.position={scrollbarWidth:function(){if(C!==B){return C}var d,c,h=w("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),e=h.children()[0];return w("body").append(h),d=e.offsetWidth,h.css("overflow","scroll"),c=e.offsetWidth,d===c&&(c=h[0].clientWidth),h.remove(),C=d-c},getScrollInfo:function(e){var d=e.isWindow?"":e.element.css("overflow-x"),c=e.isWindow?"":e.element.css("overflow-y"),h="scroll"===d||"auto"===d&&e.width<e.element[0].scrollWidth,l="scroll"===c||"auto"===c&&e.height<e.element[0].scrollHeight;return{width:h?w.position.scrollbarWidth():0,height:l?w.position.scrollbarWidth():0}},getWithinInfo:function(e){var d=w(e||window),c=w.isWindow(d[0]);return{element:d,isWindow:c,offset:d.offset()||{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:c?d.width():d.outerWidth(),height:c?d.height():d.outerHeight()}}},w.fn.position=function(D){if(!D||!D.of){return f.apply(this,arguments)}D=w.extend({},D);var E,l,h,a,e,u=w(D.of),o=w.position.getWithinInfo(D.within),n=w.position.getScrollInfo(o),r=u[0],p=(D.collision||"flip").split(" "),c={};return 9===r.nodeType?(l=u.width(),h=u.height(),a={top:0,left:0}):w.isWindow(r)?(l=u.width(),h=u.height(),a={top:u.scrollTop(),left:u.scrollLeft()}):r.preventDefault?(D.at="left top",l=h=0,a={top:r.pageY,left:r.pageX}):(l=u.outerWidth(),h=u.outerHeight(),a=u.offset()),e=w.extend({},a),w.each(["my","at"],function(){var F,s,d=(D[this]||"").split(" ");1===d.length&&(d=q.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=q.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",F=A.exec(d[0]),s=A.exec(d[1]),c[this]=[F?F[0]:0,s?s[0]:0],D[this]=[y.exec(d[0])[0],y.exec(d[1])[0]]}),1===p.length&&(p[1]=p[0]),"right"===D.at[0]?e.left+=l:"center"===D.at[0]&&(e.left+=l/2),"bottom"===D.at[1]?e.top+=h:"center"===D.at[1]&&(e.top+=h/2),E=m(c.at,l,h),e.left+=E[0],e.top+=E[1],this.each(function(){var I,F,O=w(this),K=O.outerWidth(),s=O.outerHeight(),N=z(this,"marginLeft"),L=z(this,"marginTop"),d=K+N+z(this,"marginRight")+n.width,G=s+L+z(this,"marginBottom")+n.height,J=w.extend({},e),H=m(c.my,O.outerWidth(),O.outerHeight());"right"===D.my[0]?J.left-=K:"center"===D.my[0]&&(J.left-=K/2),"bottom"===D.my[1]?J.top-=s:"center"===D.my[1]&&(J.top-=s/2),J.left+=H[0],J.top+=H[1],w.support.offsetFractions||(J.left=g(J.left),J.top=g(J.top)),I={marginLeft:N,marginTop:L},w.each(["left","top"],function(P,M){w.ui.position[p[P]]&&w.ui.position[p[P]][M](J,{targetWidth:l,targetHeight:h,elemWidth:K,elemHeight:s,collisionPosition:I,collisionWidth:d,collisionHeight:G,offset:[E[0]+H[0],E[1]+H[1]],my:D.my,at:D.at,within:o,elem:O})}),w.fn.bgiframe&&O.bgiframe(),D.using&&(F=function(S){var P=a.left-J.left,M=P+l-K,R=a.top-J.top,T=R+h-s,Q={target:{element:u,left:a.left,top:a.top,width:l,height:h},element:{element:O,left:J.left,top:J.top,width:K,height:s},horizontal:0>M?"left":P>0?"right":"center",vertical:0>T?"top":R>0?"bottom":"middle"};K>l&&l>b(P+M)&&(Q.horizontal="center"),s>h&&h>b(R+T)&&(Q.vertical="middle"),Q.important=j(b(P),b(M))>j(b(R),b(T))?"horizontal":"vertical",D.using.call(this,S,Q)}),O.offset(w.extend(J,{using:F}))})},w.ui.position={fit:{left:function(D,F){var p,E=F.within,G=E.isWindow?E.scrollLeft:E.offset.left,c=E.width,d=D.left-F.collisionPosition.marginLeft,u=G-d,n=d+F.collisionWidth-c-G;F.collisionWidth>c?u>0&&0>=n?(p=D.left+u+F.collisionWidth-c-G,D.left+=u-p):D.left=n>0&&0>=u?G:u>n?G+c-F.collisionWidth:G:u>0?D.left+=u:n>0?D.left-=n:D.left=j(D.left-d,D.left)},top:function(D,F){var p,E=F.within,G=E.isWindow?E.scrollTop:E.offset.top,c=F.within.height,d=D.top-F.collisionPosition.marginTop,u=G-d,n=d+F.collisionHeight-c-G;F.collisionHeight>c?u>0&&0>=n?(p=D.top+u+F.collisionHeight-c-G,D.top+=u-p):D.top=n>0&&0>=u?G:u>n?G+c-F.collisionHeight:G:u>0?D.top+=u:n>0?D.top-=n:D.top=j(D.top-d,D.top)}},flip:{left:function(J,O){var G,M,P=O.within,E=P.offset.left+P.scrollLeft,D=P.width,H=P.isWindow?P.scrollLeft:P.offset.left,F=J.left-O.collisionPosition.marginLeft,N=F-H,L=F+O.collisionWidth-D-H,K="left"===O.my[0]?-O.elemWidth:"right"===O.my[0]?O.elemWidth:0,r="left"===O.at[0]?O.targetWidth:"right"===O.at[0]?-O.targetWidth:0,I=-2*O.offset[0];0>N?(G=J.left+K+r+I+O.collisionWidth-D-E,(0>G||b(N)>G)&&(J.left+=K+r+I)):L>0&&(M=J.left-O.collisionPosition.marginLeft+K+r+I-H,(M>0||L>b(M))&&(J.left+=K+r+I))},top:function(K,P){var H,N,Q=P.within,E=Q.offset.top+Q.scrollTop,D=Q.height,I=Q.isWindow?Q.scrollTop:Q.offset.top,G=K.top-P.collisionPosition.marginTop,O=G-I,M=G+P.collisionHeight-D-I,L="top"===P.my[1],r=L?-P.elemHeight:"bottom"===P.my[1]?P.elemHeight:0,J="top"===P.at[1]?P.targetHeight:"bottom"===P.at[1]?-P.targetHeight:0,F=-2*P.offset[1];0>O?(N=K.top+r+J+F+P.collisionHeight-D-E,K.top+r+J+F>O&&(0>N||b(O)>N)&&(K.top+=r+J+F)):M>0&&(H=K.top-P.collisionPosition.marginTop+r+J+F-I,K.top+r+J+F>M&&(H>0||M>b(H))&&(K.top+=r+J+F))}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}},function(){var e,d,c,h,u,l=document.getElementsByTagName("body")[0],p=document.createElement("div");e=document.createElement(l?"div":"body"),c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&w.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(u in c){e.style[u]=c[u]}e.appendChild(p),d=l||document.documentElement,d.insertBefore(e,d.firstChild),p.style.cssText="position: absolute; left: 10.7432222px;",h=w(p).offset().left,w.support.offsetFractions=h>10&&11>h,e.innerHTML="",d.removeChild(e)}(),w.uiBackCompat!==!1&&function(c){var a=c.fn.position;c.fn.position=function(d){if(!d||!d.offset){return a.call(this,d)}var e=d.offset.split(" "),h=d.at.split(" ");return 1===e.length&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),1===h.length&&(/left|center|right/.test(h[0])?h[1]="center":(h[1]=h[0],h[0]="center")),a.call(this,c.extend(d,{at:h[0]+e[0]+" "+h[1]+e[1],offset:B}))}}(jQuery)})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(c){var b=this.options;return this.helper||b.disabled||a(c.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(c),this.handle?(a(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(c){var b=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),b.containment&&this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(d,c){if(this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),!c){var b=this._uiHash();if(this._trigger("drag",d,b)===!1){return this._mouseUp({}),!1}this.position=b.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,d)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var b=this.element[0],e=!1;b&&(b=b.parentNode);){b==document&&(e=!0)}if(!e&&"original"===this.options.helper){return !1}if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",d)!==!1&&f._clear()})}else{this._trigger("stop",d)!==!1&&this._clear()}return !1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(c){var b=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==c.target&&(b=!0)}),b},_createHelper:function(d){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),b[0]==this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left" in b&&(this.offset.click.left=b.left+this.margins.left),"right" in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top" in b&&(this.offset.click.top=b.top+this.margins.top),"bottom" in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if("parent"==d.containment&&(d.containment=this.helper[0].parentNode),("document"==d.containment||"window"==d.containment)&&(this.containment=["document"==d.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==d.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==d.containment?0:a(window).scrollLeft())+a("document"==d.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==d.containment?0:a(window).scrollTop())+(a("document"==d.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(d.containment)||d.containment.constructor==Array){d.containment.constructor==Array&&(this.containment=d.containment)}else{var c=a(d.containment),b=c[0];if(!b){return}c.offset();var e="hidden"!=a(b).css("overflow");this.containment=[(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0),(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0),(e?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(d,c){c||(c=this.position);var b="absolute"==d?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*b,left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*b}},_generatePosition:function(m){var f=this.options,j="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,p=/(html|body)/i.test(j[0].tagName),d=m.pageX,b=m.pageY;if(this.originalPosition){var c;if(this.containment){if(this.relative_container){var g=this.relative_container.offset();c=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else{c=this.containment}m.pageX-this.offset.click.left<c[0]&&(d=c[0]+this.offset.click.left),m.pageY-this.offset.click.top<c[1]&&(b=c[1]+this.offset.click.top),m.pageX-this.offset.click.left>c[2]&&(d=c[2]+this.offset.click.left),m.pageY-this.offset.click.top>c[3]&&(b=c[3]+this.offset.click.top)}if(f.grid){var e=f.grid[1]?this.originalPageY+Math.round((b-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY;b=c?e-this.offset.click.top<c[1]||e-this.offset.click.top>c[3]?e-this.offset.click.top<c[1]?e+f.grid[1]:e-f.grid[1]:e:e;var k=f.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX;d=c?k-this.offset.click.left<c[0]||k-this.offset.click.left>c[2]?k-this.offset.click.left<c[0]?k+f.grid[0]:k-f.grid[0]:k:k}}return{top:b-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():p?0:j.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():p?0:j.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(d,c,b){return b=b||this._uiHash(),a.ui.plugin.call(this,d,[c,b]),"drag"==d&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,d,c,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(d,c){var b=a(this).data("draggable"),e=b.options,f=a.extend({},c,{item:b.element});b.sortables=[],a(e.connectToSortable).each(function(){var g=a.data(this,"sortable");g&&!g.options.disabled&&(b.sortables.push({instance:g,shouldRevert:g.options.revert}),g.refreshPositions(),g._trigger("activate",d,f))})},stop:function(d,c){var b=a(this).data("draggable"),e=a.extend({},c,{item:b.element});a.each(b.sortables,function(){this.instance.isOver?(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(d),this.instance.options.helper=this.instance.options._helper,"original"==b.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",d,e))})},drag:function(d,c){var b=a(this).data("draggable"),e=this;a.each(b.sortables,function(){var g=!1,f=this;this.instance.positionAbs=b.positionAbs,this.instance.helperProportions=b.helperProportions,this.instance.offset.click=b.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(g=!0,a.each(b.sortables,function(){return this.instance.positionAbs=b.positionAbs,this.instance.helperProportions=b.helperProportions,this.instance.offset.click=b.offset.click,this!=f&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(f.instance.element[0],this.instance.element[0])&&(g=!1),g})),g?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},d.target=this.instance.currentItem[0],this.instance._mouseCapture(d,!0),this.instance._mouseStart(d,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",d),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(d)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",d,this.instance._uiHash(this.instance)),this.instance._mouseStop(d,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",d),b.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var c=a("body"),b=a(this).data("draggable").options;c.css("cursor")&&(b._cursor=c.css("cursor")),c.css("cursor",b.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(d,c){var b=a(c.helper),e=a(this).data("draggable").options;b.css("opacity")&&(e._opacity=b.css("opacity")),b.css("opacity",e.opacity)},stop:function(d,c){var b=a(this).data("draggable").options;b._opacity&&a(c.helper).css("opacity",b._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(d){var c=a(this).data("draggable"),b=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(b.axis&&"x"==b.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<b.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+b.scrollSpeed:d.pageY-c.overflowOffset.top<b.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-b.scrollSpeed)),b.axis&&"y"==b.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<b.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+b.scrollSpeed:d.pageX-c.overflowOffset.left<b.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-b.scrollSpeed))):(b.axis&&"x"==b.axis||(d.pageY-a(document).scrollTop()<b.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed):a(window).height()-(d.pageY-a(document).scrollTop())<b.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed))),b.axis&&"y"==b.axis||(d.pageX-a(document).scrollLeft()<b.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed):a(window).width()-(d.pageX-a(document).scrollLeft())<b.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,d)}}),a.ui.plugin.add("draggable","snap",{start:function(){var c=a(this).data("draggable"),b=c.options;c.snapElements=[],a(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var e=a(this),d=e.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:d.top,left:d.left})})},drag:function(q,E){for(var L=a(this).data("draggable"),w=L.options,B=w.snapTolerance,x=E.offset.left,A=x+L.helperProportions.width,F=E.offset.top,D=F+L.helperProportions.height,k=L.snapElements.length-1;k>=0;k--){var I=L.snapElements[k].left,J=I+L.snapElements[k].width,z=L.snapElements[k].top,H=z+L.snapElements[k].height;if(x>I-B&&J+B>x&&F>z-B&&H+B>F||x>I-B&&J+B>x&&D>z-B&&H+B>D||A>I-B&&J+B>A&&F>z-B&&H+B>F||A>I-B&&J+B>A&&D>z-B&&H+B>D){if("inner"!=w.snapMode){var C=B>=Math.abs(z-D),G=B>=Math.abs(H-F),j=B>=Math.abs(I-A),e=B>=Math.abs(J-x);C&&(E.position.top=L._convertPositionTo("relative",{top:z-L.helperProportions.height,left:0}).top-L.margins.top),G&&(E.position.top=L._convertPositionTo("relative",{top:H,left:0}).top-L.margins.top),j&&(E.position.left=L._convertPositionTo("relative",{top:0,left:I-L.helperProportions.width}).left-L.margins.left),e&&(E.position.left=L._convertPositionTo("relative",{top:0,left:J}).left-L.margins.left)}var K=C||G||j||e;if("outer"!=w.snapMode){var C=B>=Math.abs(z-F),G=B>=Math.abs(H-D),j=B>=Math.abs(I-x),e=B>=Math.abs(J-A);C&&(E.position.top=L._convertPositionTo("relative",{top:z,left:0}).top-L.margins.top),G&&(E.position.top=L._convertPositionTo("relative",{top:H-L.helperProportions.height,left:0}).top-L.margins.top),j&&(E.position.left=L._convertPositionTo("relative",{top:0,left:I}).left-L.margins.left),e&&(E.position.left=L._convertPositionTo("relative",{top:0,left:J-L.helperProportions.width}).left-L.margins.left)}!L.snapElements[k].snapping&&(C||G||j||e||K)&&L.options.snap.snap&&L.options.snap.snap.call(L.element,q,a.extend(L._uiHash(),{snapItem:L.snapElements[k].item})),L.snapElements[k].snapping=C||G||j||e||K}else{L.snapElements[k].snapping&&L.options.snap.release&&L.options.snap.release.call(L.element,q,a.extend(L._uiHash(),{snapItem:L.snapElements[k].item})),L.snapElements[k].snapping=!1}}}}),a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options,c=a.makeArray(a(d.stack)).sort(function(f,e){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(e).css("zIndex"),10)||0)});if(c.length){var b=parseInt(c[0].style.zIndex)||0;a(c).each(function(f){this.style.zIndex=b+f}),this[0].style.zIndex=b+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(d,c){var b=a(c.helper),e=a(this).data("draggable").options;b.css("zIndex")&&(e._zIndex=b.css("zIndex")),b.css("zIndex",e.zIndex)},stop:function(d,c){var b=a(this).data("draggable").options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}})})(jQuery);(function(a){a.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var c=this.options,b=c.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(b)?b:function(d){return d.is(b)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[c.scope]=a.ui.ddmanager.droppables[c.scope]||[],a.ui.ddmanager.droppables[c.scope].push(this),c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var c=a.ui.ddmanager.droppables[this.options.scope],b=0;c.length>b;b++){c[b]==this&&c.splice(b,1)}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,b){"accept"==c&&(this.accept=a.isFunction(b)?b:function(d){return d.is(b)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(c){var b=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),b&&this._trigger("activate",c,this.ui(b))},_deactivate:function(c){var b=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),b&&this._trigger("deactivate",c,this.ui(b))},_over:function(c){var b=a.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!=this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",c,this.ui(b)))},_out:function(c){var b=a.ui.ddmanager.current;b&&(b.currentItem||b.element)[0]!=this.element[0]&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(b)))},_drop:function(d,c){var b=c||a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return !1}var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=a.data(this,"droppable");return f.options.greedy&&!f.options.disabled&&f.options.scope==b.options.scope&&f.accept.call(f.element[0],b.currentItem||b.element)&&a.ui.intersect(b,a.extend(f,{offset:f.element.offset()}),f.options.tolerance)?(e=!0,!1):undefined}),e?!1:this.accept.call(this.element[0],b.currentItem||b.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",d,this.ui(b)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),a.ui.intersect=function(B,m,z){if(!m.offset){return !1}var C=(B.positionAbs||B.position.absolute).left,j=C+B.helperProportions.width,b=(B.positionAbs||B.position.absolute).top,g=b+B.helperProportions.height,k=m.offset.left,q=k+m.proportions.width,A=m.offset.top,x=A+m.proportions.height;switch(z){case"fit":return C>=k&&q>=j&&b>=A&&x>=g;case"intersect":return C+B.helperProportions.width/2>k&&q>j-B.helperProportions.width/2&&b+B.helperProportions.height/2>A&&x>g-B.helperProportions.height/2;case"pointer":var y=(B.positionAbs||B.position.absolute).left+(B.clickOffset||B.offset.click).left,e=(B.positionAbs||B.position.absolute).top+(B.clickOffset||B.offset.click).top,w=a.ui.isOver(e,y,A,k,m.proportions.height,m.proportions.width);return w;case"touch":return(b>=A&&x>=b||g>=A&&x>=g||A>b&&g>x)&&(C>=k&&q>=C||j>=k&&q>=j||k>C&&j>q);default:return !1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,c){var b=a.ui.ddmanager.droppables[d.options.scope]||[],e=c?c.type:null,h=(d.currentItem||d.element).find(":data(droppable)").andSelf();a:for(var f=0;b.length>f;f++){if(!(b[f].options.disabled||d&&!b[f].accept.call(b[f].element[0],d.currentItem||d.element))){for(var g=0;h.length>g;g++){if(h[g]==b[f].element[0]){b[f].proportions.height=0;continue a}}b[f].visible="none"!=b[f].element.css("display"),b[f].visible&&("mousedown"==e&&b[f]._activate.call(b[f],c),b[f].offset=b[f].element.offset(),b[f].proportions={width:b[f].element[0].offsetWidth,height:b[f].element[0].offsetHeight})}}},drop:function(d,c){var b=!1;return a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(d,this,this.options.tolerance)&&(b=this._drop.call(this,c)||b),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),b},dragStart:function(c,b){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||a.ui.ddmanager.prepareOffsets(c,b)})},drag:function(c,b){c.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(c,b),a.each(a.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(c,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var h;if(this.options.greedy){var f=this.options.scope,g=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===f});g.length&&(h=a.data(g[0],"droppable"),h.greedyChild="isover"==e?1:0)}h&&"isover"==e&&(h.isover=0,h.isout=1,h._out.call(h,b)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,b),h&&"isout"==e&&(h.isout=0,h.isover=1,h._over.call(h,b))}}})},dragStop:function(c,b){c.element.parentsUntil("body").unbind("scroll.droppable"),c.options.refreshPositions||a.ui.ddmanager.prepareOffsets(c,b)}}})(jQuery);(function(c){c.widget("ui.resizable",c.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var f=this,e=this.options;if(this.element.addClass("ui-resizable"),c.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=e.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var g=this.handles.split(",");this.handles={};for(var d=0;g.length>d;d++){var k=c.trim(g[d]),h="ui-resizable-"+k,j=c('<div class="ui-resizable-handle '+h+'"></div>');j.css({zIndex:e.zIndex}),"se"==k&&j.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[k]=".ui-resizable-"+k,this.element.append(j)}}this._renderAxis=function(o){o=o||this.element;for(var m in this.handles){if(this.handles[m].constructor==String&&(this.handles[m]=c(this.handles[m],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var p=c(this.handles[m],this.element),l=0;l=/sw|ne|nw|se|n|s/.test(m)?p.outerHeight():p.outerWidth();var q=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");o.css(q,l),this._proportionallyResize()}c(this.handles[m]).length}},this._renderAxis(this.element),this._handles=c(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!f.resizing){if(this.className){var l=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}f.axis=l&&l[1]?l[1]:"se"}}),e.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){e.disabled||(c(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){e.disabled||f.resizing||(c(this).addClass("ui-resizable-autohide"),f._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var d=this.element;this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var d=!1;for(var f in this.handles){c(this.handles[f])[0]==e.target&&(d=!0)}return !this.options.disabled&&d},_mouseStart:function(e){var g=this.options,d=this.element.position(),l=this.element;this.resizing=!0,this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()},(l.is(".ui-draggable")||/absolute/.test(l.css("position")))&&l.css({position:"absolute",top:d.top,left:d.left}),this._renderProxy();var j=b(this.helper.css("left")),k=b(this.helper.css("top"));g.containment&&(j+=c(g.containment).scrollLeft()||0,k+=c(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:j,top:k},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:j,top:k},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;var f=c(".ui-resizable-"+this.axis).css("cursor");return c("body").css("cursor","auto"==f?this.axis+"-resize":f),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(k){var g=this.helper,f=(this.options,this.originalMousePosition),h=this.axis,d=k.pageX-f.left||0,m=k.pageY-f.top||0,j=this._change[h];if(!j){return !1}var l=j.apply(this,[k,d,m]);return this._updateVirtualBoundaries(k.shiftKey),(this._aspectRatio||k.shiftKey)&&(l=this._updateRatio(l,k)),l=this._respectSize(l,k),this._propagate("resize",k),g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",k,this.ui()),!1},_mouseStop:function(q){this.resizing=!1;var j=this.options,w=this;if(this._helper){var m=this._proportionallyResizeElements,f=m.length&&/textarea/i.test(m[0].nodeName),d=f&&c.ui.hasScroll(m[0],"left")?0:w.sizeDiff.height,e=f?0:w.sizeDiff.width,k={width:w.helper.width()-e,height:w.helper.height()-d},g=parseInt(w.element.css("left"),10)+(w.position.left-w.originalPosition.left)||null,p=parseInt(w.element.css("top"),10)+(w.position.top-w.originalPosition.top)||null;j.animate||this.element.css(c.extend(k,{top:p,left:g})),w.helper.height(w.size.height),w.helper.width(w.size.width),this._helper&&!j.animate&&this._proportionallyResize()}return c("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",q),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(j){var f,g,d,l,h,k=this.options;h={minWidth:a(k.minWidth)?k.minWidth:0,maxWidth:a(k.maxWidth)?k.maxWidth:1/0,minHeight:a(k.minHeight)?k.minHeight:0,maxHeight:a(k.maxHeight)?k.maxHeight:1/0},(this._aspectRatio||j)&&(f=h.minHeight*this.aspectRatio,d=h.minWidth/this.aspectRatio,g=h.maxHeight*this.aspectRatio,l=h.maxWidth/this.aspectRatio,f>h.minWidth&&(h.minWidth=f),d>h.minHeight&&(h.minHeight=d),h.maxWidth>g&&(h.maxWidth=g),h.maxHeight>l&&(h.maxHeight=l)),this._vBoundaries=h},_updateCache:function(d){this.options,this.offset=this.helper.offset(),a(d.left)&&(this.position.left=d.left),a(d.top)&&(this.position.top=d.top),a(d.height)&&(this.size.height=d.height),a(d.width)&&(this.size.width=d.width)},_updateRatio:function(h){var f=(this.options,this.position),g=this.size,d=this.axis;return a(h.height)?h.width=h.height*this.aspectRatio:a(h.width)&&(h.height=h.width/this.aspectRatio),"sw"==d&&(h.left=f.left+(g.width-h.width),h.top=null),"nw"==d&&(h.top=f.top+(g.height-h.height),h.left=f.left+(g.width-h.width)),h},_respectSize:function(w,B){var C=(this.helper,this._vBoundaries),z=(this._aspectRatio||B.shiftKey,this.axis),k=a(w.width)&&C.maxWidth&&C.maxWidth<w.width,f=a(w.height)&&C.maxHeight&&C.maxHeight<w.height,j=a(w.width)&&C.minWidth&&C.minWidth>w.width,q=a(w.height)&&C.minHeight&&C.minHeight>w.height;j&&(w.width=C.minWidth),q&&(w.height=C.minHeight),k&&(w.width=C.maxWidth),f&&(w.height=C.maxHeight);var m=this.originalPosition.left+this.originalSize.width,A=this.position.top+this.size.height,x=/sw|nw|w/.test(z),y=/nw|ne|n/.test(z);j&&x&&(w.left=m-C.minWidth),k&&x&&(w.left=m-C.maxWidth),q&&y&&(w.top=A-C.minHeight),f&&y&&(w.top=A-C.maxHeight);var g=!w.width&&!w.height;return g&&!w.left&&w.top?w.top=null:g&&!w.top&&w.left&&(w.left=null),w},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length){for(var f=this.helper||this.element,e=0;this._proportionallyResizeElements.length>e;e++){var g=this._proportionallyResizeElements[e];if(!this.borderDif){var d=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],h=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")];this.borderDif=c.map(d,function(m,k){var j=parseInt(m,10)||0,l=parseInt(h[k],10)||0;return j+l})}g.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var f=this.element,e=this.options;if(this.elementOffset=f.offset(),this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var g=c.ui.ie6?1:0,d=c.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+d,height:this.element.outerHeight()+d,position:"absolute",left:this.elementOffset.left-g+"px",top:this.elementOffset.top-g+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,d){return{width:this.originalSize.width+d}},w:function(h,f){var d=(this.options,this.originalSize),g=this.originalPosition;return{left:g.left+f,width:d.width-f}},n:function(j,g,f){var h=(this.options,this.originalSize),d=this.originalPosition;return{top:d.top+f,height:h.height-f}},s:function(g,f,d){return{height:this.originalSize.height+d}},se:function(e,d,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,d,f]))},sw:function(e,d,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,d,f]))},ne:function(e,d,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,d,f]))},nw:function(e,d,f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,d,f]))}},_propagate:function(e,d){c.ui.plugin.call(this,e,[d,this.ui()]),"resize"!=e&&this._trigger(e,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),c.ui.plugin.add("resizable","alsoResize",{start:function(){var e=c(this).data("resizable"),d=e.options,f=function(g){c(g).each(function(){var h=c(this);h.data("resizable-alsoresize",{width:parseInt(h.width(),10),height:parseInt(h.height(),10),left:parseInt(h.css("left"),10),top:parseInt(h.css("top"),10)})})};"object"!=typeof d.alsoResize||d.alsoResize.parentNode?f(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],f(d.alsoResize)):c.each(d.alsoResize,function(g){f(g)})},resize:function(f,e){var j=c(this).data("resizable"),d=j.options,m=j.originalSize,k=j.originalPosition,l={height:j.size.height-m.height||0,width:j.size.width-m.width||0,top:j.position.top-k.top||0,left:j.position.left-k.left||0},g=function(h,n){c(h).each(function(){var p=c(this),o=c(this).data("resizable-alsoresize"),s={},q=n&&n.length?n:p.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(q,function(w,u){var r=(o[u]||0)+(l[u]||0);r&&r>=0&&(s[u]=r||null)}),p.css(s)})};"object"!=typeof d.alsoResize||d.alsoResize.nodeType?g(d.alsoResize):c.each(d.alsoResize,function(n,h){g(n,h)})},stop:function(){c(this).removeData("resizable-alsoresize")}}),c.ui.plugin.add("resizable","animate",{stop:function(q){var j=c(this).data("resizable"),w=j.options,m=j._proportionallyResizeElements,f=m.length&&/textarea/i.test(m[0].nodeName),d=f&&c.ui.hasScroll(m[0],"left")?0:j.sizeDiff.height,e=f?0:j.sizeDiff.width,k={width:j.size.width-e,height:j.size.height-d},g=parseInt(j.element.css("left"),10)+(j.position.left-j.originalPosition.left)||null,p=parseInt(j.element.css("top"),10)+(j.position.top-j.originalPosition.top)||null;j.element.animate(c.extend(k,p&&g?{top:p,left:g}:{}),{duration:w.animateDuration,easing:w.animateEasing,step:function(){var h={width:parseInt(j.element.css("width"),10),height:parseInt(j.element.css("height"),10),top:parseInt(j.element.css("top"),10),left:parseInt(j.element.css("left"),10)};m&&m.length&&c(m[0]).css({width:h.width,height:h.height}),j._updateCache(h),j._propagate("resize",q)}})}}),c.ui.plugin.add("resizable","containment",{start:function(){var m=c(this).data("resizable"),A=m.options,y=m.element,j=A.containment,e=j instanceof c?j.get(0):/parent/.test(j)?y.parent().get(0):j;if(e){if(m.containerElement=c(e),/document/.test(j)||j==document){m.containerOffset={left:0,top:0},m.containerPosition={left:0,top:0},m.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var g=c(e),q=[];c(["Top","Right","Left","Bottom"]).each(function(h,d){q[h]=b(g.css("padding"+d))}),m.containerOffset=g.offset(),m.containerPosition=g.position(),m.containerSize={height:g.innerHeight()-q[3],width:g.innerWidth()-q[1]};var k=m.containerOffset,z=m.containerSize.height,w=m.containerSize.width,x=c.ui.hasScroll(e,"left")?e.scrollWidth:w,f=c.ui.hasScroll(e)?e.scrollHeight:z;m.parentData={element:e,left:k.left,top:k.top,width:x,height:f}}}},resize:function(y){var k=c(this).data("resizable"),z=k.options,w=(k.containerSize,k.containerOffset),g=(k.size,k.position),e=k._aspectRatio||y.shiftKey,f={top:0,left:0},m=k.containerElement;m[0]!=document&&/static/.test(m.css("position"))&&(f=w),g.left<(k._helper?w.left:0)&&(k.size.width=k.size.width+(k._helper?k.position.left-w.left:k.position.left-f.left),e&&(k.size.height=k.size.width/k.aspectRatio),k.position.left=z.helper?w.left:0),g.top<(k._helper?w.top:0)&&(k.size.height=k.size.height+(k._helper?k.position.top-w.top:k.position.top),e&&(k.size.width=k.size.height*k.aspectRatio),k.position.top=k._helper?w.top:0),k.offset.left=k.parentData.left+k.position.left,k.offset.top=k.parentData.top+k.position.top;var j=Math.abs((k._helper?k.offset.left-f.left:k.offset.left-f.left)+k.sizeDiff.width),x=Math.abs((k._helper?k.offset.top-f.top:k.offset.top-w.top)+k.sizeDiff.height),p=k.containerElement.get(0)==k.element.parent().get(0),q=/relative|absolute/.test(k.containerElement.css("position"));p&&q&&(j-=k.parentData.left),j+k.size.width>=k.parentData.width&&(k.size.width=k.parentData.width-j,e&&(k.size.height=k.size.width/k.aspectRatio)),x+k.size.height>=k.parentData.height&&(k.size.height=k.parentData.height-x,e&&(k.size.width=k.size.height*k.aspectRatio))},stop:function(){var p=c(this).data("resizable"),j=p.options,q=(p.position,p.containerOffset),m=p.containerPosition,f=p.containerElement,d=c(p.helper),e=d.offset(),k=d.outerWidth()-p.sizeDiff.width,g=d.outerHeight()-p.sizeDiff.height;p._helper&&!j.animate&&/relative/.test(f.css("position"))&&c(this).css({left:e.left-m.left-q.left,width:k,height:g}),p._helper&&!j.animate&&/static/.test(f.css("position"))&&c(this).css({left:e.left-m.left-q.left,width:k,height:g})}}),c.ui.plugin.add("resizable","ghost",{start:function(){var e=c(this).data("resizable"),d=e.options,f=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof d.ghost?d.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var d=c(this).data("resizable");d.options,d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=c(this).data("resizable");d.options,d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),c.ui.plugin.add("resizable","grid",{resize:function(p){var j=c(this).data("resizable"),q=j.options,m=j.size,f=j.originalSize,d=j.originalPosition,e=j.axis;q._aspectRatio||p.shiftKey,q.grid="number"==typeof q.grid?[q.grid,q.grid]:q.grid;var k=Math.round((m.width-f.width)/(q.grid[0]||1))*(q.grid[0]||1),g=Math.round((m.height-f.height)/(q.grid[1]||1))*(q.grid[1]||1);/^(se|s|e)$/.test(e)?(j.size.width=f.width+k,j.size.height=f.height+g):/^(ne)$/.test(e)?(j.size.width=f.width+k,j.size.height=f.height+g,j.position.top=d.top-g):/^(sw)$/.test(e)?(j.size.width=f.width+k,j.size.height=f.height+g,j.position.left=d.left-k):(j.size.width=f.width+k,j.size.height=f.height+g,j.position.top=d.top-g,j.position.left=d.left-k)}});var b=function(d){return parseInt(d,10)||0},a=function(d){return !isNaN(parseInt(d,10))}})(jQuery);(function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable"),this.dragged=!1;var b;this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var e=a(this),d=e.offset();a.data(this,"selectable-item",{element:this,$element:e,left:d.left,top:d.top,right:d.left+e.outerWidth(),bottom:d.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(c){var b=this;if(this.opos=[c.pageX,c.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",c),a(d.appendTo).append(this.helper),this.helper.css({left:c.clientX,top:c.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=!0,c.metaKey||c.ctrlKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,b._trigger("unselecting",c,{unselecting:e.element}))}),a(c.target).parents().andSelf().each(function(){var f=a.data(this,"selectable-item");if(f){var e=!c.metaKey&&!c.ctrlKey||!f.$element.hasClass("ui-selected");return f.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),f.unselecting=!e,f.selecting=e,f.selected=e,e?b._trigger("selecting",c,{selecting:f.element}):b._trigger("unselecting",c,{unselecting:f.element}),!1}})}},_mouseDrag:function(d){var c=this;if(this.dragged=!0,!this.options.disabled){var f=this.options,b=this.opos[0],k=this.opos[1],g=d.pageX,j=d.pageY;if(b>g){var e=g;g=b,b=e}if(k>j){var e=j;j=k,k=e}return this.helper.css({left:b,top:k,width:g-b,height:j-k}),this.selectees.each(function(){var n=a.data(this,"selectable-item");if(n&&n.element!=c.element[0]){var m=!1;"touch"==f.tolerance?m=!(n.left>g||b>n.right||n.top>j||k>n.bottom):"fit"==f.tolerance&&(m=n.left>b&&g>n.right&&n.top>k&&j>n.bottom),m?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,c._trigger("selecting",d,{selecting:n.element}))):(n.selecting&&((d.metaKey||d.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),c._trigger("unselecting",d,{unselecting:n.element}))),n.selected&&(d.metaKey||d.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,c._trigger("unselecting",d,{unselecting:n.element}))))}}),!1}},_mouseStop:function(c){var b=this;return this.dragged=!1,this.options,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,b._trigger("unselected",c,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,b._trigger("selected",c,{selected:d.element})}),this._trigger("stop",c),this.helper.remove(),!1}})})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData(this.widgetName+"-item")}return this},_setOption:function(c,b){"disabled"===c?(this.options[c]=b,this.widget().toggleClass("ui-sortable-disabled",!!b)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,c){var e=this;if(this.reverting){return !1}if(this.options.disabled||"static"==this.options.type){return !1}this._refreshItems(d);var b=null;if(a(d.target).parents().each(function(){return a.data(this,e.widgetName+"-item")==e?(b=a(this),!1):undefined}),a.data(d.target,e.widgetName+"-item")==e&&(b=a(d.target)),!b){return !1}if(this.options.handle&&!c){var f=!1;if(a(this.options.handle,b).find("*").andSelf().each(function(){this==d.target&&(f=!0)}),!f){return !1}}return this.currentItem=b,this._removeCurrentsFromItems(),!0},_mouseStart:function(d,c,e){var b=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),b.containment&&this._setContainment(),b.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",b.cursor)),b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity)),b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!e){for(var f=this.containers.length-1;f>=0;f--){this.containers[f]._trigger("activate",d,this._uiHash(this))}}return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(d),!0},_mouseDrag:function(d){if(this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,e=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+c.scrollSpeed:d.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+c.scrollSpeed:d.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(d.pageY-a(document).scrollTop()<c.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(d.pageY-a(document).scrollTop())<c.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),d.pageX-a(document).scrollLeft()<c.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(d.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),e!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var b=this.items.length-1;b>=0;b--){var h=this.items[b],f=h.item[0],g=this._intersectsWithPointer(h);if(g&&h.instance===this.currentContainer&&f!=this.currentItem[0]&&this.placeholder[1==g?"next":"prev"]()[0]!=f&&!a.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],f):!0)){if(this.direction=1==g?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(h)){break}this._rearrange(d,h),this._trigger("change",d,this._uiHash());break}}return this._contactContainers(d),a.ui.ddmanager&&a.ui.ddmanager.drag(this,d),this._trigger("sort",d,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,c){if(d){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,d),this.options.revert){var e=this,b=this.placeholder.offset();this.reverting=!0,a(this.helper).animate({left:b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){e._clear(d)})}else{this._clear(d,c)}return !1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(c){var b=this._getItemsAsjQuery(c&&c.connected),d=[];return c=c||{},a(b).each(function(){var e=(a(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[-=_](.+)/);e&&d.push((c.key||e[1]+"[]")+"="+(c.key&&c.expression?e[1]:e[2]))}),!d.length&&c.key&&d.push(c.key+"="),d.join("&")},toArray:function(c){var b=this._getItemsAsjQuery(c&&c.connected),d=[];return c=c||{},b.each(function(){d.push(a(c.item||this).attr(c.attribute||"id")||"")}),d},_intersectsWith:function(m){var x=this.positionAbs.left,j=x+this.helperProportions.width,y=this.positionAbs.top,q=y+this.helperProportions.height,f=m.left,b=f+m.width,d=m.top,k=d+m.height,g=this.offset.click.top,p=this.offset.click.left,w=y+g>d&&k>y+g&&x+p>f&&b>x+p;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>m[this.floating?"width":"height"]?w:x+this.helperProportions.width/2>f&&b>j-this.helperProportions.width/2&&y+this.helperProportions.height/2>d&&k>q-this.helperProportions.height/2},_intersectsWithPointer:function(d){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),e="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),b=c&&e,g=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return b?this.floating?f&&"right"==f||"down"==g?2:1:g&&("down"==g?2:1):!1},_intersectsWithSides:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),e=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&e||"left"==f&&!e:b&&("down"==b&&c||"up"==b&&!c)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!=b&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(d){var c=[],f=[],b=this._connectWith();if(b&&d){for(var k=b.length-1;k>=0;k--){for(var g=a(b[k]),j=g.length-1;j>=0;j--){var e=a.data(g[j],this.widgetName);e&&e!=this&&!e.options.disabled&&f.push([a.isFunction(e.options.items)?e.options.items.call(e.element):a(e.options.items,e.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),e])}}}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var k=f.length-1;k>=0;k--){f[k][0].each(function(){c.push(this)})}return a(c)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(d){for(var c=0;b.length>c;c++){if(b[c]==d.item[0]){return !1}}return !0})},_refreshItems:function(x){this.items=[],this.containers=[this];var j=this.items,y=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],x,{item:this.currentItem}):a(this.options.items,this.element),this]],q=this._connectWith();if(q&&this.ready){for(var f=q.length-1;f>=0;f--){for(var b=a(q[f]),e=b.length-1;e>=0;e--){var k=a.data(b[e],this.widgetName);k&&k!=this&&!k.options.disabled&&(y.push([a.isFunction(k.options.items)?k.options.items.call(k.element[0],x,{item:this.currentItem}):a(k.options.items,k.element),k]),this.containers.push(k))}}}for(var f=y.length-1;f>=0;f--){for(var g=y[f][1],p=y[f][0],e=0,w=p.length;w>e;e++){var m=a(p[e]);m.data(this.widgetName+"-item",g),j.push({item:m,instance:g,width:0,height:0,left:0,top:0})}}},refreshPositions:function(d){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var e=this.items[c];if(e.instance==this.currentContainer||!this.currentContainer||e.item[0]==this.currentItem[0]){var b=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;d||(e.width=b.outerWidth(),e.height=b.outerHeight());var f=b.offset();e.left=f.left,e.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}}return this},_createPlaceholder:function(c){c=c||this;var b=c.options;if(!b.placeholder||b.placeholder.constructor==String){var d=b.placeholder;b.placeholder={element:function(){var e=a(document.createElement(c.currentItem[0].nodeName)).addClass(d||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return d||(e.style.visibility="hidden"),e},update:function(g,f){(!d||b.forcePlaceholderSize)&&(f.height()||f.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(b.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),b.placeholder.update(c,c.placeholder)},_contactContainers:function(x){for(var j=null,y=null,q=this.containers.length-1;q>=0;q--){if(!a.contains(this.currentItem[0],this.containers[q].element[0])){if(this._intersectsWith(this.containers[q].containerCache)){if(j&&a.contains(this.containers[q].element[0],j.element[0])){continue}j=this.containers[q],y=q}else{this.containers[q].containerCache.over&&(this.containers[q]._trigger("out",x,this._uiHash(this)),this.containers[q].containerCache.over=0)}}}if(j){if(1===this.containers.length){this.containers[y]._trigger("over",x,this._uiHash(this)),this.containers[y].containerCache.over=1}else{for(var f=10000,b=null,e=this.containers[y].floating?"left":"top",k=this.containers[y].floating?"width":"height",g=this.positionAbs[e]+this.offset.click[e],p=this.items.length-1;p>=0;p--){if(a.contains(this.containers[y].element[0],this.items[p].item[0])&&this.items[p].item[0]!=this.currentItem[0]){var w=this.items[p].item.offset()[e],m=!1;Math.abs(w-g)>Math.abs(w+this.items[p][k]-g)&&(m=!0,w+=this.items[p][k]),f>Math.abs(w-g)&&(f=Math.abs(w-g),b=this.items[p],this.direction=m?"up":"down")}}if(!b&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[y],b?this._rearrange(x,b,null,!0):this._rearrange(x,null,this.containers[y].element,!0),this._trigger("change",x,this._uiHash()),this.containers[y]._trigger("change",x,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[y]._trigger("over",x,this._uiHash(this)),this.containers[y].containerCache.over=1}}},_createHelper:function(c){var b=this.options,d=a.isFunction(b.helper)?a(b.helper.apply(this.element[0],[c,this.currentItem])):"clone"==b.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||b.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||b.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left" in b&&(this.offset.click.left=b.left+this.margins.left),"right" in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top" in b&&(this.offset.click.top=b.top+this.margins.top),"bottom" in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if("parent"==d.containment&&(d.containment=this.helper[0].parentNode),("document"==d.containment||"window"==d.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==d.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==d.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(d.containment)){var c=a(d.containment)[0],e=a(d.containment).offset(),b="hidden"!=a(c).css("overflow");this.containment=[e.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,e.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,c){c||(c=this.position);var e="absolute"==d?1:-1,b=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(b[0].tagName);return{top:c.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:b.scrollTop())*e,left:c.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:b.scrollLeft())*e}},_generatePosition:function(d){var c=this.options,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,b=/(html|body)/i.test(f[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var k=d.pageX,g=d.pageY;if(this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(k=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(k=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var j=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?j-this.offset.click.top<this.containment[1]||j-this.offset.click.top>this.containment[3]?j-this.offset.click.top<this.containment[1]?j+c.grid[1]:j-c.grid[1]:j:j;var e=this.originalPageX+Math.round((k-this.originalPageX)/c.grid[0])*c.grid[0];k=this.containment?e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2]?e-this.offset.click.left<this.containment[0]?e+c.grid[0]:e-c.grid[0]:e:e}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():b?0:f.scrollTop()),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():b?0:f.scrollLeft())}},_rearrange:function(g,d,c,f){c?c[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?d.item[0]:d.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var b=this.counter;this._delay(function(){b==this.counter&&this.refreshPositions(!f)})},_clear:function(d,c){this.reverting=!1;var e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var b in this._storedCSS){("auto"==this._storedCSS[b]||"static"==this._storedCSS[b])&&(this._storedCSS[b]="")}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!c&&e.push(function(f){this._trigger("receive",f,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||e.push(function(f){this._trigger("update",f,this._uiHash())}),this!==this.currentContainer&&(c||(e.push(function(f){this._trigger("remove",f,this._uiHash())}),e.push(function(f){return function(g){f._trigger("receive",g,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.currentContainer))));for(var b=this.containers.length-1;b>=0;b--){c||e.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,this.containers[b])),this.containers[b].containerCache.over&&(e.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[b])),this.containers[b].containerCache.over=0)}if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",d,this._uiHash());for(var b=0;e.length>b;b++){e[b].call(this,d)}this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var b=0;e.length>b;b++){e[b].call(this,d)}this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null}}})})(jQuery);(function(f){var d=0,c={},b={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide",b.height=b.paddingTop=b.paddingBottom=b.borderTopWidth=b.borderBottomWidth="show",f.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++d),e=this.options;this.prevShow=this.prevHide=f(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),0>e.active&&(e.active+=this.headers.length),this.active=this._findActive(e.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(j){var h=f(this),k=h.attr("id"),l=h.next(),m=l.attr("id");k||(k=g+"-header-"+j,h.attr("id",k)),m||(m=g+"-panel-"+j,l.attr("id",m)),h.attr("aria-controls",m),l.attr("aria-labelledby",k)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(e.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():f()}},_createIcons:function(){var a=this.options.icons;a&&(f("<span>").addClass("ui-accordion-header-icon ui-icon "+a.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(g,a){return"active"===g?(this._activate(a),undefined):("event"===g&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(a)),this._super(g,a),"collapsible"!==g||a||this.options.active!==!1||this._activate(0),"icons"===g&&(this._destroyIcons(),a&&this._createIcons()),"disabled"===g&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!a),undefined)},_keydown:function(h){if(!h.altKey&&!h.ctrlKey){var g=f.ui.keyCode,e=this.headers.length,j=this.headers.index(h.target),k=!1;switch(h.keyCode){case g.RIGHT:case g.DOWN:k=this.headers[(j+1)%e];break;case g.LEFT:case g.UP:k=this.headers[(j-1+e)%e];break;case g.SPACE:case g.ENTER:this._eventHandler(h);break;case g.HOME:k=this.headers[0];break;case g.END:k=this.headers[e-1]}k&&(f(h.target).attr("tabIndex",-1),f(k).attr("tabIndex",0),k.focus(),h.preventDefault())}},_panelKeyDown:function(a){a.keyCode===f.ui.keyCode.UP&&a.ctrlKey&&f(a.currentTarget).prev().focus()},refresh:function(){var h,g,e=this.options.heightStyle,j=this.element.parent();"fill"===e?(f.support.minHeight||(g=j.css("overflow"),j.css("overflow","hidden")),h=j.height(),this.element.siblings(":visible").each(function(){var l=f(this),k=l.css("position");"absolute"!==k&&"fixed"!==k&&(h-=l.outerHeight(!0))}),g&&j.css("overflow",g),this.headers.each(function(){h-=f(this).outerHeight(!0)}),this.headers.next().each(function(){f(this).height(Math.max(0,h-f(this).innerHeight()+f(this).height()))}).css("overflow","auto")):"auto"===e&&(h=0,this.headers.next().each(function(){h=Math.max(h,f(this).css("height","").height())}).height(h))},_activate:function(e){var a=this._findActive(e)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,currentTarget:a,preventDefault:f.noop}))},_findActive:function(a){return"number"==typeof a?this.headers.eq(a):f()},_setupEvents:function(e){var a={};e&&(f.each(e.split(" "),function(h,g){a[g]="_eventHandler"}),this._on(this.headers,a))},_eventHandler:function(u){var m=this.options,q=this.active,w=f(u.currentTarget),e=w[0]===q[0],j=e&&m.collapsible,g=j?f():w.next(),p=q.next(),k={oldHeader:q,oldPanel:p,newHeader:j?f():w,newPanel:g};u.preventDefault(),e&&!m.collapsible||this._trigger("beforeActivate",u,k)===!1||(m.active=j?!1:this.headers.index(w),this.active=e?f():w,this._toggle(k),q.removeClass("ui-accordion-header-active ui-state-active"),m.icons&&q.children(".ui-accordion-header-icon").removeClass(m.icons.activeHeader).addClass(m.icons.header),e||(w.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),m.icons&&w.children(".ui-accordion-header-icon").removeClass(m.icons.header).addClass(m.icons.activeHeader),w.next().addClass("ui-accordion-content-active")))},_toggle:function(h){var g=h.newPanel,e=this.prevShow.length?this.prevShow:h.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=g,this.prevHide=e,this.options.animate?this._animate(g,e,h):(e.hide(),g.show(),this._toggleComplete(h)),e.attr({"aria-expanded":"false","aria-hidden":"true"}),e.prev().attr("aria-selected","false"),g.length&&e.length?e.prev().attr("tabIndex",-1):g.length&&this.headers.filter(function(){return 0===f(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(w,A,B){var a,k,j,q=this,m=0,x=w.length&&(!A.length||w.index()<A.index()),z=this.options.animate||{},y=x&&z.down||z,g=function(){q._toggleComplete(B)};return"number"==typeof y&&(j=y),"string"==typeof y&&(k=y),k=k||y.easing||z.easing,j=j||y.duration||z.duration,A.length?w.length?(a=w.show().outerHeight(),A.animate(c,{duration:j,easing:k,step:function(l,h){h.now=Math.round(l)}}),w.hide().animate(b,{duration:j,easing:k,complete:g,step:function(l,h){h.now=Math.round(l),"height"!==h.prop?m+=h.now:"content"!==q.options.heightStyle&&(h.now=Math.round(a-A.outerHeight()-m),m=0)}}),undefined):A.animate(c,j,k,g):w.animate(b,j,k,g)},_toggleComplete:function(g){var a=g.oldPanel;a.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),a.length&&(a.parent()[0].className=a.parent()[0].className),this._trigger("activate",null,g)}}),f.uiBackCompat!==!1&&(function(h,g){h.extend(g.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var a=g._create;g._create=function(){if(this.options.navigation){var j=this,e=this.element.find(this.options.header),k=e.next(),l=e.add(k).find("a").filter(this.options.navigationFilter)[0];l&&e.add(k).each(function(m){return h.contains(this,l)?(j.options.active=Math.floor(m/2),!1):undefined})}a.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(k,j){k.extend(j.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var h=j._create,g=j._setOption;k.extend(j,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),h.call(this)},_setOption:function(a){("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)&&(this.options.heightStyle=this._mergeHeightStyle()),g.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;return a.fillSpace?"fill":a.clearStyle?"content":a.autoHeight?"auto":undefined}})}(jQuery,jQuery.ui.accordion.prototype),function(h,g){h.extend(g.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var a=g._createIcons;g._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),a.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(h,g){g.activate=g._activate;var a=g._findActive;g._findActive=function(j){return -1===j&&(j=!1),j&&"number"!=typeof j&&(j=this.headers.index(this.headers.filter(j)),-1===j&&(j=!1)),a.call(this,j)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(h,g){h.extend(g.options,{change:null,changestart:null});var a=g._trigger;g._trigger=function(m,k,j){var l=a.apply(this,arguments);return l?("beforeActivate"===m?l=a.call(this,"changestart",k,{oldHeader:j.oldHeader,oldContent:j.oldPanel,newHeader:j.newHeader,newContent:j.newPanel}):"activate"===m&&(l=a.call(this,"change",k,{oldHeader:j.oldHeader,oldContent:j.oldPanel,newHeader:j.newHeader,newContent:j.newPanel})),l):!1}}(jQuery,jQuery.ui.accordion.prototype),function(h,g){h.extend(g.options,{animate:null,animated:"slide"});var a=g._create;g._create=function(){var j=this.options;null===j.animate&&(j.animate=j.animated?"slide"===j.animated?300:"bounceslide"===j.animated?{duration:200,down:{easing:"easeOutBounce",duration:1000}}:j.animated:!1),a.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);(function(b){var a=0;b.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,d,c;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(f){if(this.element.prop("readOnly")){return e=!0,c=!0,d=!0,undefined}e=!1,c=!1,d=!1;var g=b.ui.keyCode;switch(f.keyCode){case g.PAGE_UP:e=!0,this._move("previousPage",f);break;case g.PAGE_DOWN:e=!0,this._move("nextPage",f);break;case g.UP:e=!0,this._keyEvent("previous",f);break;case g.DOWN:e=!0,this._keyEvent("next",f);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&(e=!0,f.preventDefault(),this.menu.select(f));break;case g.TAB:this.menu.active&&this.menu.select(f);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(f),f.preventDefault());break;default:d=!0,this._searchTimeout(f)}},keypress:function(f){if(e){return e=!1,f.preventDefault(),undefined}if(!d){var g=b.ui.keyCode;switch(f.keyCode){case g.PAGE_UP:this._move("previousPage",f);break;case g.PAGE_DOWN:this._move("nextPage",f);break;case g.UP:this._keyEvent("previous",f);break;case g.DOWN:this._keyEvent("next",f)}}},input:function(f){return c?(c=!1,f.preventDefault(),undefined):(this._searchTimeout(f),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(f){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(f),this._change(f),undefined)}}),this._initSource(),this.menu=b("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:b(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(g){g.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var f=this.menu.element[0];b(g.target).closest(".ui-menu-item").length||this._delay(function(){var h=this;this.document.one("mousedown",function(j){j.target===h.element[0]||j.target===f||b.contains(f,j.target)||h.close()})})},menufocus:function(h,g){if(this.isNewMenu&&(this.isNewMenu=!1,h.originalEvent&&/^mouse/.test(h.originalEvent.type))){return this.menu.blur(),this.document.one("mousemove",function(){b(h.target).trigger(h.originalEvent)}),undefined}var f=g.item.data("ui-autocomplete-item")||g.item.data("item.autocomplete");!1!==this._trigger("focus",h,{item:f})?h.originalEvent&&/^key/.test(h.originalEvent.type)&&this._value(f.value):this.liveRegion.text(f.value)},menuselect:function(j,h){var g=h.item.data("ui-autocomplete-item")||h.item.data("item.autocomplete"),f=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=f,this._delay(function(){this.previous=f,this.selectedItem=g})),!1!==this._trigger("select",j,{item:g})&&this._value(g.value),this.term=this._value(),this.close(j),this.selectedItem=g}}),this.liveRegion=b("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),b.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(d,c){this._super(d,c),"source"===d&&this._initSource(),"appendTo"===d&&this.menu.element.appendTo(this.document.find(c||"body")[0]),"disabled"===d&&c&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var e,d,c=this;b.isArray(this.options.source)?(e=this.options.source,this.source=function(g,f){f(b.ui.autocomplete.filter(e,g.term))}):"string"==typeof this.options.source?(d=this.options.source,this.source=function(f,g){c.xhr&&c.xhr.abort(),c.xhr=b.ajax({url:d,data:f,dataType:"json",success:function(h){g(h)},error:function(){g([])}})}):this.source=this.options.source},_searchTimeout:function(c){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,c))},this.options.delay)},search:function(d,c){return d=null!=d?d:this._value(),this.term=this._value(),d.length<this.options.minLength?this.close(c):this._trigger("search",c)!==!1?this._search(d):undefined},_search:function(c){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:c},this._response())},_response:function(){var d=this,c=++a;return function(e){c===a&&d.__response(e),d.pending--,d.pending||d.element.removeClass("ui-autocomplete-loading")}},__response:function(c){c&&(c=this._normalize(c)),this._trigger("response",null,{content:c}),!this.options.disabled&&c&&c.length&&!this.cancelSearch?(this._suggest(c),this._trigger("open")):this._close()},close:function(c){this.cancelSearch=!0,this._close(c)},_close:function(c){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",c))},_change:function(c){this.previous!==this._value()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){return c.length&&c[0].label&&c[0].value?c:b.map(c,function(d){return"string"==typeof d?{label:d,value:d}:b.extend({label:d.label||d.value,value:d.value||d.label},d)})},_suggest:function(d){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,d),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(b.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,d){var c=this;b.each(d,function(g,f){c._renderItemData(e,f)})},_renderItemData:function(d,c){return this._renderItem(d,c).data("ui-autocomplete-item",c)},_renderItem:function(d,c){return b("<li>").append(b("<a>").text(c.label)).appendTo(d)},_move:function(d,c){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(d)||this.menu.isLastItem()&&/^next/.test(d)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[d](c),undefined):(this.search(null,c),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(d,c){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(d,c),c.preventDefault())}}),b.extend(b.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,d){var c=RegExp(b.ui.autocomplete.escapeRegex(d),"i");return b.grep(e,function(f){return c.test(f.label||f.value||f)})}}),b.widget("ui.autocomplete",b.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(c){return c+(c>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=d&&d.length?this.options.messages.results(d.length):this.options.messages.noResults,this.liveRegion.text(c))}})})(jQuery);(function(k){var p,g,m,q,b="ui-button ui-widget ui-state-default ui-corner-all",d="ui-state-hover ui-state-active ",c="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var a=k(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},f=function(l){var h=l.name,e=l.form,n=k([]);return h&&(n=e?k(e).find("[name='"+h+"']"):k("[name='"+h+"']",l.ownerDocument).filter(function(){return !this.form})),n};k.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,j),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,h=this.options,a="checkbox"===this.type||"radio"===this.type,e=a?"":"ui-state-active",l="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(b).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===p&&k(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||k(this).removeClass(e)}).bind("click"+this.eventNamespace,function(n){h.disabled&&(n.preventDefault(),n.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(l)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(l)}),a&&(this.element.bind("change"+this.eventNamespace,function(){q||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(n){h.disabled||(q=!1,g=n.pageX,m=n.pageY)}).bind("mouseup"+this.eventNamespace,function(n){h.disabled||(g!==n.pageX||m!==n.pageY)&&(q=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||q?!1:(k(this).toggleClass("ui-state-active"),r.buttonElement.attr("aria-pressed",r.element[0].checked),undefined)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||q){return !1}k(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var n=r.element[0];f(n).not(n).map(function(){return k(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(k(this).addClass("ui-state-active"),p=this,r.document.one("mouseup",function(){p=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:(k(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(n){return h.disabled?!1:((n.keyCode===k.ui.keyCode.SPACE||n.keyCode===k.ui.keyCode.ENTER)&&k(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace,function(){k(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(n){n.keyCode===k.ui.keyCode.SPACE&&k(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var l,h,a;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(l=this.element.parents().last(),h="label[for='"+this.element.attr("id")+"']",this.buttonElement=l.find(h),this.buttonElement.length||(l=l.length?l.siblings():this.element.siblings(),this.buttonElement=l.filter(h),this.buttonElement.length||(this.buttonElement=l.find(h))),this.element.addClass("ui-helper-hidden-accessible"),a=this.element.is(":checked"),a&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(b+" "+d+" "+c).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(h,a){return this._super(h,a),"disabled"===h?(a?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOption("disabled",a),"radio"===this.type?f(this.element[0]).each(function(){k(this).is(":checked")?k(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):k(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type){return this.options.label&&this.element.val(this.options.label),undefined}var l=this.buttonElement.removeClass(c),h=k("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(l.empty()).text(),e=this.options.icons,n=e.primary&&e.secondary,o=[];e.primary||e.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":e.primary?"-primary":"-secondary")),e.primary&&l.prepend("<span class='ui-button-icon-primary ui-icon "+e.primary+"'></span>"),e.secondary&&l.append("<span class='ui-button-icon-secondary ui-icon "+e.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||l.attr("title",k.trim(h)))):o.push("ui-button-text-only"),l.addClass(o.join(" "))}}),k.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(h,a){"disabled"===h&&this.buttons.button("option",h,a),this._super(h,a)},refresh:function(){var a="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return k(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return k(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t){(null==t[i]||t[i]==undefined)&&(e[i]=t[i])}return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,a){t.settings[i]=a}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),a=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[a?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var s=this._get(t,"showOn");if(("focus"==s||"both"==s)&&e.focus(this._showDatepicker),"button"==s||"both"==s){var n=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:n,title:n}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?n:$("<img/>").attr({src:r,alt:n,title:n}))),e[a?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var a=function(e){for(var t=0,i=0,a=0;e.length>a;a++){e[a].length>t&&(t=e[a].length,i=a)}return i};t.setMonth(a(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(a(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,a){t.settings[i]=a}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,a,s){var n=this._dialogInst;if(!n){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},$.data(this._dialogInput[0],PROP_NAME,n)}if(extendRemove(n.settings,a||{}),t=t&&t.constructor==Date?this._formatDate(n,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,!this._pos){var o=document.documentElement.clientWidth,h=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[o/2-100+l,h/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,n),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var a=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==a?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==a||"span"==a)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var a=e.nodeName.toLowerCase();if("input"==a){e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if("div"==a||"span"==a){var s=t.children("."+this._inlineClass);s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var a=e.nodeName.toLowerCase();if("input"==a){e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if("div"==a||"span"==a){var s=t.children("."+this._inlineClass);s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e){return !1}for(var t=0;this._disabledInputs.length>t;t++){if(this._disabledInputs[t]==e){return !0}}return !1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var a=this._getInst(e);if(2==arguments.length&&"string"==typeof t){return"defaults"==t?$.extend({},$.datepicker._defaults):a?"all"==t?$.extend({},a.settings):this._get(a,t):null}var s=t||{};if("string"==typeof t&&(s={},s[t]=i),a){this._curInst==a&&this._hideDatepicker();var n=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");extendRemove(a.settings,s),null!==r&&s.dateFormat!==undefined&&s.minDate===undefined&&(a.settings.minDate=this._formatDate(a,r)),null!==o&&s.dateFormat!==undefined&&s.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,o)),this._attachments($(e),a),this._autoSize(a),this._setDate(a,n),this._updateAlternate(a),this._updateDatepicker(a)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,a=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing){switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var s=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);s[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,s[0]);var n=$.datepicker._get(t,"onSelect");if(n){var r=$.datepicker._formatDate(t);n.apply(t.input?t.input[0]:null,[r,t])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,a?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,a?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}}else{36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1}i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),a=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">a||!i||i.indexOf(a)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal){try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(a){$.datepicker.log(a)}}return !0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),a=i?i.apply(e,[e,t]):{};if(a!==!1){extendRemove(t.settings,a),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var s=!1;$(e).parents().each(function(){return s|="fixed"==$(this).css("position"),!s});var n={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),n=$.datepicker._checkOffset(t,n,s),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":s?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),!t.inline){var r=$.datepicker._get(t,"showAnim"),o=$.datepicker._get(t,"duration"),h=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[r]||$.effects[r])?t.dpDiv.show(r,$.datepicker._get(t,"showOptions"),o,h):t.dpDiv[r||"show"](r?o:null,h),r&&o||h(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var a=this._getNumberOfMonths(e),s=a[1],n=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",n*s+"em"),e.dpDiv[(1!=a[0]||1!=a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var r=e.yearshtml;setTimeout(function(){r===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),r=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var a=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),n=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),h=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?a-n:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+a>o&&o>a?Math.abs(t.left+a-o):0),t.top-=Math.min(t.top,t.top+s>h&&h>s?Math.abs(s+r):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));){e=e[i?"previousSibling":"nextSibling"]}var a=$(e).offset();return[a.left,a.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),a=this._get(t,"duration"),s=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),a,s):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1;var n=this._get(t,"onClose");n&&n.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var a=$(e),s=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(s,t+("M"==i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay){i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear}else{var a=new Date;i.selectedDay=a.getDate(),i.drawMonth=i.selectedMonth=a.getMonth(),i.drawYear=i.selectedYear=a.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var a=$(e),s=this._getInst(a[0]);s["selected"+("M"==i?"Month":"Year")]=s["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(a)},_selectDay:function(e,t,i,a){var s=$(e);if(!$(a).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(s[0])){var n=this._getInst(s[0]);n.selectedDay=n.currentDay=$("a",a).html(),n.selectedMonth=n.currentMonth=t,n.selectedYear=n.currentYear=i,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),a=this._getInst(i[0]);t=null!=t?t:this._formatDate(a),a.input&&a.input.val(t),this._updateAlternate(a);var s=this._get(a,"onSelect");s?s.apply(a.input?a.input[0]:null,[t,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),s=this.formatDate(i,a,this._getFormatConfig(e));$(t).each(function(){$(this).val(s)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/86400000)/7)+1},parseDate:function(e,t,i){if(null==e||null==t){throw"Invalid arguments"}if(t="object"==typeof t?""+t:t+"",""==t){return null}var a=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;a="string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10);for(var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=-1,l=-1,u=-1,d=-1,c=!1,p=function(t){var i=e.length>y+1&&e.charAt(y+1)==t;return i&&y++,i},m=function(e){var i=p(e),a="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,s=RegExp("^\\d{1,"+a+"}"),n=t.substring(v).match(s);if(!n){throw"Missing number at position "+v}return v+=n[0].length,parseInt(n[0],10)},f=function(e,i,a){var s=$.map(p(e)?a:i,function(e,t){return[[t,e]]}).sort(function(e,t){return -(e[1].length-t[1].length)}),n=-1;if($.each(s,function(e,i){var a=i[1];return t.substr(v,a.length).toLowerCase()==a.toLowerCase()?(n=i[0],v+=a.length,!1):undefined}),-1!=n){return n+1}throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y)){throw"Unexpected literal at position "+v}v++},v=0,y=0;e.length>y;y++){if(c){"'"!=e.charAt(y)||p("'")?g():c=!1}else{switch(e.charAt(y)){case"d":u=m("d");break;case"D":f("D",s,n);break;case"o":d=m("o");break;case"m":l=m("m");break;case"M":l=f("M",r,o);break;case"y":h=m("y");break;case"@":var b=new Date(m("@"));h=b.getFullYear(),l=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((m("!")-this._ticksTo1970)/10000);h=b.getFullYear(),l=b.getMonth()+1,u=b.getDate();break;case"'":p("'")?g():c=!0;break;default:g()}}}if(t.length>v){var _=t.substr(v);if(!/^\s+/.test(_)){throw"Extra/unparsed characters found in date: "+_}}if(-1==h?h=(new Date).getFullYear():100>h&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a>=h?0:-100)),d>-1){for(l=1,u=d;;){var k=this._getDaysInMonth(h,l-1);if(k>=u){break}l++,u-=k}}var b=this._daylightSavingAdjust(new Date(h,l-1,u));if(b.getFullYear()!=h||b.getMonth()+1!=l||b.getDate()!=u){throw"Invalid date"}return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:10000000*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t){return""}var a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,n=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,o=function(t){var i=e.length>c+1&&e.charAt(c+1)==t;return i&&c++,i},h=function(e,t,i){var a=""+t;if(o(e)){for(;i>a.length;){a="0"+a}}return a},l=function(e,t,i,a){return o(e)?a[t]:i[t]},u="",d=!1;if(t){for(var c=0;e.length>c;c++){if(d){"'"!=e.charAt(c)||o("'")?u+=e.charAt(c):d=!1}else{switch(e.charAt(c)){case"d":u+=h("d",t.getDate(),2);break;case"D":u+=l("D",t.getDay(),a,s);break;case"o":u+=h("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/86400000),3);break;case"m":u+=h("m",t.getMonth()+1,2);break;case"M":u+=l("M",t.getMonth(),n,r);break;case"y":u+=o("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=10000*t.getTime()+this._ticksTo1970;break;case"'":o("'")?u+="'":d=!0;break;default:u+=e.charAt(c)}}}}return u},_possibleChars:function(e){for(var t="",i=!1,a=function(t){var i=e.length>s+1&&e.charAt(s+1)==t;return i&&s++,i},s=0;e.length>s;s++){if(i){"'"!=e.charAt(s)||a("'")?t+=e.charAt(s):i=!1}else{switch(e.charAt(s)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":a("'")?t+="'":i=!0;break;default:t+=e.charAt(s)}}}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,a,s=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null;i=a=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{i=this.parseDate(s,n,r)||a}catch(o){this.log(o),n=t?"":n}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=n?i.getDate():0,e.currentMonth=n?i.getMonth():0,e.currentYear=n?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var a=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var a=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,s=a.getFullYear(),n=a.getMonth(),r=a.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=o.exec(t);h;){switch(h[2]||"d"){case"d":case"D":r+=parseInt(h[1],10);break;case"w":case"W":r+=7*parseInt(h[1],10);break;case"m":case"M":n+=parseInt(h[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(s,n));break;case"y":case"Y":s+=parseInt(h[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(s,n))}h=o.exec(t)}return new Date(s,n,r)},n=null==t||""===t?i:"string"==typeof t?s(t):"number"==typeof t?isNaN(t)?i:a(t):new Date(t.getTime());return n=n&&"Invalid Date"==""+n?i:n,n&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,s=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s==e.selectedMonth&&n==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),a=this._get(e,"showButtonPanel"),s=this._get(e,"hideIfNoPrevNext"),n=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),o=this._get(e,"showCurrentAtPos"),h=this._get(e,"stepMonths"),l=1!=r[0]||1!=r[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),c=this._getMinMaxDate(e,"max"),p=e.drawMonth-o,m=e.drawYear;if(0>p&&(p+=12,m--),c){var f=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth()-r[0]*r[1]+1,c.getDate()));for(f=d&&d>f?d:f;this._daylightSavingAdjust(new Date(m,p,1))>f;){p--,0>p&&(p=11,m--)}}e.drawMonth=p,e.drawYear=m;var g=this._get(e,"prevText");g=n?this.formatDate(g,this._daylightSavingAdjust(new Date(m,p-h,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,m,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=n?this.formatDate(y,this._daylightSavingAdjust(new Date(m,p+h,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,m,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>",_=this._get(e,"currentText"),k=this._get(e,"gotoCurrent")&&e.currentDay?u:t;_=n?this.formatDate(_,k,this._getFormatConfig(e)):_;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",D=a?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(e,k)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+_+"</button>":"")+(i?"":x)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var w=this._get(e,"showWeek"),M=this._get(e,"dayNames");this._get(e,"dayNamesShort");var S=this._get(e,"dayNamesMin"),N=this._get(e,"monthNames"),C=this._get(e,"monthNamesShort"),A=this._get(e,"beforeShowDay"),P=this._get(e,"showOtherMonths"),F=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var I=this._getDefaultDate(e),j="",H=0;r[0]>H;H++){var z="";this.maxRows=4;for(var L=0;r[1]>L;L++){var E=this._daylightSavingAdjust(new Date(m,p,e.selectedDay)),O=" ui-corner-all",R="";if(l){if(R+='<div class="ui-datepicker-group',r[1]>1){switch(L){case 0:R+=" ui-datepicker-group-first",O=" ui-corner-"+(i?"right":"left");break;case r[1]-1:R+=" ui-datepicker-group-last",O=" ui-corner-"+(i?"left":"right");break;default:R+=" ui-datepicker-group-middle",O=""}}R+='">'}R+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+O+'">'+(/all|left/.test(O)&&0==H?i?b:v:"")+(/all|right/.test(O)&&0==H?i?v:b:"")+this._generateMonthYearHeader(e,p,m,d,c,H>0||L>0,N,C)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var Y=w?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",W=0;7>W;W++){var J=(W+T)%7;Y+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+M[J]+'">'+S[J]+"</span></th>"}R+=Y+"</tr></thead><tbody>";var Q=this._getDaysInMonth(m,p);m==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,Q));var B=(this._getFirstDayOfMonth(m,p)-T+7)%7,K=Math.ceil((B+Q)/7),V=l?this.maxRows>K?this.maxRows:K:K;this.maxRows=V;for(var U=this._daylightSavingAdjust(new Date(m,p,1-B)),G=0;V>G;G++){R+="<tr>";for(var q=w?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(U)+"</td>":"",W=0;7>W;W++){var X=A?A.apply(e.input?e.input[0]:null,[U]):[!0,""],Z=U.getMonth()!=p,et=Z&&!F||!X[0]||d&&d>U||c&&U>c;q+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(U.getTime()==E.getTime()&&p==e.selectedMonth&&e._keyEvent||I.getTime()==U.getTime()&&I.getTime()==E.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!P?"":" "+X[1]+(U.getTime()==u.getTime()?" "+this._currentClass:"")+(U.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!P||!X[2]?"":' title="'+X[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+U.getMonth()+'" data-year="'+U.getFullYear()+'"')+">"+(Z&&!P?"&#xa0;":et?'<span class="ui-state-default">'+U.getDate()+"</span>":'<a class="ui-state-default'+(U.getTime()==t.getTime()?" ui-state-highlight":"")+(U.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+U.getDate()+"</a>")+"</td>",U.setDate(U.getDate()+1),U=this._daylightSavingAdjust(U)}R+=q+"</tr>"}p++,p>11&&(p=0,m++),R+="</tbody></table>"+(l?"</div>"+(r[0]>0&&L==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),z+=R}j+=z}return j+=D+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,j},_generateMonthYearHeader:function(e,t,i,a,s,n,r,o){var h=this._get(e,"changeMonth"),l=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',c="";if(n||!h){c+='<span class="ui-datepicker-month">'+r[t]+"</span>"}else{var p=a&&a.getFullYear()==i,m=s&&s.getFullYear()==i;c+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var f=0;12>f;f++){(!p||f>=a.getMonth())&&(!m||s.getMonth()>=f)&&(c+='<option value="'+f+'"'+(f==t?' selected="selected"':"")+">"+o[f]+"</option>")}c+="</select>"}if(u||(d+=c+(!n&&h&&l?"":"&#xa0;")),!e.yearshtml){if(e.yearshtml="",n||!l){d+='<span class="ui-datepicker-year">'+i+"</span>"}else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),_=Math.max(b,y(g[1]||""));for(b=a?Math.max(b,a.getFullYear()):b,_=s?Math.min(_,s.getFullYear()):_,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';_>=b;b++){e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>"}e.yearshtml+="</select>",d+=e.yearshtml,e.yearshtml=null}}return d+=this._get(e,"yearSuffix"),u&&(d+=(!n&&h&&l?"":"&#xa0;")+c),d+="</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"==i?t:0),s=e.drawMonth+("M"==i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(a,s))+("D"==i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,s,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return s=a&&s>a?a:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var s=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,a+(0>t?t:s[0]*s[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!a||t.getTime()<=a.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(g,d){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},f={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};g.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var a=g(this).css(e).offset().top;0>a&&g(this).css("top",e.top-a)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var j,p,q,x,w,m=this,e=this.options,k=e.title||"&#160;";j=(this.uiDialog=g("<div>")).addClass(c+e.dialogClass).css({display:"none",outline:0,zIndex:e.zIndex}).attr("tabIndex",-1).keydown(function(a){e.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===g.ui.keyCode.ESCAPE&&(m.close(a),a.preventDefault())}).mousedown(function(a){m.moveToTop(!1,a)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(j),p=(this.uiDialogTitlebar=g("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){j.focus()}).prependTo(j),q=g("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault(),m.close(a)}).appendTo(p),(this.uiDialogTitlebarCloseText=g("<span>")).addClass("ui-icon ui-icon-closethick").text(e.closeText).appendTo(q),x=g("<span>").uniqueId().addClass("ui-dialog-title").html(k).prependTo(p),w=(this.uiDialogButtonPane=g("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=g("<div>")).addClass("ui-dialog-buttonset").appendTo(w),j.attr({role:"dialog","aria-labelledby":x.attr("id")}),p.find("*").add(p).disableSelection(),this._hoverable(q),this._focusable(q),e.draggable&&g.fn.draggable&&this._makeDraggable(),e.resizable&&g.fn.resizable&&this._makeResizable(),this._createButtons(e.buttons),this._isOpen=!1,g.fn.bgiframe&&j.bgiframe(),this._on(j,{keydown:function(a){if(e.modal&&a.keyCode===g.ui.keyCode.TAB){var h=g(":tabbable",j),l=h.filter(":first"),o=h.filter(":last");return a.target!==o[0]||a.shiftKey?a.target===l[0]&&a.shiftKey?(o.focus(1),!1):d:(l.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var h,a=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),h=a.parent.children().eq(a.index),h.length&&h[0]!==this.element[0]?h.before(this.element):a.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(j){var h,e,k=this;if(this._isOpen&&!1!==this._trigger("beforeClose",j)){return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){k._trigger("close",j)}):(this.uiDialog.hide(),this._trigger("close",j)),g.ui.dialog.overlay.resize(),this.options.modal&&(h=0,g(".ui-dialog").each(function(){this!==k.uiDialog[0]&&(e=g(this).css("z-index"),isNaN(e)||(h=Math.max(h,e)))}),g.ui.dialog.maxZ=h),this}},isOpen:function(){return this._isOpen},moveToTop:function(j,h){var e,k=this.options;return k.modal&&!j||!k.stack&&!k.modal?this._trigger("focus",h):(k.zIndex>g.ui.dialog.maxZ&&(g.ui.dialog.maxZ=k.zIndex),this.overlay&&(g.ui.dialog.maxZ+=1,g.ui.dialog.overlay.maxZ=g.ui.dialog.maxZ,this.overlay.$el.css("z-index",g.ui.dialog.overlay.maxZ)),e={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},g.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",g.ui.dialog.maxZ),this.element.attr(e),this._trigger("focus",h),this)},open:function(){if(!this._isOpen){var j,h=this.options,e=this.uiDialog;return this._size(),this._position(h.position),e.show(h.show),this.overlay=h.modal?new g.ui.dialog.overlay(this):null,this.moveToTop(!0),j=this.element.find(":tabbable"),j.length||(j=this.uiDialogButtonPane.find(":tabbable"),j.length||(j=e)),j.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(j){var h=this,e=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof j&&null!==j&&g.each(j,function(){return !(e=!0)}),e?(g.each(j,function(l,k){var m,n;k=g.isFunction(k)?{click:k,text:l}:k,k=g.extend({type:"button"},k),n=k.click,k.click=function(){n.apply(h.element[0],arguments)},m=g("<button></button>",k).appendTo(h.uiButtonSet),g.fn.button&&m.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function j(a){return{position:a.position,offset:a.offset}}var h=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,l){g(this).addClass("ui-dialog-dragging"),h._trigger("dragStart",k,j(l))},drag:function(l,k){h._trigger("drag",l,j(k))},stop:function(a,k){e.position=[k.position.left-h.document.scrollLeft(),k.position.top-h.document.scrollTop()],g(this).removeClass("ui-dialog-dragging"),h._trigger("dragStop",a,j(k)),g.ui.dialog.overlay.resize()}})},_makeResizable:function(h){function e(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}h=h===d?this.options.resizable:h;var j=this,k=this.options,m=this.uiDialog.css("position"),l="string"==typeof h?h:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:k.maxWidth,maxHeight:k.maxHeight,minWidth:k.minWidth,minHeight:this._minHeight(),handles:l,start:function(n,a){g(this).addClass("ui-dialog-resizing"),j._trigger("resizeStart",n,e(a))},resize:function(n,a){j._trigger("resize",n,e(a))},stop:function(n,a){g(this).removeClass("ui-dialog-resizing"),k.height=g(this).height(),k.width=g(this).width(),j._trigger("resizeStop",n,e(a)),g.ui.dialog.overlay.resize()}}).css("position",m).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(j){var h,e=[],k=[0,0];j?(("string"==typeof j||"object"==typeof j&&"0" in j)&&(e=j.split?j.split(" "):[j[0],j[1]],1===e.length&&(e[1]=e[0]),g.each(["left","top"],function(l,a){+e[l]===e[l]&&(k[l]=e[l],e[l]=a)}),j={my:e[0]+(0>k[0]?k[0]:"+"+k[0])+" "+e[1]+(0>k[1]?k[1]:"+"+k[1]),at:e.join(" ")}),j=g.extend({},g.ui.dialog.prototype.options.position,j)):j=g.ui.dialog.prototype.options.position,h=this.uiDialog.is(":visible"),h||this.uiDialog.show(),this.uiDialog.position(j),h||this.uiDialog.hide()},_setOptions:function(e){var a=this,h={},j=!1;g.each(e,function(l,k){a._setOption(l,k),l in b&&(j=!0),l in f&&(h[l]=k)}),j&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",h)},_setOption:function(h,e){var j,k,l=this.uiDialog;switch(h){case"buttons":this._createButtons(e);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+e);break;case"dialogClass":l.removeClass(this.options.dialogClass).addClass(c+e);break;case"disabled":e?l.addClass("ui-dialog-disabled"):l.removeClass("ui-dialog-disabled");break;case"draggable":j=l.is(":data(draggable)"),j&&!e&&l.draggable("destroy"),!j&&e&&this._makeDraggable();break;case"position":this._position(e);break;case"resizable":k=l.is(":data(resizable)"),k&&!e&&l.resizable("destroy"),k&&"string"==typeof e&&l.resizable("option","handles",e),k||e===!1||this._makeResizable(e);break;case"title":g(".ui-dialog-title",this.uiDialogTitlebar).html(""+(e||"&#160;"))}this._super(h,e)},_size:function(){var j,h,e,k=this.options,l=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),k.minWidth>k.width&&(k.width=k.minWidth),j=this.uiDialog.css({height:"auto",width:k.width}).outerHeight(),h=Math.max(0,k.minHeight-j),"auto"===k.height?g.support.minHeight?this.element.css({minHeight:h,height:"auto"}):(this.uiDialog.show(),e=this.element.css("height","auto").height(),l||this.uiDialog.hide(),this.element.height(Math.max(e,h))):this.element.height(Math.max(k.height-j,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),g.extend(g.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(h){var a=h.attr("id");return a||(this.uuid+=1,a=this.uuid),"ui-dialog-title-"+a},overlay:function(a){this.$el=g.ui.dialog.overlay.create(a)}}),g.extend(g.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:g.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(h){0===this.instances.length&&(setTimeout(function(){g.ui.dialog.overlay.instances.length&&g(document).bind(g.ui.dialog.overlay.events,function(a){return g(a.target).zIndex()<g.ui.dialog.overlay.maxZ?!1:d})},1),g(window).bind("resize.dialog-overlay",g.ui.dialog.overlay.resize));var e=this.oldInstances.pop()||g("<div>").addClass("ui-widget-overlay");return g(document).bind("keydown.dialog-overlay",function(a){var j=g.ui.dialog.overlay.instances;0!==j.length&&j[j.length-1]===e&&h.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===g.ui.keyCode.ESCAPE&&(h.close(a),a.preventDefault())}),e.appendTo(document.body).css({width:this.width(),height:this.height()}),g.fn.bgiframe&&e.bgiframe(),this.instances.push(e),e},destroy:function(j){var h=g.inArray(j,this.instances),e=0;-1!==h&&this.oldInstances.push(this.instances.splice(h,1)[0]),0===this.instances.length&&g([document,window]).unbind(".dialog-overlay"),j.height(0).width(0).remove(),g.each(this.instances,function(){e=Math.max(e,this.css("z-index"))}),this.maxZ=e},height:function(){var e,a;return g.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a>e?g(window).height()+"px":e+"px"):g(document).height()+"px"},width:function(){var e,a;return g.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),a=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a>e?g(window).width()+"px":e+"px"):g(document).width()+"px"},resize:function(){var a=g([]);g.each(g.ui.dialog.overlay.instances,function(){a=a.add(this)}),a.css({width:0,height:0}).css({width:g.ui.dialog.overlay.width(),height:g.ui.dialog.overlay.height()})}}),g.extend(g.ui.dialog.overlay.prototype,{destroy:function(){g.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(b){var a=!1;b.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,b.proxy(function(c){this.options.disabled&&c.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(c){c.preventDefault()},"click .ui-state-disabled > a":function(c){c.preventDefault()},"click .ui-menu-item:has(a)":function(d){var c=b(d.target).closest(".ui-menu-item");!a&&c.not(".ui-state-disabled").length&&(a=!0,this.select(d),c.has(".ui-menu").length?this.expand(d):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(d){var c=b(d.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(d,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(f,d){var c=this.active||this.element.children(".ui-menu-item").eq(0);d||this.focus(f,c)},blur:function(c){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(c)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(c){b(c.target).closest(".ui-menu").length||this.collapseAll(c),a=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var c=b(this);c.data("ui-menu-submenu-carat")&&c.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function d(h){return h.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c,g,j,l,k,f=!0;switch(e.keyCode){case b.ui.keyCode.PAGE_UP:this.previousPage(e);break;case b.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case b.ui.keyCode.HOME:this._move("first","first",e);break;case b.ui.keyCode.END:this._move("last","last",e);break;case b.ui.keyCode.UP:this.previous(e);break;case b.ui.keyCode.DOWN:this.next(e);break;case b.ui.keyCode.LEFT:this.collapse(e);break;case b.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case b.ui.keyCode.ENTER:case b.ui.keyCode.SPACE:this._activate(e);break;case b.ui.keyCode.ESCAPE:this.collapse(e);break;default:f=!1,g=this.previousFilter||"",j=String.fromCharCode(e.keyCode),l=!1,clearTimeout(this.filterTimer),j===g?l=!0:j=g+j,k=RegExp("^"+d(j),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(b(this).children("a").text())}),c=l&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(j=String.fromCharCode(e.keyCode),k=RegExp("^"+d(j),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(b(this).children("a").text())})),c.length?(this.focus(e,c),c.length>1?(this.previousFilter=j,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter):delete this.previousFilter}f&&e.preventDefault()},_activate:function(c){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(c):this.select(c))},refresh:function(){var e,d=this.options.icons.submenu,c=this.element.find(this.options.menus);c.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var g=b(this),f=g.prev("a"),h=b("<span>").addClass("ui-menu-icon ui-icon "+d).data("ui-menu-submenu-carat",!0);f.attr("aria-haspopup","true").prepend(h),g.attr("aria-labelledby",f.attr("id"))}),e=c.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var f=b(this);/[^\-—–\s]/.test(f.text())||f.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!b.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(g,f){var d,c;this.blur(g,g&&"focus"===g.type),this._scrollIntoView(f),this.active=f.first(),c=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",c.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),g&&"keydown"===g.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),d=f.children(".ui-menu"),d.length&&/^mouse/.test(g.type)&&this._startOpening(d),this.activeMenu=f.parent(),this._trigger("focus",g,{item:f})},_scrollIntoView:function(e){var d,c,f,g,j,h;this._hasScroll()&&(d=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||0,c=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0,f=e.offset().top-this.activeMenu.offset().top-d-c,g=this.activeMenu.scrollTop(),j=this.activeMenu.height(),h=e.height(),0>f?this.activeMenu.scrollTop(g+f):f+h>j&&this.activeMenu.scrollTop(g+f-j+h))},blur:function(d,c){c||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",d,{item:this.active}))},_startOpening:function(c){clearTimeout(this.timer),"true"===c.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(c)},this.delay))},_open:function(d){var c=b.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(d,c){clearTimeout(this.timer),this.timer=this._delay(function(){var e=c?this.element:b(d&&d.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(d),this.activeMenu=e},this.delay)},_close:function(c){c||(c=this.active?this.active.parent():this.element),c.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(d){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(d,c))},expand:function(d){var c=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(d,c)}))},next:function(c){this._move("next","first",c)},previous:function(c){this._move("prev","last",c)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(g,f,d){var c;this.active&&(c="first"===g||"last"===g?this.active["first"===g?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[g+"All"](".ui-menu-item").eq(0)),c&&c.length&&this.active||(c=this.activeMenu.children(".ui-menu-item")[f]()),this.focus(d,c)},nextPage:function(e){var d,c,f;return this.active?(this.isLastItem()||(this._hasScroll()?(c=this.active.offset().top,f=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return d=b(this),0>d.offset().top-c-f}),this.focus(e,d)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var d,c,f;return this.active?(this.isFirstItem()||(this._hasScroll()?(c=this.active.offset().top,f=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return d=b(this),d.offset().top-c+f>0}),this.focus(e,d)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||b(d.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,c)}})})(jQuery);(function(b,a){b.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(c){return c===a?this._value():(this._setOption("value",c),this)},_setOption:function(d,c){"value"===d&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(d,c)},_value:function(){var c=this.options.value;return"number"!=typeof c&&(c=0),Math.min(this.options.max,Math.max(this.min,c))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var d=this.value(),c=this._percentage();this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),this.valueDiv.toggle(d>this.min).toggleClass("ui-corner-right",d===this.options.max).width(c.toFixed(0)+"%"),this.element.attr("aria-valuenow",d)}})})(jQuery);(function(b){var a=5;b.widget("ui.slider",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var d,c,e=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),h="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":"")),this.range=b([]),e.range&&(e.range===!0&&(e.values||(e.values=[this._valueMin(),this._valueMin()]),e.values.length&&2!==e.values.length&&(e.values=[e.values[0],e.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))),c=e.values&&e.values.length||1,d=f.length;c>d;d++){g.push(h)}this.handles=f.add(b(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(j){j.preventDefault()}).mouseenter(function(){e.disabled||b(this).addClass("ui-state-hover")}).mouseleave(function(){b(this).removeClass("ui-state-hover")}).focus(function(){e.disabled?b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")}),this.handles.each(function(j){b(this).data("ui-slider-handle-index",j)}),this._on(this.handles,{keydown:function(k){var j,l,m,q,p=b(k.target).data("ui-slider-handle-index");switch(k.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(k.preventDefault(),!this._keySliding&&(this._keySliding=!0,b(k.target).addClass("ui-state-active"),j=this._start(k,p),j===!1)){return}}switch(q=this.options.step,l=m=this.options.values&&this.options.values.length?this.values(p):this.value(),k.keyCode){case b.ui.keyCode.HOME:m=this._valueMin();break;case b.ui.keyCode.END:m=this._valueMax();break;case b.ui.keyCode.PAGE_UP:m=this._trimAlignValue(l+(this._valueMax()-this._valueMin())/a);break;case b.ui.keyCode.PAGE_DOWN:m=this._trimAlignValue(l-(this._valueMax()-this._valueMin())/a);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(l===this._valueMax()){return}m=this._trimAlignValue(l+q);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(l===this._valueMin()){return}m=this._trimAlignValue(l-q)}this._slide(k,p,m)},keyup:function(k){var j=b(k.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(k,j),this._change(k,j),b(k.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(w){var j,p,x,c,f,e,k,g,q=this,m=this.options;return m.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),j={x:w.pageX,y:w.pageY},p=this._normValueFromMouse(j),x=this._valueMax()-this._valueMin()+1,this.handles.each(function(h){var d=Math.abs(p-q.values(h));x>d&&(x=d,c=b(this),f=h)}),m.range===!0&&this.values(1)===m.min&&(f+=1,c=b(this.handles[f])),e=this._start(w,f),e===!1?!1:(this._mouseSliding=!0,this._handleIndex=f,c.addClass("ui-state-active").focus(),k=c.offset(),g=!b(w.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=g?{left:0,top:0}:{left:w.pageX-k.left-c.width()/2,top:w.pageY-k.top-c.height()/2-(parseInt(c.css("borderTopWidth"),10)||0)-(parseInt(c.css("borderBottomWidth"),10)||0)+(parseInt(c.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(w,f,p),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(f){var d={x:f.pageX,y:f.pageY},c=this._normValueFromMouse(d);return this._slide(f,this._handleIndex,c),!1},_mouseStop:function(c){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(c,this._handleIndex),this._change(c,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(j){var f,d,c,g,h;return"horizontal"===this.orientation?(f=this.elementSize.width,d=j.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(f=this.elementSize.height,d=j.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),c=d/f,c>1&&(c=1),0>c&&(c=0),"vertical"===this.orientation&&(c=1-c),g=this._valueMax()-this._valueMin(),h=this._valueMin()+c*g,this._trimAlignValue(h)},_start:function(f,d){var c={handle:this.handles[d],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values()),this._trigger("start",f,c)},_slide:function(j,f,d){var c,g,h;this.options.values&&this.options.values.length?(c=this.values(f?0:1),2===this.options.values.length&&this.options.range===!0&&(0===f&&d>c||1===f&&c>d)&&(d=c),d!==this.values(f)&&(g=this.values(),g[f]=d,h=this._trigger("slide",j,{handle:this.handles[f],value:d,values:g}),c=this.values(f?0:1),h!==!1&&this.values(f,d,!0))):d!==this.value()&&(h=this._trigger("slide",j,{handle:this.handles[f],value:d}),h!==!1&&this.value(d))},_stop:function(f,d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values()),this._trigger("stop",f,c)},_change:function(f,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values()),this._trigger("change",f,c)}},value:function(c){return arguments.length?(this.options.value=this._trimAlignValue(c),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,d){var c,f,g;if(arguments.length>1){return this.options.values[e]=this._trimAlignValue(d),this._refreshValue(),this._change(null,e),undefined}if(!arguments.length){return this._values()}if(!b.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(e):this.value()}for(c=this.options.values,f=arguments[0],g=0;c.length>g;g+=1){c[g]=this._trimAlignValue(f[g]),this._change(null,g)}this._refreshValue()},_setOption:function(e,d){var c,f=0;switch(b.isArray(this.options.values)&&(f=this.options.values.length),b.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":d?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),c=0;f>c;c+=1){this._change(null,c)}this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var c=this.options.value;return c=this._trimAlignValue(c)},_values:function(g){var f,d,c;if(arguments.length){return f=this.options.values[g],f=this._trimAlignValue(f)}for(d=this.options.values.slice(),c=0;d.length>c;c+=1){d[c]=this._trimAlignValue(d[c])}return d},_trimAlignValue:function(g){if(this._valueMin()>=g){return this._valueMin()}if(g>=this._valueMax()){return this._valueMax()}var f=this.options.step>0?this.options.step:1,d=(g-this._valueMin())%f,c=g-d;return 2*Math.abs(d)>=f&&(c+=d>0?f:-f),parseFloat(c.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var p,g,k,q,c,e=this.options.range,d=this.options,j=this,f=this._animateOff?!1:d.animate,m={};this.options.values&&this.options.values.length?this.handles.each(function(h){g=100*((j.values(h)-j._valueMin())/(j._valueMax()-j._valueMin())),m["horizontal"===j.orientation?"left":"bottom"]=g+"%",b(this).stop(1,1)[f?"animate":"css"](m,d.animate),j.options.range===!0&&("horizontal"===j.orientation?(0===h&&j.range.stop(1,1)[f?"animate":"css"]({left:g+"%"},d.animate),1===h&&j.range[f?"animate":"css"]({width:g-p+"%"},{queue:!1,duration:d.animate})):(0===h&&j.range.stop(1,1)[f?"animate":"css"]({bottom:g+"%"},d.animate),1===h&&j.range[f?"animate":"css"]({height:g-p+"%"},{queue:!1,duration:d.animate}))),p=g}):(k=this.value(),q=this._valueMin(),c=this._valueMax(),g=c!==q?100*((k-q)/(c-q)):0,m["horizontal"===this.orientation?"left":"bottom"]=g+"%",this.handle.stop(1,1)[f?"animate":"css"](m,d.animate),"min"===e&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:g+"%"},d.animate),"max"===e&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-g+"%"},{queue:!1,duration:d.animate}),"min"===e&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:g+"%"},d.animate),"max"===e&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-g+"%"},{queue:!1,duration:d.animate}))}})})(jQuery);(function(b){function a(c){return function(){var d=this.element.val();c.apply(this,arguments),this._refresh(),d!==this.element.val()&&this._trigger("change")}}b.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d={},c=this.element;return b.each(["min","max","step"],function(h,f){var g=c.attr(f);void 0!==g&&g.length&&(d[f]=g)}),d},_events:{keydown:function(c){this._start(c)&&this._keydown(c)&&c.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(c){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",c),void 0)},mousewheel:function(d,c){if(c){if(!this.spinning&&!this._start(d)){return !1}this._spin((c>0?1:-1)*this.options.step,d),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(d)},100),d.preventDefault()}},"mousedown .ui-spinner-button":function(e){function d(){var f=this.element[0]===this.document[0].activeElement;f||(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c}))}var c;c=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),d.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,d.call(this)}),this._start(e)!==!1&&this._repeat(null,b(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(c){return b(c.currentTarget).hasClass("ui-state-active")?this._start(c)===!1?!1:(this._repeat(null,b(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var c=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=c.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(0.5*c.height())&&c.height()>0&&c.height(c.height()),this.options.disabled&&this.disable()},_keydown:function(e){var d=this.options,c=b.ui.keyCode;switch(e.keyCode){case c.UP:return this._repeat(null,1,e),!0;case c.DOWN:return this._repeat(null,-1,e),!0;case c.PAGE_UP:return this._repeat(null,d.page,e),!0;case c.PAGE_DOWN:return this._repeat(null,-d.page,e),!0}return !1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(c){return this.spinning||this._trigger("start",c)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(f,d,c){f=f||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,d,c)},f),this._spin(d*this.options.step,c)},_spin:function(f,d){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+f*this._increment(this.counter)),this.spinning&&this._trigger("spin",d,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(d){var c=this.options.incremental;return c?b.isFunction(c)?c(d):Math.floor(d*d*d/50000-d*d/500+17*d/200+1):1},_precision:function(){var c=this._precisionOf(this.options.step);return null!==this.options.min&&(c=Math.max(c,this._precisionOf(this.options.min))),c},_precisionOf:function(f){var d=""+f,c=d.indexOf(".");return -1===c?0:d.length-c-1},_adjustValue:function(g){var f,d,c=this.options;return f=null!==c.min?c.min:0,d=g-f,d=Math.round(d/c.step)*c.step,g=f+d,g=parseFloat(g.toFixed(this._precision())),null!==c.max&&g>c.max?c.max:null!==c.min&&c.min>g?c.min:g},_stop:function(c){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",c))},_setOption:function(f,d){if("culture"===f||"numberFormat"===f){var c=this._parse(this.element.val());return this.options[f]=d,this.element.val(this._format(c)),void 0}("max"===f||"min"===f||"step"===f)&&"string"==typeof d&&(d=this._parse(d)),this._super(f,d),"disabled"===f&&(d?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:a(function(c){this._super(c),this._value(this.element.val())}),_parse:function(c){return"string"==typeof c&&""!==c&&(c=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(c,10,this.options.culture):+c),""===c||isNaN(c)?null:c},_format:function(c){return""===c?"":window.Globalize&&this.options.numberFormat?Globalize.format(c,this.options.numberFormat,this.options.culture):c},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(f,d){var c;""!==f&&(c=this._parse(f),null!==c&&(d||(c=this._adjustValue(c)),f=this._format(c))),this.element.val(f),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:a(function(c){this._stepUp(c)}),_stepUp:function(c){this._spin((c||1)*this.options.step)},stepDown:a(function(c){this._stepDown(c)}),_stepDown:function(c){this._spin((c||1)*-this.options.step)},pageUp:a(function(c){this._stepUp((c||1)*this.options.page)}),pageDown:a(function(c){this._stepDown((c||1)*this.options.page)}),value:function(c){return arguments.length?(a(this._value).call(this,c),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})})(jQuery);(function(g,d){function c(){return ++f}function b(a){return a.hash.length>1&&a.href.replace(h,"")===location.href.replace(h,"").replace(/\s/g,"%20")}var f=0,h=/#.*$/;g.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var j=this,e=this.options,k=e.active,l=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){g(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){g(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===k&&(l&&this.tabs.each(function(n,m){return g(m).attr("aria-controls")===l?(k=n,!1):d}),null===k&&(k=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===k||-1===k)&&(k=this.tabs.length?0:!1)),k!==!1&&(k=this.tabs.index(this.tabs.eq(k)),-1===k&&(k=e.collapsible?!1:0)),e.active=k,!e.collapsible&&e.active===!1&&this.anchors.length&&(e.active=0),g.isArray(e.disabled)&&(e.disabled=g.unique(e.disabled.concat(g.map(this.tabs.filter(".ui-state-disabled"),function(a){return j.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):g(),this._refresh(),this.active.length&&this.load(e.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):g()}},_tabKeydown:function(j){var e=g(this.document[0].activeElement).closest("li"),k=this.tabs.index(e),l=!0;if(!this._handlePageNav(j)){switch(j.keyCode){case g.ui.keyCode.RIGHT:case g.ui.keyCode.DOWN:k++;break;case g.ui.keyCode.UP:case g.ui.keyCode.LEFT:l=!1,k--;break;case g.ui.keyCode.END:k=this.anchors.length-1;break;case g.ui.keyCode.HOME:k=0;break;case g.ui.keyCode.SPACE:return j.preventDefault(),clearTimeout(this.activating),this._activate(k),d;case g.ui.keyCode.ENTER:return j.preventDefault(),clearTimeout(this.activating),this._activate(k===this.options.active?!1:k),d;default:return}j.preventDefault(),clearTimeout(this.activating),k=this._focusNextTab(k,l),j.ctrlKey||(e.attr("aria-selected","false"),this.tabs.eq(k).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",k)},this.delay))}},_panelKeydown:function(a){this._handlePageNav(a)||a.ctrlKey&&a.keyCode===g.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){return a.altKey&&a.keyCode===g.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):a.altKey&&a.keyCode===g.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):d},_findNextTab:function(k,j){function e(){return k>l&&(k=0),0>k&&(k=l),k}for(var l=this.tabs.length-1;-1!==g.inArray(e(),this.options.disabled);){k=j?k+1:k-1}return k},_focusNextTab:function(j,a){return j=this._findNextTab(j,a),this.tabs.eq(j).focus(),j},_setOption:function(j,a){return"active"===j?(this._activate(a),d):"disabled"===j?(this._setupDisabled(a),d):(this._super(j,a),"collapsible"===j&&(this.element.toggleClass("ui-tabs-collapsible",a),a||this.options.active!==!1||this._activate(0)),"event"===j&&this._setupEvents(a),"heightStyle"===j&&this._setupHeightStyle(a),d)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,a=this.tablist.children(":has(a[href])");e.disabled=g.map(a.filter(".ui-state-disabled"),function(j){return a.index(j)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!g.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=g()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=g()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return g("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=g(),this.anchors.each(function(k,p){var x,q,w,m=g(p).uniqueId().attr("id"),e=g(p).closest("li"),j=e.attr("aria-controls");b(p)?(x=p.hash,q=a.element.find(a._sanitizeSelector(x))):(w=a._tabId(e),x="#"+w,q=a.element.find(x),q.length||(q=a._createPanel(w),q.insertAfter(a.panels[k-1]||a.tablist)),q.attr("aria-live","polite")),q.length&&(a.panels=a.panels.add(q)),j&&e.data("ui-tabs-aria-controls",j),e.attr({"aria-controls":x.substring(1),"aria-labelledby":m}),q.attr("aria-labelledby",m)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(a){return g("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(k){g.isArray(k)&&(k.length?k.length===this.anchors.length&&(k=!0):k=!1);for(var j,e=0;j=this.tabs[e];e++){k===!0||-1!==g.inArray(e,k)?g(j).addClass("ui-state-disabled").attr("aria-disabled","true"):g(j).removeClass("ui-state-disabled").removeAttr("aria-disabled")}this.options.disabled=k},_setupEvents:function(e){var a={click:function(j){j.preventDefault()}};e&&g.each(e.split(" "),function(k,j){a[j]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,a),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(k){var j,e,l=this.element.parent();"fill"===k?(g.support.minHeight||(e=l.css("overflow"),l.css("overflow","hidden")),j=l.height(),this.element.siblings(":visible").each(function(){var n=g(this),m=n.css("position");"absolute"!==m&&"fixed"!==m&&(j-=n.outerHeight(!0))}),e&&l.css("overflow",e),this.element.children().not(this.panels).each(function(){j-=g(this).outerHeight(!0)}),this.panels.each(function(){g(this).height(Math.max(0,j-g(this).innerHeight()+g(this).height()))}).css("overflow","auto")):"auto"===k&&(j=0,this.panels.each(function(){j=Math.max(j,g(this).height("").height())}).height(j))},_eventHandler:function(y){var p=this.options,w=this.active,z=g(y.currentTarget),k=z.closest("li"),e=k[0]===w[0],j=e&&p.collapsible,q=j?g():this._getPanelForTab(k),m=w.length?this._getPanelForTab(w):g(),x={oldTab:w,oldPanel:m,newTab:j?g():k,newPanel:q};y.preventDefault(),k.hasClass("ui-state-disabled")||k.hasClass("ui-tabs-loading")||this.running||e&&!p.collapsible||this._trigger("beforeActivate",y,x)===!1||(p.active=j?!1:this.tabs.index(k),this.active=e?g():k,this.xhr&&this.xhr.abort(),m.length||q.length||g.error("jQuery UI Tabs: Mismatching fragment identifier."),q.length&&this.load(this.tabs.index(k),y),this._toggle(y,x))},_toggle:function(k,j){function e(){q.running=!1,q._trigger("activate",k,j)}function l(){j.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),m.length&&q.options.show?q._show(m,q.options.show,e):(m.show(),e())}var q=this,m=j.newPanel,p=j.oldPanel;this.running=!0,p.length&&this.options.hide?this._hide(p,this.options.hide,function(){j.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),l()}):(j.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),p.hide(),l()),p.attr({"aria-expanded":"false","aria-hidden":"true"}),j.oldTab.attr("aria-selected","false"),m.length&&p.length?j.oldTab.attr("tabIndex",-1):m.length&&this.tabs.filter(function(){return 0===g(this).attr("tabIndex")}).attr("tabIndex",-1),m.attr({"aria-expanded":"true","aria-hidden":"false"}),j.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(k){var j,e=this._findActive(k);e[0]!==this.active[0]&&(e.length||(e=this.active),j=e.find(".ui-tabs-anchor")[0],this._eventHandler({target:j,currentTarget:j,preventDefault:g.noop}))},_findActive:function(a){return a===!1?g():this.tabs.eq(a)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){g.data(this,"ui-tabs-destroy")?g(this).remove():g(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=g(this),a=e.data("ui-tabs-aria-controls");a?e.attr("aria-controls",a):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(j){var e=this.options.disabled;e!==!1&&(j===d?e=!1:(j=this._getIndex(j),e=g.isArray(e)?g.map(e,function(a){return a!==j?a:null}):g.map(this.tabs,function(k,a){return a!==j?a:null})),this._setupDisabled(e))},disable:function(j){var e=this.options.disabled;if(e!==!0){if(j===d){e=!0}else{if(j=this._getIndex(j),-1!==g.inArray(j,e)){return}e=g.isArray(e)?g.merge([j],e).sort():[j]}this._setupDisabled(e)}},load:function(e,a){e=this._getIndex(e);var k=this,p=this.tabs.eq(e),l=p.find(".ui-tabs-anchor"),m=this._getPanelForTab(p),j={tab:p,panel:m};b(l[0])||(this.xhr=g.ajax(this._ajaxSettings(l,a,j)),this.xhr&&"canceled"!==this.xhr.statusText&&(p.addClass("ui-tabs-loading"),m.attr("aria-busy","true"),this.xhr.success(function(n){setTimeout(function(){m.html(n),k._trigger("load",a,j)},1)}).complete(function(o,n){setTimeout(function(){"abort"===n&&k.panels.stop(!1,!0),p.removeClass("ui-tabs-loading"),m.removeAttr("aria-busy"),o===k.xhr&&delete k.xhr},1)})))},_ajaxSettings:function(k,j,e){var l=this;return{url:k.attr("href"),beforeSend:function(a,m){return l._trigger("beforeLoad",j,g.extend({jqXHR:a,ajaxSettings:m},e))}}},_getPanelForTab:function(e){var a=g(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}}),g.uiBackCompat!==!1&&(g.ui.tabs.prototype._ui=function(j,a){return{tab:j,panel:a,index:this.anchors.index(j)}},g.widget("ui.tabs",g.ui.tabs,{url:function(j,a){this.anchors.eq(j).attr("href",a)}}),g.widget("ui.tabs",g.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var a=this;this._on({tabsbeforeload:function(e,j){return g.data(j.tab[0],"cache.tabs")?(e.preventDefault(),d):(j.jqXHR.success(function(){a.options.cache&&g.data(j.tab[0],"cache.tabs",!0)}),d)}})},_ajaxSettings:function(k,j,e){var l=this.options.ajaxOptions;return g.extend({},l,{error:function(n,m){try{l.error(n,m,e.tab.closest("li").index(),e.tab[0])}catch(a){}}},this._superApply(arguments))},_setOption:function(j,a){"cache"===j&&a===!1&&this.anchors.removeData("cache.tabs"),this._super(j,a)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs"),this._superApply(arguments)}}),g.widget("ui.tabs",g.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),g.widget("ui.tabs",g.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(m,l){if(m.target===this.element[0]&&this.options.spinner){var k=l.tab.find("span"),j=k.html();k.html(this.options.spinner),l.jqXHR.complete(function(){k.html(j)})}}})}}),g.widget("ui.tabs",g.ui.tabs,{options:{enable:null,disable:null},enable:function(k){var j,e=this.options;(k&&e.disabled===!0||g.isArray(e.disabled)&&-1!==g.inArray(k,e.disabled))&&(j=!0),this._superApply(arguments),j&&this._trigger("enable",null,this._ui(this.anchors[k],this.panels[k]))},disable:function(k){var j,e=this.options;(k&&e.disabled===!1||g.isArray(e.disabled)&&-1===g.inArray(k,e.disabled))&&(j=!0),this._superApply(arguments),j&&this._trigger("disable",null,this._ui(this.anchors[k],this.panels[k]))}}),g.widget("ui.tabs",g.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(k,j,p){p===d&&(p=this.anchors.length);var w,q,u=this.options,m=g(u.tabTemplate.replace(/#\{href\}/g,k).replace(/#\{label\}/g,j)),e=k.indexOf("#")?this._tabId(m):k.replace("#","");return m.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),m.attr("aria-controls",e),w=p>=this.tabs.length,q=this.element.find("#"+e),q.length||(q=this._createPanel(e),w?p>0?q.insertAfter(this.panels.eq(-1)):q.appendTo(this.element):q.insertBefore(this.panels[p])),q.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),w?m.appendTo(this.tablist):m.insertBefore(this.tabs[p]),u.disabled=g.map(u.disabled,function(a){return a>=p?++a:a}),this.refresh(),1===this.tabs.length&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[p],this.panels[p])),this},remove:function(k){k=this._getIndex(k);var j=this.options,e=this.tabs.eq(k).remove(),l=this._getPanelForTab(e).remove();return e.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(k+(this.anchors.length>k+1?1:-1)),j.disabled=g.map(g.grep(j.disabled,function(a){return a!==k}),function(a){return a>=k?--a:a}),this.refresh(),this._trigger("remove",null,this._ui(e.find("a")[0],l[0])),this}}),g.widget("ui.tabs",g.ui.tabs,{length:function(){return this.anchors.length}}),g.widget("ui.tabs",g.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(j){var e=j.is("li")?j.find("a[href]"):j;return e=e[0],g(e).closest("li").attr("aria-controls")||e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+c()}}),g.widget("ui.tabs",g.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(a){return g(this.options.panelTemplate).attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),g.widget("ui.tabs",g.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==d&&(a.active=-1===a.selected?!1:a.selected),this._super(),a.selected=a.active,a.selected===!1&&(a.selected=-1)},_setOption:function(k,j){if("selected"!==k){return this._super(k,j)}var a=this.options;this._super("active",-1===j?!1:j),a.selected=a.active,a.selected===!1&&(a.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),g.widget("ui.tabs",g.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(o,l,k){var j,m,p=this._superApply(arguments);return p?("beforeActivate"===o?(j=k.newTab.length?k.newTab:k.oldTab,m=k.newPanel.length?k.newPanel:k.oldPanel,p=this._super("select",l,{tab:j.find(".ui-tabs-anchor")[0],panel:m[0],index:j.closest("li").index()})):"activate"===o&&k.newTab.length&&(p=this._super("show",l,{tab:k.newTab.find(".ui-tabs-anchor")[0],panel:k.newPanel[0],index:k.newTab.closest("li").index()})),p):!1}}),g.widget("ui.tabs",g.ui.tabs,{select:function(a){if(a=this._getIndex(a),-1===a){if(!this.options.collapsible||-1===this.options.selected){return}a=this.options.selected}this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var a=0;g.widget("ui.tabs",g.ui.tabs,{options:{cookie:null},_create:function(){var k,j=this.options;null==j.active&&j.cookie&&(k=parseInt(this._cookie(),10),-1===k&&(k=!1),j.active=k),this._super()},_cookie:function(j){var e=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++a)];return arguments.length&&(e.push(j===!1?-1:j),e.push(this.options.cookie)),g.cookie.apply(null,e)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),g.widget("ui.tabs",g.ui.tabs,{_trigger:function(k,j,e){var l=g.extend({},e);return"load"===k&&(l.panel=l.panel[0],l.tab=l.tab.find(".ui-tabs-anchor")[0]),this._super(k,j,l)}}),g.widget("ui.tabs",g.ui.tabs,{options:{fx:null},_getFx:function(){var k,j,e=this.options.fx;return e&&(g.isArray(e)?(k=e[0],j=e[1]):k=j=e),e?{show:j,hide:k}:null},_toggle:function(q,k){function j(){w.running=!1,w._trigger("activate",q,k)}function m(){k.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),p.length&&l.show?p.animate(l.show,l.show.duration,function(){j()}):(p.show(),j())}var w=this,p=k.newPanel,u=k.oldPanel,l=this._getFx();return l?(w.running=!0,u.length&&l.hide?u.animate(l.hide,l.hide.duration,function(){k.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),m()}):(k.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u.hide(),m()),d):this._super(q,k)}}))})(jQuery);(function(f){function d(h,g){var e=(h.attr("aria-describedby")||"").split(/\s+/);e.push(g),h.data("ui-tooltip-id",g).attr("aria-describedby",f.trim(e.join(" ")))}function c(h){var g=h.data("ui-tooltip-id"),e=(h.attr("aria-describedby")||"").split(/\s+/),j=f.inArray(g,e);-1!==j&&e.splice(j,1),h.removeData("ui-tooltip-id"),e=f.trim(e.join(" ")),e?h.attr("aria-describedby",e):h.removeAttr("aria-describedby")}var b=0;f.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return f(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(h,g){var e=this;return"disabled"===h?(this[g?"_disable":"_enable"](),this.options[h]=g,void 0):(this._super(h,g),"content"===h&&f.each(this.tooltips,function(j,a){e._updateContent(a)}),void 0)},_disable:function(){var a=this;f.each(this.tooltips,function(g,e){var h=f.Event("blur");h.target=h.currentTarget=e[0],a.close(h,!0)}),this.element.find(this.options.items).andSelf().each(function(){var e=f(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var a=f(this);a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title"))})},open:function(h){var g=this,e=f(h?h.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),h&&"mouseover"===h.type&&e.parents().each(function(){var k,j=f(this);j.data("ui-tooltip-open")&&(k=f.Event("blur"),k.target=k.currentTarget=this,g.close(k,!0)),j.attr("title")&&(j.uniqueId(),g.parents[this.id]={element:this,title:j.attr("title")},j.attr("title",""))}),this._updateContent(e,h))},_updateContent:function(l,j){var h,g=this.options.content,k=this,m=j?j.type:null;return"string"==typeof g?this._open(j,l,g):(h=g.call(l[0],function(a){l.data("ui-tooltip-open")&&k._delay(function(){j&&(j.type=m),this._open(j,l,a)})}),h&&this._open(j,l,h),void 0)},_open:function(j,g,m){function u(a){e.of=a,p.is(":hidden")||p.position(e)}var p,q,k,e=f.extend({},this.options.position);if(m){if(p=this._find(g),p.length){return p.find(".ui-tooltip-content").html(m),void 0}g.is("[title]")&&(j&&"mouseover"===j.type?g.attr("title",""):g.removeAttr("title")),p=this._tooltip(g),d(g,p.attr("id")),p.find(".ui-tooltip-content").html(m),this.options.track&&j&&/^mouse/.test(j.type)?(this._on(this.document,{mousemove:u}),u(j)):p.position(f.extend({of:g},this.options.position)),p.hide(),this._show(p,this.options.show),this.options.show&&this.options.show.delay&&(k=setInterval(function(){p.is(":visible")&&(u(e.of),clearInterval(k))},f.fx.interval)),this._trigger("open",j,{tooltip:p}),q={keyup:function(h){if(h.keyCode===f.ui.keyCode.ESCAPE){var a=f.Event(h);a.currentTarget=g[0],this.close(a,!0)}},remove:function(){this._removeTooltip(p)}},j&&"mouseover"!==j.type||(q.mouseleave="close"),j&&"focusin"!==j.type||(q.focusout="close"),this._on(!0,g,q)}},close:function(g){var e=this,h=f(g?g.currentTarget:this.element),j=this._find(h);this.closing||(h.data("ui-tooltip-title")&&h.attr("title",h.data("ui-tooltip-title")),c(h),j.stop(!0),this._hide(j,this.options.hide,function(){e._removeTooltip(f(this))}),h.removeData("ui-tooltip-open"),this._off(h,"mouseleave focusout keyup"),h[0]!==this.element[0]&&this._off(h,"remove"),this._off(this.document,"mousemove"),g&&"mouseleave"===g.type&&f.each(this.parents,function(k,a){f(a.element).attr("title",a.title),delete e.parents[k]}),this.closing=!0,this._trigger("close",g,{tooltip:j}),this.closing=!1)},_tooltip:function(e){var a="ui-tooltip-"+b++,g=f("<div>").attr({id:a,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return f("<div>").addClass("ui-tooltip-content").appendTo(g),g.appendTo(this.document[0].body),f.fn.bgiframe&&g.bgiframe(),this.tooltips[a]=e,g},_find:function(e){var a=e.data("ui-tooltip-id");return a?f("#"+a):f()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;f.each(this.tooltips,function(g,e){var h=f.Event("blur");h.target=h.currentTarget=e[0],a.close(h,!0),f("#"+g).remove(),e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(f,d){var c=f.uiBackCompat!==!1,b="ui-effects-";f.effects={effect:{}},function(E,x){function C(n,m,l){var h=A[m.type]||{};return null==n?l||!m.def?null:m.def:(n=h.floor?~~n:parseFloat(n),isNaN(n)?m.def:h.mod?(n+h.mod)%h.mod:0>n?0:n>h.max?h.max:n)}function F(m){var h=D(),l=h._rgba=[];return m=m.toLowerCase(),q(w,function(p,H){var u,G=H.re.exec(m),s=G&&H.parse(G),a=H.space||"rgba";return s?(u=h[a](s),h[B[a].cache]=u[B[a].cache],l=h._rgba=u._rgba,!1):x}),l.length?("0,0,0,0"===l.join()&&E.extend(l,e.transparent),h):e[m]}function k(l,h,a){return a=(a+1)%1,1>6*a?l+6*(h-l)*a:1>2*a?h:2>3*a?l+6*(h-l)*(2/3-a):l}var e,j="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),y=/^([\-+])=\s*(\d+\.?\d*)/,w=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],D=E.Color=function(n,l,h,m){return new E.Color.fn.parse(n,l,h,m)},B={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},A={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},g=D.support={},z=E("<p>")[0],q=E.each;z.style.cssText="background-color:rgba(1,1,1,.5)",g.rgba=z.style.backgroundColor.indexOf("rgba")>-1,q(B,function(h,a){a.cache="_"+h,a.props.alpha={idx:3,type:"percent",def:1}}),D.fn=E.extend(D.prototype,{parse:function(H,G,m,a){if(H===x){return this._rgba=[null,null,null,null],this}(H.jquery||H.nodeType)&&(H=E(H).css(G),G=x);var u=this,s=E.type(H),r=this._rgba=[];return G!==x&&(H=[H,G,m,a],s="array"),"string"===s?this.parse(F(H)||e._default):"array"===s?(q(B.rgba.props,function(l,h){r[h.idx]=C(H[h.idx],h)}),this):"object"===s?(H instanceof D?q(B,function(l,h){H[h.cache]&&(u[h.cache]=H[h.cache].slice())}):q(B,function(l,h){var n=h.cache;q(h.props,function(p,o){if(!u[n]&&h.to){if("alpha"===p||null==H[p]){return}u[n]=h.to(u._rgba)}u[n][o.idx]=C(H[p],o,!0)}),u[n]&&0>f.inArray(null,u[n].slice(0,3))&&(u[n][3]=1,h.from&&(u._rgba=h.from(u[n])))}),this):x},is:function(n){var l=D(n),h=!0,m=this;return q(B,function(p,u){var a,s=l[u.cache];return s&&(a=m[u.cache]||u.to&&u.to(m._rgba)||[],q(u.props,function(r,o){return null!=s[o.idx]?h=s[o.idx]===a[o.idx]:x})),h}),h},_space:function(){var h=[],a=this;return q(B,function(m,l){a[l.cache]&&h.push(m)}),h.pop()},transition:function(G,l){var a=D(G),p=a._space(),I=B[p],u=0===this.alpha()?D("transparent"):this,H=u[I.cache]||I.to(u._rgba),m=H.slice();return a=a[I.cache],q(I.props,function(L,J){var M=J.idx,K=H[M],h=a[M],o=A[J.type]||{};null!==h&&(null===K?m[M]=h:(o.mod&&(h-K>o.mod/2?K+=o.mod:K-h>o.mod/2&&(K-=o.mod)),m[M]=C((h-K)*l+K,J)))}),this[p](m)},blend:function(n){if(1===this._rgba[3]){return this}var l=this._rgba.slice(),h=l.pop(),m=D(n)._rgba;return D(E.map(l,function(o,a){return(1-h)*m[a]+h*o}))},toRgbaString:function(){var h="rgba(",a=E.map(this._rgba,function(m,l){return null==m?l>2?1:0:m});return 1===a[3]&&(a.pop(),h="rgb("),h+a.join()+")"},toHslaString:function(){var h="hsla(",a=E.map(this.hsla(),function(m,l){return null==m&&(m=l>2?1:0),l&&3>l&&(m=Math.round(100*m)+"%"),m});return 1===a[3]&&(a.pop(),h="hsl("),h+a.join()+")"},toHexString:function(m){var l=this._rgba.slice(),h=l.pop();return m&&l.push(~~(255*h)),"#"+E.map(l,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),D.fn.parse.prototype=D.fn,B.hsla.to=function(K){if(null==K[0]||null==K[1]||null==K[2]){return[null,null,null,K[3]]}var O,I,M=K[0]/255,P=K[1]/255,G=K[2]/255,m=K[3],p=Math.max(M,P,G),J=Math.min(M,P,G),H=p-J,N=p+J,L=0.5*N;return O=J===p?0:M===p?60*(P-G)/H+360:P===p?60*(G-M)/H+120:60*(M-P)/H+240,I=0===L||1===L?L:0.5>=L?H/N:H/(2-N),[Math.round(O)%360,I,L,null==m?1:m]},B.hsla.from=function(u){if(null==u[0]||null==u[1]||null==u[2]){return[null,null,null,u[3]]}var m=u[0]/360,l=u[1],h=u[2],n=u[3],p=0.5>=h?h*(1+l):h+l-h*l,G=2*h-p;return[Math.round(255*k(G,p,m+1/3)),Math.round(255*k(G,p,m)),Math.round(255*k(G,p,m-1/3)),n]},q(B,function(p,h){var G=h.props,m=h.cache,u=h.to,a=h.from;D.fn[p]=function(o){if(u&&!this[m]&&(this[m]=u(this._rgba)),o===x){return this[m].slice()}var n,l=E.type(o),H="array"===l||"object"===l?o:arguments,r=this[m].slice();return q(G,function(J,I){var s=H["object"===l?J:I.idx];null==s&&(s=r[I.idx]),r[I.idx]=C(s,I)}),a?(n=D(a(r)),n[m]=r,n):D(r)},q(G,function(n,l){D.fn[n]||(D.fn[n]=function(J){var M,K=E.type(J),L="alpha"===n?this._hsla?"hsla":"rgba":p,H=this[L](),I=H[l.idx];return"undefined"===K?I:("function"===K&&(J=J.call(this,I),K=E.type(J)),null==J&&l.empty?this:("string"===K&&(M=y.exec(J),M&&(J=I+parseFloat(M[2])*("+"===M[1]?1:-1))),H[l.idx]=J,this[L](H)))})})}),q(j,function(h,a){E.cssHooks[a]={set:function(G,p){var I,u,H="";if("string"!==E.type(p)||(I=F(p))){if(p=D(I||p),!g.rgba&&1!==p._rgba[3]){for(u="backgroundColor"===a?G.parentNode:G;(""===H||"transparent"===H)&&u&&u.style;){try{H=E.css(u,"backgroundColor"),u=u.parentNode}catch(s){}}p=p.blend(H&&"transparent"!==H?H:"_default")}p=p.toRgbaString()}try{G.style[a]=p}catch(m){}}},E.fx.step[a]=function(l){l.colorInit||(l.start=D(l.elem,a),l.end=D(l.end),l.colorInit=!0),E.cssHooks[a].set(l.elem,l.start.transition(l.end,l.pos))}}),E.cssHooks.borderColor={expand:function(h){var a={};return q(["Top","Right","Bottom","Left"],function(m,l){a["border"+l+"Color"]=h}),a}},e=E.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function g(){var m,l,k=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(k&&k.length&&k[0]&&k[k[0]]){for(l=k.length;l--;){m=k[l],"string"==typeof k[m]&&(n[f.camelCase(m)]=k[m])}}else{for(m in k){"string"==typeof k[m]&&(n[m]=k[m])}}return n}function e(m,l){var k,n,o={};for(k in l){n=l[k],m[k]!==n&&(j[k]||(f.fx.step[k]||!isNaN(parseFloat(n)))&&(o[k]=n))}return o}var h=["add","remove","toggle"],j={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};f.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(k,a){f.fx.step[a]=function(l){("none"!==l.end&&!l.setAttr||1===l.pos&&!l.setAttr)&&(jQuery.style(l.elem,a,l.end),l.setAttr=!0)}}),f.effects.animateClass=function(a,p,l,m){var k=f.speed(p,l,m);return this.queue(function(){var w,s=f(this),u=s.attr("class")||"",q=k.children?s.find("*").andSelf():s;q=q.map(function(){var n=f(this);return{el:n,start:g.call(this)}}),w=function(){f.each(h,function(o,n){a[n]&&s[n+"Class"](a[n])})},w(),q=q.map(function(){return this.end=g.call(this.el[0]),this.diff=e(this.start,this.end),this}),s.attr("class",u),q=q.map(function(){var r=this,o=f.Deferred(),n=jQuery.extend({},k,{queue:!1,complete:function(){o.resolve(r)}});return this.el.animate(this.diff,n),o.promise()}),f.when.apply(f,q.get()).done(function(){w(),f.each(arguments,function(){var n=this.el;f.each(this.diff,function(o){n.css(o,"")})}),k.complete.call(s[0])})})},f.fn.extend({_addClass:f.fn.addClass,addClass:function(m,l,k,n){return l?f.effects.animateClass.call(this,{add:m},l,k,n):this._addClass(m)},_removeClass:f.fn.removeClass,removeClass:function(m,l,k,n){return l?f.effects.animateClass.call(this,{remove:m},l,k,n):this._removeClass(m)},_toggleClass:f.fn.toggleClass,toggleClass:function(l,k,m,p,o){return"boolean"==typeof k||k===d?m?f.effects.animateClass.call(this,k?{add:l}:{remove:l},m,p,o):this._toggleClass(l,k):f.effects.animateClass.call(this,{toggle:l},k,m,p)},switchClass:function(m,l,k,o,p){return f.effects.animateClass.call(this,{add:l,remove:m},k,o,p)}})}(),function(){function a(j,h,g,k){return f.isPlainObject(j)&&(h=j,j=j.effect),j={effect:j},null==h&&(h={}),f.isFunction(h)&&(k=h,g=null,h={}),("number"==typeof h||f.fx.speeds[h])&&(k=g,g=h,h={}),f.isFunction(g)&&(k=g,g=null),h&&f.extend(j,h),g=g||h.duration,j.duration=f.fx.off?0:"number"==typeof g?g:g in f.fx.speeds?f.fx.speeds[g]:f.fx.speeds._default,j.complete=k||h.complete,j}function e(g){return !g||"number"==typeof g||f.fx.speeds[g]?!0:"string"!=typeof g||f.effects.effect[g]?!1:c&&f.effects[g]?!1:!0}f.extend(f.effects,{version:"1.9.2",save:function(j,h){for(var g=0;h.length>g;g++){null!==h[g]&&j.data(b+h[g],j[0].style[h[g]])}},restore:function(j,g){var h,k;for(k=0;g.length>k;k++){null!==g[k]&&(h=j.data(b+g[k]),h===d&&(h=""),j.css(g[k],h))}},setMode:function(h,g){return"toggle"===g&&(g=h.is(":hidden")?"show":"hide"),g},getBaseline:function(k,j){var h,g;switch(k[0]){case"top":h=0;break;case"middle":h=0.5;break;case"bottom":h=1;break;default:h=k[0]/j.height}switch(k[1]){case"left":g=0;break;case"center":g=0.5;break;case"right":g=1;break;default:g=k[1]/j.width}return{x:g,y:h}},createWrapper:function(j){if(j.parent().is(".ui-effects-wrapper")){return j.parent()}var h={width:j.outerWidth(!0),height:j.outerHeight(!0),"float":j.css("float")},g=f("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k={width:j.width(),height:j.height()},m=document.activeElement;try{m.id}catch(l){m=document.body}return j.wrap(g),(j[0]===m||f.contains(j[0],m))&&f(m).focus(),g=j.parent(),"static"===j.css("position")?(g.css({position:"relative"}),j.css({position:"relative"})):(f.extend(h,{position:j.css("position"),zIndex:j.css("z-index")}),f.each(["top","left","bottom","right"],function(o,n){h[n]=j.css(n),isNaN(parseInt(h[n],10))&&(h[n]="auto")}),j.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),j.css(k),g.css(h).show()},removeWrapper:function(h){var g=document.activeElement;return h.parent().is(".ui-effects-wrapper")&&(h.parent().replaceWith(h),(h[0]===g||f.contains(h[0],g))&&f(g).focus()),h},setTransition:function(j,h,g,k){return k=k||{},f.each(h,function(m,l){var o=j.cssUnit(l);o[0]>0&&(k[l]=o[0]*g+o[1])}),k}}),f.fn.extend({effect:function(){function j(o){function h(){f.isFunction(w)&&w.call(q[0]),f.isFunction(o)&&o()}var q=f(this),w=g.complete,u=g.mode;(q.is(":hidden")?"hide"===u:"show"===u)?h():m.call(q[0],g,h)}var g=a.apply(this,arguments),p=g.mode,l=g.queue,m=f.effects.effect[g.effect],k=!m&&c&&f.effects[g.effect];return f.fx.off||!m&&!k?p?this[p](g.duration,g.complete):this.each(function(){g.complete&&g.complete.call(this)}):m?l===!1?this.each(j):this.queue(l||"fx",j):k.call(this,{options:g,duration:g.duration,callback:g.complete,mode:g.mode})},_show:f.fn.show,show:function(h){if(e(h)){return this._show.apply(this,arguments)}var g=a.apply(this,arguments);return g.mode="show",this.effect.call(this,g)},_hide:f.fn.hide,hide:function(h){if(e(h)){return this._hide.apply(this,arguments)}var g=a.apply(this,arguments);return g.mode="hide",this.effect.call(this,g)},__toggle:f.fn.toggle,toggle:function(h){if(e(h)||"boolean"==typeof h||f.isFunction(h)){return this.__toggle.apply(this,arguments)}var g=a.apply(this,arguments);return g.mode="toggle",this.effect.call(this,g)},cssUnit:function(j){var h=this.css(j),g=[];return f.each(["em","px","%","pt"],function(l,k){h.indexOf(k)>0&&(g=[parseFloat(h),k])}),g}})}(),function(){var a={};f.each(["Quad","Cubic","Quart","Quint","Expo"],function(h,g){a[g]=function(e){return Math.pow(e,h+2)}}),f.extend(a,{Sine:function(g){return 1-Math.cos(g*Math.PI/2)},Circ:function(g){return 1-Math.sqrt(1-g*g)},Elastic:function(g){return 0===g||1===g?g:-Math.pow(2,8*(g-1))*Math.sin((80*(g-1)-7.5)*Math.PI/15)},Back:function(g){return g*g*(3*g-2)},Bounce:function(j){for(var h,g=4;((h=Math.pow(2,--g))-1)/11>j;){}return 1/Math.pow(4,3-g)-7.5625*Math.pow((3*h-2)/22-j,2)}}),f.each(a,function(g,e){f.easing["easeIn"+g]=e,f.easing["easeOut"+g]=function(h){return 1-e(1-h)},f.easing["easeInOut"+g]=function(h){return 0.5>h?e(2*h)/2:1-e(-2*h+2)/2}})}()}(jQuery);(function(c){var b=/up|down|vertical/,a=/up|left|vertical|horizontal/;c.effects.effect.blind=function(D,G){var q,e,k,x=c(this),y=["position","top","bottom","left","right","height","width"],F=c.effects.setMode(x,D.mode||"hide"),B=D.direction||"up",C=b.test(B),j=C?"height":"width",A=C?"top":"left",w=a.test(B),z={},E="show"===F;x.parent().is(".ui-effects-wrapper")?c.effects.save(x.parent(),y):c.effects.save(x,y),x.show(),q=c.effects.createWrapper(x).css({overflow:"hidden"}),e=q[j](),k=parseFloat(q.css(A))||0,z[j]=E?e:0,w||(x.css(C?"bottom":"right",0).css(C?"top":"left","auto").css({position:"absolute"}),z[A]=E?k:e+k),E&&(q.css(j,0),w||q.css(A,k+e)),q.animate(z,{duration:D.duration,easing:D.easing,queue:!1,complete:function(){"hide"===F&&x.hide(),c.effects.restore(x,y),c.effects.removeWrapper(x),G()}})}})(jQuery);(function(a){a.effects.effect.bounce=function(q,E){var L,w,B,x=a(this),A=["position","top","bottom","left","right","height","width"],D=a.effects.setMode(x,q.mode||"effect"),F="hide"===D,k="show"===D,I=q.direction||"up",J=q.distance,z=q.times||5,H=2*z+(k||F?1:0),C=q.duration/H,G=q.easing,j="up"===I||"down"===I?"top":"left",e="up"===I||"left"===I,K=x.queue(),M=K.length;for((k||F)&&A.push("opacity"),a.effects.save(x,A),x.show(),a.effects.createWrapper(x),J||(J=x["top"===j?"outerHeight":"outerWidth"]()/3),k&&(B={opacity:1},B[j]=0,x.css("opacity",0).css(j,e?2*-J:2*J).animate(B,C,G)),F&&(J/=Math.pow(2,z-1)),B={},B[j]=0,L=0;z>L;L++){w={},w[j]=(e?"-=":"+=")+J,x.animate(w,C,G).animate(B,C,G),J=F?2*J:J/2}F&&(w={opacity:0},w[j]=(e?"-=":"+=")+J,x.animate(w,C,G)),x.queue(function(){F&&x.hide(),a.effects.restore(x,A),a.effects.removeWrapper(x),E()}),M>1&&K.splice.apply(K,[1,0].concat(K.splice(M,H+1))),x.dequeue()}})(jQuery);(function(a){a.effects.effect.clip=function(B,m){var z,C,j,b=a(this),g=["position","top","bottom","left","right","height","width"],q=a.effects.setMode(b,B.mode||"hide"),k="show"===q,A=B.direction||"vertical",x="vertical"===A,y=x?"height":"width",e=x?"top":"left",w={};a.effects.save(b,g),b.show(),z=a.effects.createWrapper(b).css({overflow:"hidden"}),C="IMG"===b[0].tagName?z:b,j=C[y](),k&&(C.css(y,0),C.css(e,j/2)),w[y]=k?j:0,w[e]=k?0:j/2,C.animate(w,{queue:!1,duration:B.duration,easing:B.easing,complete:function(){k||b.hide(),a.effects.restore(b,g),a.effects.removeWrapper(b),m()}})}})(jQuery);(function(a){a.effects.effect.drop=function(q,g){var m,w=a(this),e=["position","top","bottom","left","right","opacity","height","width"],b=a.effects.setMode(w,q.mode||"hide"),c="show"===b,j=q.direction||"left",f="up"===j||"down"===j?"top":"left",p="up"===j||"left"===j?"pos":"neg",k={opacity:c?1:0};a.effects.save(w,e),w.show(),a.effects.createWrapper(w),m=q.distance||w["top"===f?"outerHeight":"outerWidth"](!0)/2,c&&w.css("opacity",0).css(f,"pos"===p?-m:m),k[f]=(c?"pos"===p?"+=":"-=":"pos"===p?"-=":"+=")+m,w.animate(k,{queue:!1,duration:q.duration,easing:q.easing,complete:function(){"hide"===b&&w.hide(),a.effects.restore(w,e),a.effects.removeWrapper(w),g()}})}})(jQuery);(function(a){a.effects.effect.explode=function(q,E){function L(){K.push(this),K.length===I*J&&w()}function w(){z.css({visibility:"visible"}),a(K).remove(),C||z.hide(),E()}var B,x,A,F,D,k,I=q.pieces?Math.round(Math.sqrt(q.pieces)):3,J=I,z=a(this),H=a.effects.setMode(z,q.mode||"hide"),C="show"===H,G=z.show().css("visibility","hidden").offset(),j=Math.ceil(z.outerWidth()/J),e=Math.ceil(z.outerHeight()/I),K=[];for(B=0;I>B;B++){for(F=G.top+B*e,k=B-(I-1)/2,x=0;J>x;x++){A=G.left+x*j,D=x-(J-1)/2,z.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-x*j,top:-B*e}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:j,height:e,left:A+(C?D*j:0),top:F+(C?k*e:0),opacity:C?0:1}).animate({left:A+(C?0:D*j),top:F+(C?0:k*e),opacity:C?1:0},q.duration||500,q.easing,L)}}}})(jQuery);(function(a){a.effects.effect.fade=function(d,c){var b=a(this),e=a.effects.setMode(b,d.mode||"toggle");b.animate({opacity:e},{queue:!1,duration:d.duration,easing:d.easing,complete:c})}})(jQuery);(function(a){a.effects.effect.fold=function(G,x){var D,H,k=a(this),b=["position","top","bottom","left","right","height","width"],j=a.effects.setMode(k,G.mode||"hide"),y="show"===j,w="hide"===j,F=G.size||15,B=/([0-9]+)%/.exec(F),C=!!G.horizFirst,e=y!==C,A=e?["width","height"]:["height","width"],q=G.duration/2,z={},E={};a.effects.save(k,b),k.show(),D=a.effects.createWrapper(k).css({overflow:"hidden"}),H=e?[D.width(),D.height()]:[D.height(),D.width()],B&&(F=parseInt(B[1],10)/100*H[w?0:1]),y&&D.css(C?{height:0,width:F}:{height:F,width:0}),z[A[0]]=y?H[0]:F,E[A[1]]=y?H[1]:0,D.animate(z,q,G.easing).animate(E,q,G.easing,function(){w&&k.hide(),a.effects.restore(k,b),a.effects.removeWrapper(k),x()})}})(jQuery);(function(a){a.effects.effect.highlight=function(d,c){var b=a(this),e=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(b,d.mode||"show"),f={backgroundColor:b.css("backgroundColor")};"hide"===g&&(f.opacity=0),a.effects.save(b,e),b.show().css({backgroundImage:"none",backgroundColor:d.color||"#ffff99"}).animate(f,{queue:!1,duration:d.duration,easing:d.easing,complete:function(){"hide"===g&&b.hide(),a.effects.restore(b,e),c()}})}})(jQuery);(function(a){a.effects.effect.pulsate=function(z,k){var x,A=a(this),g=a.effects.setMode(A,z.mode||"show"),b="show"===g,f="hide"===g,m=b||"hide"===g,j=2*(z.times||5)+(m?1:0),y=z.duration/j,q=0,w=A.queue(),e=w.length;for((b||!A.is(":visible"))&&(A.css("opacity",0).show(),q=1),x=1;j>x;x++){A.animate({opacity:q},y,z.easing),q=1-q}A.animate({opacity:q},y,z.easing),A.queue(function(){f&&A.hide(),k()}),e>1&&w.splice.apply(w,[1,0].concat(w.splice(e,j+1))),A.dequeue()}})(jQuery);(function(a){a.effects.effect.puff=function(d,c){var b=a(this),f=a.effects.setMode(b,d.mode||"hide"),k="hide"===f,g=parseInt(d.percent,10)||150,j=g/100,e={height:b.height(),width:b.width(),outerHeight:b.outerHeight(),outerWidth:b.outerWidth()};a.extend(d,{effect:"scale",queue:!1,fade:!0,mode:f,complete:c,percent:k?g:100,from:k?e:{height:e.height*j,width:e.width*j,outerHeight:e.outerHeight*j,outerWidth:e.outerWidth*j}}),b.effect(d)},a.effects.effect.scale=function(m,f){var j=a(this),p=a.extend(!0,{},m),d=a.effects.setMode(j,m.mode||"effect"),b=parseInt(m.percent,10)||(0===parseInt(m.percent,10)?0:"hide"===d?0:100),c=m.direction||"both",g=m.origin,e={height:j.height(),width:j.width(),outerHeight:j.outerHeight(),outerWidth:j.outerWidth()},k={y:"horizontal"!==c?b/100:1,x:"vertical"!==c?b/100:1};p.effect="size",p.queue=!1,p.complete=f,"effect"!==d&&(p.origin=g||["middle","center"],p.restore=!0),p.from=m.from||("show"===d?{height:0,width:0,outerHeight:0,outerWidth:0}:e),p.to={height:e.height*k.y,width:e.width*k.x,outerHeight:e.outerHeight*k.y,outerWidth:e.outerWidth*k.x},p.fade&&("show"===d&&(p.from.opacity=0,p.to.opacity=1),"hide"===d&&(p.from.opacity=1,p.to.opacity=0)),j.effect(p)},a.effects.effect.size=function(q,E){var L,w,B,x=a(this),A=["position","top","bottom","left","right","width","height","overflow","opacity"],F=["position","top","bottom","left","right","overflow","opacity"],D=["width","height","overflow"],k=["fontSize"],I=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],J=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],z=a.effects.setMode(x,q.mode||"effect"),H=q.restore||"effect"!==z,C=q.scale||"both",G=q.origin||["middle","center"],j=x.css("position"),e=H?A:F,K={height:0,width:0,outerHeight:0,outerWidth:0};"show"===z&&x.show(),L={height:x.height(),width:x.width(),outerHeight:x.outerHeight(),outerWidth:x.outerWidth()},"toggle"===q.mode&&"show"===z?(x.from=q.to||K,x.to=q.from||L):(x.from=q.from||("show"===z?K:L),x.to=q.to||("hide"===z?K:L)),B={from:{y:x.from.height/L.height,x:x.from.width/L.width},to:{y:x.to.height/L.height,x:x.to.width/L.width}},("box"===C||"both"===C)&&(B.from.y!==B.to.y&&(e=e.concat(I),x.from=a.effects.setTransition(x,I,B.from.y,x.from),x.to=a.effects.setTransition(x,I,B.to.y,x.to)),B.from.x!==B.to.x&&(e=e.concat(J),x.from=a.effects.setTransition(x,J,B.from.x,x.from),x.to=a.effects.setTransition(x,J,B.to.x,x.to))),("content"===C||"both"===C)&&B.from.y!==B.to.y&&(e=e.concat(k).concat(D),x.from=a.effects.setTransition(x,k,B.from.y,x.from),x.to=a.effects.setTransition(x,k,B.to.y,x.to)),a.effects.save(x,e),x.show(),a.effects.createWrapper(x),x.css("overflow","hidden").css(x.from),G&&(w=a.effects.getBaseline(G,L),x.from.top=(L.outerHeight-x.outerHeight())*w.y,x.from.left=(L.outerWidth-x.outerWidth())*w.x,x.to.top=(L.outerHeight-x.to.outerHeight)*w.y,x.to.left=(L.outerWidth-x.to.outerWidth)*w.x),x.css(x.from),("content"===C||"both"===C)&&(I=I.concat(["marginTop","marginBottom"]).concat(k),J=J.concat(["marginLeft","marginRight"]),D=A.concat(I).concat(J),x.find("*[width]").each(function(){var c=a(this),b={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};H&&a.effects.save(c,D),c.from={height:b.height*B.from.y,width:b.width*B.from.x,outerHeight:b.outerHeight*B.from.y,outerWidth:b.outerWidth*B.from.x},c.to={height:b.height*B.to.y,width:b.width*B.to.x,outerHeight:b.height*B.to.y,outerWidth:b.width*B.to.x},B.from.y!==B.to.y&&(c.from=a.effects.setTransition(c,I,B.from.y,c.from),c.to=a.effects.setTransition(c,I,B.to.y,c.to)),B.from.x!==B.to.x&&(c.from=a.effects.setTransition(c,J,B.from.x,c.from),c.to=a.effects.setTransition(c,J,B.to.x,c.to)),c.css(c.from),c.animate(c.to,q.duration,q.easing,function(){H&&a.effects.restore(c,D)})})),x.animate(x.to,{queue:!1,duration:q.duration,easing:q.easing,complete:function(){0===x.to.opacity&&x.css("opacity",x.from.opacity),"hide"===z&&x.hide(),a.effects.restore(x,e),H||("static"===j?x.css({position:"relative",top:x.to.top,left:x.to.left}):a.each(["top","left"],function(c,b){x.css(b,function(g,f){var d=parseInt(f,10),h=c?x.to.left:x.to.top;return"auto"===f?h+"px":d+h+"px"})})),a.effects.removeWrapper(x),E()}})}})(jQuery);(function(a){a.effects.effect.shake=function(k,D){var J,q=a(this),A=["position","top","bottom","left","right","height","width"],w=a.effects.setMode(q,k.mode||"effect"),z=k.direction||"left",E=k.distance||20,C=k.times||3,j=2*C+1,H=Math.round(k.duration/j),I="up"===z||"down"===z?"top":"left",x="up"===z||"left"===z,G={},B={},F={},e=q.queue(),b=e.length;for(a.effects.save(q,A),q.show(),a.effects.createWrapper(q),G[I]=(x?"-=":"+=")+E,B[I]=(x?"+=":"-=")+2*E,F[I]=(x?"-=":"+=")+2*E,q.animate(G,H,k.easing),J=1;C>J;J++){q.animate(B,H,k.easing).animate(F,H,k.easing)}q.animate(B,H,k.easing).animate(G,H/2,k.easing).queue(function(){"hide"===w&&q.hide(),a.effects.restore(q,A),a.effects.removeWrapper(q),D()}),b>1&&e.splice.apply(e,[1,0].concat(e.splice(b,j+1))),q.dequeue()}})(jQuery);(function(a){a.effects.effect.slide=function(q,g){var m,w=a(this),e=["position","top","bottom","left","right","width","height"],b=a.effects.setMode(w,q.mode||"show"),c="show"===b,j=q.direction||"left",f="up"===j||"down"===j?"top":"left",p="up"===j||"left"===j,k={};a.effects.save(w,e),w.show(),m=q.distance||w["top"===f?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(w).css({overflow:"hidden"}),c&&w.css(f,p?isNaN(m)?"-"+m:-m:m),k[f]=(c?p?"+=":"-=":p?"-=":"+=")+m,w.animate(k,{queue:!1,duration:q.duration,easing:q.easing,complete:function(){"hide"===b&&w.hide(),a.effects.restore(w,e),a.effects.removeWrapper(w),g()}})}})(jQuery);(function(a){a.effects.effect.transfer=function(x,j){var q=a(this),y=a(x.to),f="fixed"===y.css("position"),b=a("body"),e=f?b.scrollTop():0,k=f?b.scrollLeft():0,g=y.offset(),w={top:g.top-e,left:g.left-k,height:y.innerHeight(),width:y.innerWidth()},m=q.offset(),p=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(x.className).css({top:m.top-e,left:m.left-k,height:q.innerHeight(),width:q.innerWidth(),position:f?"fixed":"absolute"}).animate(w,x.duration,x.easing,function(){p.remove(),j()})}})(jQuery);jQuery(function(a){a.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3c;Пред",nextText:"След&#x3e;",currentText:"Сейчас",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.be={closeText:"Зачыніць",prevText:"&larr;Папяр.",nextText:"Наст.&rarr;",currentText:"Сёньня",monthNames:["Студзень","Люты","Сакавік","Красавік","Травень","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Сьнежань"],monthNamesShort:["Сту","Лют","Сак","Кра","Тра","Чэр","Ліп","Жні","Вер","Кас","Ліс","Сьн"],dayNames:["нядзеля","панядзелак","аўторак","серада","чацьвер","пятніца","субота"],dayNamesShort:["ндз","пнд","аўт","срд","чцв","птн","сбт"],dayNamesMin:["Нд","Пн","Аў","Ср","Чц","Пт","Сб"],weekHeader:"Тд",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.cs={closeText:"Zavřít",prevText:"&#x3C;Dříve",nextText:"Později&#x3E;",currentText:"Nyní",monthNames:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],monthNamesShort:["led","úno","bře","dub","kvě","čer","čvc","srp","zář","říj","lis","pro"],dayNames:["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"],dayNamesShort:["ne","po","út","st","čt","pá","so"],dayNamesMin:["ne","po","út","st","čt","pá","so"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.pl={closeText:"Zamknij",prevText:"&#x3C;Poprzedni",nextText:"Następny&#x3E;",currentText:"Dziś",monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],dayNames:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],dayNamesShort:["Nie","Pn","Wt","Śr","Czw","Pt","So"],dayNamesMin:["N","Pn","Wt","Śr","Cz","Pt","So"],weekHeader:"Tydz",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.de={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.nl={closeText:"Sluiten",prevText:"←",nextText:"→",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.zh={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:"年"};a.datepicker.regional.vi={closeText:"Đóng",prevText:"&#x3C;Trước",nextText:"Tiếp&#x3E;",currentText:"Hôm nay",monthNames:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"],monthNamesShort:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayNames:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.uk={closeText:"Закрити",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"Сьогодні",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Тиж",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.datepicker.regional.fa={closeText:"بستن",prevText:"&#x3C;قبلی",nextText:"بعدی&#x3E;",currentText:"امروز",monthNames:["ژانویه","فوریه","مارس","آوریل","مه","ژوئن","ژوئیه","اوت","سپتامبر","اکتبر","نوامبر","دسامبر"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["يکشنبه","دوشنبه","سهشنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayNamesShort:["ی","د","س","چ","پ","ج","ش"],dayNamesMin:["ی","د","س","چ","پ","ج","ش"],weekHeader:"هف",dateFormat:"yy/mm/dd",firstDay:6,isRTL:true,showMonthAfterYear:false,yearSuffix:""}});jQuery(function(a){a.timepicker.regional.en=a.timepicker.regional[""];a.timepicker.regional.ru={timeOnlyTitle:"Выберите время",timeText:"Время",hourText:"Часы",minuteText:"Минуты",secondText:"Секунды",millisecText:"Миллисекунды",microsecText:"Микросекунды",timezoneText:"Часовой пояс",currentText:"Сейчас",closeText:"Закрыть",timeFormat:"HH:mm",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.be={timeOnlyTitle:"Выберыце час",timeText:"Час",hourText:"Гадзіннік",minuteText:"Хвіліны",secondText:"Секунды",millisecText:"Мілісекунды",microsecText:"Мікрасекунды",timezoneText:"Гадзінны пояс",currentText:"Зараз",closeText:"Зачыніць",timeFormat:"HH:mm",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.cs={timeOnlyTitle:"Vyberte čas",timeText:"Čas",hourText:"Hodiny",minuteText:"Minuty",secondText:"Vteřiny",millisecText:"Milisekundy",microsecText:"Mikrosekundy",timezoneText:"Časové pásmo",currentText:"Nyní",closeText:"Zavřít",timeFormat:"HH:mm",amNames:["dop.","AM","A"],pmNames:["odp.","PM","P"],isRTL:false};a.timepicker.regional.es={timeOnlyTitle:"Elegir una hora",timeText:"Hora",hourText:"Horas",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milisegundos",microsecText:"Microsegundos",timezoneText:"Uso horario",currentText:"Hoy",closeText:"Cerrar",timeFormat:"HH:mm",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:false};a.timepicker.regional.pl={timeOnlyTitle:"Wybierz godzinę",timeText:"Czas",hourText:"Godzina",minuteText:"Minuta",secondText:"Sekunda",millisecText:"Milisekunda",microsecText:"Mikrosekunda",timezoneText:"Strefa czasowa",currentText:"Teraz",closeText:"Gotowe",timeFormat:"HH:mm",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.pt={timeOnlyTitle:"Escolha uma hora",timeText:"Hora",hourText:"Horas",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milissegundos",microsecText:"Microssegundos",timezoneText:"Fuso horário",currentText:"Agora",closeText:"Fechar",timeFormat:"HH:mm",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:false};a.timepicker.regional["pt-BR"]={timeOnlyTitle:"Escolha o horário",timeText:"Horário",hourText:"Hora",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milissegundos",microsecText:"Microssegundos",timezoneText:"Fuso horário",currentText:"Agora",closeText:"Fechar",timeFormat:"HH:mm",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:false};a.timepicker.regional.de={timeOnlyTitle:"Zeit wählen",timeText:"Zeit",hourText:"Stunde",minuteText:"Minute",secondText:"Sekunde",millisecText:"Millisekunde",microsecText:"Mikrosekunde",timezoneText:"Zeitzone",currentText:"Jetzt",closeText:"Fertig",timeFormat:"HH:mm",amNames:["vorm.","AM","A"],pmNames:["nachm.","PM","P"],isRTL:false};a.timepicker.regional.fr={timeOnlyTitle:"Choisir une heure",timeText:"Heure",hourText:"Heures",minuteText:"Minutes",secondText:"Secondes",millisecText:"Millisecondes",microsecText:"Microsecondes",timezoneText:"Fuseau horaire",currentText:"Maintenant",closeText:"Terminé",timeFormat:"HH:mm",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.it={timeOnlyTitle:"Scegli orario",timeText:"Orario",hourText:"Ora",minuteText:"Minuti",secondText:"Secondi",millisecText:"Millisecondi",microsecText:"Microsecondi",timezoneText:"Fuso orario",currentText:"Adesso",closeText:"Chiudi",timeFormat:"HH:mm",amNames:["m.","AM","A"],pmNames:["p.","PM","P"],isRTL:false};a.timepicker.regional.nl={timeOnlyTitle:"Tijdstip",timeText:"Tijd",hourText:"Uur",minuteText:"Minuut",secondText:"Seconde",millisecText:"Milliseconde",microsecText:"Microseconde",timezoneText:"Tijdzone",currentText:"Vandaag",closeText:"Sluiten",timeFormat:"HH:mm",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.zh={timeOnlyTitle:"选择时间",timeText:"时间",hourText:"小时",minuteText:"分钟",secondText:"秒钟",millisecText:"毫秒",microsecText:"微秒",timezoneText:"时区",currentText:"现在时间",closeText:"关闭",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.vi={timeOnlyTitle:"Chọn giờ",timeText:"Thời gian",hourText:"Giờ",minuteText:"Phút",secondText:"Giây",millisecText:"Mili giây",microsecText:"Micrô giây",timezoneText:"Múi giờ",currentText:"Hiện thời",closeText:"Đóng",timeFormat:"HH:mm",timeSuffix:"",amNames:["SA","S"],pmNames:["CH","C"],isRTL:false};a.timepicker.regional.uk={timeOnlyTitle:"Виберіть час",timeText:"Час",hourText:"Години",minuteText:"Хвилини",secondText:"Секунди",millisecText:"Мілісекунди",microsecText:"Мікросекунди",timezoneText:"Часовий пояс",currentText:"Зараз",closeText:"Закрити",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:false};a.timepicker.regional.fa={timeOnlyTitle:"انتخاب زمان",timeText:"زمان",hourText:"ساعت",minuteText:"دقیقه",secondText:"ثانیه",millisecText:"میلی ثانیه",microsecText:"میکرو ثانیه",timezoneText:"منطقه زمانی",currentText:"الان",closeText:"انتخاب",timeFormat:"HH:mm",timeSuffix:"",amNames:["قبل ظهر","AM","A"],pmNames:["بعد ظهر","PM","P"],isRTL:true}});
/* jQuery Timepicker Addon - v1.5.3 - 2015-04-19
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2015 Trent Richardson; Licensed MIT */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui"],a)}else{a(jQuery)}}(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return}$.extend($.ui,{timepicker:{version:"1.5.3"}});var Timepicker=function(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:false};this._defaults={showButtonPanel:true,timeOnly:false,timeOnlyShowDate:false,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:true,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:"slider",oneLine:false,defaultValue:null,parse:"strict",afterInject:null};$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_newInst:function($input,opts){var tp_inst=new Timepicker(),inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}}overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)}},onChangeMonthYear:function(year,month,dp_inst){if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!==""){tp_inst._updateDateTime(dp_inst)}if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=opts[i]||null}}tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:""));if(typeof(tp_inst._defaults.controlType)==="string"){if(tp_inst._defaults.controlType==="slider"&&typeof($.ui.slider)==="undefined"){tp_inst._defaults.controlType="select"}tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else{tp_inst.control=tp_inst._defaults.controlType}var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];if(tp_inst._defaults.timezoneList!==null){timezoneList=tp_inst._defaults.timezoneList}var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=="object"){for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)}}}tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):((new Date()).getTimezoneOffset()*-1);tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm="";tp_inst.$input=$input;if(tp_inst._defaults.altField){tp_inst.$altInput=$(tp_inst._defaults.altField);if(tp_inst._defaults.altRedirectFocus===true){tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})}}if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date()}if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date()}if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())}if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())}if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())}if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())}tp_inst.$input.bind("focus",function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=$.trim((this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker();this._afterInject()},_parseTime:function(timeString,withDate){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj){return false}$.extend(this,parseRes.timeObj)}catch(err){$.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat);return false}return true}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);if(!timeObj){return false}$.extend(this,timeObj);return true}},_afterInject:function(){var o=this.inst.settings;if($.isFunction(o.afterInject)){o.afterInject.call(this)}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=" ui_tpicker_unit_hide",html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+(o.oneLine&&o.controlType==="select"?" ui-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label"'+((o.showTime)?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time '+((o.showTime)?"":noDisplay)+'"></dd>';for(i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o["show"+uitem]!==null?o["show"+uitem]:this.support[litem];max[litem]=parseInt((o[litem+"Max"]-((o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem])),10);gridSize[litem]=0;html+='<dt class="ui_tpicker_'+litem+"_label"+(show?"":noDisplay)+'">'+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+(show?"":noDisplay)+'"><div class="ui_tpicker_'+litem+"_slider"+(show?"":noDisplay)+'"></div>';if(show&&o[litem+"Grid"]>0){html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(litem==="hour"){for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+"</td>"}}else{for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;html+='<td data-for="'+litem+'">'+((m<10)?"0":"")+m+"</td>"}}html+="</tr></table></div>"}html+="</dd>"}var showTz=o.showTimezone!==null?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label'+(showTz?"":noDisplay)+'">'+o.timezoneText+"</dt>";html+='<dd class="ui_tpicker_timezone'+(showTz?"":noDisplay)+'"></dd>';html+="</dl></div>";var $tp=$(html);if(o.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>");$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}for(i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o["show"+uitem]!==null?o["show"+uitem]:this.support[litem];tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]);if(show&&o[litem+"Grid"]>0){size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]);$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":((size/(-2*gridSize[litem]))+"%"),marginRight:o.isRTL?((size/(-2*gridSize[litem]))+"%"):"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),f=$t.data("for");if(f==="hour"){if(ap.indexOf("p")!==-1&&n<12){n+=12}else{if(ap.indexOf("a")!==-1&&n===12){n=0}}}tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:"pointer",width:(100/gridSize[litem])+"%",textAlign:"center",overflow:"hidden"})}}this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val==="object"?val.value:val).text(typeof val==="object"?val.label:val)}));if(typeof(this.timezone)!=="undefined"&&this.timezone!==null&&this.timezone!==""){var local_timezone=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;if(local_timezone===this.timezone){selectLocalTimezone(tp_inst)}else{this.timezone_select.val(this.timezone)}}else{if(typeof(this.hour)!=="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(o.timezone)}else{selectLocalTimezone(tp_inst)}}this.timezone_select.change(function(){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length){$buttonPanel.before($tp)}else{$dp.append($tp)}this.$timeObj=$tp.find(".ui_tpicker_time");if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;setTimeout(function(){if($tp.find(".ui-slider-access").length===0){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(true);if(sliderAccessWidth){$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=((oldMarginLeft*newWidth)/oldWidth)+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft;$g.css(css)})}}},10)}tp_inst._limitMinMaxDateTime(this.inst,true)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return}if($.datepicker._get(dp_inst,"minDateTime")!==null&&$.datepicker._get(dp_inst,"minDateTime")!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;this.microsecMinOriginal=o.microsecMin}if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=this._defaults.millisecMin;this._defaults.microsecMin=minDateTime.getMicroseconds()}else{if(this.microsec<this._defaults.microsecMin){this.microsec=this._defaults.microsecMin}this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}if($.datepicker._get(dp_inst,"maxDateTime")!==null&&$.datepicker._get(dp_inst,"maxDateTime")!==undefined&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;this.microsecMaxOriginal=o.microsecMax}if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=this._defaults.millisecMax;this._defaults.microsecMax=maxDateTime.getMicroseconds()}else{if(this.microsec>this._defaults.microsecMax){this.microsec=this._defaults.microsecMax}this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}if(dp_inst.settings.minTime!==null){var tempMinTime=new Date("01/01/1970 "+dp_inst.settings.minTime);if(this.hour<tempMinTime.getHours()){this.hour=this._defaults.hourMin=tempMinTime.getHours();this.minute=this._defaults.minuteMin=tempMinTime.getMinutes()}else{if(this.hour===tempMinTime.getHours()&&this.minute<tempMinTime.getMinutes()){this.minute=this._defaults.minuteMin=tempMinTime.getMinutes()}else{if(this._defaults.hourMin<tempMinTime.getHours()){this._defaults.hourMin=tempMinTime.getHours();this._defaults.minuteMin=tempMinTime.getMinutes()}else{if(this._defaults.hourMin===tempMinTime.getHours()===this.hour&&this._defaults.minuteMin<tempMinTime.getMinutes()){this._defaults.minuteMin=tempMinTime.getMinutes()}else{this._defaults.minuteMin=0}}}}}if(dp_inst.settings.maxTime!==null){var tempMaxTime=new Date("01/01/1970 "+dp_inst.settings.maxTime);if(this.hour>tempMaxTime.getHours()){this.hour=this._defaults.hourMax=tempMaxTime.getHours();this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes()}else{if(this.hour===tempMaxTime.getHours()&&this.minute>tempMaxTime.getMinutes()){this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes()}else{if(this._defaults.hourMax>tempMaxTime.getHours()){this._defaults.hourMax=tempMaxTime.getHours();this._defaults.minuteMax=tempMaxTime.getMinutes()}else{if(this._defaults.hourMax===tempMaxTime.getHours()===this.hour&&this._defaults.minuteMax>tempMaxTime.getMinutes()){this._defaults.minuteMax=tempMaxTime.getMinutes()}else{this._defaults.minuteMax=59}}}}}if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=parseInt((this._defaults.hourMax-((this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour)),10),minMax=parseInt((this._defaults.minuteMax-((this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute)),10),secMax=parseInt((this._defaults.secondMax-((this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond)),10),millisecMax=parseInt((this._defaults.millisecMax-((this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec)),10),microsecMax=parseInt((this._defaults.microsecMax-((this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec)),10);if(this.hour_slider){this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax,step:this._defaults.stepHour});this.control.value(this,this.hour_slider,"hour",this.hour-(this.hour%this._defaults.stepHour))}if(this.minute_slider){this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax,step:this._defaults.stepMinute});this.control.value(this,this.minute_slider,"minute",this.minute-(this.minute%this._defaults.stepMinute))}if(this.second_slider){this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:secMax,step:this._defaults.stepSecond});this.control.value(this,this.second_slider,"second",this.second-(this.second%this._defaults.stepSecond))}if(this.millisec_slider){this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax,step:this._defaults.stepMillisec});this.control.value(this,this.millisec_slider,"millisec",this.millisec-(this.millisec%this._defaults.stepMillisec))}if(this.microsec_slider){this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:microsecMax,step:this._defaults.stepMicrosec});this.control.value(this,this.microsec_slider,"microsec",this.microsec-(this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(!this._defaults.showTimepicker){return}var hour=(this.hour_slider)?this.control.value(this,this.hour_slider,"hour"):false,minute=(this.minute_slider)?this.control.value(this,this.minute_slider,"minute"):false,second=(this.second_slider)?this.control.value(this,this.second_slider,"second"):false,millisec=(this.millisec_slider)?this.control.value(this,this.millisec_slider,"millisec"):false,microsec=(this.microsec_slider)?this.control.value(this,this.microsec_slider,"microsec"):false,timezone=(this.timezone_select)?this.timezone_select.val():false,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof(hour)==="object"){hour=false}if(typeof(minute)==="object"){minute=false}if(typeof(second)==="object"){second=false}if(typeof(millisec)==="object"){millisec=false}if(typeof(microsec)==="object"){microsec=false}if(typeof(timezone)==="object"){timezone=false}if(hour!==false){hour=parseInt(hour,10)}if(minute!==false){minute=parseInt(minute,10)}if(second!==false){second=parseInt(second,10)}if(millisec!==false){millisec=parseInt(millisec,10)}if(microsec!==false){microsec=parseInt(microsec,10)}if(timezone!==false){timezone=timezone.toString()}var ampm=o[hour<12?"amNames":"pmNames"][0];var hasChanged=(hour!==parseInt(this.hour,10)||minute!==parseInt(this.minute,10)||second!==parseInt(this.second,10)||millisec!==parseInt(this.millisec,10)||microsec!==parseInt(this.microsec,10)||(this.ampm.length>0&&(hour<12)!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1))||(this.timezone!==null&&timezone!==this.timezone.toString()));if(hasChanged){if(hour!==false){this.hour=hour}if(minute!==false){this.minute=minute}if(second!==false){this.second=second}if(millisec!==false){this.millisec=millisec}if(microsec!==false){this.microsec=microsec}if(timezone!==false){this.timezone=timezone}if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}this._limitMinMaxDateTime(this.inst,true)}if(this.support.ampm){this.ampm=ampm}this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj){if(pickerTimeFormat===o.timeFormat){this.$timeObj.text(this.formattedTime+pickerTimeSuffix)}else{this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)}}this.timeDefined=true;if(hasChanged){this._updateDateTime()}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this])}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=(dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVal===""){dp_inst.currentYear=dp_inst.selectedYear;dp_inst.currentMonth=dp_inst.selectedMonth;dp_inst.currentDay=dp_inst.selectedDay}if(this._defaults.timeOnly===true&&this._defaults.timeOnlyShowDate===false){formattedDateTime=this.formattedTime}else{if((this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable))||(this._defaults.timeOnly===true&&this._defaults.timeOnlyShowDate===true)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}}this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else{if(this.$altInput&&this._defaults.timeOnly===false&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else{if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator!==null?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix!==null?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(!this._defaults.timeOnly){if(this._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,(dt===null?new Date():dt),formatCfg)}else{altFormattedDateTime=this.formattedDate}if(altFormattedDateTime){altFormattedDateTime+=altSeparator}}if(this._defaults.altTimeFormat!==null){altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix}else{altFormattedDateTime+=this.formattedTime+altTimeSuffix}this.$altInput.val(altFormattedDateTime)}else{this.$input.val(formattedDateTime)}}}this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof(opts)==="string"){if(opts==="min"||opts==="max"){if(val!==undefined){return obj.slider(opts,val*-1)}return Math.abs(obj.slider(opts))}return obj.slider(opts)}var min=opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined){opts.max=min*-1}if(max!==undefined){opts.min=max*-1}return obj.slider(opts)}if(typeof(opts)==="string"&&val!==undefined){return obj.slider(opts,val)}return obj.slider(opts)},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined){return obj.slider("value",val*-1)}return Math.abs(obj.slider("value"))}if(val!==undefined){return obj.slider("value",val)}return obj.slider("value")}},select:{create:function(tp_inst,obj,unit,val,min,max,step){var sel='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat;for(var i=min;i<=max;i+=step){sel+='<option value="'+i+'"'+(i===val?" selected":"")+">";if(unit==="hour"){sel+=$.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig,"")),{hour:i},tp_inst._defaults)}else{if(unit==="millisec"||unit==="microsec"||i>=10){sel+=i}else{sel+="0"+i.toString()}}sel+="</option>"}sel+="</select>";obj.children("select").remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject()});return obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if(typeof(opts)==="string"){if(val===undefined){return $t.data(opts)}o[opts]=val}else{o=opts}return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min>=0?o.min:$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");if(val!==undefined){return $t.val(val)}return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o==="object"){tmp_args[0]=$.extend(o,{timeOnly:true})}return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof(o)==="string"){if(o==="getDate"||(o==="option"&&tmp_args.length===2&&typeof(tmp_args[1])==="string")){return $.fn.datepicker.apply($(this[0]),tmp_args)}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)})}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec);parseRes.date.setMicroseconds(t.microsec)}return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),iso8601=(timeFormat.replace(/\'.*?\'/g,"").indexOf("Z")!==-1);var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames){$.merge(markers,amNames)}if(pmNames){$.merge(markers,pmNames)}markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")});return"("+markers.join("|")+")?"};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]===-1){orders[finds[i].toString().charAt(0)]=i+1}}}return orders};var regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case"h":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case"m":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case"s":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return getPatternAmpm(o.amNames,o.pmNames);default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=getFormatPositions(f),ampm="",treg;treg=s.match(new RegExp(regstr,"i"));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};if(treg){if(order.t!==-1){if(treg[order.t]===undefined||treg[order.t].length===0){ampm="";resTime.ampm=""}else{ampm=$.inArray(treg[order.t].toUpperCase(),$.map(o.amNames,function(x,i){return x.toUpperCase()}))!==-1?"AM":"PM";resTime.ampm=o[ampm==="AM"?"amNames":"pmNames"][0]}}if(order.h!==-1){if(ampm==="AM"&&treg[order.h]==="12"){resTime.hour=0}else{if(ampm==="PM"&&treg[order.h]!=="12"){resTime.hour=parseInt(treg[order.h],10)+12}else{resTime.hour=Number(treg[order.h])}}}if(order.m!==-1){resTime.minute=Number(treg[order.m])}if(order.s!==-1){resTime.second=Number(treg[order.s])}if(order.l!==-1){resTime.millisec=Number(treg[order.l])}if(order.c!==-1){resTime.microsec=Number(treg[order.c])}if(order.z!==-1&&treg[order.z]!==undefined){resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])}return resTime}return false};var looseParse=function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())){d=new Date("2012-01-01T"+s);if(isNaN(d.getTime())){d=new Date("01/01/2012 "+s);if(isNaN(d.getTime())){throw"Unable to parse time with native Date: "+s}}}return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:d.getTimezoneOffset()*-1}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return false};if(typeof o.parse==="function"){return o.parse(timeFormat,timeString,o)}if(o.parse==="loose"){return looseParse(timeFormat,timeString,o)}return strictParse(timeFormat,timeString,o)};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11){ampmName=options.pmNames[0]}tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case"HH":return("0"+hour).slice(-2);case"H":return hour;case"hh":return("0"+convert24to12(hour)).slice(-2);case"h":return convert24to12(hour);case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"c":return("00"+time.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,false);case"Z":return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,true);case"T":return ampmName.charAt(0).toUpperCase();case"TT":return ampmName.toUpperCase();case"t":return ampmName.charAt(0).toLowerCase();case"tt":return ampmName.toLowerCase();default:return match.replace(/'/g,"")}});return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker"),was_inline;if(tp_inst&&inst.settings.showTimepicker){tp_inst._limitMinMaxDateTime(inst,true);was_inline=inst.inline;inst.inline=inst.stay_open=true;this._base_selectDate(id,dateStr);inst.inline=was_inline;inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst)}else{this._base_selectDate(id,dateStr)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input){return}if(typeof(inst.stay_open)!=="boolean"||inst.stay_open===false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._addTimePicker(inst)}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if($.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=tp_inst._defaults.showTimezone!==null?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+(tp_inst._defaults.amNames.join(""))+(tp_inst._defaults.pmNames.join(""))+dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!dateChars||datetimeChars.indexOf(chr)>-1)}}return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&!tp_inst._defaults.altFieldTimeOnly&&date!==null){if(tp_inst._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime}else{altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime}}$(altField).val(inst.input.val()?altFormattedDateTime:"")}}else{$.datepicker._base_updateAlternate(inst)}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}}return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date();this._setTime(inst,now);this._setDate(inst,now);this._base_gotoToday(id)};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){inst.settings.showTimepicker=false;tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){inst.settings.showTimepicker=true;tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst.microsec=date?date.getMicroseconds():defaults.microsec;tp_inst._limitMinMaxDateTime(inst,true);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date==="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);tp_date.setMicroseconds(tp_inst.microsec)}else{tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}if(tp_date.toString()==="Invalid Date"){tp_date=undefined}this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,_date){var inst=this._getInst(target);var date=_date;if(!inst){return}if(typeof(_date)==="string"){date=new Date(_date);if(!date.getTime()){this._base_setDateDatepicker.apply(this,arguments);date=$(target).datepicker("getDate")}}var tp_inst=this._get(inst,"timepicker");var tp_date;if(date instanceof Date){tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}else{tp_date=date}if(tp_inst&&tp_date){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=tp_date.getTimezoneOffset()*-1}date=$.timepicker.timezoneAdjust(date,tp_inst.timezone);tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)}this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");if(tp_inst){if(inst.lastVal===undefined){this._setDateFromField(inst,noDefault)}var date=this._getDate(inst);var currDT=$.trim((tp_inst.$altInput&&tp_inst._defaults.altFieldTimeOnly)?tp_inst.$input.val()+" "+tp_inst.$altInput.val():tp_inst.$input.val());if(date&&tp_inst._parseTime(currDT,!inst.settings.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);date.setMicroseconds(tp_inst.microsec);if(tp_inst.timezone!=null){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=date.getTimezoneOffset()*-1}date=$.timepicker.timezoneAdjust(date,tp_inst.timezone)}}return date}return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(err.indexOf(":")>=0){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings);$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}else{throw err}}return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst){return null}var tp_inst=this._get(inst,"timepicker");if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop,ret,oldVal,$target;if(typeof name==="string"){if(name==="minDate"||name==="minDateTime"){min=value}else{if(name==="maxDate"||name==="maxDateTime"){max=value}else{if(name==="onSelect"){onselect=value}else{if(overrides.hasOwnProperty(name)){if(typeof(value)==="undefined"){return overrides[name]}fns[name]=value;name_clone={}}}}}}else{if(typeof name==="object"){if(name.minDate){min=name.minDate}else{if(name.minDateTime){min=name.minDateTime}else{if(name.maxDate){max=name.maxDate}else{if(name.maxDateTime){max=name.maxDateTime}}}}for(prop in overrides){if(overrides.hasOwnProperty(prop)&&name[prop]){fns[prop]=name[prop]}}}}for(prop in fns){if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone){name_clone=$.extend({},name)}delete name_clone[prop]}}if(name_clone&&isEmptyObject(name_clone)){return}if(min){if(min===0){min=new Date()}else{min=new Date(min)}tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else{if(max){if(max===0){max=new Date()}else{max=new Date(max)}tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else{if(onselect){tp_inst._defaults.onSelect=onselect}}}if(min||max){$target=$(target);oldVal=$target.datetimepicker("getDate");ret=this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value);$target.datetimepicker("setDate",oldVal);return ret}}if(value===undefined){return this._base_optionDatepicker.call($.datepicker,target,name)}return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true};var extendRemove=function(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name]}}return target};var detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,"").toLowerCase(),isIn=function(f,t){return f.indexOf(t)!==-1?true:false};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,"z"),ampm:isIn(tf,"t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}};var convert24to12=function(hour){hour%=12;if(hour===0){hour=12}return String(hour)};var computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]};var splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,"separator"),format=computeEffectiveSetting(timeSettings,"timeFormat"),timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1){return{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)}}return{dateString:dateTimeString,timeString:""}};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;parts=splitDateTime(dateTimeString,timeSettings);date=$.datepicker._base_parseDate(dateFormat,parts.dateString,dateSettings);if(parts.timeString===""){return{date:date}}parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings);if(!parsedTime){throw"Wrong time format"}return{date:date,timeObj:parsedTime}};var selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date();tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker();$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||tzMinutes>840||tzMinutes<-720){return tzMinutes}var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?":":"",tz=(off>=0?"+":"-")+("0"+Math.abs(hours)).slice(-2)+iso+("0"+Math.abs(minutes)).slice(-2);if(tz==="+00:00"){return"Z"}return tz};$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(":","");if(normalized.toUpperCase()==="Z"){return 0}if(!/^(\-|\+)\d{4}$/.test(normalized)){return tzString}return((normalized.substr(0,1)==="-"?-1:1)*((parseInt(normalized.substr(1,2),10)*60)+parseInt(normalized.substr(3,2),10)))};$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz)){date.setMinutes(date.getMinutes()+-date.getTimezoneOffset()-toTz)}return date};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)};$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,options)};$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options);var timeOnly=false;if(method==="timepicker"){timeOnly=true;method="datetimepicker"}function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(startdt!==null){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval);maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval);if(options.minInterval>0&&minDate>enddt){endTime[method]("setDate",minDate)}else{if(options.maxInterval>0&&maxDate<enddt){endTime[method]("setDate",maxDate)}else{if(startdt>enddt){other[method]("setDate",changeddt)}}}}}function selected(changed,other,option){if(!changed.val()){return}var date=changed[method].call(changed,"getDate");if(date!==null&&options.minInterval>0){if(option==="minDate"){date.setMilliseconds(date.getMilliseconds()+options.minInterval)}if(option==="maxDate"){date.setMilliseconds(date.getMilliseconds()-options.minInterval)}}if(date.getTime){other[method].call(other,"option",option,date)}}$.fn[method].call(startTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start));$.fn[method].call(endTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end));checkDates(startTime,endTime);selected(startTime,endTime,"minDate");selected(endTime,startTime,"maxDate");return $([startTime.get(0),endTime.get(0)])};$.timepicker.log=function(){if(window.console){window.console.log.apply(window.console,Array.prototype.slice.call(arguments))}};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds};Date.prototype.setMicroseconds=function(m){this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1000));this.microseconds=m%1000;return this}}$.timepicker.version="1.5.3"}));(function(a){a.format=(function(){function d(e){switch(parseInt(e)){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec";default:return e}}var b=function(e){switch(e){case"Jan":return"01";case"Feb":return"02";case"Mar":return"03";case"Apr":return"04";case"May":return"05";case"Jun":return"06";case"Jul":return"07";case"Aug":return"08";case"Sep":return"09";case"Oct":return"10";case"Nov":return"11";case"Dec":return"12";default:return e}};var c=function(f){var g=f;if(g.indexOf(".")!==-1){g=g.substring(0,g.indexOf("."))}var e=g.split(":");if(e.length===3){hour=e[0];minute=e[1];second=e[2];return{time:g,hour:hour,minute:minute,second:second}}else{return{time:"",hour:"",minute:"",second:""}}};return{date:function(q,p){try{var m=null;var k=null;var r=null;var f=null;if(typeof q.getFullYear==="function"){m=q.getFullYear();k=q.getMonth()+1;r=q.getDate();f=c(q.toTimeString())}else{if(q.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}\+\d{2}:\d{2}/)!=-1){var s=q.split(/[T\+-]/);m=s[0];k=s[1];r=s[2];f=c(s[3].split(".")[0])}else{var s=q.split(" ");switch(s.length){case 6:m=s[5];k=b(s[1]);r=s[2];f=c(s[3]);break;case 2:var o=s[0].split("-");m=o[0];k=o[1];r=o[2];f=c(s[1]);break;default:return q}}}var l="";var h="";for(var g=0;g<p.length;g++){var n=p.charAt(g);l+=n;switch(l){case"dd":h+=r.toString().length==1?"0"+r:r;l="";break;case"MMM":h+=d(k);l="";break;case"mm":if(p.charAt(g+1)=="m"){break}h+=k.toString().length==1?"0"+k:k;l="";break;case"yy":case"yyyy":h+=m;l="";break;case"h":h+=f.hour;l="";break;case"H":h+=(f.hour==0?12:f.hour<13?f.hour:f.hour-12);l="";break;case"m":if(p.charAt(g+1)!="m"){h+=f.minute;l=""}break;case"s":h+=f.second.substring(0,2);l="";break;case"a":h+=f.hour>=12?"PM":"AM";l="";break;case" ":h+=n;l="";break;case"/":h+=n;l="";break;case":":h+=n;l="";break;default:if(l.length===2&&l.indexOf("y")!==0){h+=l.substring(0,1);l=l.substring(1,2)}else{if((l.length===3&&l.indexOf("yyy")===-1)){l=""}}}}return h}catch(j){console.log(j);return q}}}}())}(jQuery));$(document).ready(function(){$(".shortDateFormat").each(function(a,b){if($(b).is(":input")){$(b).val($.format.date($(b).val(),"dd/mm/yyyy"))}else{$(b).text($.format.date($(b).text(),"dd/mm/yyyy"))}});$(".longDateFormat").each(function(a,b){if($(b).is(":input")){$(b).val($.format.date($(b).val(),"dd/mm/yyyy h:m:s"))}else{$(b).text($.format.date($(b).text(),"dd/mm/yyyy h:m:s"))}})});(function(){function addEvent(el,type,fn){if(el.addEventListener){el.addEventListener(type,fn,false)}else{if(el.attachEvent){el.attachEvent("on"+type,function(){fn.call(el)})}else{throw new Error("not supported or DOM not loaded")}}}function addResizeEvent(fn){var timeout;addEvent(window,"resize",function(){if(timeout){clearTimeout(timeout)}timeout=setTimeout(fn,100)})}if(document.documentElement.getBoundingClientRect){var getOffset=function(el){var box=el.getBoundingClientRect();var doc=el.ownerDocument;var body=doc.body;var docElem=doc.documentElement;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var zoom=1;if(body.getBoundingClientRect){var bound=body.getBoundingClientRect();zoom=(bound.right-bound.left)/body.clientWidth}if(zoom>1){clientTop=0;clientLeft=0}var top=box.top/zoom+(window.pageYOffset||docElem&&docElem.scrollTop/zoom||body.scrollTop/zoom)-clientTop,left=box.left/zoom+(window.pageXOffset||docElem&&docElem.scrollLeft/zoom||body.scrollLeft/zoom)-clientLeft;return{top:top,left:left}}}else{var getOffset=function(el){var top=0,left=0;do{top+=el.offsetTop||0;left+=el.offsetLeft||0;el=el.offsetParent}while(el);return{left:left,top:top}}}function getBox(el){var left,right,top,bottom;var offset=getOffset(el);left=offset.left;top=offset.top;right=left+el.offsetWidth;bottom=top+el.offsetHeight;return{left:left,right:right,top:top,bottom:bottom}}function addStyles(el,styles){for(var name in styles){if(styles.hasOwnProperty(name)){el.style[name]=styles[name]}}}function copyLayout(from,to){var box=getBox(from);addStyles(to,{position:"absolute",left:box.left+"px",top:box.top+"px",width:from.offsetWidth+"px",height:from.offsetHeight+"px"})}var toElement=(function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var el=div.firstChild;return div.removeChild(el)}})();var getUID=(function(){var id=0;return function(){return"ValumsAjaxUpload"+id++}})();function fileFromPath(file){return file.replace(/.*(\/|\\)/,"")}function getExt(file){return(-1!==file.indexOf("."))?file.replace(/.*[.]/,""):""}function hasClass(el,name){var re=new RegExp("\\b"+name+"\\b");return re.test(el.className)}function addClass(el,name){if(!hasClass(el,name)){el.className+=" "+name}}function removeClass(el,name){var re=new RegExp("\\b"+name+"\\b");el.className=el.className.replace(re,"")}function removeNode(el){el.parentNode.removeChild(el)}window.AjaxUpload=function(button,options){this._settings={action:"upload.php",name:"userfile",multiple:false,data:{},autoSubmit:true,responseType:false,hoverClass:"hover",focusClass:"focus",disabledClass:"disabled",onChange:function(file,extension){},onSubmit:function(file,extension){},onComplete:function(file,response){}};for(var i in options){if(options.hasOwnProperty(i)){this._settings[i]=options[i]}}if(button.jquery){button=button[0]}else{if(typeof button=="string"){if(/^#.*/.test(button)){button=button.slice(1)}button=document.getElementById(button)}}if(!button||button.nodeType!==1){throw new Error("Please make sure that you're passing a valid element")}if(button.nodeName.toUpperCase()=="A"){addEvent(button,"click",function(e){if(e&&e.preventDefault){e.preventDefault()}else{if(window.event){window.event.returnValue=false}}})}this._button=button;this._input=null;this._disabled=false;this.enable();this._rerouteClicks()};AjaxUpload.prototype={setData:function(data){this._settings.data=data},disable:function(){addClass(this._button,this._settings.disabledClass);this._disabled=true;var nodeName=this._button.nodeName.toUpperCase();if(nodeName=="INPUT"||nodeName=="BUTTON"){this._button.setAttribute("disabled","disabled")}if(this._input){if(this._input.parentNode){this._input.parentNode.style.visibility="hidden"}}},enable:function(){removeClass(this._button,this._settings.disabledClass);this._button.removeAttribute("disabled");this._disabled=false},_createInput:function(){var self=this;var input=document.createElement("input");input.setAttribute("type","file");input.setAttribute("name",this._settings.name);input.setAttribute("accept",this._settings.accept);if(this._settings.multiple){input.setAttribute("multiple","multiple")}addStyles(input,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer"});var div=document.createElement("div");addStyles(div,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583});if(div.style.opacity!=="0"){if(typeof(div.filters)=="undefined"){throw new Error("Opacity not supported by the browser")}div.style.filter="alpha(opacity=0)"}addEvent(input,"change",function(){if(!input||input.value===""){return}var file=fileFromPath(input.value);if(false===self._settings.onChange.call(self,file,getExt(file))){self._clearInput();return}if(self._settings.autoSubmit){self.submit()}});addEvent(input,"mouseover",function(){addClass(self._button,self._settings.hoverClass)});addEvent(input,"mouseout",function(){removeClass(self._button,self._settings.hoverClass);removeClass(self._button,self._settings.focusClass);if(input.parentNode){input.parentNode.style.visibility="hidden"}});addEvent(input,"focus",function(){addClass(self._button,self._settings.focusClass)});addEvent(input,"blur",function(){removeClass(self._button,self._settings.focusClass)});div.appendChild(input);document.body.appendChild(div);this._input=input},_clearInput:function(){if(!this._input){return}removeNode(this._input.parentNode);this._input=null;this._createInput();removeClass(this._button,this._settings.hoverClass);removeClass(this._button,this._settings.focusClass)},_rerouteClicks:function(){var self=this;addEvent(self._button,"mouseover",function(){if(self._disabled){return}if(!self._input){self._createInput()}var div=self._input.parentNode;copyLayout(self._button,div);div.style.visibility="visible"})},_createIframe:function(){var id=getUID();var iframe=toElement('<iframe src="javascript:false;" name="'+id+'" />');iframe.setAttribute("id",id);iframe.style.display="none";document.body.appendChild(iframe);return iframe},_createForm:function(iframe){var settings=this._settings;var form=toElement('<form method="post" enctype="multipart/form-data"></form>');form.setAttribute("action",settings.action);form.setAttribute("target",iframe.name);form.style.display="none";document.body.appendChild(form);for(var prop in settings.data){if(settings.data.hasOwnProperty(prop)){var el=document.createElement("input");el.setAttribute("type","hidden");el.setAttribute("name",prop);el.setAttribute("value",settings.data[prop]);form.appendChild(el)}}return form},_getResponse:function(iframe,file){var toDeleteFlag=false,self=this,settings=this._settings;addEvent(iframe,"load",function(){if(iframe.src=="javascript:'%3Chtml%3E%3C/html%3E';"||iframe.src=="javascript:'<html></html>';"){if(toDeleteFlag){setTimeout(function(){removeNode(iframe)},0)}return}var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document;if(doc.readyState&&doc.readyState!="complete"){return}if(doc.body&&doc.body.innerHTML=="false"){return}var response;if(doc.XMLDocument){response=doc.XMLDocument}else{if(doc.body){response=doc.body.innerHTML;if(settings.responseType&&settings.responseType.toLowerCase()=="json"){if(doc.body.firstChild&&doc.body.firstChild.nodeName.toUpperCase()=="PRE"){doc.normalize();response=doc.body.firstChild.firstChild.nodeValue}if(response){response=eval("("+response+")")}else{response={}}}}else{response=doc}}settings.onComplete.call(self,file,response);toDeleteFlag=true;iframe.src="javascript:'<html></html>';"})},submit:function(){var self=this,settings=this._settings;if(!this._input||this._input.value===""){return}var file=fileFromPath(this._input.value);if(false===settings.onSubmit.call(this,file,getExt(file))){this._clearInput();return}var iframe=this._createIframe();var form=this._createForm(iframe);removeNode(this._input.parentNode);removeClass(self._button,self._settings.hoverClass);removeClass(self._button,self._settings.focusClass);form.appendChild(this._input);form.submit();removeNode(form);form=null;removeNode(this._input);this._input=null;this._getResponse(iframe,file);this._createInput()}}})();
/* http://mths.be/punycode v1.2.4 by @mathias */
(function(C){var q=typeof exports=="object"&&exports;var K=typeof module=="object"&&module&&module.exports==q&&module;var B=typeof global=="object"&&global;if(B.global===B||B.window===B){C=B}var e,u=2147483647,m=36,o=1,r=26,j=38,n=700,p=72,h=128,I="-",y=/^xn--/,d=/[^ -~]/,a=/\x2E|\u3002|\uFF0E|\uFF61/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=m-o,E=Math.floor,A=String.fromCharCode,J;function D(L){throw RangeError(s[L])}function G(N,L){var M=N.length;while(M--){N[M]=L(N[M])}return N}function c(L,M){return G(L.split(a),M).join(".")}function l(O){var N=[],M=0,P=O.length,Q,L;while(M<P){Q=O.charCodeAt(M++);if(Q>=55296&&Q<=56319&&M<P){L=O.charCodeAt(M++);if((L&64512)==56320){N.push(((Q&1023)<<10)+(L&1023)+65536)}else{N.push(Q);M--}}else{N.push(Q)}}return N}function F(L){return G(L,function(N){var M="";if(N>65535){N-=65536;M+=A(N>>>10&1023|55296);N=56320|N&1023}M+=A(N);return M}).join("")}function f(L){if(L-48<10){return L-22}if(L-65<26){return L-65}if(L-97<26){return L-97}return m}function z(M,L){return M+22+75*(M<26)-((L!=0)<<5)}function b(O,M,N){var L=0;O=N?E(O/n):O>>1;O+=E(O/M);for(;O>g*r>>1;L+=m){O=E(O/g)}return E(L+(g+1)*O/(O+j))}function x(X){var N=[],Q=X.length,S,T=0,M=h,U=p,P,R,V,L,Y,O,W,aa,Z;P=X.lastIndexOf(I);if(P<0){P=0}for(R=0;R<P;++R){if(X.charCodeAt(R)>=128){D("not-basic")}N.push(X.charCodeAt(R))}for(V=P>0?P+1:0;V<Q;){for(L=T,Y=1,O=m;;O+=m){if(V>=Q){D("invalid-input")}W=f(X.charCodeAt(V++));if(W>=m||W>E((u-T)/Y)){D("overflow")}T+=W*Y;aa=O<=U?o:(O>=U+r?r:O-U);if(W<aa){break}Z=m-aa;if(Y>E(u/Z)){D("overflow")}Y*=Z}S=N.length+1;U=b(T-L,S,L==0);if(E(T/S)>u-M){D("overflow")}M+=E(T/S);T%=S;N.splice(T++,0,M)}return F(N)}function k(X){var O,Z,U,M,V,T,P,L,S,ab,Y,N=[],R,Q,aa,W;X=l(X);R=X.length;O=h;Z=0;V=p;for(T=0;T<R;++T){Y=X[T];if(Y<128){N.push(A(Y))}}U=M=N.length;if(M){N.push(I)}while(U<R){for(P=u,T=0;T<R;++T){Y=X[T];if(Y>=O&&Y<P){P=Y}}Q=U+1;if(P-O>E((u-Z)/Q)){D("overflow")}Z+=(P-O)*Q;O=P;for(T=0;T<R;++T){Y=X[T];if(Y<O&&++Z>u){D("overflow")}if(Y==O){for(L=Z,S=m;;S+=m){ab=S<=V?o:(S>=V+r?r:S-V);if(L<ab){break}W=L-ab;aa=m-ab;N.push(A(z(ab+W%aa,0)));L=E(W/aa)}N.push(A(z(L,0)));V=b(Z,Q,U==M);Z=0;++U}}++Z;++O}return N.join("")}function w(L){return c(L,function(M){return y.test(M)?x(M.slice(4).toLowerCase()):M})}function H(L){return c(L,function(M){return d.test(M)?"xn--"+k(M):M})}e={version:"1.2.4",ucs2:{decode:l,encode:F},decode:x,encode:k,toASCII:H,toUnicode:w};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return e})}else{if(q&&!q.nodeType){if(K){K.exports=e}else{for(J in e){e.hasOwnProperty(J)&&(q[J]=e[J])}}}else{C.punycode=e}}}(this));function ListCheckAll(e,a,b){var d=document.forms[a].elements.length;for(i=0;i<d;i++){var c=document.forms[a].elements[i];if(c.name==b){c.checked=e}}$("#"+a+' input[name="'+b+'"]:first').trigger("change")}function MultiCheckAll(b,a){if($(a).is(":checked")){$("#"+b+" option").attr("selected","selected")}else{$("#"+b+" option").removeAttr("selected")}}function MultiMove(b,a){$("#"+b+" option:selected").remove().appendTo("#"+a).removeAttr("selected");$("#"+b+"-checkbox").attr("checked",false);$("#"+a+"-checkbox").attr("checked",false)}function htmlentities(e){var c=Array("&","<",">",'"',"'");var d=Array("&amp;","&lt;","&gt;","&quot;","'");for(var a=0;a<d.length;a++){var b=new RegExp(d[a],"gi");if(b.test(e)){e=e.replace(b,c[a])}}return e}function deleteList(b,g,f,d,c,a){var e={};e[g]=f.slice(0,d);var a=(a)?(a+e[g].length):(e[g].length);var c=c||f.length;if((c-a+e[g].length)<=d){e.last_step=1}$.ajax({url:b,data:e,type:"POST",beforeSend:function(){Server.showLoadEffect()},success:function(){f.splice(0,d);if(f.length>0){$("#procents").remove();$("div.cont span.msg").append('<span id="procents">'+parseInt(((a*100)/c))+"%</span>");deleteList(b,g,f,d,c,a)}else{location.reload()}},error:function(){location.reload()},dataType:"json"})}var generateUniqueId=function(b){if(b===undefined||b===null){b=""}var a=b+"_"+Math.random().toString(36).substring(2);if($("#"+a).length!==0){return generateUniqueId(b)}else{return a}};function escapeHtml(b){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return b.replace(/[&<>"']/g,function(c){return a[c]})}function countObject(c){var b=0;if(c===undefined){return -1}if(typeof c!=="object"||c===null){return -1}for(var a in c){if(!c.hasOwnProperty(a)){continue}b++}return b}function getUrlParameterByName(a){a=a.replace(/[\[\]]/g,"\\$&").toLowerCase();var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)");var b=c.exec(window.location.search);if(!b){return null}if(!b[2]){return""}return decodeURIComponent(b[2].replace(/\+/g," "))}var Confirm={};Confirm.id="#js_confirmation";Confirm.link=false;Confirm.form_id="";Confirm.dialog=function(b,a){this.prepare(b,a);$(this.id).dialog({title:t._question,autoOpen:true,position:["center","center"],closeOnEscape:true,draggable:true,modal:true,resizable:false,dialogClass:"dialog-question-form",width:400,height:150,buttons:[{text:t._ok,click:this.ok},{text:t._cancel,click:this.cancel}]})};Confirm.prepare=function(b,a){if(a){$(this.id).html(b);this.link=a}else{this.form_id=b.charAt(0)!="#"?"#"+b:b;$(this.id).html($(this.form_id+" .question").html())}};Confirm.ok=function(){$(this).dialog("close");if(Confirm.link){document.location.href=Confirm.link}else{$(Confirm.form_id)[0].submit()}};Confirm.cancel=function(){$(this).dialog("close")};Confirm.func=function(b,a,c,d){$(this.id).html(b);var c=typeof(c)==="undefined"?t._ok:c;var d=typeof(d)==="undefined"?t._cancel:d;$(this.id).dialog({title:t._warning,autoOpen:true,position:["center","center"],closeOnEscape:true,draggable:true,modal:true,resizable:false,dialogClass:"dialog-question-form",width:"auto",height:150,buttons:[{text:c,click:function(){$(this).dialog("close");a()}},{"class":"hack_for_japanese_cancel_button",text:d,click:function(){$(this).dialog("close")}}]})};var Server={_maxStatusWaitTime:30000,STATUSES_LIST:{STOPPED:1,STARTING:2,STOPPING:3,RUNNING:4,UNREGISTERED:5,PENDING:6,PAUSED:7,WIN32_ERROR_SERVICE_DOES_NOT_EXIST:1060},STATUSES_LOCALE:{0:t._na,1:t._stopped,2:t._starting,3:t._stopping,4:t._running,5:t._stopped,6:t._pending,7:t._paused},LICENSES_LIST:{UNREGISTERED:0,REGISTERED:1,TRIAL:2,START_OFFLINE_REG:3},LICENSES_LOCALE:{0:t._unregister,1:t._registered},MESSAGE_TYPE:{ERROR:1,NOTE:2},_statusUpdateTimer:null,_actions:{locale:{start:t._start,stop:t._stop,reload:t._restart,log:t._view_log,preferences:t._preferences+"..."},keys:["start","stop","reload","log","preferences"]},actionButton:{get:function(){if(Server.actionButton._rendered===null){Server.actionButton._rendered=Server.actionButton._render()}return Server.actionButton._rendered},_render:function(){var c=$('<div id="manage" class="btn-manage">');var b=$("<div>");b.append('<div class="btn-event"><span>'+t._system+'</span><input id="act" type="hidden" value="lock" /></div>');b.append($('<div class="btn-arrow">').append(Server.actionButton.buttonArrow));b.click(function(){if(Server.actionButton._menuData.hasClass("none")){Server.actionButton.showButtonMenu()}else{Server.actionButton.hideButtonMenu()}});c.bind("mouseleave",function(){if(Server.actionButton._menuData.hasClass("none")){return}$("#manage .btn-event").click()});c.append(b);var d=$("<ul>");var a=Server.actionButton.clearElem.getButton();d.append(a);Server.actionButton._menu=d;c.append(Server.actionButton._menuData.html(d));return c},buttonArrow:$('<div class="triangle-down"></div>'),clearElem:{getButton:function(){return Server.actionButton.clearElem._renderedButton},_renderedButton:$("<li>")},clearMenu:function(){var b=$("<ul>");var a=Server.actionButton.clearElem.getButton();b.append(a);Server.actionButton._menu=b;Server.actionButton._menuData.html(Server.actionButton._menu)},addMenuItem:function(c,b){var a=$('<li class="action">');a.data("action",c);a.click(function(){var f=$(this);var d=f.data("action");if(!Server.actionFunctions.hasOwnProperty(d)){return}var e=Server.actionFunctions[d];e()});a.text(b);Server.actionButton.clearElem.getButton().before(a)},showButtonMenu:function(){Server.actionButton._menuData.removeClass("none");Server.actionButton.buttonArrow.removeClass("triangle-down");Server.actionButton.buttonArrow.addClass("triangle-up")},hideButtonMenu:function(){Server.actionButton._menuData.addClass("none");Server.actionButton.buttonArrow.removeClass("triangle-up");Server.actionButton.buttonArrow.addClass("triangle-down")},_hideButtonGlobal:function(a){if(!$("#manage.btn-manage").find($(a.target)).length){Server.actionButton.hideButtonMenu()}},_added:false,_menu:null,_menuData:$('<div class="btn-list none">'),_rendered:null},actionFunctions:{start:function(){var a=t._start_server.replace("%server_name",tcm.server_name).replace("[b]",'<b class="green">').replace("[/b]","</b>");Confirm.func(a,Server.startServer)},stop:function(){var a=t._stop_server.replace("%server_name",tcm.server_name).replace("[b]",'<b class="red">').replace("[/b]","</b>");Confirm.func(a,Server.stopServer)},reload:function(){var a=t._restart_server.replace("%server_name",tcm.server_name).replace("[b]",'<b class="red">').replace("[/b]","</b>");Confirm.func(a,Server.restartServer)},log:function(){window.open(tcm.logUrl)},preferences:function(){window.open(tcm.preferencesUrl)}},cntLoadEffect:0,showLoadEffect:function(b){b=b?b:t._processing;if($("#loading-background").length===1){$("#loading-background").show()}else{$("body").append('<div id="loading-background"></div>')}var c=$("#loadMessageBlock");if(c.length===1){c.empty()}else{c=$('<div id="loadMessageBlock" class="cont"></div>');$("body").append(c)}c.append('<img src="/img/spinner.gif" />');if(typeof b==="object"){if(b instanceof HTMLElement||b instanceof $){c.append(b);return}}var a=$('<div class="msg"></div>');a.text(b);c.append(a)},showRestartDialog:function(){var b=t._restart_server_to_apply_changes.replace("%server_name",tcm.server_name).replace("[b]",'<b class="server-name">').replace("[/b]","</b>");var a=$('<div id="restart-message-dialog">'+b+".</div>");a.dialog({title:t._warning,width:"auto",autoOpen:true,modal:true,draggable:true,resizable:false,buttons:[{text:_("Restart"),click:function(){Server.restartServer();$(this).dialog("close")}},{text:_("Cancel"),click:function(){$(this).dialog("close")}}]})},restarting_state:0,addServersStatus:function(a){if(a){Server.restarting_state|=a}},removeServersStatus:function(a){if(a){Server.restarting_state^=a}},removeLoadEffect:function(){if(!Server.restarting_state){$("#loading-background + .cont").remove();$("#loading-background").remove()}},updateStatusTitle:function(a){var d=a===Server.STATUSES_LIST.UNREGISTERED?0:1;var c=$("#server-status");c.empty();c.append("<span>"+t._server_status+":&nbsp;</span>");a=typeof(Server.STATUSES_LOCALE[a])==="undefined"?0:a;var b=Server.STATUSES_LOCALE[a];c.append('<span class="'+(a===Server.STATUSES_LIST.RUNNING?"green":"red")+'">'+b+",&nbsp;</span>");c.append('<span class="'+(d===0?"red":"green")+'">'+Server.LICENSES_LOCALE[d]+"</span>")},_getAvailableActions:function(a){if(a===undefined||a===null){a=Server._serverStatus}if(a===null){return[]}var c=Server._actions.keys;var b=[];if(Server.canChangeServerStatus){if(a===Server.STATUSES_LIST.RUNNING){b.push(c[1]);b.push(c[2])}else{if(a===Server.STATUSES_LIST.STOPPED){b.push(c[0])}}}b.push(c[3]);b.push(c[4]);return b},updateControlPanel:function(b){var f=Server.actionButton.get();var g=Server._getAvailableActions(b);Server.actionButton.clearMenu();for(var e=0;e<g.length;e++){var d=g[e];var a=Server._actions.locale.hasOwnProperty(d)?Server._actions.locale[d]:d;Server.actionButton.addMenuItem(d,a)}if(Server.actionButton._added!==true){var c=$("#server-info");c.empty();c.append(f);Server.actionButton._added=true}},clearContorlPanel:function(){$("#server-info").html("")},getServerStatus:function(a,b,c){$.ajax({url:"/admin/service/getStatus",data:{service_name:tcm.service_name},dataType:"json",cache:false,timeout:3000}).done(function(d){if(a!==undefined&&a!==null){a(d)}}).fail(function(d,e){if(b!==undefined&&b!==null){b(d,e)}}).always(function(){if(c!==undefined&&c!==null){c()}})},showSpinnersInHeader:function(){$("#server-info").html($("<img />",{src:"/images/spinner-24px-color-eeeeee.gif",id:"spinner",style:"position: absolute; right: 100px;"}));$("#server-status").html($("<img />",{src:"/img/spinner-16.gif",id:"spinner"}))},updateStatus:function(b){var a=Server.getUpdateProcessStatus();var c=new Date().getTime();if(a&&c<(Server._lastStatusUpdate+Server._maxStatusWaitTime)){Server._setStatusUpdateTimeout();return}else{if(c<(Server._lastStatusUpdate+tcm.timeUpdateControlPanel)){Server._setStatusUpdateTimeout();return}}localStorage.setItem("serverStatusInUpdate","true");Server.getServerStatus(function(e){if(!e.hasOwnProperty("regStatus")){Server.clearContorlPanel();return}var f=parseInt(e.regStatus);if(f===Server.LICENSES_LIST.REGISTERED||f===Server.LICENSES_LIST.TRIAL){var d=Server._serverStatus;Server.setLastStatusUpdate();Server.setServerStatus(e.status);if(parseInt(d)!==parseInt(e.status)||b===true){Server.updateControlPanel(e.status);Server.updateStatusTitle(e.status)}}else{Server.clearContorlPanel()}Server._setStatusUpdateTimeout();$(document).trigger("server-status-updated");Server.updateControlPanel(e.status);Server.updateStatusTitle(e.status);Server._setStatusUpdateTimeout()},function(){Server._setStatusUpdateTimeout()},function(){localStorage.setItem("serverStatusInUpdate","false")})},setServerStatus:function(a){Server._serverStatus=a;localStorage.setItem("serverStatus",a)},setLastStatusUpdate:function(){Server._lastStatusUpdate=new Date().getTime();localStorage.setItem("serverStatusLastUpdate",Server._lastStatusUpdate)},_setStatusUpdateTimeout:function(){clearTimeout(Server._statusUpdateTimer);Server._statusUpdateTimer=setTimeout(Server.updateStatus,tcm.timeUpdateControlPanel)},init:function(){Server.showSpinnersInHeader();var a=Server.getServerStatusFromStorage();var c=Server.getLastStatusUpdate();Server.setServerStatus(a);Server._lastStatusUpdate=c;if(window.addEventListener){window.addEventListener("storage",Server._localStorageHandler,false)}else{window.attachEvent("onstorage",Server._localStorageHandler)}var b=new Date();if(b.getTime()>c+tcm.timeUpdateControlPanel||a===-1){Server.showSpinnersInHeader();Server.updateStatus(true)}else{Server.updateControlPanel(a);Server.updateStatusTitle(a);Server._setStatusUpdateTimeout()}},getLastStatusUpdate:function(){var a=localStorage.getItem("serverStatusLastUpdate");if(a===null||a==="null"){return 0}else{return parseInt(a)}},getServerStatusFromStorage:function(){var a=localStorage.getItem("serverStatus");if(a===null||a==="null"){return -1}else{return parseInt(a)}},getCurrentServerStatus:function(){return Server._serverStatus},getUpdateProcessStatus:function(){var a=localStorage.getItem("serverStatusInUpdate");if(a!==true&&a!=="true"){return false}else{return true}},_localStorageHandler:function(b){if(!b){b=window.event}var a=b.key;if(a===undefined){return}var c=b.newValue;switch(a){case"serverStatus":c=parseInt(c);Server._serverStatus=c;Server.updateControlPanel(c);Server.updateStatusTitle(c);$(document).trigger("server-status-updated");break;case"serverStatusInUpdate":break;case"serverStatusLastUpdate":c=parseInt(c);Server._lastStatusUpdate=c;break}},_serverStatus:null,_lastStatusUpdate:null,canChangeServerStatus:true,stopServer:function(){Server.showLoadEffect(t._service_is_stopping);Server.addServersStatus(1);Server._executeServerAction(tcm.stopServerUrl,function(a){Server._setStatusUpdateTimeout();Server.setServerStatus(a.status);Server.setLastStatusUpdate();Server.updateControlPanel(a.status);Server.updateStatusTitle(a.status);Server.removeServersStatus(1);Server.removeLoadEffect();$(document).trigger("AfterStop")},function(){$(document).trigger("AfterStop")},function(){setTimeout(Server.stopServer,1000)})},onAfterServerStart:function(a,b,d){var c=function(){Server.getServerStatus(function(e){if(e.status===Server.STATUSES_LIST.RUNNING){a(e);return}setTimeout(c,5000)},b,d)};c()},startServer:function(b){var a=typeof(b)==="undefined"?tcm.startServerUrl:tcm.startServerUrl+"?reason="+b;Server.showLoadEffect(t._service_is_starting);Server.addServersStatus(1);Server._executeServerAction(a,function(c){Server.onAfterServerStart(function(d){Server._setStatusUpdateTimeout();Server.setServerStatus(d.status);Server.setLastStatusUpdate();Server.updateControlPanel(d.status);Server.updateStatusTitle(d.status);Server.removeServersStatus(1);Server.removeLoadEffect();$("#restart-server-on-slots-change-msg").hide();$(document).trigger("AfterStart",d)},function(){$(document).trigger("AfterFailedStart",c)},function(){})},function(c){$(document).trigger("AfterFailedStart",c)},function(){setTimeout(Server.startServer,1000)})},restartServer:function(){Server.showLoadEffect(t._service_is_stopping);Server.addServersStatus(1);var b="restart";var a=tcm.stopServerUrl+"?reason="+b;Server._executeServerAction(a,function(c){Server._setStatusUpdateTimeout();Server.setServerStatus(c.status);Server.setLastStatusUpdate();Server.updateControlPanel(c.status);Server.updateStatusTitle(c.status);$(document).trigger("AfterStop");Server.startServer(b)},function(){$(document).trigger("AfterStop")},function(){setTimeout(Server.restartServer,1000)})},endRegister:function(){Server._executeServerAction(tcm.endRegisterUrl,function(a){if(a.status===1||a.status==="1"||a.status===true){$(document).one("AfterStart",{url:a.url},function(b){$(window).off("beforeunload");$(document).unbind("AfterFailedStart");window.location.href=b.data.url});$(document).one("AfterFailedStart",{url:a.url},function(b){$(window).off("beforeunload");$(document).unbind("AfterStart");window.location.href=b.data.url});Server.startServer()}else{$(window).off("beforeunload");Server.removeServersStatus(1);Server.removeLoadEffect();window.location.href=a.url}})},_executeServerAction:function(c,a,b,e,d){$.ajax({url:c,dataType:"json",method:"POST",cache:false}).done(function(f){if(f.status!==false||f.status!=="false"){if(a!==undefined&&a!==null){a(f)}}else{if(b!==undefined&&b!==null){b(f)}}}).fail(function(f,g){if(e!==undefined&&e!==null){e(f,g)}}).always(function(){if(d!==undefined&&d!==null){d()}})},enableRestartMessage:function(){$.post(tcm.setRestartMsgUrl).fail(function(){setTimeout(Server.enableRestartMessage,2000)})},cmdRegister:function(){$(window).on("beforeunload",function(){return t._noexit});Server.showLoadEffect(t._processing_please_wait);$(document).one("AfterStop",function(){Server.showLoadEffect(t._processing_please_wait);$.ajax({url:tcm.cmdRegisterUrl,success:function(a){Server.endRegister()}})});Server.stopServer()},apache:{restart:function(e){Server.showLoadEffect(t._web_manager_is_restarting);Server.addServersStatus(2);Server.apache.startTime=(new Date()).getTime();var f=localStorage.getItem("httpServerUrl")!==null?localStorage.getItem("httpServerUrl"):location.href;$.cookie("after_restart_load_url",f,{patch:"/",expire:1});localStorage.removeItem("httpServerUrl");var b=1000;var c=function(){b=b+1000;if(b>=tcm.timeWebRestartMax){b=tcm.timeWebRestartMax}$("#procents").remove();$("div.cont span.msg").append('<span id="procents">'+Math.floor(100*b/tcm.timeWebRestartMax)+"%</span>")};setInterval(c,1000);function d(){var j=localStorage.getItem("selfSignedCertificateWasRefreshed")==="true";var h=localStorage.getItem("sslPortWasChanged")==="true";renderConnectionInstruction(j||h)}var a=false;var g=function(){Server.apache.checkIsWork(function(){if(a){if(e){e()}else{Server.apache._isWorkAfterRestart()}}else{setTimeout(g,500)}},function(h,k){if(h.status==="403"||h.status===403||k!=="timeout"){if(e){e()}else{Server.apache._isWorkAfterRestart()}}else{a=true;var j=(new Date()).getTime();if((j-Server.apache.startTime)>tcm.timeWebRestartMax){Server.removeServersStatus(2);Server.removeLoadEffect();$("#server-status, #server-info").remove();$("#logo").removeAttr("onclick");d()}else{setTimeout(g,1000)}}})};$.ajax({type:"POST",url:tcm.restartApacheUrl,timeout:5000}).fail(function(){a=true}).always(function(){g()})},_isWorkAfterRestart:function(){setTimeout(function(){var a=$.cookie("after_restart_load_url");$.removeCookie("after_restart_load_url");Server.removeServersStatus(2);window.location.href=a?a:tcm.securitySettingsUrl},2000)},checkIsWork:function(a,b){$.ajax({url:tcm.apacheIsWorkUrl,timeout:3000,success:function(c){if(a!==undefined&&a!==null){a(c)}},error:function(c,e,d){if(b!==undefined&&b!==null){b(c,e,d)}}})},startTime:0},setServerMessage:function(f,e,b,d){var a=$("#message");switch(e){default:case Server.MESSAGE_TYPE.NOTE:var g=$('<span class="note-msg"></span>');if(d){g.html(f)}else{g.text(f)}a.empty();a.append(g);var c=$("#error-message-container>.error-text");if(c.parent().css("display")!=="none"){c.fadeOut(200,function(){c.empty();c.parent().css("display","none")})}if(b!==undefined&&typeof b==="number"){if(Server._serverMessageHideTimer!==null){clearTimeout(Server._serverMessageHideTimer)}Server._serverMessageHideTimer=setTimeout(function(){g.fadeOut(500,function(){a.empty();Server._serverMessageHideTimer=null})},b)}break;case Server.MESSAGE_TYPE.ERROR:var a=$("#error-message-container>.error-text");var g=$('<span class="error-msg"></span>');if(d){g.html(f)}else{g.text(f)}a.empty();a.append(g);a.css("display","block");a.parent().css("display","block");$(".content-container").scrollTop(0);if(b!==undefined&&typeof b==="number"){if(Server._serverMessageHideTimer!==null){clearTimeout(Server._serverMessageHideTimer)}Server._serverMessageHideTimer=setTimeout(function(){g.fadeOut(500,function(){a.empty();Server._serverMessageHideTimer=null;a.parent().css("display","none")})},b)}break}},_serverMessageHideTimer:null,clearServerMessage:function(){var a=$("#message");a.empty()},alert:function(d,f,c,b){var a=$("<div></div>");a.append("<span>"+d+"</span>");var e=$.extend(true,{},this.defaulAlertParams);if(typeof b==="object"){e=$.extend(true,e,b)}e.buttons=[{text:t.ok,click:function(){if(typeof c==="function"){c(a)}$(this).dialog("close")}}];if(typeof f==="string"){e.title=f}a.dialog(e);a.dialog("open")},defaulAlertParams:{autoOpen:false,height:160,width:240,modal:true,draggable:true,resizable:false,title:""},storage:{changeStorage:function(){var a=function(){if($("#import-ldap-users-flag").is(":checked")){var b=$('<div id="importStatus"></div>');b.text(t._users_imported.replace("%n","0"));Server.showLoadEffect(b);Server.storage.importLdapUsers()}else{Server.showLoadEffect();Server.storage.sendChangeStorage()}};if(parseInt(Server.getCurrentServerStatus())!==Server.STATUSES_LIST.STOPPED){Confirm.func(t._change_storage_question,function(){Server.showLoadEffect(t._service_is_stopping);$(document).one("AfterStop",function(){a()});Server.stopServer()})}else{a()}},sendChangeStorage:function(){$.ajax({url:tcm.changeStorageUrl,data:{mode:($("#mode").is(":checked")?1:0)},type:"POST",success:function(a){if(a.status==="success"){Server.removeLoadEffect();$(document).trigger("onStorageChange");Server.storage.afterChangeStorage()}},error:function(){Server.removeLoadEffect()},dataType:"json"})},importLdapUsers:function(b,a){b=b?b:0;a=a?a:0;$.ajax({url:tcm.importLdapUsersUrl,data:{page:b},type:"POST",dataType:"json",success:function(c){if(!c.hasOwnProperty("nextPageId")||c.nextPageId===false){setTimeout(function(){Server.removeLoadEffect();Server.storage.sendChangeStorage()},1000)}else{a=a+c.count;$("#importStatus").text(t._users_imported.replace("%n",a));Server.storage.importLdapUsers(c.nextPageId,a)}},error:function(c){Server.removeLoadEffect()}})},afterChangeStorage:function(){Server.showLoadEffect(t._service_is_starting);$(document).one("AfterStart AfterFailedStart",function(){location.reload()});Server.startServer()}}};$(document).ready(function(){Server.canChangeServerStatus=!tcm.isSecurityAdmin;Server.init();$(window).bind("resize",prepare_table);$(window).bind("resize",updateCommonCSSProperties);updateCommonCSSProperties();if(typeof window.updateCSSOnPage=="function"){$(window).bind("resize",updateCSSOnPage);updateCSSOnPage()}prepare_table();$(document).bind("display-header-messages",function(d,e){var c="";if(e==undefined||e.message==undefined){c=t._settings_are_saved}else{c=e.message}$("#error-message-container").css("display","none");$("#header #line-1 #message").hide(200).html('<span class="note-msg">'+c+"</span>").show(200)});$(document).bind("display-header-error",function(e,d){var c="";if(d==undefined||d.message==undefined){c=t._error}else{c=d.message}$("#error-message-container").css("display","block");$("#error-message-container>.error-text").hide(200).html('<span class="error-msg">'+c+"</span>").show(200);$(".content-container").scrollTop(0)});$(document).bind("hidden-header-error",function(){$("#error-message-container").css("display","none")});if(tcm.livechat_url.length>0){$.ajax({url:tcm.livechat_url+"&lang="+(t.lang==="be"?"ru":t.lang),success:function(c){if(c.html){$("body").append(c.html)}},dataType:"jsonp"})}if(tcm.check_update_url.indexOf("://")!==-1){var b=false;$.ajax({url:tcm.check_update_url,dataType:"jsonp",timeout:10000,success:function(d){if(d.status==="success"){if(d.message!=="ok"){var c=$("#outside-msg");if(c.length>0){c.html(d.message).slideDown(1000)}$("#general-info-menu-li").addClass("with-notification")}}},error:function(d,e,c){b=true}})}if(tcm.server_restart_required){Confirm.func(t._server_restart_is_required,function(){Server.apache.restart()})}if(tcm.work_dir_path_requires_change){var a=window.location.pathname.indexOf("/admin/general/config")===0;if(a){$("#workdirectory").ready(function(){$("#workingdirectory-path").click()});return}Confirm.func(t._work_dir_change_is_required,function(){window.location.href="/admin/general/config#work-path-panel"},t._change_the_path)}});function smooth_text(){$(".content-container table:not(.users-list) td").each(function(){var a=$(this).html();if(!$(this).find("select, textarea, input:not(.long-field)").length&&$(this).text().length>0){$(this).html("<div class='can-be-long'><div></div><span>"+a+"</span></div>");($(this).find("span").width()>$(this).children("div").width())?$(this).find("span").attr("title",$.trim($(this).text())):$(this).html(a)}})}function updateCommonCSSProperties(){$("div.content-container").css("bottom",$("#license-block").height())}function prepare_table(){if($(".table-body").length==0||$(".table-body tr").length==0||$(".block-table-wrapper").height()===0||$(".table-body").height()===0){return}$(".table-body").each(function(){var b=(($(this).find("tr:last-child > td").length-$(this).find("table td").length)/$(this).length)-$(this).find("tr:last-child td:hidden").length;var e=$(this).find("tr:first-child > td").attr("colspan");var a=0,c="<tr class='empty-tr'>";while(a++<b){c+="<td "+(e?("colspan='"+e+"'"):"")+"></td>"}c+="</tr>";$(this).find(" tr.empty-tr").remove();var d=41;while($(".block-table-wrapper").height()-$(this).height()>=d){$(this).append(c)}})}function sendMail(a){Server.showLoadEffect();$.ajax({url:a,type:"POST",dataType:"json",success:function(b){if(b.status){$(document).trigger("display-header-messages",b)}else{$(document).trigger("display-header-error",b)}Server.removeLoadEffect()},error:function(b){Server.removeLoadEffect()}})}function htmlspecialchars_decode(b,f){var d=0,c=0,e=false;if(typeof f==="undefined"){f=2}b=b.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var a={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(f===0){e=true}if(typeof f!=="number"){f=[].concat(f);for(c=0;c<f.length;c++){if(a[f[c]]===0){e=true}else{if(a[f[c]]){d=d|a[f[c]]}}}f=d}if(f&a.ENT_HTML_QUOTE_SINGLE){b=b.replace(/&#0*39;/g,"'")}if(!e){b=b.replace(/&quot;/g,'"')}b=b.replace(/&amp;/g,"&");return b}function generateSecretKey(a){$.post(tcm.generate_secret_key_url,function(c){var b=$.parseJSON(c);$(a).val(b.secretKey)})}function getRandomInt(b,a){return Math.floor(Math.random()*(a-b+1))+b}function cutLongString(e,d){var a=e;var d=d||32;var c=e.length;if(c>d){var b=e.substr(0,Math.round(d/2))+"...";b+=e.substr(c-Math.round(d/2),Math.round(d/2));a=b}return a}isEqualObjectArrays=function(d,c,b){b=typeof(b)==="undefined"?true:b;if(d.length!=c.length){return false}if(!b){for(var a in d){if(c.indexOf(d[a])!==-1){return false}}return true}for(var a in d){if(!objectInArray(c,d[a])){return false}}return true};objectInArray=function(c,b){for(var a in c){if(compareObjects(c[a],b)){return true}}return false};compareObjects=function(b,a){for(var c in b){if(b.hasOwnProperty(c)){if(b[c]!==a[c]){return false}}}for(var c in a){if(a.hasOwnProperty(c)){if(b[c]!==a[c]){return false}}}return true};function eventBlur(e,a,c,b){var d=e.value;if(e.type=="checkbox"){d=e.checked?1:0}if(d!==sessionStorage.getItem(e.id)){send({model:a,point:e.name,value:d,message:b},c,e.id)}sessionStorage.setItem(e.id,"");$("#"+e.id).bind("focus",function(){eventFocus(e)})}function eventFocus(b){$("#"+b.id).unbind("focus");var a;if(b.type=="checkbox"){a=item.checked?1:0}sessionStorage.setItem(b.id,a)}function send(b,a,c){$.ajax({url:"/admin/handler/saving-point/",data:b,method:"POST",dataType:"JSON",success:function(d){if(a){$(document).trigger(a,[d,c])}},error:function(d){}})}function sendForm(e,a,d,c){var b=new Array();$("#"+e+" :input").each(function(){var g="";if($(this).attr("type")=="checkbox"){g=$(this).prop("checked")?1:0}else{g=$(this).val()}if($(this).attr("model")){var f={model:$(this).attr("model"),point:$(this).attr("name"),value:g,id:$(this).attr("id"),key:"host"};if($(this).attr("optional")){f.optional=$(this).attr("optional")}b.push(f)}});$.ajax({url:"/admin/handler/saving-form/",type:"POST",data:"config_id="+c+"&json_str="+$.toJSON(b).replace(/%/g,";percent;").replace(/&/g,";end;").replace(/\+/g,";plus;").replace(/\</g,";lessthan;"),dataType:"json",beforeSend:function(f){f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")},success:function(h){$(document).trigger("form-send-success",{id:e});if(h.error){$(document).trigger("display-header-error",h)}else{var g=0;for(var f in h){if(h[f].message){$(document).trigger("display-message",[h[f],h[f].id]);$("#"+h[f].id).focus();g++}}if((g==0)&&(a!="none")){$(document).trigger("display-header-messages",{message:(a)?a:null})}}if(d!==undefined&&d!==null){d()}},error:function(f){}});return true}
/* jQuery JSON plugin 2.4.0 | code.google.com/p/jquery-json */
(function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var pairs,k,name,val,type=$.type(o);if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return String(o)}if(type==="string"){return $.quoteString(o)}if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||"null")}return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+str+")")}throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+str+'"'}}(jQuery));(function(f){function d(){}function y(I){c=[I]}function p(K,I,J){return K&&K.apply(I.context||I,J)}function o(I){return/\?/.test(I)?"&":"?"}var q="async",w="charset",s="",G="error",x="insertBefore",u="_jqjsp",D="on",g=D+"click",l=D+G,r=D+"load",B=D+"readystatechange",b="readyState",F="removeChild",k="<script>",C="success",E="timeout",e=window,a=f.Deferred,h=f("head")[0]||document.documentElement,A={},n=0,c,m={callback:u,url:location.href},z=e.opera,j=!!f("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;function H(N){N=f.extend({},m,N);var L=N.success,S=N.error,K=N.complete,ab=N.dataFilter,ad=N.callbackParameter,T=N.callback,ac=N.cache,J=N.pageCache,M=N.charset,O=N.url,af=N.data,V=N.timeout,R,Z=0,X=d,U,Q,I,ae,P,Y;a&&a(function(ag){ag.done(L).fail(S);L=ag.resolve;S=ag.reject}).promise(N);N.abort=function(){!(Z++)&&X()};if(p(N.beforeSend,N,[N])===!1||Z){return N}O=O||s;af=af?((typeof af)=="string"?af:f.param(af,N.traditional)):s;O+=af?(o(O)+af):s;ad&&(O+=o(O)+encodeURIComponent(ad)+"=?");!ac&&!J&&(O+=o(O)+"_"+(new Date()).getTime()+"=");O=O.replace(/=\?(&|$)/,"="+T+"$1");function aa(ag){if(!(Z++)){X();J&&(A[O]={s:[ag]});ab&&(ag=ab.apply(N,[ag]));p(L,N,[ag,C,N]);p(K,N,[N,C])}}function W(ag){if(!(Z++)){X();J&&ag!=E&&(A[O]=ag);p(S,N,[N,ag]);p(K,N,[N,ag])}}if(J&&(R=A[O])){R.s?aa(R.s[0]):W(R)}else{e[T]=y;ae=f(k)[0];ae.id=u+n++;if(M){ae[w]=M}z&&z.version()<11.6?((P=f(k)[0]).text="document.getElementById('"+ae.id+"')."+l+"()"):(ae[q]=q);if(j){ae.htmlFor=ae.id;ae.event=g}ae[r]=ae[l]=ae[B]=function(ag){if(!ae[b]||!/i/.test(ae[b])){try{ae[g]&&ae[g]()}catch(ah){}ag=c;c=0;ag?aa(ag[0]):W(G)}};ae.src=O;X=function(ag){Y&&clearTimeout(Y);ae[B]=ae[r]=ae[l]=null;h[F](ae);P&&h[F](P)};h[x](ae,(I=h.firstChild));P&&h[x](P,I);Y=V>0&&setTimeout(function(){W(E)},V)}return N}H.setup=function(I){f.extend(m,I)};f.jsonp=H})(jQuery);function updateTips(b){var a=$(".validateTips");a.html(b).addClass("ui-state-highlight");setTimeout(function(){a.removeClass("ui-state-highlight",1500)},500)}function cleanTips(){$(".validateTips").html("").removeClass("ui-state-highlight")}function checkLength(c,d,b,a){if(c.val().length>a){c.addClass("ui-state-error");updateTips(t._field_too_long.replace(/%field/,d));return false}else{if(c.val().length<b){c.addClass("ui-state-error");updateTips(t._field_empty.replace(/%field/,d));return false}else{return true}}}function checkRegexp(d,c,e,b){var a=b?b(d.val()):d.val();if(!(c.test(a))){d.addClass("ui-state-error");updateTips(e);return false}else{return true}}function checkInt(c,d,b,a){if(Number(c.val())<b){c.addClass("ui-state-error");updateTips("<b>"+d+"</b>: "+t._port_can_not_be_less+" "+b);return false}else{if(Number(c.val())>a){c.addClass("ui-state-error");updateTips("<b>"+d+"</b>: "+t._port_can_not_be_more+" "+a);return false}else{return true}}}
/* DataTables 1.10.2
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(b,c,a){var d=function(aT){function bd(p){var h,r,q={};aT.each(p,function(s){if((h=s.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(h[1]+" ")){r=s.replace(h[0],h[2].toLowerCase()),q[r]=s,"o"===h[1]&&bd(p[s])}});p._hungarianMap=q}function bt(p,h,r){p._hungarianMap||bd(p);var q;aT.each(h,function(s){q=p._hungarianMap[s];if(q!==a&&(r||h[q]===a)){"o"===q.charAt(0)?(h[q]||(h[q]={}),aT.extend(!0,h[q],h[s]),bt(p[q],h[q],r)):h[q]=h[s]}})}function bk(p){var h=aN.defaults.oLanguage,q=p.sZeroRecords;!p.sEmptyTable&&(q&&"No data available in table"===h.sEmptyTable)&&bA(p,p,"sZeroRecords","sEmptyTable");!p.sLoadingRecords&&(q&&"Loading..."===h.sLoadingRecords)&&bA(p,p,"sZeroRecords","sLoadingRecords");p.sInfoThousands&&(p.sThousands=p.sInfoThousands);(p=p.sDecimal)&&aO(p)}function an(p){aG(p,"ordering","bSort");aG(p,"orderMulti","bSortMulti");aG(p,"orderClasses","bSortClasses");aG(p,"orderCellsTop","bSortCellsTop");aG(p,"order","aaSorting");aG(p,"orderFixed","aaSortingFixed");aG(p,"paging","bPaginate");aG(p,"pagingType","sPaginationType");aG(p,"pageLength","iDisplayLength");aG(p,"searching","bFilter");if(p=p.aoSearchCols){for(var h=0,q=p.length;h<q;h++){p[h]&&bt(aN.models.oSearch,p[h])}}}function m(h){aG(h,"orderable","bSortable");aG(h,"orderData","aDataSort");aG(h,"orderSequence","asSorting");aG(h,"orderDataType","sortDataType")}function b9(p){var p=p.oBrowser,h=aT("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(aT("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(aT('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),q=h.find(".test");p.bScrollOversize=100===q[0].offsetWidth;p.bScrollbarLeft=1!==q.offset().left;h.remove()}function bQ(p,h,x,w,u,s){var r,q=!1;x!==a&&(r=x,q=!0);for(;w!==u;){p.hasOwnProperty(w)&&(r=q?h(r,p[w],w,p):p[w],q=!0,w+=s)}return r}function ce(p,h){var r=aN.defaults.column,q=p.aoColumns.length,r=aT.extend({},aN.models.oColumn,r,{nTh:h?h:c.createElement("th"),sTitle:r.sTitle?r.sTitle:h?h.innerHTML:"",aDataSort:r.aDataSort?r.aDataSort:[q],mData:r.mData?r.mData:q,idx:q});p.aoColumns.push(r);r=p.aoPreSearchCols;r[q]=aT.extend({},aN.models.oSearch,r[q]);cd(p,q,null)}function cd(y,x,w){var x=y.aoColumns[x],u=y.oClasses,s=aT(x.nTh);if(!x.sWidthOrig){x.sWidthOrig=s.attr("width")||null;var r=(s.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);r&&(x.sWidthOrig=r[1])}w!==a&&null!==w&&(m(w),bt(aN.defaults.column,w),w.mDataProp!==a&&!w.mData&&(w.mData=w.mDataProp),w.sType&&(x._sManualType=w.sType),w.className&&!w.sClass&&(w.sClass=w.className),aT.extend(x,w),bA(x,w,"sWidth","sWidthOrig"),"number"===typeof w.iDataSort&&(x.aDataSort=[w.iDataSort]),bA(x,w,"aDataSort"));var q=x.mData,h=bc(q),p=x.mRender?bc(x.mRender):null,w=function(z){return"string"===typeof z&&-1!==z.indexOf("@")};x._bAttrSrc=aT.isPlainObject(q)&&(w(q.sort)||w(q.type)||w(q.filter));x.fnGetData=function(A,z,C){var B=h(A,z,a,C);return p&&z?p(B,z,A,C):B};x.fnSetData=function(A,z,B){return bT(q)(A,z,B)};y.oFeatures.bSort||(x.bSortable=!1,s.addClass(u.sSortableNone));y=-1!==aT.inArray("asc",x.asSorting);w=-1!==aT.inArray("desc",x.asSorting);!x.bSortable||!y&&!w?(x.sSortingClass=u.sSortableNone,x.sSortingClassJUI=""):y&&!w?(x.sSortingClass=u.sSortableAsc,x.sSortingClassJUI=u.sSortJUIAscAllowed):!y&&w?(x.sSortingClass=u.sSortableDesc,x.sSortingClassJUI=u.sSortJUIDescAllowed):(x.sSortingClass=u.sSortable,x.sSortingClassJUI=u.sSortJUI)}function a9(p){if(!1!==p.oFeatures.bAutoWidth){var h=p.aoColumns;br(p);for(var r=0,q=h.length;r<q;r++){h[r].nTh.style.width=h[r].sWidth}}h=p.oScroll;(""!==h.sY||""!==h.sX)&&a8(p);aI(p,null,"column-sizing",[p])}function bS(p,h){var q=a7(p,"bVisible");return"number"===typeof q[h]?q[h]:null}function a6(p,h){var q=a7(p,"bVisible"),q=aT.inArray(h,q);return -1!==q?q:null}function a4(h){return a7(h,"bVisible").length}function a7(p,h){var q=[];aT.map(p.aoColumns,function(r,s){r[h]&&q.push(s)});return q}function aU(D){var C=D.aoColumns,B=D.aoData,A=aN.ext.type.detect,z,y,x,s,u,w,q,p,r;z=0;for(y=C.length;z<y;z++){if(q=C[z],r=[],!q.sType&&q._sManualType){q.sType=q._sManualType}else{if(!q.sType){x=0;for(s=A.length;x<s;x++){u=0;for(w=B.length;u<w&&!(r[u]===a&&(r[u]=bF(D,u,z,"type")),p=A[x](r[u],D),!p||"html"===p);u++){}if(p){q.sType=p;break}}q.sType||(q.sType="string")}}}}function bn(B,A,z,y){var x,w,u,r,s,p,q=B.aoColumns;if(A){for(x=A.length-1;0<=x;x--){p=A[x];var h=p.targets!==a?p.targets:p.aTargets;aT.isArray(h)||(h=[h]);w=0;for(u=h.length;w<u;w++){if("number"===typeof h[w]&&0<=h[w]){for(;q.length<=h[w];){ce(B)}y(h[w],p)}else{if("number"===typeof h[w]&&0>h[w]){y(q.length+h[w],p)}else{if("string"===typeof h[w]){r=0;for(s=q.length;r<s;r++){("_all"==h[w]||aT(q[r].nTh).hasClass(h[w]))&&y(r,p)}}}}}}}if(z){x=0;for(B=z.length;x<B;x++){y(x,z[x])}}}function bq(p,h,w,u){var s=p.aoData.length,r=aT.extend(!0,{},aN.models.oRow,{src:w?"dom":"data"});r._aData=h;p.aoData.push(r);for(var h=p.aoColumns,r=0,q=h.length;r<q;r++){w&&ar(p,s,r,bF(p,s,r)),h[r].sType=null}p.aiDisplayMaster.push(s);(w||!p.oFeatures.bDeferRender)&&O(p,s,w,u);return s}function bp(p,h){var q;h instanceof aT||(h=aT(h));return h.map(function(r,s){q=aS(p,s);return bq(p,q.data,s,q.cells)})}function bF(p,h,x,w){var u=p.iDraw,s=p.aoColumns[x],r=p.aoData[h]._aData,q=s.sDefaultContent,x=s.fnGetData(r,w,{settings:p,row:h,col:x});if(x===a){return p.iDrawError!=u&&null===q&&(bi(p,0,"Requested unknown parameter "+("function"==typeof s.mData?"{function}":"'"+s.mData+"'")+" for row "+h,4),p.iDrawError=u),q}if((x===r||null===x)&&null!==q){x=q}else{if("function"===typeof x){return x.call(r)}}return null===x&&"display"==w?"":x}function ar(p,h,r,q){p.aoColumns[r].fnSetData(p.aoData[h]._aData,q,{settings:p,row:h,col:r})}function ci(h){return aT.map(h.match(/(\\.|[^\.])+/g),function(p){return p.replace(/\\./g,".")})}function bc(p){if(aT.isPlainObject(p)){var h={};aT.each(p,function(r,s){s&&(h[r]=bc(s))});return function(r,x,w,u){var s=h[x]||h._;return s!==a?s(r,x,w,u):r}}if(null===p){return function(r){return r}}if("function"===typeof p){return function(r,w,u,s){return p(r,w,u,s)}}if("string"===typeof p&&(-1!==p.indexOf(".")||-1!==p.indexOf("[")||-1!==p.indexOf("("))){var q=function(s,r,z){var y,u;if(""!==z){u=ci(z);for(var w=0,x=u.length;w<x;w++){z=u[w].match(bY);y=u[w].match(bg);if(z){u[w]=u[w].replace(bY,"");""!==u[w]&&(s=s[u[w]]);y=[];u.splice(0,w+1);u=u.join(".");w=0;for(x=s.length;w<x;w++){y.push(q(s[w],r,u))}s=z[0].substring(1,z[0].length-1);s=""===s?y:y.join(s);break}else{if(y){u[w]=u[w].replace(bg,"");s=s[u[w]]();continue}}if(null===s||s[u[w]]===a){return a}s=s[u[w]]}}return s};return function(r,s){return q(r,s,p)}}return function(r){return r[p]}}function bT(p){if(aT.isPlainObject(p)){return bT(p._)}if(null===p){return function(){}}if("function"===typeof p){return function(q,s,r){p(q,"set",s,r)}}if("string"===typeof p&&(-1!==p.indexOf(".")||-1!==p.indexOf("[")||-1!==p.indexOf("("))){var h=function(q,z,y){var y=ci(y),x;x=y[y.length-1];for(var w,r,s=0,u=y.length-1;s<u;s++){w=y[s].match(bY);r=y[s].match(bg);if(w){y[s]=y[s].replace(bY,"");q[y[s]]=[];x=y.slice();x.splice(0,s+1);w=x.join(".");r=0;for(u=z.length;r<u;r++){x={},h(x,z[r],w),q[y[s]].push(x)}return}r&&(y[s]=y[s].replace(bg,""),q=q[y[s]](z));if(null===q[y[s]]||q[y[s]]===a){q[y[s]]={}}q=q[y[s]]}if(x.match(bg)){q[x.replace(bg,"")](z)}else{q[x.replace(bY,"")]=z}};return function(r,q){return h(r,q,p)}}return function(q,r){q[p]=r}}function bX(h){return bD(h.aoData,"_aData")}function aq(h){h.aoData.length=0;h.aiDisplayMaster.length=0;h.aiDisplay.length=0}function M(p,h,u){for(var s=-1,r=0,q=p.length;r<q;r++){p[r]==h?s=r:p[r]>h&&p[r]--}-1!=s&&u===a&&p.splice(s,1)}function ch(p,h,x,w){var u=p.aoData[h],s;if("dom"===x||(!x||"auto"===x)&&"dom"===u.src){u._aData=aS(p,u).data}else{var r=u.anCells,q;if(r){x=0;for(s=r.length;x<s;x++){for(q=r[x];q.childNodes.length;){q.removeChild(q.firstChild)}r[x].innerHTML=bF(p,h,x,"display")}}}u._aSortData=null;u._aFilterData=null;p=p.aoColumns;if(w!==a){p[w].sType=null}else{x=0;for(s=p.length;x<s;x++){p[x].sType=null}}bB(u)}function aS(C,B){var A=[],z=[],y=B.firstChild,x,w,s,u=0,p,q=C.aoColumns,h=function(E,D,F){"string"===typeof E&&(D=E.indexOf("@"),-1!==D&&(E=E.substring(D+1),s["@"+E]=F.getAttribute(E)))},r=function(D){w=q[u];p=aT.trim(D.innerHTML);w&&w._bAttrSrc?(s={display:p},h(w.mData.sort,s,D),h(w.mData.type,s,D),h(w.mData.filter,s,D),A.push(s)):A.push(p);u++};if(y){for(;y;){x=y.nodeName.toUpperCase();if("TD"==x||"TH"==x){r(y),z.push(y)}y=y.nextSibling}}else{z=B.anCells;y=0;for(x=z.length;y<x;y++){r(z[y])}}return{data:A,cells:z}}function O(C,B,A,z){var y=C.aoData[B],x=y._aData,w=[],r,s,u,q,p;if(null===y.nTr){r=A||c.createElement("tr");y.nTr=r;y.anCells=w;r._DT_RowIndex=B;bB(y);q=0;for(p=C.aoColumns.length;q<p;q++){u=C.aoColumns[q];s=A?z[q]:c.createElement(u.sCellType);w.push(s);if(!A||u.mRender||u.mData!==q){s.innerHTML=bF(C,B,q,"display")}u.sClass&&(s.className+=" "+u.sClass);u.bVisible&&!A?r.appendChild(s):!u.bVisible&&A&&s.parentNode.removeChild(s);u.fnCreatedCell&&u.fnCreatedCell.call(C.oInstance,s,bF(C,B,q),x,B,q)}aI(C,"aoRowCreatedCallback",null,[r,x,B])}y.nTr.setAttribute("role","row")}function bB(p){var h=p.nTr,r=p._aData;if(h){r.DT_RowId&&(h.id=r.DT_RowId);if(r.DT_RowClass){var q=r.DT_RowClass.split(" ");p.__rowc=p.__rowc?aY(p.__rowc.concat(q)):q;aT(h).removeClass(p.__rowc.join(" ")).addClass(r.DT_RowClass)}r.DT_RowData&&aT(h).data(r.DT_RowData)}}function aQ(A){var z,y,x,w,u,s=A.nTHead,q=A.nTFoot,r=0===aT("th, td",s).length,h=A.oClasses,p=A.aoColumns;r&&(w=aT("<tr/>").appendTo(s));z=0;for(y=p.length;z<y;z++){u=p[z],x=aT(u.nTh).addClass(u.sClass),r&&x.appendTo(w),A.oFeatures.bSort&&(x.addClass(u.sSortingClass),!1!==u.bSortable&&(x.attr("tabindex",A.iTabIndex).attr("aria-controls",A.sTableId),aw(A,u.nTh,z))),u.sTitle!=x.html()&&x.html(u.sTitle),ag(A,"header")(A,x,u,h)}r&&bP(A.aoHeader,s);aT(s).find(">tr").attr("role","row");aT(s).find(">tr>th, >tr>td").addClass(h.sHeaderTH);aT(q).find(">tr>th, >tr>td").addClass(h.sFooterTH);if(null!==q){A=A.aoFooter[0];z=0;for(y=A.length;z<y;z++){u=p[z],u.nTf=A[z].cell,u.sClass&&aT(u.nTf).addClass(u.sClass)}}}function bj(z,y,x){var w,u,s,r=[],p=[],q=z.aoColumns.length,h;if(y){x===a&&(x=!1);w=0;for(u=y.length;w<u;w++){r[w]=y[w].slice();r[w].nTr=y[w].nTr;for(s=q-1;0<=s;s--){!z.aoColumns[s].bVisible&&!x&&r[w].splice(s,1)}p.push([])}w=0;for(u=r.length;w<u;w++){if(z=r[w].nTr){for(;s=z.firstChild;){z.removeChild(s)}}s=0;for(y=r[w].length;s<y;s++){if(h=q=1,p[w][s]===a){z.appendChild(r[w][s].cell);for(p[w][s]=1;r[w+q]!==a&&r[w][s].cell==r[w+q][s].cell;){p[w+q][s]=1,q++}for(;r[w][s+h]!==a&&r[w][s].cell==r[w][s+h].cell;){for(x=0;x<q;x++){p[w+x][s+h]=1}h++}aT(r[w][s].cell).attr("rowspan",q).attr("colspan",h)}}}}}function bm(C){var B=aI(C,"aoPreDrawCallback","preDraw",[C]);if(-1!==aT.inArray(!1,B)){bE(C,!1)}else{var B=[],A=0,z=C.asStripeClasses,y=z.length,x=C.oLanguage,w=C.iInitDisplayStart,s="ssp"==aB(C),u=C.aiDisplay;C.bDrawing=!0;w!==a&&-1!==w&&(C._iDisplayStart=s?w:w>=C.fnRecordsDisplay()?0:w,C.iInitDisplayStart=-1);var w=C._iDisplayStart,p=C.fnDisplayEnd();if(C.bDeferLoading){C.bDeferLoading=!1,C.iDraw++,bE(C,!1)}else{if(s){if(!C.bDestroying&&!ao(C)){return}}else{C.iDraw++}}if(0!==u.length){x=s?C.aoData.length:p;for(s=s?0:w;s<x;s++){var q=u[s],h=C.aoData[q];null===h.nTr&&O(C,q);q=h.nTr;if(0!==y){var r=z[A%y];h._sRowStripe!=r&&(aT(q).removeClass(h._sRowStripe).addClass(r),h._sRowStripe=r)}aI(C,"aoRowCallback",null,[q,h._aData,A,s]);B.push(q);A++}}else{A=x.sZeroRecords,1==C.iDraw&&"ajax"==aB(C)?A=x.sLoadingRecords:x.sEmptyTable&&0===C.fnRecordsTotal()&&(A=x.sEmptyTable),B[0]=aT("<tr/>",{"class":y?z[0]:""}).append(aT("<td />",{valign:"top",colSpan:a4(C),"class":C.oClasses.sRowEmpty}).html(A))[0]}aI(C,"aoHeaderCallback","header",[aT(C.nTHead).children("tr")[0],bX(C),w,p,u]);aI(C,"aoFooterCallback","footer",[aT(C.nTFoot).children("tr")[0],bX(C),w,p,u]);z=aT(C.nTBody);z.children().detach();z.append(aT(B));aI(C,"aoDrawCallback","draw",[C]);C.bSorted=!1;C.bFiltered=!1;C.bDrawing=!1}}function bl(p,h){var r=p.oFeatures,q=r.bFilter;r.bSort&&o(p);q?aP(p,p.oPreviousSearch):p.aiDisplay=p.aiDisplayMaster.slice();!0!==h&&(p._iDisplayStart=0);p._drawHold=h;bm(p);p._drawHold=!1}function cf(C){var B=C.oClasses,A=aT(C.nTable),A=aT("<div/>").insertBefore(A),z=C.oFeatures,y=aT("<div/>",{id:C.sTableId+"_wrapper","class":B.sWrapper+(C.nTFoot?"":" "+B.sNoFooter)});C.nHolding=A[0];C.nTableWrapper=y[0];C.nTableReinsertBefore=C.nTable.nextSibling;for(var x=C.sDom.split(""),w,s,u,p,q,h,r=0;r<x.length;r++){w=null;s=x[r];if("<"==s){u=aT("<div/>")[0];p=x[r+1];if("'"==p||'"'==p){q="";for(h=2;x[r+h]!=p;){q+=x[r+h],h++}"H"==q?q=B.sJUIHeader:"F"==q&&(q=B.sJUIFooter);-1!=q.indexOf(".")?(p=q.split("."),u.id=p[0].substr(1,p[0].length-1),u.className=p[1]):"#"==q.charAt(0)?u.id=q.substr(1,q.length-1):u.className=q;r+=h}y.append(u);y=aT(u)}else{if(">"==s){y=y.parent()}else{if("l"==s&&z.bPaginate&&z.bLengthChange){w=bU(C)}else{if("f"==s&&z.bFilter){w=bv(C)}else{if("r"==s&&z.bProcessing){w=aV(C)}else{if("t"==s){w=at(C)}else{if("i"==s&&z.bInfo){w=ad(C)}else{if("p"==s&&z.bPaginate){w=cj(C)}else{if(0!==aN.ext.feature.length){u=aN.ext.feature;h=0;for(p=u.length;h<p;h++){if(s==u[h].cFeature){w=u[h].fnInit(C);break}}}}}}}}}}}w&&(u=C.aanFeatures,u[s]||(u[s]=[]),u[s].push(w),y.append(w))}A.replaceWith(y)}function bP(C,B){var A=aT(B).children("tr"),z,y,x,w,s,u,p,q,h,r;C.splice(0,C.length);x=0;for(u=A.length;x<u;x++){C.push([])}x=0;for(u=A.length;x<u;x++){z=A[x];for(y=z.firstChild;y;){if("TD"==y.nodeName.toUpperCase()||"TH"==y.nodeName.toUpperCase()){q=1*y.getAttribute("colspan");h=1*y.getAttribute("rowspan");q=!q||0===q||1===q?1:q;h=!h||0===h||1===h?1:h;w=0;for(s=C[x];s[w];){w++}p=w;r=1===q?!0:!1;for(s=0;s<q;s++){for(w=0;w<h;w++){C[x+w][p+s]={cell:y,unique:r},C[x+w].nTr=z}}}y=y.nextSibling}}}function bW(p,h,w){var u=[];w||(w=p.aoHeader,h&&(w=[],bP(w,h)));for(var h=0,s=w.length;h<s;h++){for(var r=0,q=w[h].length;r<q;r++){if(w[h][r].unique&&(!u[r]||!p.bSortCellsTop)){u[r]=w[h][r].cell}}}return u}function by(y,x,w){aI(y,"aoServerParams","serverParams",[x]);if(x&&aT.isArray(x)){var u={},s=/(.*?)\[\]$/;aT.each(x,function(A,z){var B=z.name.match(s);B?(B=B[0],u[B]||(u[B]=[]),u[B].push(z.value)):u[z.name]=z.value});x=u}var r,q=y.ajax,h=y.oInstance;if(aT.isPlainObject(q)&&q.data){r=q.data;var p=aT.isFunction(r)?r(x):r,x=aT.isFunction(r)&&p?p:aT.extend(!0,x,p);delete q.data}p={data:x,success:function(z){var A=z.error||z.sError;A&&y.oApi._fnLog(y,0,A);y.json=z;aI(y,null,"xhr",[y,z]);w(z)},dataType:"json",cache:!1,type:y.sServerMethod,error:function(z,B){var A=y.oApi._fnLog;"parsererror"==B?A(y,0,"Invalid JSON response",1):4===z.readyState&&A(y,0,"Ajax error",7);bE(y,!1)}};y.oAjaxData=x;aI(y,null,"preXhr",[y,x]);y.fnServerData?y.fnServerData.call(h,y.sAjaxSource,aT.map(x,function(A,z){return{name:z,value:A}}),w,y):y.sAjaxSource||"string"===typeof q?y.jqXHR=aT.ajax(aT.extend(p,{url:q||y.sAjaxSource})):aT.isFunction(q)?y.jqXHR=q.call(h,x,w,y):(y.jqXHR=aT.ajax(aT.extend(p,q)),q.data=r)}function ao(h){return h.bAjaxDataGet?(h.iDraw++,bE(h,!0),by(h,bZ(h),function(p){bG(h,p)}),!1):!0}function bZ(D){var C=D.aoColumns,B=C.length,A=D.oFeatures,z=D.oPreviousSearch,y=D.aoPreSearchCols,x,u=[],w,p,q,h=bf(D);x=D._iDisplayStart;w=!1!==A.bPaginate?D._iDisplayLength:-1;var s=function(F,E){u.push({name:F,value:E})};s("sEcho",D.iDraw);s("iColumns",B);s("sColumns",bD(C,"sName").join(","));s("iDisplayStart",x);s("iDisplayLength",w);var r={draw:D.iDraw,columns:[],order:[],start:x,length:w,search:{value:z.sSearch,regex:z.bRegex}};for(x=0;x<B;x++){p=C[x],q=y[x],w="function"==typeof p.mData?"function":p.mData,r.columns.push({data:w,name:p.sName,searchable:p.bSearchable,orderable:p.bSortable,search:{value:q.sSearch,regex:q.bRegex}}),s("mDataProp_"+x,w),A.bFilter&&(s("sSearch_"+x,q.sSearch),s("bRegex_"+x,q.bRegex),s("bSearchable_"+x,p.bSearchable)),A.bSort&&s("bSortable_"+x,p.bSortable)}A.bFilter&&(s("sSearch",z.sSearch),s("bRegex",z.bRegex));A.bSort&&(aT.each(h,function(F,E){r.order.push({column:E.col,dir:E.dir});s("iSortCol_"+F,E.col);s("sSortDir_"+F,E.dir)}),s("iSortingCols",h.length));C=aN.ext.legacy.ajax;return null===C?D.sAjaxSource?u:r:C?u:r}function bG(p,h){var s=h.sEcho!==a?h.sEcho:h.draw,r=h.iTotalRecords!==a?h.iTotalRecords:h.recordsTotal,q=h.iTotalDisplayRecords!==a?h.iTotalDisplayRecords:h.recordsFiltered;if(s){if(1*s<p.iDraw){return}p.iDraw=1*s}aq(p);p._iRecordsTotal=parseInt(r,10);p._iRecordsDisplay=parseInt(q,10);s=aX(p,h);r=0;for(q=s.length;r<q;r++){bq(p,s[r])}p.aiDisplay=p.aiDisplayMaster.slice();p.bAjaxDataGet=!1;bm(p);p._bInitComplete||av(p,h);p.bAjaxDataGet=!0;bE(p,!1)}function aX(p,h){var q=aT.isPlainObject(p.ajax)&&p.ajax.dataSrc!==a?p.ajax.dataSrc:p.sAjaxDataProp;return"data"===q?h.aaData||h[q]:""!==q?bc(q)(h):h}function bv(y){var x=y.oClasses,w=y.sTableId,u=y.oLanguage,s=y.oPreviousSearch,r=y.aanFeatures,q='<input type="search" class="'+x.sFilterInput+'"/>',h=u.sSearch,h=h.match(/_INPUT_/)?h.replace("_INPUT_",q):h+q,x=aT("<div/>",{id:!r.f?w+"_filter":null,"class":x.sFilter}).append(aT("<label/>").append(h)),r=function(){var z=!this.value?"":this.value;z!=s.sSearch&&(aP(y,{sSearch:z,bRegex:s.bRegex,bSmart:s.bSmart,bCaseInsensitive:s.bCaseInsensitive}),y._iDisplayStart=0,bm(y))},p=aT("input",x).val(s.sSearch).attr("placeholder",u.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT","ssp"===aB(y)?cm(r,400):r).bind("keypress.DT",function(z){if(13==z.keyCode){return !1}}).attr("aria-controls",w);aT(y.nTable).on("search.dt.DT",function(z,B){if(y===B){try{p[0]!==c.activeElement&&p.val(s.sSearch)}catch(A){}}});return x[0]}function aP(p,h,u){var s=p.oPreviousSearch,r=p.aoPreSearchCols,q=function(w){s.sSearch=w.sSearch;s.bRegex=w.bRegex;s.bSmart=w.bSmart;s.bCaseInsensitive=w.bCaseInsensitive};aU(p);if("ssp"!=aB(p)){aZ(p,h.sSearch,u,h.bEscapeRegex!==a?!h.bEscapeRegex:h.bRegex,h.bSmart,h.bCaseInsensitive);q(h);for(h=0;h<r.length;h++){ax(p,r[h].sSearch,h,r[h].bEscapeRegex!==a?!r[h].bEscapeRegex:r[h].bRegex,r[h].bSmart,r[h].bCaseInsensitive)}ah(p)}else{q(h)}p.bFiltered=!0;aI(p,null,"search",[p])}function ah(A){for(var z=aN.ext.search,y=A.aiDisplay,x,w,u=0,s=z.length;u<s;u++){for(var p=[],q=0,r=y.length;q<r;q++){w=y[q],x=A.aoData[w],z[u](A,x._aFilterData,w,x._aData,q)&&p.push(w)}y.length=0;y.push.apply(y,p)}}function ax(p,h,w,u,s,r){if(""!==h){for(var q=p.aiDisplay,u=b2(h,u,s,r),s=q.length-1;0<=s;s--){h=p.aoData[q[s]]._aFilterData[w],u.test(h)||q.splice(s,1)}}}function aZ(p,h,w,u,s,r){var u=b2(h,u,s,r),s=p.oPreviousSearch.sSearch,r=p.aiDisplayMaster,q;0!==aN.ext.search.length&&(w=!0);q=e(p);if(0>=h.length){p.aiDisplay=r.slice()}else{if(q||w||s.length>h.length||0!==h.indexOf(s)||p.bSorted){p.aiDisplay=r.slice()}h=p.aiDisplay;for(w=h.length-1;0<=w;w--){u.test(p.aoData[h[w]]._sFilterRow)||h.splice(w,1)}}}function b2(p,h,r,q){p=h?p:bJ(p);r&&(p="^(?=.*?"+aT.map(p.match(/"[^"]+"|[^ ]+/g)||"",function(s){return'"'===s.charAt(0)?s.match(/^"(.*)"$/)[1]:s}).join(")(?=.*?")+").*$");return RegExp(p,q?"i":"")}function bJ(h){return h.replace(a3,"\\$1")}function e(B){var A=B.aoColumns,z,y,x,w,u,q,r,s,p=aN.ext.type.search;z=!1;y=0;for(w=B.aoData.length;y<w;y++){if(s=B.aoData[y],!s._aFilterData){q=[];x=0;for(u=A.length;x<u;x++){z=A[x],z.bSearchable?(r=bF(B,y,x,"filter"),p[z.sType]&&(r=p[z.sType](r)),null===r&&(r=""),"string"!==typeof r&&r.toString&&(r=r.toString())):r="",r.indexOf&&-1!==r.indexOf("&")&&(af.innerHTML=r,r=aD?af.textContent:af.innerText),r.replace&&(r=r.replace(/[\r\n]/g,"")),q.push(r)}s._aFilterData=q;s._sFilterRow=q.join("  ");z=!0}}return z}function b3(h){return{search:h.sSearch,smart:h.bSmart,regex:h.bRegex,caseInsensitive:h.bCaseInsensitive}}function bK(h){return{sSearch:h.search,bSmart:h.smart,bRegex:h.regex,bCaseInsensitive:h.caseInsensitive}}function ad(p){var h=p.sTableId,r=p.aanFeatures.i,q=aT("<div/>",{"class":p.oClasses.sInfo,id:!r?h+"_info":null});r||(p.aoDrawCallback.push({fn:cc,sName:"information"}),q.attr("role","status").attr("aria-live","polite"),aT(p.nTable).attr("aria-describedby",h+"_info"));return q[0]}function cc(p){var h=p.aanFeatures.i;if(0!==h.length){var x=p.oLanguage,w=p._iDisplayStart+1,u=p.fnDisplayEnd(),s=p.fnRecordsTotal(),r=p.fnRecordsDisplay(),q=r?x.sInfo:x.sInfoEmpty;r!==s&&(q+=" "+x.sInfoFiltered);q+=x.sInfoPostFix;q=bR(p,q);x=x.fnInfoCallback;null!==x&&(q=x.call(p.oInstance,p,w,u,s,r,q));aT(h).html(q)}}function bR(p,h){var w=p.fnFormatNumber,u=p._iDisplayStart+1,s=p._iDisplayLength,r=p.fnRecordsDisplay(),q=-1===s;return h.replace(/_START_/g,w.call(p,u)).replace(/_END_/g,w.call(p,p.fnDisplayEnd())).replace(/_MAX_/g,w.call(p,p.fnRecordsTotal())).replace(/_TOTAL_/g,w.call(p,r)).replace(/_PAGE_/g,w.call(p,q?1:Math.ceil(u/s))).replace(/_PAGES_/g,w.call(p,q?1:Math.ceil(r/s)))}function cl(p){var h,u,s=p.iInitDisplayStart,r=p.aoColumns,q;u=p.oFeatures;if(p.bInitialised){cf(p);aQ(p);bj(p,p.aoHeader);bj(p,p.aoFooter);bE(p,!0);u.bAutoWidth&&br(p);h=0;for(u=r.length;h<u;h++){q=r[h],q.sWidth&&(q.nTh.style.width=aK(q.sWidth))}bl(p);r=aB(p);"ssp"!=r&&("ajax"==r?by(p,[],function(x){var w=aX(p,x);for(h=0;h<w.length;h++){bq(p,w[h])}p.iInitDisplayStart=s;bl(p);bE(p,!1);av(p,x)},p):(bE(p,!1),av(p)))}else{setTimeout(function(){cl(p)},200)}}function av(p,h){p._bInitComplete=!0;h&&a9(p);aI(p,"aoInitComplete","init",[p,h])}function a2(p,h){var q=parseInt(h,10);p._iDisplayLength=q;aA(p);aI(p,null,"length",[p,q])}function bU(y){for(var x=y.oClasses,w=y.sTableId,u=y.aLengthMenu,s=aT.isArray(u[0]),r=s?u[0]:u,u=s?u[1]:u,s=aT("<select/>",{name:w+"_length","aria-controls":w,"class":x.sLengthSelect}),q=0,h=r.length;q<h;q++){s[0][q]=new Option(u[q],r[q])}var p=aT("<div><label/></div>").addClass(x.sLength);y.aanFeatures.l||(p[0].id=w+"_length");p.children().append(y.oLanguage.sLengthMenu.replace("_MENU_",s[0].outerHTML));aT("select",p).val(y._iDisplayLength).bind("change.DT",function(){a2(y,aT(this).val());bm(y)});aT(y.nTable).bind("length.dt.DT",function(z,B,A){y===B&&aT("select",p).val(A)});return p[0]}function cj(p){var h=p.sPaginationType,u=aN.ext.pager[h],s="function"===typeof u,r=function(w){bm(w)},h=aT("<div/>").addClass(p.oClasses.sPaging+h)[0],q=p.aanFeatures;s||u.fnInit(p,h,r);q.p||(h.id=p.sTableId+"_paginate",p.aoDrawCallback.push({fn:function(y){if(s){var x=y._iDisplayStart,z=y._iDisplayLength,A=y.fnRecordsDisplay(),w=-1===z,x=w?0:Math.ceil(x/z),z=w?1:Math.ceil(A/z),A=u(x,z),B,w=0;for(B=q.p.length;w<B;w++){ag(y,"pageButton")(y,q.p[w],w,A,x,z)}}else{u.fnUpdate(y,r)}},sName:"pagination"}));return h}function ak(p,h,u){var s=p._iDisplayStart,r=p._iDisplayLength,q=p.fnRecordsDisplay();0===q||-1===r?s=0:"number"===typeof h?(s=h*r,s>q&&(s=0)):"first"==h?s=0:"previous"==h?(s=0<=r?s-r:0,0>s&&(s=0)):"next"==h?s+r<q&&(s+=r):"last"==h?s=Math.floor((q-1)/r)*r:bi(p,0,"Unknown paging action: "+h,5);h=p._iDisplayStart!==s;p._iDisplayStart=s;h&&(aI(p,null,"page",[p]),u&&bm(p));return h}function aV(h){return aT("<div/>",{id:!h.aanFeatures.r?h.sTableId+"_processing":null,"class":h.oClasses.sProcessing}).html(h.oLanguage.sProcessing).insertBefore(h.nTable)[0]}function bE(p,h){p.oFeatures.bProcessing&&aT(p.aanFeatures.r).css("display",h?"block":"none");aI(p,null,"processing",[p,h])}function at(C){var B=aT(C.nTable);B.attr("role","grid");var A=C.oScroll;if(""===A.sX&&""===A.sY){return C.nTable}var z=A.sX,y=A.sY,x=C.oClasses,w=B.children("caption"),s=w.length?w[0]._captionSide:null,u=aT(B[0].cloneNode(!1)),p=aT(B[0].cloneNode(!1)),q=B.children("tfoot");A.sX&&"100%"===B.attr("width")&&B.removeAttr("width");q.length||(q=null);A=aT("<div/>",{"class":x.sScrollWrapper}).append(aT("<div/>",{"class":x.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:z?!z?null:aK(z):"100%"}).append(aT("<div/>",{"class":x.sScrollHeadInner}).css({"box-sizing":"content-box",width:A.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append(B.children("thead")))).append("top"===s?w:null)).append(aT("<div/>",{"class":x.sScrollBody}).css({overflow:"auto",height:!y?null:aK(y),width:!z?null:aK(z)}).append(B));q&&A.append(aT("<div/>",{"class":x.sScrollFoot}).css({overflow:"hidden",border:0,width:z?!z?null:aK(z):"100%"}).append(aT("<div/>",{"class":x.sScrollFootInner}).append(p.removeAttr("id").css("margin-left",0).append(B.children("tfoot")))).append("bottom"===s?w:null));var B=A.children(),h=B[0],x=B[1],r=q?B[2]:null;z&&aT(x).scroll(function(){var D=this.scrollLeft;h.scrollLeft=D;q&&(r.scrollLeft=D)});C.nScrollHead=h;C.nScrollBody=x;C.nScrollFoot=r;C.aoDrawCallback.push({fn:a8,sName:"scrolling"});return A[0]}function a8(cq){var cp=cq.oScroll,co=cp.sX,cn=cp.sXInner,cb=cp.sY,ca=cp.iBarWidth,bb=aT(cq.nScrollHead),ac=bb[0].style,ba=bb.children("div"),Y=ba[0].style,Z=ba.children("table"),ba=cq.nScrollBody,X=aT(ba),ab=ba.style,aa=aT(cq.nScrollFoot).children("div"),W=aa.children("table"),S=aT(cq.nTHead),U=aT(cq.nTable),cr=U[0],h=cr.style,G=cq.nTFoot?aT(cq.nTFoot):null,L=cq.oBrowser,K=L.bScrollOversize,F,P,H,I,s,V=[],T=[],R=[],Q,N=function(p){p=p.style;p.paddingTop="0";p.paddingBottom="0";p.borderTopWidth="0";p.borderBottomWidth="0";p.height=0};U.children("thead, tfoot").remove();s=S.clone().prependTo(U);F=S.find("tr");H=s.find("tr");s.find("th, td").removeAttr("tabindex");G&&(I=G.clone().prependTo(U),P=G.find("tr"),I=I.find("tr"));co||(ab.width="100%",bb[0].style.width="100%");aT.each(bW(cq,s),function(p,q){Q=bS(cq,p);q.style.width=cq.aoColumns[Q].sWidth});G&&bu(function(p){p.style.width=""},I);cp.bCollapse&&""!==cb&&(ab.height=X[0].offsetHeight+S[0].offsetHeight+"px");bb=U.outerWidth();if(""===co){if(h.width="100%",K&&(U.find("tbody").height()>ba.offsetHeight||"scroll"==X.css("overflow-y"))){h.width=aK(U.outerWidth()-ca)}}else{""!==cn?h.width=aK(cn):bb==X.width()&&X.height()<U.height()?(h.width=aK(bb-ca),U.outerWidth()>bb-ca&&(h.width=aK(bb))):h.width=aK(bb)}bb=U.outerWidth();bu(N,H);bu(function(p){R.push(p.innerHTML);V.push(aK(aT(p).css("width")))},H);bu(function(q,p){q.style.width=V[p]},F);aT(H).height(0);G&&(bu(N,I),bu(function(p){T.push(aK(aT(p).css("width")))},I),bu(function(q,p){q.style.width=T[p]},P),aT(I).height(0));bu(function(q,p){q.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+R[p]+"</div>";q.style.width=V[p]},H);G&&bu(function(q,p){q.innerHTML="";q.style.width=T[p]},I);if(U.outerWidth()<bb){P=ba.scrollHeight>ba.offsetHeight||"scroll"==X.css("overflow-y")?bb+ca:bb;if(K&&(ba.scrollHeight>ba.offsetHeight||"scroll"==X.css("overflow-y"))){h.width=aK(P-ca)}(""===co||""!==cn)&&bi(cq,1,"Possible column misalignment",6)}else{P="100%"}ab.width=aK(P);ac.width=aK(P);G&&(cq.nScrollFoot.style.width=aK(P));!cb&&K&&(ab.height=aK(cr.offsetHeight+ca));cb&&cp.bCollapse&&(ab.height=aK(cb),cp=co&&cr.offsetWidth>ba.offsetWidth?ca:0,cr.offsetHeight<ba.offsetHeight&&(ab.height=aK(cr.offsetHeight+cp)));cp=U.outerWidth();Z[0].style.width=aK(cp);Y.width=aK(cp);Z=U.height()>ba.clientHeight||"scroll"==X.css("overflow-y");L="padding"+(L.bScrollbarLeft?"Left":"Right");Y[L]=Z?ca+"px":"0px";G&&(W[0].style.width=aK(cp),aa[0].style.width=aK(cp),aa[0].style[L]=Z?ca+"px":"0px");X.scroll();if((cq.bSorted||cq.bFiltered)&&!cq._drawHold){ba.scrollTop=0}}function bu(p,h,x){for(var w=0,u=0,s=h.length,r,q;u<s;){r=h[u].firstChild;for(q=x?x[u].firstChild:null;r;){1===r.nodeType&&(x?p(r,q,w):p(r,w),w++),r=r.nextSibling,q=x?q.nextSibling:null}u++}}function br(F){var E=F.nTable,D=F.aoColumns,C=F.oScroll,B=C.sY,A=C.sX,z=C.sXInner,x=D.length,C=a7(F,"bVisible"),y=aT("th",F.nTHead),r=E.getAttribute("width"),s=E.parentNode,q=!1,w,u;for(w=0;w<C.length;w++){u=D[C[w]],null!==u.sWidth&&(u.sWidth=bo(u.sWidthOrig,s),q=!0)}if(!q&&!A&&!B&&x==a4(F)&&x==y.length){for(w=0;w<x;w++){D[w].sWidth=aK(y.eq(w).width())}}else{x=aT(E).clone().empty().css("visibility","hidden").removeAttr("id").append(aT(F.nTHead).clone(!1)).append(aT(F.nTFoot).clone(!1)).append(aT("<tbody><tr/></tbody>"));x.find("tfoot th, tfoot td").css("width","");var h=x.find("tbody tr"),y=bW(F,x.find("thead")[0]);for(w=0;w<C.length;w++){u=D[C[w]],y[w].style.width=null!==u.sWidthOrig&&""!==u.sWidthOrig?aK(u.sWidthOrig):""}if(F.aoData.length){for(w=0;w<C.length;w++){q=C[w],u=D[q],aT(aR(F,q)).clone(!1).append(u.sContentPadding).appendTo(h)}}x.appendTo(s);A&&z?x.width(z):A?(x.css("width","auto"),x.width()<s.offsetWidth&&x.width(s.offsetWidth)):B?x.width(s.offsetWidth):r&&x.width(r);ap(F,x[0]);if(A){for(w=z=0;w<C.length;w++){u=D[C[w]],B=aT(y[w]).outerWidth(),z+=null===u.sWidthOrig?B:parseInt(u.sWidth,10)+B-aT(y[w]).width()}x.width(aK(z));E.style.width=aK(z)}for(w=0;w<C.length;w++){if(u=D[C[w]],B=aT(y[w]).width()){u.sWidth=aK(B)}}E.style.width=aK(x.css("width"));x.remove()}r&&(E.style.width=aK(r));if((r||A)&&!F._reszEvt){aT(b).bind("resize.DT-"+F.sInstance,cm(function(){a9(F)})),F._reszEvt=!0}}function cm(p,h){var s=h||200,r,q;return function(){var u=this,x=+new Date,w=arguments;r&&x<r+s?(clearTimeout(q),q=setTimeout(function(){r=a;p.apply(u,w)},s)):r?(r=x,p.apply(u,w)):r=x}}function bo(p,h){if(!p){return 0}var r=aT("<div/>").css("width",aK(p)).appendTo(h||c.body),q=r[0].offsetWidth;r.remove();return q}function ap(p,h){var q=p.oScroll;if(q.sX||q.sY){q=!q.sX?q.iBarWidth:0,h.style.width=aK(aT(h).outerWidth()-q)}}function aR(p,h){var r=J(p,h);if(0>r){return null}var q=p.aoData[r];return !q.nTr?aT("<td/>").html(bF(p,r,h,"display"))[0]:q.anCells[h]}function J(p,h){for(var w,u=-1,s=-1,r=0,q=p.aoData.length;r<q;r++){w=bF(p,r,h,"display")+"",w=w.replace(al,""),w.length>u&&(u=w.length,s=r)}return s}function aK(h){return null===h?"0px":"number"==typeof h?0>h?"0px":h+"px":h.match(/\d$/)?h+"px":h}function cg(){if(!aN.__scrollbarWidth){var p=aT("<p/>").css({width:"100%",height:200,padding:0})[0],h=aT("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(p).appendTo("body"),q=p.offsetWidth;h.css("overflow","scroll");p=p.offsetWidth;q===p&&(p=h[0].clientWidth);h.remove();aN.__scrollbarWidth=q-p}return aN.__scrollbarWidth}function bf(z){var y,x,w=[],u=z.aoColumns,s,r,p,q;y=z.aaSortingFixed;x=aT.isPlainObject(y);var h=[];s=function(A){A.length&&!aT.isArray(A[0])?h.push(A):h.push.apply(h,A)};aT.isArray(y)&&s(y);x&&y.pre&&s(y.pre);s(z.aaSorting);x&&y.post&&s(y.post);for(z=0;z<h.length;z++){q=h[z][0];s=u[q].aDataSort;y=0;for(x=s.length;y<x;y++){r=s[y],p=u[r].sType||"string",w.push({src:q,col:r,dir:h[z][1],index:h[z][2],type:p,formatter:aN.ext.type.order[p+"-pre"]})}}return w}function o(A){var z,y,x=[],w=aN.ext.type.order,u=A.aoData,s=0,p,q=A.aiDisplayMaster,r;aU(A);r=bf(A);z=0;for(y=r.length;z<y;z++){p=r[z],p.formatter&&s++,bV(A,p.col)}if("ssp"!=aB(A)&&0!==r.length){z=0;for(y=q.length;z<y;z++){x[q[z]]=z}s===r.length?q.sort(function(I,H){var G,F,E,C,D=r.length,B=u[I]._aSortData,h=u[H]._aSortData;for(E=0;E<D;E++){if(C=r[E],G=B[C.col],F=h[C.col],G=G<F?-1:G>F?1:0,0!==G){return"asc"===C.dir?G:-G}}G=x[I];F=x[H];return G<F?-1:G>F?1:0}):q.sort(function(I,H){var G,F,D,E,C=r.length,B=u[I]._aSortData,h=u[H]._aSortData;for(D=0;D<C;D++){if(E=r[D],G=B[E.col],F=h[E.col],E=w[E.type+"-"+E.dir]||w["string-"+E.dir],G=E(G,F),0!==G){return G}}G=x[I];F=x[H];return G<F?-1:G>F?1:0})}A.bSorted=!0}function bx(y){for(var x,w,u=y.aoColumns,s=bf(y),y=y.oLanguage.oAria,r=0,q=u.length;r<q;r++){w=u[r];var h=w.asSorting;x=w.sTitle.replace(/<.*?>/g,"");var p=w.nTh;p.removeAttribute("aria-sort");w.bSortable&&(0<s.length&&s[0].col==r?(p.setAttribute("aria-sort","asc"==s[0].dir?"ascending":"descending"),w=h[s[0].index+1]||h[0]):w=h[0],x+="asc"===w?y.sSortAscending:y.sSortDescending);p.setAttribute("aria-label",x)}}function j(p,h,w,u){var s=p.aaSorting,r=p.aoColumns[h].asSorting,q=function(y){var x=y._idx;x===a&&(x=aT.inArray(y[1],r));return x+1>=r.length?0:x+1};"number"===typeof s[0]&&(s=p.aaSorting=[s]);w&&p.oFeatures.bSortMulti?(w=aT.inArray(h,bD(s,"0")),-1!==w?(h=q(s[w]),s[w][1]=r[h],s[w]._idx=h):(s.push([h,r[0],0]),s[s.length-1]._idx=0)):s.length&&s[0][0]==h?(h=q(s[0]),s.length=1,s[0][1]=r[h],s[0]._idx=h):(s.length=0,s.push([h,r[0]]),s[0]._idx=0);bl(p);"function"==typeof u&&u(p)}function aw(p,h,s,r){var q=p.aoColumns[s];b6(h,{},function(u){!1!==q.bSortable&&(p.oFeatures.bProcessing?(bE(p,!0),setTimeout(function(){j(p,s,u.shiftKey,r);"ssp"!==aB(p)&&bE(p,!1)},0)):j(p,s,u.shiftKey,r))})}function b1(p){var h=p.aLastSort,w=p.oClasses.sSortColumn,u=bf(p),s=p.oFeatures,r,q;if(s.bSort&&s.bSortClasses){s=0;for(r=h.length;s<r;s++){q=h[s].src,aT(bD(p.aoData,"anCells",q)).removeClass(w+(2>s?s+1:3))}s=0;for(r=u.length;s<r;s++){q=u[s].src,aT(bD(p.aoData,"anCells",q)).addClass(w+(2>s?s+1:3))}}p.aLastSort=u}function bV(y,x){var w=y.aoColumns[x],u=aN.ext.order[w.sSortDataType],s;u&&(s=u.call(y.oInstance,y,x,a6(y,x)));for(var r,q=aN.ext.type.order[w.sType+"-pre"],h=0,p=y.aoData.length;h<p;h++){if(w=y.aoData[h],w._aSortData||(w._aSortData=[]),!w._aSortData[x]||u){r=u?s[h]:bF(y,h,x,"sort"),w._aSortData[x]=q?q(r):r}}}function bI(p){if(p.oFeatures.bStateSave&&!p.bDestroying){var h={time:+new Date,start:p._iDisplayStart,length:p._iDisplayLength,order:aT.extend(!0,[],p.aaSorting),search:b3(p.oPreviousSearch),columns:aT.map(p.aoColumns,function(q,r){return{visible:q.bVisible,search:b3(p.aoPreSearchCols[r])}})};aI(p,"aoStateSaveParams","stateSaveParams",[p,h]);p.oSavedState=h;p.fnStateSaveCallback.call(p.oInstance,p,h)}}function aW(p){var h,u,s=p.aoColumns;if(p.oFeatures.bStateSave){var r=p.fnStateLoadCallback.call(p.oInstance,p);if(r&&r.time&&(h=aI(p,"aoStateLoadParams","stateLoadParams",[p,r]),-1===aT.inArray(!1,h)&&(h=p.iStateDuration,!(0<h&&r.time<+new Date-1000*h)&&s.length===r.columns.length))){p.oLoadedState=aT.extend(!0,{},r);p._iDisplayStart=r.start;p.iInitDisplayStart=r.start;p._iDisplayLength=r.length;p.aaSorting=[];aT.each(r.order,function(w,x){p.aaSorting.push(x[0]>=s.length?[0,x[1]]:x)});aT.extend(p.oPreviousSearch,bK(r.search));h=0;for(u=r.columns.length;h<u;h++){var q=r.columns[h];s[h].bVisible=q.visible;aT.extend(p.aoPreSearchCols[h],bK(q.search))}aI(p,"aoStateLoaded","stateLoaded",[p,r])}}}function a1(p){var h=aN.settings,p=aT.inArray(p,bD(h,"nTable"));return -1!==p?h[p]:null}function bi(p,h,r,q){r="DataTables warning: "+(null!==p?"table id="+p.sTableId+" - ":"")+r;q&&(r+=". For more information about this error, please see http://datatables.net/tn/"+q);if(h){b.console&&console.log&&console.log(r)}else{if(p=aN.ext,"alert"==(p.sErrMode||p.errMode)){alert(r)}else{throw Error(r)}}}function bA(p,h,r,q){aT.isArray(r)?aT.each(r,function(u,s){aT.isArray(s)?bA(p,h,s[0],s[1]):bA(p,h,s)}):(q===a&&(q=r),h[r]!==a&&(p[q]=h[r]))}function au(p,h,s){var r,q;for(q in h){h.hasOwnProperty(q)&&(r=h[q],aT.isPlainObject(r)?(aT.isPlainObject(p[q])||(p[q]={}),aT.extend(!0,p[q],r)):p[q]=s&&"data"!==q&&"aaData"!==q&&aT.isArray(r)?r.slice():r)}return p}function b6(p,h,q){aT(p).bind("click.DT",h,function(r){p.blur();q(r)}).bind("keypress.DT",h,function(r){13===r.which&&(r.preventDefault(),q(r))}).bind("selectstart.DT",function(){return !1})}function aF(p,h,r,q){r&&p[h].push({fn:r,sName:q})}function aI(p,h,s,r){var q=[];h&&(q=aT.map(p[h].slice().reverse(),function(u){return u.fn.apply(p.oInstance,r)}));null!==s&&aT(p.nTable).trigger(s+".dt",r);return q}function aA(p){var h=p._iDisplayStart,r=p.fnDisplayEnd(),q=p._iDisplayLength;r===p.fnRecordsDisplay()&&(h=r-q);if(-1===q||0>h){h=0}p._iDisplayStart=h}function ag(p,h){var r=p.renderer,q=aN.ext.renderer[h];return aT.isPlainObject(r)&&r[h]?q[r[h]]||q._:"string"===typeof r?q[r]||q._:q._}function aB(h){return h.oFeatures.bServerSide?"ssp":h.ajax||h.sAjaxSource?"ajax":"dom"}function bM(p,h){var r=[],r=ae.numbers_length,q=Math.floor(r/2);h<=r?r=be(0,h):p<=q?(r=be(0,r-2),r.push("ellipsis"),r.push(h-1)):(p>=h-1-q?r=be(h-(r-2),h):(r=be(p-1,p+2),r.push("ellipsis"),r.push(h-1)),r.splice(0,0,"ellipsis"),r.splice(0,0,0));r.DT_el="span";return r}function aO(h){aT.each({num:function(p){return ay(p,h)},"num-fmt":function(p){return ay(p,h,a5)},"html-num":function(p){return ay(p,h,aj)},"html-num-fmt":function(p){return ay(p,h,aj,a5)}},function(p,q){aJ.type.order[p+h+"-pre"]=q})}function ck(h){return function(){var p=[a1(this[aN.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return aN.ext.internal[h].apply(this,p)}}var aN,aJ,aM,aL,aH,aE={},b0=/[\r\n]/g,aj=/<.*?>/g,k=/^[\w\+\-]/,b7=/[\w\+\-]$/,a3=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),a5=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,bs=function(h){return !h||!0===h||"-"===h?!0:!1},bH=function(p){var h=parseInt(p,10);return !isNaN(h)&&isFinite(p)?h:null},a0=function(p,h){aE[h]||(aE[h]=RegExp(bJ(h),"g"));return"string"===typeof p?p.replace(/\./g,"").replace(aE[h],"."):p},am=function(p,h,r){var q="string"===typeof p;h&&q&&(p=a0(p,h));r&&q&&(p=p.replace(a5,""));return bs(p)||!isNaN(parseFloat(p))&&isFinite(p)},az=function(p,h,q){return bs(p)?!0:!(bs(p)||"string"===typeof p)?null:am(p.replace(aj,""),h,q)?!0:null},bD=function(p,h,u){var s=[],r=0,q=p.length;if(u!==a){for(;r<q;r++){p[r]&&p[r][h]&&s.push(p[r][h][u])}}else{for(;r<q;r++){p[r]&&s.push(p[r][h])}}return s},g=function(p,h,w,u){var s=[],r=0,q=h.length;if(u!==a){for(;r<q;r++){s.push(p[h[r]][w][u])}}else{for(;r<q;r++){s.push(p[h[r]][w])}}return s},be=function(p,h){var s=[],r;h===a?(h=0,r=p):(r=h,h=p);for(var q=h;q<r;q++){s.push(q)}return s},aY=function(p){var h=[],w,u,s=p.length,r,q=0;u=0;p:for(;u<s;u++){w=p[u];for(r=0;r<q;r++){if(h[r]===w){continue p}}h.push(w);q++}return h},aG=function(p,h,q){p[h]!==a&&(p[q]=p[h])},bY=/\[.*?\]$/,bg=/\(\)$/,af=aT("<div>")[0],aD=af.textContent!==a,al=/<.*?>/g;aN=function(p){this.$=function(w,u){return this.api(!0).$(w,u)};this._=function(w,u){return this.api(!0).rows(w,u).data()};this.api=function(u){return u?new aM(a1(this[aJ.iApiIndex])):new aM(this)};this.fnAddData=function(w,u){var y=this.api(!0),x=aT.isArray(w)&&(aT.isArray(w[0])||aT.isPlainObject(w[0]))?y.rows.add(w):y.row.add(w);(u===a||u)&&y.draw();return x.flatten().toArray()};this.fnAdjustColumnSizing=function(w){var u=this.api(!0).columns.adjust(),y=u.settings()[0],x=y.oScroll;w===a||w?u.draw(!1):(""!==x.sX||""!==x.sY)&&a8(y)};this.fnClearTable=function(w){var u=this.api(!0).clear();(w===a||w)&&u.draw()};this.fnClose=function(u){this.api(!0).row(u).child.hide()};this.fnDeleteRow=function(w,u,A){var z=this.api(!0),w=z.rows(w),y=w.settings()[0],x=y.aoData[w[0][0]];w.remove();u&&u.call(this,y,x);(A===a||A)&&z.draw();return x};this.fnDestroy=function(u){this.api(!0).destroy(u)};this.fnDraw=function(u){this.api(!0).draw(!u)};this.fnFilter=function(w,u,A,z,y,x){y=this.api(!0);null===u||u===a?y.search(w,A,z,x):y.column(u).search(w,A,z,x);y.draw()};this.fnGetData=function(w,u){var y=this.api(!0);if(w!==a){var x=w.nodeName?w.nodeName.toLowerCase():"";return u!==a||"td"==x||"th"==x?y.cell(w,u).data():y.row(w).data()||null}return y.data().toArray()};this.fnGetNodes=function(w){var u=this.api(!0);return w!==a?u.row(w).node():u.rows().nodes().flatten().toArray()};this.fnGetPosition=function(w){var u=this.api(!0),x=w.nodeName.toUpperCase();return"TR"==x?u.row(w).index():"TD"==x||"TH"==x?(w=u.cell(w).index(),[w.row,w.columnVisible,w.column]):null};this.fnIsOpen=function(u){return this.api(!0).row(u).child.isShown()};this.fnOpen=function(w,u,x){return this.api(!0).row(w).child(u,x).show().child()[0]};this.fnPageChange=function(w,u){var x=this.api(!0).page(w);(u===a||u)&&x.draw(!1)};this.fnSetColumnVis=function(w,u,x){w=this.api(!0).column(w).visible(u);(x===a||x)&&w.columns.adjust().draw()};this.fnSettings=function(){return a1(this[aJ.iApiIndex])};this.fnSort=function(u){this.api(!0).order(u).draw()};this.fnSortListener=function(w,u,x){this.api(!0).order.listener(w,u,x)};this.fnUpdate=function(w,u,A,z,y){var x=this.api(!0);A===a||null===A?x.row(u).data(w):x.cell(u,A).data(w);(y===a||y)&&x.columns.adjust();(z===a||z)&&x.draw();return 0};this.fnVersionCheck=aJ.fnVersionCheck;var h=this,s=p===a,r=this.length;s&&(p={});this.oApi=this.internal=aJ.internal;for(var q in aN.ext.internal){q&&(this[q]=ck(q))}this.each(function(){var E={},D=1<r?au(E,p,!0):p,B=0,C,y=this.getAttribute("id"),E=!1,z=aN.defaults;if("table"!=this.nodeName.toLowerCase()){bi(null,0,"Non-table node initialisation ("+this.nodeName+")",2)}else{an(z);m(z.column);bt(z,z,!0);bt(z.column,z.column,!0);bt(z,D);var x=aN.settings,B=0;for(C=x.length;B<C;B++){if(x[B].nTable==this){C=D.bRetrieve!==a?D.bRetrieve:z.bRetrieve;if(s||C){return x[B].oInstance}if(D.bDestroy!==a?D.bDestroy:z.bDestroy){x[B].oInstance.fnDestroy();break}else{bi(x[B],0,"Cannot reinitialise DataTable",3);return}}if(x[B].sTableId==this.id){x.splice(B,1);break}}if(null===y||""===y){this.id=y="DataTables_Table_"+aN.ext._unique++}var A=aT.extend(!0,{},aN.models.oSettings,{nTable:this,oApi:h.internal,oInit:D,sDestroyWidth:aT(this)[0].style.width,sInstance:y,sTableId:y});x.push(A);A.oInstance=1===h.length?h:aT(this).dataTable();an(D);D.oLanguage&&bk(D.oLanguage);D.aLengthMenu&&!D.iDisplayLength&&(D.iDisplayLength=aT.isArray(D.aLengthMenu[0])?D.aLengthMenu[0][0]:D.aLengthMenu[0]);D=au(aT.extend(!0,{},z),D);bA(A.oFeatures,D,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));bA(A,D,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);bA(A.oScroll,D,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);bA(A.oLanguage,D,"fnInfoCallback");aF(A,"aoDrawCallback",D.fnDrawCallback,"user");aF(A,"aoServerParams",D.fnServerParams,"user");aF(A,"aoStateSaveParams",D.fnStateSaveParams,"user");aF(A,"aoStateLoadParams",D.fnStateLoadParams,"user");aF(A,"aoStateLoaded",D.fnStateLoaded,"user");aF(A,"aoRowCallback",D.fnRowCallback,"user");aF(A,"aoRowCreatedCallback",D.fnCreatedRow,"user");aF(A,"aoHeaderCallback",D.fnHeaderCallback,"user");aF(A,"aoFooterCallback",D.fnFooterCallback,"user");aF(A,"aoInitComplete",D.fnInitComplete,"user");aF(A,"aoPreDrawCallback",D.fnPreDrawCallback,"user");y=A.oClasses;D.bJQueryUI?(aT.extend(y,aN.ext.oJUIClasses,D.oClasses),D.sDom===z.sDom&&"lfrtip"===z.sDom&&(A.sDom='<"H"lfr>t<"F"ip>'),A.renderer)?aT.isPlainObject(A.renderer)&&!A.renderer.header&&(A.renderer.header="jqueryui"):A.renderer="jqueryui":aT.extend(y,aN.ext.classes,D.oClasses);aT(this).addClass(y.sTable);if(""!==A.oScroll.sX||""!==A.oScroll.sY){A.oScroll.iBarWidth=cg()}!0===A.oScroll.sX&&(A.oScroll.sX="100%");A.iInitDisplayStart===a&&(A.iInitDisplayStart=D.iDisplayStart,A._iDisplayStart=D.iDisplayStart);null!==D.iDeferLoading&&(A.bDeferLoading=!0,B=aT.isArray(D.iDeferLoading),A._iRecordsDisplay=B?D.iDeferLoading[0]:D.iDeferLoading,A._iRecordsTotal=B?D.iDeferLoading[1]:D.iDeferLoading);""!==D.oLanguage.sUrl?(A.oLanguage.sUrl=D.oLanguage.sUrl,aT.getJSON(A.oLanguage.sUrl,null,function(H){bk(H);bt(z.oLanguage,H);aT.extend(true,A.oLanguage,D.oLanguage,H);cl(A)}),E=!0):aT.extend(!0,A.oLanguage,D.oLanguage);null===D.asStripeClasses&&(A.asStripeClasses=[y.sStripeOdd,y.sStripeEven]);var B=A.asStripeClasses,u=aT("tbody tr:eq(0)",this);-1!==aT.inArray(!0,aT.map(B,function(H){return u.hasClass(H)}))&&(aT("tbody tr",this).removeClass(B.join(" ")),A.asDestroyStripes=B.slice());var x=[],w,B=this.getElementsByTagName("thead");0!==B.length&&(bP(A.aoHeader,B[0]),x=bW(A));if(null===D.aoColumns){w=[];B=0;for(C=x.length;B<C;B++){w.push(null)}}else{w=D.aoColumns}B=0;for(C=w.length;B<C;B++){ce(A,x?x[B]:null)}bn(A,D.aoColumnDefs,w,function(I,H){cd(A,I,H)});if(u.length){var G=function(I,H){return I.getAttribute("data-"+H)?H:null};aT.each(aS(A,u[0]).cells,function(I,H){var N=A.aoColumns[I];if(N.mData===I){var L=G(H,"sort")||G(H,"order"),K=G(H,"filter")||G(H,"search");if(L!==null||K!==null){N.mData={_:I+".display",sort:L!==null?I+".@data-"+L:a,type:L!==null?I+".@data-"+L:a,filter:K!==null?I+".@data-"+K:a};cd(A,I)}}})}var F=A.oFeatures;D.bStateSave&&(F.bStateSave=!0,aW(A,D),aF(A,"aoDrawCallback",bI,"state_save"));if(D.aaSorting===a){x=A.aaSorting;B=0;for(C=x.length;B<C;B++){x[B][1]=A.aoColumns[B].asSorting[0]}}b1(A);F.bSort&&aF(A,"aoDrawCallback",function(){if(A.bSorted){var I=bf(A),H={};aT.each(I,function(K,L){H[L.src]=L.dir});aI(A,null,"order",[A,I,H]);bx(A)}});aF(A,"aoDrawCallback",function(){(A.bSorted||aB(A)==="ssp"||F.bDeferRender)&&b1(A)},"sc");b9(A);B=aT(this).children("caption").each(function(){this._captionSide=aT(this).css("caption-side")});C=aT(this).children("thead");0===C.length&&(C=aT("<thead/>").appendTo(this));A.nTHead=C[0];C=aT(this).children("tbody");0===C.length&&(C=aT("<tbody/>").appendTo(this));A.nTBody=C[0];C=aT(this).children("tfoot");if(0===C.length&&0<B.length&&(""!==A.oScroll.sX||""!==A.oScroll.sY)){C=aT("<tfoot/>").appendTo(this)}0===C.length||0===C.children().length?aT(this).addClass(y.sNoFooter):0<C.length&&(A.nTFoot=C[0],bP(A.aoFooter,A.nTFoot));if(D.aaData){for(B=0;B<D.aaData.length;B++){bq(A,D.aaData[B])}}else{(A.bDeferLoading||"dom"==aB(A))&&bp(A,aT(A.nTBody).children("tr"))}A.aiDisplay=A.aiDisplayMaster.slice();A.bInitialised=!0;!1===E&&cl(A)}});h=null;return this};var ai=[],aC=Array.prototype,bz=function(p){var h,s,r=aN.settings,q=aT.map(r,function(u){return u.nTable});if(p){if(p.nTable&&p.oApi){return[p]}if(p.nodeName&&"table"===p.nodeName.toLowerCase()){return h=aT.inArray(p,q),-1!==h?[r[h]]:null}if(p&&"function"===typeof p.settings){return p.settings().toArray()}"string"===typeof p?s=aT(p):p instanceof aT&&(s=p)}else{return[]}if(s){return s.map(function(){h=aT.inArray(this,q);return -1!==h?r[h]:null}).toArray()}};aM=function(p,h){if(!this instanceof aM){throw"DT API must be constructed as a new object"}var u=[],s=function(w){(w=bz(w))&&u.push.apply(u,w)};if(aT.isArray(p)){for(var r=0,q=p.length;r<q;r++){s(p[r])}}else{s(p)}this.context=aY(u);h&&this.push.apply(this,h.toArray?h.toArray():h);this.selector={rows:null,cols:null,opts:null};aM.extend(this,this,ai)};aN.Api=aM;aM.prototype={concat:aC.concat,context:[],each:function(p){for(var h=0,q=this.length;h<q;h++){p.call(this,this[h],h,this)}return this},eq:function(p){var h=this.context;return h.length>p?new aM(h[p],this[p]):null},filter:function(p){var h=[];if(aC.filter){h=aC.filter.call(this,p,this)}else{for(var r=0,q=this.length;r<q;r++){p.call(this,this[r],r,this)&&h.push(this[r])}}return new aM(this.context,h)},flatten:function(){var h=[];return new aM(this.context,h.concat.apply(h,this.toArray()))},join:aC.join,indexOf:aC.indexOf||function(p,h){for(var r=h||0,q=this.length;r<q;r++){if(this[r]===p){return r}}return -1},iterator:function(D,C,B){var A=[],z,y,x,w,u,q=this.context,r,p,s=this.selector;"string"===typeof D&&(B=C,C=D,D=!1);y=0;for(x=q.length;y<x;y++){if("table"===C){z=B(q[y],y),z!==a&&A.push(z)}else{if("columns"===C||"rows"===C){z=B(q[y],this[y],y),z!==a&&A.push(z)}else{if("column"===C||"column-rows"===C||"row"===C||"cell"===C){p=this[y];"column-rows"===C&&(r=l(q[y],s.opts));w=0;for(u=p.length;w<u;w++){z=p[w],z="cell"===C?B(q[y],z.row,z.column,y,w):B(q[y],z,y,w,r),z!==a&&A.push(z)}}}}}return A.length?(D=new aM(q,D?A.concat.apply([],A):A),C=D.selector,C.rows=s.rows,C.cols=s.cols,C.opts=s.opts,D):this},lastIndexOf:aC.lastIndexOf||function(p,h){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(p){var h=[];if(aC.map){h=aC.map.call(this,p,this)}else{for(var r=0,q=this.length;r<q;r++){h.push(p.call(this,this[r],r))}}return new aM(this.context,h)},pluck:function(h){return this.map(function(p){return p[h]})},pop:aC.pop,push:aC.push,reduce:aC.reduce||function(p,h){return bQ(this,p,h,0,this.length,1)},reduceRight:aC.reduceRight||function(p,h){return bQ(this,p,h,this.length-1,-1,-1)},reverse:aC.reverse,selector:null,shift:aC.shift,sort:aC.sort,splice:aC.splice,toArray:function(){return aC.slice.call(this)},to$:function(){return aT(this)},toJQuery:function(){return aT(this)},unique:function(){return new aM(this.context,aY(this))},unshift:aC.unshift};aM.extend=function(p,h,w){if(h&&(h instanceof aM||h.__dt_wrapper)){var u,s,r,q=function(y,x,z){return function(){var A=x.apply(y,arguments);aM.extend(A,A,z.methodExt);return A}};u=0;for(s=w.length;u<s;u++){r=w[u],h[r.name]="function"===typeof r.val?q(p,r.val,r):aT.isPlainObject(r.val)?{}:r.val,h[r.name].__dt_wrapper=!0,aM.extend(p,h[r.name],r.propExt)}}};aM.register=aL=function(z,y){if(aT.isArray(z)){for(var x=0,w=z.length;x<w;x++){aM.register(z[x],y)}}else{for(var u=z.split("."),s=ai,r,p,x=0,w=u.length;x<w;x++){r=(p=-1!==u[x].indexOf("()"))?u[x].replace("()",""):u[x];var q;z:{q=0;for(var h=s.length;q<h;q++){if(s[q].name===r){q=s[q];break z}}q=null}q||(q={name:r,val:{},methodExt:[],propExt:[]},s.push(q));x===w-1?q.val=y:s=p?q.methodExt:q.propExt}}};aM.registerPlural=aH=function(p,h,q){aM.register(p,q);aM.register(h,function(){var r=q.apply(this,arguments);return r===this?this:r instanceof aM?r.length?aT.isArray(r[0])?new aM(r.context,r[0]):r[0]:a:r})};aL("tables()",function(p){var h;if(p){h=aM;var r=this.context;if("number"===typeof p){p=[r[p]]}else{var q=aT.map(r,function(s){return s.nTable}),p=aT(q).filter(p).map(function(){var s=aT.inArray(this,q);return r[s]}).toArray()}h=new h(p)}else{h=this}return h});aL("table()",function(p){var p=this.tables(p),h=p.context;return h.length?new aM(h[0]):p});aH("tables().nodes()","table().node()",function(){return this.iterator("table",function(h){return h.nTable})});aH("tables().body()","table().body()",function(){return this.iterator("table",function(h){return h.nTBody})});aH("tables().header()","table().header()",function(){return this.iterator("table",function(h){return h.nTHead})});aH("tables().footer()","table().footer()",function(){return this.iterator("table",function(h){return h.nTFoot})});aH("tables().containers()","table().container()",function(){return this.iterator("table",function(h){return h.nTableWrapper})});aL("draw()",function(h){return this.iterator("table",function(p){bl(p,!1===h)})});aL("page()",function(h){return h===a?this.page.info().page:this.iterator("table",function(p){ak(p,h)})});aL("page.info()",function(){if(0===this.context.length){return a}var p=this.context[0],h=p._iDisplayStart,s=p._iDisplayLength,r=p.fnRecordsDisplay(),q=-1===s;return{page:q?0:Math.floor(h/s),pages:q?1:Math.ceil(r/s),start:h,end:p.fnDisplayEnd(),length:s,recordsTotal:p.fnRecordsTotal(),recordsDisplay:r}});aL("page.len()",function(h){return h===a?0!==this.context.length?this.context[0]._iDisplayLength:a:this.iterator("table",function(p){a2(p,h)})});var f=function(p,h,r){"ssp"==aB(p)?bl(p,h):(bE(p,!0),by(p,[],function(w){aq(p);for(var w=aX(p,w),u=0,s=w.length;u<s;u++){bq(p,w[u])}bl(p,h);bE(p,!1)}));if(r){var q=new aM(p);q.one("draw",function(){r(q.ajax.json())})}};aL("ajax.json()",function(){var h=this.context;if(0<h.length){return h[0].json}});aL("ajax.params()",function(){var h=this.context;if(0<h.length){return h[0].oAjaxData}});aL("ajax.reload()",function(p,h){return this.iterator("table",function(q){f(q,!1===h,p)})});aL("ajax.url()",function(p){var h=this.context;if(p===a){if(0===h.length){return a}h=h[0];return h.ajax?aT.isPlainObject(h.ajax)?h.ajax.url:h.ajax:h.sAjaxSource}return this.iterator("table",function(q){aT.isPlainObject(q.ajax)?q.ajax.url=p:q.ajax=p})});aL("ajax.url().load()",function(p,h){return this.iterator("table",function(q){f(q,!1===h,p)})});var b8=function(y,x){var w=[],u,s,r,q,h,p;if(!y||"string"===typeof y||y.length===a){y=[y]}r=0;for(q=y.length;r<q;r++){s=y[r]&&y[r].split?y[r].split(","):[y[r]];h=0;for(p=s.length;h<p;h++){(u=x("string"===typeof s[h]?aT.trim(s[h]):s[h]))&&u.length&&w.push.apply(w,u)}}return w},bC=function(h){h||(h={});h.filter&&!h.search&&(h.search=h.filter);return{search:h.search||"none",order:h.order||"current",page:h.page||"all"}},bO=function(p){for(var h=0,q=p.length;h<q;h++){if(0<p[h].length){return p[0]=p[h],p.length=1,p.context=[p.context[h]],p}}p.length=0;return p},l=function(p,h){var x,w,u,s=[],r=p.aiDisplay;x=p.aiDisplayMaster;var q=h.search;w=h.order;u=h.page;if("ssp"==aB(p)){return"removed"===q?[]:be(0,x.length)}if("current"==u){x=p._iDisplayStart;for(w=p.fnDisplayEnd();x<w;x++){s.push(r[x])}}else{if("current"==w||"applied"==w){s="none"==q?x.slice():"applied"==q?r.slice():aT.map(x,function(y){return -1===aT.inArray(y,r)?y:null})}else{if("index"==w||"original"==w){x=0;for(w=p.aoData.length;x<w;x++){"none"==q?s.push(x):(u=aT.inArray(x,r),(-1===u&&"removed"==q||0<=u&&"applied"==q)&&s.push(x))}}}}return s};aL("rows()",function(p,h){p===a?p="":aT.isPlainObject(p)&&(h=p,p="");var h=bC(h),q=this.iterator("table",function(s){var r=h;return b8(p,function(w){var u=bH(w);if(u!==null&&!r){return[u]}var x=l(s,r);if(u!==null&&aT.inArray(u,x)!==-1){return[u]}if(!w){return x}for(var u=[],y=0,z=x.length;y<z;y++){u.push(s.aoData[x[y]].nTr)}return w.nodeName&&aT.inArray(w,u)!==-1?[w._DT_RowIndex]:aT(u).filter(w).map(function(){return this._DT_RowIndex}).toArray()})});q.selector.rows=p;q.selector.opts=h;return q});aL("rows().nodes()",function(){return this.iterator("row",function(p,h){return p.aoData[h].nTr||a})});aL("rows().data()",function(){return this.iterator(!0,"rows",function(p,h){return g(p.aoData,h,"_aData")})});aH("rows().cache()","row().cache()",function(h){return this.iterator("row",function(p,r){var q=p.aoData[r];return"search"===h?q._aFilterData:q._aSortData})});aH("rows().invalidate()","row().invalidate()",function(h){return this.iterator("row",function(p,q){ch(p,q,h)})});aH("rows().indexes()","row().index()",function(){return this.iterator("row",function(p,h){return h})});aH("rows().remove()","row().remove()",function(){var h=this;return this.iterator("row",function(p,w,u){var s=p.aoData;s.splice(w,1);for(var r=0,q=s.length;r<q;r++){null!==s[r].nTr&&(s[r].nTr._DT_RowIndex=r)}aT.inArray(w,p.aiDisplay);M(p.aiDisplayMaster,w);M(p.aiDisplay,w);M(h[u],w,!1);aA(p)})});aL("rows.add()",function(p){var h=this.iterator("table",function(r){var x,w,u,s=[];w=0;for(u=p.length;w<u;w++){x=p[w],x.nodeName&&"TR"===x.nodeName.toUpperCase()?s.push(bp(r,x)[0]):s.push(bq(r,x))}return s}),q=this.rows(-1);q.pop();q.push.apply(q,h.toArray());return q});aL("row()",function(p,h){return bO(this.rows(p,h))});aL("row().data()",function(p){var h=this.context;if(p===a){return h.length&&this.length?h[0].aoData[this[0]]._aData:a}h[0].aoData[this[0]]._aData=p;ch(h[0],this[0],"data");return this});aL("row().node()",function(){var h=this.context;return h.length&&this.length?h[0].aoData[this[0]].nTr||null:null});aL("row.add()",function(p){p instanceof aT&&p.length&&(p=p[0]);var h=this.iterator("table",function(q){return p.nodeName&&"TR"===p.nodeName.toUpperCase()?bp(q,p)[0]:bq(q,p)});return this.row(h[0])});var bh=function(p){var h=p.context;h.length&&p.length&&(p=h[0].aoData[p[0]],p._details&&(p._details.remove(),p._detailsShow=a,p._details=a))},b5=function(p,h){var w=p.context;if(w.length&&p.length){var u=w[0].aoData[p[0]];if(u._details){(u._detailsShow=h)?u._details.insertAfter(u.nTr):u._details.detach();var s=w[0],r=new aM(s),q=s.aoData;r.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<bD(q,"_details").length&&(r.on("draw.dt.DT_details",function(y,x){s===x&&r.rows({page:"current"}).eq(0).each(function(z){z=q[z];z._detailsShow&&z._details.insertAfter(z.nTr)})}),r.on("column-visibility.dt.DT_details",function(y,x){if(s===x){for(var C,B=a4(x),A=0,z=q.length;A<z;A++){C=q[A],C._details&&C._details.children("td[colspan]").attr("colspan",B)}}}),r.on("destroy.dt.DT_details",function(y,x){if(s===x){for(var A=0,z=q.length;A<z;A++){q[A]._details&&bh(q[A])}}}))}}};aL("row().child()",function(p,h){var x=this.context;if(p===a){return x.length&&this.length?x[0].aoData[this[0]]._details:a}if(!0===p){this.child.show()}else{if(!1===p){bh(this)}else{if(x.length&&this.length){var w=x[0],x=x[0].aoData[this[0]],u=[],s=function(z,y){if(z.nodeName&&"tr"===z.nodeName.toLowerCase()){u.push(z)}else{var A=aT("<tr><td/></tr>").addClass(y);aT("td",A).addClass(y).html(z)[0].colSpan=a4(w);u.push(A[0])}};if(aT.isArray(p)||p instanceof aT){for(var r=0,q=p.length;r<q;r++){s(p[r],h)}}else{s(p,h)}x._details&&x._details.remove();x._details=aT(u);x._detailsShow&&x._details.insertAfter(x.nTr)}}}return this});aL(["row().child.show()","row().child().show()"],function(){b5(this,!0);return this});aL(["row().child.hide()","row().child().hide()"],function(){b5(this,!1);return this});aL(["row().child.remove()","row().child().remove()"],function(){bh(this);return this});aL("row().child.isShown()",function(){var h=this.context;return h.length&&this.length?h[0].aoData[this[0]]._detailsShow||!1:!1});var bN=/^(.+):(name|visIdx|visible)$/;aL("columns()",function(p,h){p===a?p="":aT.isPlainObject(p)&&(h=p,p="");var h=bC(h),q=this.iterator("table",function(r){var x=p,w=r.aoColumns,u=bD(w,"sName"),s=bD(w,"nTh");return b8(x,function(y){var A=bH(y);if(y===""){return be(w.length)}if(A!==null){return[A>=0?A:w.length+A]}var z=typeof y==="string"?y.match(bN):"";if(z){switch(z[2]){case"visIdx":case"visible":y=parseInt(z[1],10);if(y<0){A=aT.map(w,function(C,B){return C.bVisible?B:null});return[A[A.length+y]]}return[bS(r,y)];case"name":return aT.map(u,function(C,B){return C===z[1]?B:null})}}else{return aT(s).filter(y).map(function(){return aT.inArray(this,s)}).toArray()}})});q.selector.cols=p;q.selector.opts=h;return q});aH("columns().header()","column().header()",function(){return this.iterator("column",function(p,h){return p.aoColumns[h].nTh})});aH("columns().footer()","column().footer()",function(){return this.iterator("column",function(p,h){return p.aoColumns[h].nTf})});aH("columns().data()","column().data()",function(){return this.iterator("column-rows",function(p,h,u,s,r){for(var u=[],s=0,q=r.length;s<q;s++){u.push(bF(p,r[s],h,""))}return u})});aH("columns().cache()","column().cache()",function(h){return this.iterator("column-rows",function(p,u,s,r,q){return g(p.aoData,q,"search"===h?"_aFilterData":"_aSortData",u)})});aH("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(p,h,s,r,q){return g(p.aoData,q,"anCells",h)})});aH("columns().visible()","column().visible()",function(p,h){return this.iterator("column",function(A,z){var y;if(p===a){y=A.aoColumns[z].bVisible}else{var x=A.aoColumns;y=x[z];var w=A.aoData,s,u,q;if(p===a){y=y.bVisible}else{if(y.bVisible!==p){if(p){var r=aT.inArray(!0,bD(x,"bVisible"),z+1);s=0;for(u=w.length;s<u;s++){q=w[s].nTr,x=w[s].anCells,q&&q.insertBefore(x[z],x[r]||null)}}else{aT(bD(A.aoData,"anCells",z)).detach()}y.bVisible=p;bj(A,A.aoHeader);bj(A,A.aoFooter);if(h===a||h){a9(A),(A.oScroll.sX||A.oScroll.sY)&&a8(A)}aI(A,null,"column-visibility",[A,z,p]);bI(A)}y=void 0}}return y})});aH("columns().indexes()","column().index()",function(h){return this.iterator("column",function(p,q){return"visible"===h?a6(p,q):q})});aL("columns.adjust()",function(){return this.iterator("table",function(h){a9(h)})});aL("column.index()",function(p,h){if(0!==this.context.length){var q=this.context[0];if("fromVisible"===p||"toData"===p){return bS(q,h)}if("fromData"===p||"toVisible"===p){return a6(q,h)}}});aL("column()",function(p,h){return bO(this.columns(p,h))});aL("cells()",function(A,z,y){aT.isPlainObject(A)&&(typeof A.row!==a?(y=z,z=null):(y=A,A=null));aT.isPlainObject(z)&&(y=z,z=null);if(null===z||z===a){return this.iterator("table",function(P){var N=A,L=bC(y),K=P.aoData,I=l(P,L),L=g(K,I,"anCells"),G=aT([].concat.apply([],L)),H,F=P.aoColumns.length,E,D,B,C;return b8(N,function(Q){if(Q===null||Q===a){E=[];D=0;for(B=I.length;D<B;D++){H=I[D];for(C=0;C<F;C++){E.push({row:H,column:C})}}return E}return aT.isPlainObject(Q)?[Q]:G.filter(Q).map(function(S,R){H=R.parentNode._DT_RowIndex;return{row:H,column:aT.inArray(R,K[H].anCells)}}).toArray()})})}var x=this.columns(z,y),w=this.rows(A,y),u,s,q,r,h,p=this.iterator("table",function(C,B){u=[];s=0;for(q=w[B].length;s<q;s++){r=0;for(h=x[B].length;r<h;r++){u.push({row:w[B][s],column:x[B][r]})}}return u});aT.extend(p.selector,{cols:z,rows:A,opts:y});return p});aH("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(p,h,q){return p.aoData[h].anCells[q]})});aL("cells().data()",function(){return this.iterator("cell",function(p,h,q){return bF(p,h,q)})});aH("cells().cache()","cell().cache()",function(h){h="search"===h?"_aFilterData":"_aSortData";return this.iterator("cell",function(p,r,q){return p.aoData[r][h][q]})});aH("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(p,h,q){return{row:h,column:q,columnVisible:a6(p,q)}})});aL(["cells().invalidate()","cell().invalidate()"],function(p){var h=this.selector;this.rows(h.rows,h.opts).invalidate(p);return this});aL("cell()",function(p,h,q){return bO(this.cells(p,h,q))});aL("cell().data()",function(p){var h=this.context,q=this[0];if(p===a){return h.length&&q.length?bF(h[0],q[0].row,q[0].column):a}ar(h[0],q[0].row,q[0].column,p);ch(h[0],q[0].row,"data",q[0].column);return this});aL("order()",function(p,h){var q=this.context;if(p===a){return 0!==q.length?q[0].aaSorting:a}"number"===typeof p?p=[[p,h]]:aT.isArray(p[0])||(p=Array.prototype.slice.call(arguments));return this.iterator("table",function(r){r.aaSorting=p.slice()})});aL("order.listener()",function(p,h,q){return this.iterator("table",function(r){aw(r,p,h,q)})});aL(["columns().order()","column().order()"],function(p){var h=this;return this.iterator("table",function(s,r){var q=[];aT.each(h[r],function(u,w){q.push([w,p])});s.aaSorting=q})});aL("search()",function(p,h,s,r){var q=this.context;return p===a?0!==q.length?q[0].oPreviousSearch.sSearch:a:this.iterator("table",function(u){u.oFeatures.bFilter&&aP(u,aT.extend({},u.oPreviousSearch,{sSearch:p+"",bRegex:null===h?!1:h,bSmart:null===s?!0:s,bCaseInsensitive:null===r?!0:r}),1)})});aH("columns().search()","column().search()",function(p,h,r,q){return this.iterator("column",function(w,u){var s=w.aoPreSearchCols;if(p===a){return s[u].sSearch}w.oFeatures.bFilter&&(aT.extend(s[u],{sSearch:p+"",bRegex:null===h?!1:h,bSmart:null===r?!0:r,bCaseInsensitive:null===q?!0:q}),aP(w,w.oPreviousSearch,1))})});aL("state()",function(){return this.context.length?this.context[0].oSavedState:null});aL("state.clear()",function(){return this.iterator("table",function(h){h.fnStateSaveCallback.call(h.oInstance,h,{})})});aL("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});aL("state.save()",function(){return this.iterator("table",function(h){bI(h)})});aN.versionCheck=aN.fnVersionCheck=function(p){for(var h=aN.version.split("."),p=p.split("."),u,s,r=0,q=p.length;r<q;r++){if(u=parseInt(h[r],10)||0,s=parseInt(p[r],10)||0,u!==s){return u>s}}return !0};aN.isDataTable=aN.fnIsDataTable=function(p){var h=aT(p).get(0),q=!1;aT.each(aN.settings,function(r,s){if(s.nTable===h||s.nScrollHead===h||s.nScrollFoot===h){q=!0}});return q};aN.tables=aN.fnTables=function(h){return jQuery.map(aN.settings,function(p){if(!h||h&&aT(p.nTable).is(":visible")){return p.nTable}})};aN.camelToHungarian=bt;aL("$()",function(p,h){var q=this.rows(h).nodes(),q=aT(q);return aT([].concat(q.filter(p).toArray(),q.find(p).toArray()))});aT.each(["on","one","off"],function(p,h){aL(h+"()",function(){var q=Array.prototype.slice.call(arguments);q[0].match(/\.dt\b/)||(q[0]+=".dt");var r=aT(this.tables().nodes());r[h].apply(r,q);return this})});aL("clear()",function(){return this.iterator("table",function(h){aq(h)})});aL("settings()",function(){return new aM(this.context,this.context)});aL("data()",function(){return this.iterator("table",function(h){return bD(h.aoData,"_aData")}).flatten()});aL("destroy()",function(h){h=h||!1;return this.iterator("table",function(B){var A=B.nTableWrapper.parentNode,z=B.oClasses,y=B.nTable,x=B.nTBody,w=B.nTHead,s=B.nTFoot,u=aT(y),x=aT(x),r=aT(B.nTableWrapper),q=aT.map(B.aoData,function(C){return C.nTr}),p;B.bDestroying=!0;aI(B,"aoDestroyCallback","destroy",[B]);h||(new aM(B)).columns().visible(!0);r.unbind(".DT").find(":not(tbody *)").unbind(".DT");aT(b).unbind(".DT-"+B.sInstance);y!=w.parentNode&&(u.children("thead").detach(),u.append(w));s&&y!=s.parentNode&&(u.children("tfoot").detach(),u.append(s));u.detach();r.detach();B.aaSorting=[];B.aaSortingFixed=[];b1(B);aT(q).removeClass(B.asStripeClasses.join(" "));aT("th, td",w).removeClass(z.sSortable+" "+z.sSortableAsc+" "+z.sSortableDesc+" "+z.sSortableNone);B.bJUI&&(aT("th span."+z.sSortIcon+", td span."+z.sSortIcon,w).detach(),aT("th, td",w).each(function(){var C=aT("div."+z.sSortJUIWrapper,this);aT(this).append(C.contents());C.detach()}));!h&&A&&A.insertBefore(y,B.nTableReinsertBefore);x.children().detach();x.append(q);u.css("width",B.sDestroyWidth).removeClass(z.sTable);(p=B.asDestroyStripes.length)&&x.children().each(function(C){aT(this).addClass(B.asDestroyStripes[C%p])});A=aT.inArray(B,aN.settings);-1!==A&&aN.settings.splice(A,1)})});aN.version="1.10.2";aN.settings=[];aN.models={};aN.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};aN.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};aN.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};aN.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(h){return h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(p){try{return JSON.parse((-1===p.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+p.sInstance+"_"+location.pathname))}catch(h){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(p,h){try{(-1===p.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+p.sInstance+"_"+location.pathname,JSON.stringify(h))}catch(q){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:aT.extend({},aN.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};bd(aN.defaults);aN.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};bd(aN.defaults.column);aN.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:a,oAjaxData:a,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==aB(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==aB(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var p=this._iDisplayLength,h=this._iDisplayStart,u=h+p,s=this.aiDisplay.length,r=this.oFeatures,q=r.bPaginate;return r.bServerSide?!1===q||-1===p?h+s:Math.min(h+p,this._iRecordsDisplay):!q||u>s||-1===p?s:u},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};aN.ext=aJ={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:aN.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:aN.version};aT.extend(aJ,{afnFiltering:aJ.search,aTypes:aJ.type.detect,ofnSearch:aJ.type.search,oSort:aJ.type.order,afnSortData:aJ.order,aoFeatures:aJ.feature,oApi:aJ.internal,oStdClasses:aJ.classes,oPagination:aJ.pager});aT.extend(aN.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var b4="",b4="",bw=b4+"ui-state-default",n=b4+"css_right ui-icon ui-icon-",bL=b4+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";aT.extend(aN.ext.oJUIClasses,aN.ext.classes,{sPageButton:"fg-button ui-button "+bw,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:bw+" sorting_asc",sSortDesc:bw+" sorting_desc",sSortable:bw+" sorting",sSortableAsc:bw+" sorting_asc_disabled",sSortableDesc:bw+" sorting_desc_disabled",sSortableNone:bw+" sorting_disabled",sSortJUIAsc:n+"triangle-1-n",sSortJUIDesc:n+"triangle-1-s",sSortJUI:n+"carat-2-n-s",sSortJUIAscAllowed:n+"carat-1-n",sSortJUIDescAllowed:n+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+bw,sScrollFoot:"dataTables_scrollFoot "+bw,sHeaderTH:bw,sFooterTH:bw,sJUIHeader:bL+" ui-corner-tl ui-corner-tr",sJUIFooter:bL+" ui-corner-bl ui-corner-br"});var ae=aN.ext.pager;aT.extend(ae,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(p,h){return["previous",bM(p,h),"next"]},full_numbers:function(p,h){return["first","previous",bM(p,h),"next","last"]},_numbers:bM,numbers_length:7});aT.extend(!0,aN.ext.renderer,{pageButton:{_:function(E,D,C,B,A,z){var y=E.oClasses,w=E.oLanguage.oPaginate,x,s,r=0,q=function(F,N){var G,L,I,K,H=function(p){ak(E,p.data.action,true)};G=0;for(L=N.length;G<L;G++){K=N[G];if(aT.isArray(K)){I=aT("<"+(K.DT_el||"div")+"/>").appendTo(F);q(I,K)}else{s=x="";switch(K){case"ellipsis":F.append("<span>&hellip;</span>");break;case"first":x=w.sFirst;s=K+(A>0?"":" "+y.sPageButtonDisabled);break;case"previous":x=w.sPrevious;s=K+(A>0?"":" "+y.sPageButtonDisabled);break;case"next":x=w.sNext;s=K+(A<z-1?"":" "+y.sPageButtonDisabled);break;case"last":x=w.sLast;s=K+(A<z-1?"":" "+y.sPageButtonDisabled);break;default:x=K+1;s=A===K?y.sPageButtonActive:""}if(x){I=aT("<a>",{"class":y.sPageButton+" "+s,"aria-controls":E.sTableId,"data-dt-idx":r,tabindex:E.iTabIndex,id:C===0&&typeof K==="string"?E.sTableId+"_"+K:null}).html(x).appendTo(F);b6(I,{action:K},H);r++}}}};try{var u=aT(c.activeElement).data("dt-idx");q(aT(D).empty(),B);u!==null&&aT(D).find("[data-dt-idx="+u+"]").focus()}catch(h){}}}});var ay=function(p,h,r,q){if(!p||"-"===p){return -Infinity}h&&(p=a0(p,h));p.replace&&(r&&(p=p.replace(r,"")),q&&(p=p.replace(q,"")));return 1*p};aT.extend(aJ.type.order,{"date-pre":function(h){return Date.parse(h)||0},"html-pre":function(h){return bs(h)?"":h.replace?h.replace(/<.*?>/g,"").toLowerCase():h+""},"string-pre":function(h){return bs(h)?"":"string"===typeof h?h.toLowerCase():!h.toString?"":h.toString()},"string-asc":function(p,h){return p<h?-1:p>h?1:0},"string-desc":function(p,h){return p<h?1:p>h?-1:0}});aO("");aT.extend(aN.ext.type.detect,[function(p,h){var q=h.oLanguage.sDecimal;return am(p,q)?"num"+q:null},function(p){if(p&&(!k.test(p)||!b7.test(p))){return null}var h=Date.parse(p);return null!==h&&!isNaN(h)||bs(p)?"date":null},function(p,h){var q=h.oLanguage.sDecimal;return am(p,q,!0)?"num-fmt"+q:null},function(p,h){var q=h.oLanguage.sDecimal;return az(p,q)?"html-num"+q:null},function(p,h){var q=h.oLanguage.sDecimal;return az(p,q,!0)?"html-num-fmt"+q:null},function(h){return bs(h)||"string"===typeof h&&-1!==h.indexOf("<")?"html":null}]);aT.extend(aN.ext.type.search,{html:function(h){return bs(h)?h:"string"===typeof h?h.replace(b0," ").replace(aj,""):""},string:function(h){return bs(h)?h:"string"===typeof h?h.replace(b0," "):h}});aT.extend(!0,aN.ext.renderer,{header:{_:function(p,h,r,q){aT(p.nTable).on("order.dt.DT",function(x,w,u,s){if(p===w){x=r.idx;h.removeClass(r.sSortingClass+" "+q.sSortAsc+" "+q.sSortDesc).addClass(s[x]=="asc"?q.sSortAsc:s[x]=="desc"?q.sSortDesc:r.sSortingClass)}})},jqueryui:function(p,h,s,r){var q=s.idx;aT("<div/>").addClass(r.sSortJUIWrapper).append(h.contents()).append(aT("<span/>").addClass(r.sSortIcon+" "+s.sSortingClassJUI)).appendTo(h);aT(p.nTable).on("order.dt.DT",function(y,x,w,u){if(p===x){h.removeClass(r.sSortAsc+" "+r.sSortDesc).addClass(u[q]=="asc"?r.sSortAsc:u[q]=="desc"?r.sSortDesc:s.sSortingClass);h.find("span."+r.sSortIcon).removeClass(r.sSortJUIAsc+" "+r.sSortJUIDesc+" "+r.sSortJUI+" "+r.sSortJUIAscAllowed+" "+r.sSortJUIDescAllowed).addClass(u[q]=="asc"?r.sSortJUIAsc:u[q]=="desc"?r.sSortJUIDesc:s.sSortingClassJUI)}})}}});aN.render={number:function(p,h,r,q){return{display:function(w){var u=0>w?"-":"",w=Math.abs(parseFloat(w)),s=parseInt(w,10),w=r?h+(w-s).toFixed(r).substring(2):"";return u+(q||"")+s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,p)+w}}}};aT.extend(aN.ext.internal,{_fnExternApiFunc:ck,_fnBuildAjax:by,_fnAjaxUpdate:ao,_fnAjaxParameters:bZ,_fnAjaxUpdateDraw:bG,_fnAjaxDataSrc:aX,_fnAddColumn:ce,_fnColumnOptions:cd,_fnAdjustColumnSizing:a9,_fnVisibleToColumnIndex:bS,_fnColumnIndexToVisible:a6,_fnVisbleColumns:a4,_fnGetColumns:a7,_fnColumnTypes:aU,_fnApplyColumnDefs:bn,_fnHungarianMap:bd,_fnCamelToHungarian:bt,_fnLanguageCompat:bk,_fnBrowserDetect:b9,_fnAddData:bq,_fnAddTr:bp,_fnNodeToDataIndex:function(p,h){return h._DT_RowIndex!==a?h._DT_RowIndex:null},_fnNodeToColumnIndex:function(p,h,q){return aT.inArray(q,p.aoData[h].anCells)},_fnGetCellData:bF,_fnSetCellData:ar,_fnSplitObjNotation:ci,_fnGetObjectDataFn:bc,_fnSetObjectDataFn:bT,_fnGetDataMaster:bX,_fnClearTable:aq,_fnDeleteIndex:M,_fnInvalidateRow:ch,_fnGetRowElements:aS,_fnCreateTr:O,_fnBuildHead:aQ,_fnDrawHead:bj,_fnDraw:bm,_fnReDraw:bl,_fnAddOptionsHtml:cf,_fnDetectHeader:bP,_fnGetUniqueThs:bW,_fnFeatureHtmlFilter:bv,_fnFilterComplete:aP,_fnFilterCustom:ah,_fnFilterColumn:ax,_fnFilter:aZ,_fnFilterCreateSearch:b2,_fnEscapeRegex:bJ,_fnFilterData:e,_fnFeatureHtmlInfo:ad,_fnUpdateInfo:cc,_fnInfoMacros:bR,_fnInitialise:cl,_fnInitComplete:av,_fnLengthChange:a2,_fnFeatureHtmlLength:bU,_fnFeatureHtmlPaginate:cj,_fnPageChange:ak,_fnFeatureHtmlProcessing:aV,_fnProcessingDisplay:bE,_fnFeatureHtmlTable:at,_fnScrollDraw:a8,_fnApplyToChildren:bu,_fnCalculateColumnWidths:br,_fnThrottle:cm,_fnConvertToWidth:bo,_fnScrollingWidthAdjust:ap,_fnGetWidestNode:aR,_fnGetMaxLenString:J,_fnStringToCss:aK,_fnScrollBarWidth:cg,_fnSortFlatten:bf,_fnSort:o,_fnSortAria:bx,_fnSortListener:j,_fnSortAttachListener:aw,_fnSortingClasses:b1,_fnSortData:bV,_fnSaveState:bI,_fnLoadState:aW,_fnSettingsFromNode:a1,_fnLog:bi,_fnMap:bA,_fnBindAction:b6,_fnCallbackReg:aF,_fnCallbackFire:aI,_fnLengthOverflow:aA,_fnRenderer:ag,_fnDataSource:aB,_fnRowAttributes:bB,_fnCalculateEnd:function(){}});aT.fn.dataTable=aN;aT.fn.dataTableSettings=aN.settings;aT.fn.dataTableExt=aN.ext;aT.fn.DataTable=function(h){return aT(this).dataTable(h).api()};aT.each(aN,function(p,h){aT.fn.DataTable[p]=h});return aT.fn.dataTable};"function"===typeof define&&define.amd?define("datatables",["jquery"],d):"object"===typeof exports?d(require("jquery")):jQuery&&!jQuery.fn.dataTable&&d(jQuery)})(window,document);
/* jsTree - v3.3.7 - 2018-11-06 - (MIT) */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):b(jQuery)}(function(H,G){if(!H.jstree){var F=0,E=!1,D=!1,C=!1,B=[],A=H("script:last").attr("src"),z=window.document;H.jstree={version:"3.3.7",defaults:{plugins:[]},plugins:{},path:A&&-1!==A.indexOf("/")?A.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},H.jstree.create=function(a,h){var g=new H.jstree.core(++F),c=h;return h=H.extend(!0,{},H.jstree.defaults,h),c&&c.plugins&&(h.plugins=c.plugins),H.each(h.plugins,function(e,d){"core"!==e&&(g=g.plugin(d,h[d]))}),H(a).data("jstree",g),g.init(a,h),g},H.jstree.destroy=function(){H(".jstree:jstree").jstree("destroy"),H(z).off(".jstree")},H.jstree.core=function(b){this._id=b,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},H.jstree.reference=function(a){var h=null,g=null;if(!a||!a.id||a.tagName&&a.nodeType||(a=a.id),!g||!g.length){try{g=H(a)}catch(f){}}if(!g||!g.length){try{g=H("#"+a.replace(H.jstree.idregex,"\\$&"))}catch(f){}}return g&&g.length&&(g=g.closest(".jstree")).length&&(g=g.data("jstree"))?h=g:H(".jstree").each(function(){var b=H(this).data("jstree");return b&&b._model.data[a]?(h=b,!1):void 0}),h},H.fn.jstree=function(h){var g="string"==typeof h,b=Array.prototype.slice.call(arguments,1),a=null;return h!==!0||this.length?(this.each(function(){var d=H.jstree.reference(this),c=g&&d?d[h]:null;return a=g&&c?c.apply(d,b):null,d||g||h!==G&&!H.isPlainObject(h)||H.jstree.create(this,h),(d&&!g||h===!0)&&(a=d||!1),null!==a&&a!==G?!1:void 0}),null!==a&&a!==G?a:this):!1},H.expr.pseudos.jstree=H.expr.createPseudo(function(a){return function(b){return H(b).hasClass("jstree")&&H(b).data("jstree")!==G}}),H.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:H.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(a){a.type="click",H(a.currentTarget).trigger(a)},enter:function(a){a.type="click",H(a.currentTarget).trigger(a)},left:function(a){if(a.preventDefault(),this.is_open(a.currentTarget)){this.close_node(a.currentTarget)}else{var d=this.get_parent(a.currentTarget);d&&d.id!==H.jstree.root&&this.get_node(d,!0).children(".jstree-anchor").focus()}},up:function(d){d.preventDefault();var c=this.get_prev_dom(d.currentTarget);c&&c.length&&c.children(".jstree-anchor").focus()},right:function(a){if(a.preventDefault(),this.is_closed(a.currentTarget)){this.open_node(a.currentTarget,function(b){this.get_node(b,!0).children(".jstree-anchor").focus()})}else{if(this.is_open(a.currentTarget)){var d=this.get_node(a.currentTarget,!0).children(".jstree-children")[0];d&&H(this._firstChild(d)).children(".jstree-anchor").focus()}}},down:function(d){d.preventDefault();var c=this.get_next_dom(d.currentTarget);c&&c.length&&c.children(".jstree-anchor").focus()},"*":function(b){this.open_all()},home:function(a){a.preventDefault();var d=this._firstChild(this.get_container_ul()[0]);d&&H(d).children(".jstree-anchor").filter(":visible").focus()},end:function(b){b.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(b){b.preventDefault(),this.edit(b.currentTarget)}}},H.jstree.core.prototype={plugin:function(a,f){var e=H.jstree.plugins[a];return e?(this._data[a]={},e.prototype=this,new e(f,this)):this},init:function(a,d){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[H.jstree.root]={id:H.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=H(a).addClass("jstree jstree-"+this._id),this.settings=d,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(H.jstree.root)},destroy:function(d){if(this.trigger("destroy"),this._wrk){try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(c){}}d||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e=z.createElement("LI"),d,f;return e.setAttribute("role","treeitem"),d=z.createElement("I"),d.className="jstree-icon jstree-ocl",d.setAttribute("role","presentation"),e.appendChild(d),d=z.createElement("A"),d.className="jstree-anchor",d.setAttribute("href","#"),d.setAttribute("tabindex","-1"),f=z.createElement("I"),f.className="jstree-icon jstree-themeicon",f.setAttribute("role","presentation"),d.appendChild(f),e.appendChild(d),d=f=null,e},_kbevent_to_func:function(h){var g={8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},m=[];h.ctrlKey&&m.push("ctrl"),h.altKey&&m.push("alt"),h.shiftKey&&m.push("shift"),m.push(g[h.which]||h.which),m=m.sort().join("-").toLowerCase();var l=this.settings.core.keyboard,k,j;for(k in l){if(l.hasOwnProperty(k)&&(j=k,"-"!==j&&"+"!==j&&(j=j.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS"),j=j.split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),j===m)){return l[k]}}return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var a="",f=null,e=0;this.element.on("dblclick.jstree",function(g){if(g.target.tagName&&"input"===g.target.tagName.toLowerCase()){return !0}if(z.selection&&z.selection.empty){z.selection.empty()}else{if(window.getSelection){var d=window.getSelection();try{d.removeAllRanges(),d.collapse()}catch(h){}}}}).on("mousedown.jstree",H.proxy(function(b){b.target===this.element[0]&&(b.preventDefault(),e=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(b){b.preventDefault()}).on("click.jstree",".jstree-ocl",H.proxy(function(b){this.toggle_node(b.target)},this)).on("dblclick.jstree",".jstree-anchor",H.proxy(function(b){return b.target.tagName&&"input"===b.target.tagName.toLowerCase()?!0:void (this.settings.core.dblclick_toggle&&this.toggle_node(b.target))},this)).on("click.jstree",".jstree-anchor",H.proxy(function(c){c.preventDefault(),c.currentTarget!==z.activeElement&&H(c.currentTarget).focus(),this.activate_node(c.currentTarget,c)},this)).on("keydown.jstree",".jstree-anchor",H.proxy(function(g){if(g.target.tagName&&"input"===g.target.tagName.toLowerCase()){return !0}this._data.core.rtl&&(37===g.which?g.which=39:39===g.which&&(g.which=37));var d=this._kbevent_to_func(g);if(d){var h=d.call(this,g);if(h===!1||h===!0){return h}}},this)).on("load_node.jstree",H.proxy(function(d,g){g.status&&(g.node.id!==H.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(H.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var h=[],k,j;for(k=0,j=this._data.core.selected.length;j>k;k++){h=h.concat(this._model.data[this._data.core.selected[k]].parents)}for(h=H.vakata.array_unique(h),k=0,j=h.length;j>k;k++){this.open_node(h[k],!1,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",H.proxy(function(l){if(l.target.tagName&&"input"===l.target.tagName.toLowerCase()){return !0}f&&clearTimeout(f),f=setTimeout(function(){a=""},500);var k=String.fromCharCode(l.which).toLowerCase(),j=this.element.find(".jstree-anchor").filter(":visible"),c=j.index(z.activeElement)||0,b=!1;if(a+=k,a.length>1){if(j.slice(c).each(H.proxy(function(h,g){return 0===H(g).text().toLowerCase().indexOf(a)?(H(g).focus(),b=!0,!1):void 0},this)),b){return}if(j.slice(0,c).each(H.proxy(function(h,g){return 0===H(g).text().toLowerCase().indexOf(a)?(H(g).focus(),b=!0,!1):void 0},this)),b){return}}if(new RegExp("^"+k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(a)){if(j.slice(c+1).each(H.proxy(function(d,g){return H(g).text().toLowerCase().charAt(0)===k?(H(g).focus(),b=!0,!1):void 0},this)),b){return}if(j.slice(0,c+1).each(H.proxy(function(d,g){return H(g).text().toLowerCase().charAt(0)===k?(H(g).focus(),b=!0,!1):void 0},this)),b){return}}},this)).on("init.jstree",H.proxy(function(){var b=this.settings.core.themes;this._data.core.themes.dots=b.dots,this._data.core.themes.stripes=b.stripes,this._data.core.themes.icons=b.icons,this._data.core.themes.ellipsis=b.ellipsis,this.set_theme(b.name||"default",b.url),this.set_theme_variant(b.variant)},this)).on("loading.jstree",H.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",H.proxy(function(c){this._data.core.focused=null,H(c.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",H.proxy(function(d){var g=this.get_node(d.currentTarget);g&&g.id&&(this._data.core.focused=g.id),this.element.find(".jstree-hovered").not(d.currentTarget).mouseleave(),H(d.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",H.proxy(function(){if(+new Date-e>500&&!this._data.core.focused&&this.settings.core.restore_focus){e=0;var b=this.get_node(this.element.attr("aria-activedescendant"),!0);b&&b.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",H.proxy(function(b){this.hover_node(b.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",H.proxy(function(b){this.dehover_node(b.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),H(z).off(".jstree-"+this._id)},trigger:function(d,c){c||(c={}),c.instance=this,this.element.triggerHandler(d.replace(".jstree","")+".jstree",c)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(a){var d=this.settings.core.strings;return H.isFunction(d)?d.call(this,a):d&&d[a]?d[a]:a},_firstChild:function(b){b=b?b.firstChild:null;while(null!==b&&1!==b.nodeType){b=b.nextSibling}return b},_nextSibling:function(b){b=b?b.nextSibling:null;while(null!==b&&1!==b.nodeType){b=b.nextSibling}return b},_previousSibling:function(b){b=b?b.previousSibling:null;while(null!==b&&1!==b.nodeType){b=b.previousSibling}return b},get_node:function(a,h){a&&a.id&&(a=a.id),a instanceof jQuery&&a.length&&a[0].id&&(a=a[0].id);var g;try{if(this._model.data[a]){a=this._model.data[a]}else{if("string"==typeof a&&this._model.data[a.replace(/^#/,"")]){a=this._model.data[a.replace(/^#/,"")]}else{if("string"==typeof a&&(g=H("#"+a.replace(H.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[g.closest(".jstree-node").attr("id")]){a=this._model.data[g.closest(".jstree-node").attr("id")]}else{if((g=this.element.find(a)).length&&this._model.data[g.closest(".jstree-node").attr("id")]){a=this._model.data[g.closest(".jstree-node").attr("id")]}else{if(!(g=this.element.find(a)).length||!g.hasClass("jstree")){return !1}a=this._model.data[H.jstree.root]}}}}return h&&(a=a.id===H.jstree.root?this.element:H("#"+a.id.replace(H.jstree.idregex,"\\$&"),this.element)),a}catch(f){return !1}},get_path:function(a,m,l){if(a=a.parents?a:this.get_node(a),!a||a.id===H.jstree.root||!a.parents){return !1}var k,j,h=[];for(h.push(l?a.id:a.text),k=0,j=a.parents.length;j>k;k++){h.push(l?a.parents[k]:this.get_text(a.parents[k]))}return h=h.reverse().slice(1),m?h.join(m):h},get_next_dom:function(a,f){var e;if(a=this.get_node(a,!0),a[0]===this.element[0]){e=this._firstChild(this.get_container_ul()[0]);while(e&&0===e.offsetHeight){e=this._nextSibling(e)}return e?H(e):!1}if(!a||!a.length){return !1}if(f){e=a[0];do{e=this._nextSibling(e)}while(e&&0===e.offsetHeight);return e?H(e):!1}if(a.hasClass("jstree-open")){e=this._firstChild(a.children(".jstree-children")[0]);while(e&&0===e.offsetHeight){e=this._nextSibling(e)}if(null!==e){return H(e)}}e=a[0];do{e=this._nextSibling(e)}while(e&&0===e.offsetHeight);return null!==e?H(e):a.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(a,f){var e;if(a=this.get_node(a,!0),a[0]===this.element[0]){e=this.get_container_ul()[0].lastChild;while(e&&0===e.offsetHeight){e=this._previousSibling(e)}return e?H(e):!1}if(!a||!a.length){return !1}if(f){e=a[0];do{e=this._previousSibling(e)}while(e&&0===e.offsetHeight);return e?H(e):!1}e=a[0];do{e=this._previousSibling(e)}while(e&&0===e.offsetHeight);if(null!==e){a=H(e);while(a.hasClass("jstree-open")){a=a.children(".jstree-children").first().children(".jstree-node:visible:last")}return a}return e=a[0].parentNode.parentNode,e&&e.className&&-1!==e.className.indexOf("jstree-node")?H(e):!1},get_parent:function(a){return a=this.get_node(a),a&&a.id!==H.jstree.root?a.parent:!1},get_children_dom:function(b){return b=this.get_node(b,!0),b[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):b&&b.length?b.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(b){return b=this.get_node(b),b&&(b.state.loaded===!1||b.children.length>0)},is_loaded:function(b){return b=this.get_node(b),b&&b.state.loaded},is_loading:function(b){return b=this.get_node(b),b&&b.state&&b.state.loading},is_open:function(b){return b=this.get_node(b),b&&b.state.opened},is_closed:function(b){return b=this.get_node(b),b&&this.is_parent(b)&&!b.state.opened},is_leaf:function(b){return !this.is_parent(b)},load_node:function(a,o){var n,m,l,k,j;if(H.isArray(a)){return this._load_nodes(a.slice(),o),!0}if(a=this.get_node(a),!a){return o&&o.call(this,a,!1),!1}if(a.state.loaded){for(a.state.loaded=!1,l=0,k=a.parents.length;k>l;l++){this._model.data[a.parents[l]].children_d=H.vakata.array_filter(this._model.data[a.parents[l]].children_d,function(b){return -1===H.inArray(b,a.children_d)})}for(n=0,m=a.children_d.length;m>n;n++){this._model.data[a.children_d[n]].state.selected&&(j=!0),delete this._model.data[a.children_d[n]]}j&&(this._data.core.selected=H.vakata.array_filter(this._data.core.selected,function(b){return -1===H.inArray(b,a.children_d)})),a.children=[],a.children_d=[],j&&this.trigger("changed",{action:"load_node",node:a,selected:this._data.core.selected})}return a.state.failed=!1,a.state.loading=!0,this.get_node(a,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(a,H.proxy(function(b){a=this._model.data[a.id],a.state.loading=!1,a.state.loaded=b,a.state.failed=!a.state.loaded;var K=this.get_node(a,!0),J=0,I=0,p=this._model.data,c=!1;for(J=0,I=a.children.length;I>J;J++){if(p[a.children[J]]&&!p[a.children[J]].state.hidden){c=!0;break}}a.state.loaded&&K&&K.length&&(K.removeClass("jstree-closed jstree-open jstree-leaf"),c?"#"!==a.id&&K.addClass(a.state.opened?"jstree-open":"jstree-closed"):K.addClass("jstree-leaf")),K.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:a,status:b}),o&&o.call(this,a,b)},this)),!0},_load_nodes:function(L,K,J,I){var p=!0,o=function(){this._load_nodes(L,K,!0)},n=this._model.data,m,l,k=[];for(m=0,l=L.length;l>m;m++){n[L[m]]&&(!n[L[m]].state.loaded&&!n[L[m]].state.failed||!J&&I)&&(this.is_loading(L[m])||this.load_node(L[m],o),p=!1)}if(p){for(m=0,l=L.length;l>m;m++){n[L[m]]&&n[L[m]].state.loaded&&k.push(L[m])}K&&!K.done&&(K.call(this,k),K.done=!0)}},load_all:function(a,o){if(a||(a=H.jstree.root),a=this.get_node(a),!a){return !1}var n=[],m=this._model.data,l=m[a.id].children_d,k,j;for(a.state&&!a.state.loaded&&n.push(a.id),k=0,j=l.length;j>k;k++){m[l[k]]&&m[l[k]].state&&!m[l[k]].state.loaded&&n.push(l[k])}n.length?this._load_nodes(n,function(){this.load_all(a,o)}):(o&&o.call(this,a),this.trigger("load_all",{node:a}))},_load_node:function(a,m){var l=this.settings.core.data,k,j=function h(){return 3!==this.nodeType&&8!==this.nodeType};return l?H.isFunction(l)?l.call(this,a,H.proxy(function(b){b===!1?m.call(this,!1):this["string"==typeof b?"_append_html_data":"_append_json_data"](a,"string"==typeof b?H(H.parseHTML(b)).filter(j):b,function(c){m.call(this,c)})},this)):"object"==typeof l?l.url?(l=H.extend(!0,{},l),H.isFunction(l.url)&&(l.url=l.url.call(this,a)),H.isFunction(l.data)&&(l.data=l.data.call(this,a)),H.ajax(l).done(H.proxy(function(n,f,c){var b=c.getResponseHeader("Content-Type");return b&&-1!==b.indexOf("json")||"object"==typeof n?this._append_json_data(a,n,function(d){m.call(this,d)}):b&&-1!==b.indexOf("html")||"string"==typeof n?this._append_html_data(a,H(H.parseHTML(n)).filter(j),function(d){m.call(this,d)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:a.id,xhr:c})},this.settings.core.error.call(this,this._data.core.last_error),m.call(this,!1))},this)).fail(H.proxy(function(b){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:a.id,xhr:b})},m.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(k=H.isArray(l)?H.extend(!0,[],l):H.isPlainObject(l)?H.extend(!0,{},l):l,a.id===H.jstree.root?this._append_json_data(a,k,function(b){m.call(this,b)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:a.id})},this.settings.core.error.call(this,this._data.core.last_error),m.call(this,!1))):"string"==typeof l?a.id===H.jstree.root?this._append_html_data(a,H(H.parseHTML(l)).filter(j),function(b){m.call(this,b)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:a.id})},this.settings.core.error.call(this,this._data.core.last_error),m.call(this,!1)):m.call(this,!1):a.id===H.jstree.root?this._append_html_data(a,this._data.core.original_container_html.clone(!0),function(b){m.call(this,b)}):m.call(this,!1)},_node_changed:function(a){a=this.get_node(a),a&&-1===H.inArray(a.id,this._model.changed)&&this._model.changed.push(a.id)},_append_html_data:function(R,Q,P){R=this.get_node(R),R.children=[],R.children_d=[];var O=Q.is("ul")?Q.children():Q,N=R.id,M=[],L=[],K=this._model.data,J=K[N],I=this._data.core.selected.length,p,o,a;for(O.each(H.proxy(function(d,e){p=this._parse_model_from_html(H(e),N,J.parents.concat()),p&&(M.push(p),L.push(p),K[p].children_d.length&&(L=L.concat(K[p].children_d)))},this)),J.children=M,J.children_d=L,o=0,a=J.parents.length;a>o;o++){K[J.parents[o]].children_d=K[J.parents[o]].children_d.concat(L)}this.trigger("model",{nodes:L,parent:N}),N!==H.jstree.root?(this._node_changed(N),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==I&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),P.call(this,!0)},_append_json_data:function(J,I,p,o){if(null!==this.element){J=this.get_node(J),J.children=[],J.children_d=[],I.d&&(I=I.d,"string"==typeof I&&(I=JSON.parse(I))),H.isArray(I)||(I=[I]);var n=null,m={df:this._model.default_state,dat:I,par:J.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},l=function(ac,ab){ac.data&&(ac=ac.data);var aa=ac.dat,Z=ac.par,Y=[],X=[],W=[],V=ac.df,U=ac.t_id,T=ac.t_cnt,S=ac.m,R=S[Z],Q=ac.sel,P,O,N,M,L=function(ai,ah,ag){ag=ag?ag.concat():[],ah&&ag.unshift(ah);var af=ai.id.toString(),ae,ad,h,g,b={id:af,text:ai.text||"",icon:ai.icon!==ab?ai.icon:!0,parent:ah,parents:ag,children:ai.children||[],children_d:ai.children_d||[],data:ai.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(ae in V){V.hasOwnProperty(ae)&&(b.state[ae]=V[ae])}if(ai&&ai.data&&ai.data.jstree&&ai.data.jstree.icon&&(b.icon=ai.data.jstree.icon),(b.icon===ab||null===b.icon||""===b.icon)&&(b.icon=!0),ai&&ai.data&&(b.data=ai.data,ai.data.jstree)){for(ae in ai.data.jstree){ai.data.jstree.hasOwnProperty(ae)&&(b.state[ae]=ai.data.jstree[ae])}}if(ai&&"object"==typeof ai.state){for(ae in ai.state){ai.state.hasOwnProperty(ae)&&(b.state[ae]=ai.state[ae])}}if(ai&&"object"==typeof ai.li_attr){for(ae in ai.li_attr){ai.li_attr.hasOwnProperty(ae)&&(b.li_attr[ae]=ai.li_attr[ae])}}if(b.li_attr.id||(b.li_attr.id=af),ai&&"object"==typeof ai.a_attr){for(ae in ai.a_attr){ai.a_attr.hasOwnProperty(ae)&&(b.a_attr[ae]=ai.a_attr[ae])}}for(ai&&ai.children&&ai.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),S[b.id]=b,ae=0,ad=b.children.length;ad>ae;ae++){h=L(S[b.children[ae]],b.id,ag),g=S[h],b.children_d.push(h),g.children_d.length&&(b.children_d=b.children_d.concat(g.children_d))}return delete ai.data,delete ai.children,S[b.id].original=ai,b.state.selected&&W.push(b.id),b.id},K=function(ah,ag,af){af=af?af.concat():[],ag&&af.unshift(ag);var ae=!1,ad,j,h,g,b;do{ae="j"+U+"_"+ ++T}while(S[ae]);b={id:!1,text:"string"==typeof ah?ah:"",icon:"object"==typeof ah&&ah.icon!==ab?ah.icon:!0,parent:ag,parents:af,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(ad in V){V.hasOwnProperty(ad)&&(b.state[ad]=V[ad])}if(ah&&ah.id&&(b.id=ah.id.toString()),ah&&ah.text&&(b.text=ah.text),ah&&ah.data&&ah.data.jstree&&ah.data.jstree.icon&&(b.icon=ah.data.jstree.icon),(b.icon===ab||null===b.icon||""===b.icon)&&(b.icon=!0),ah&&ah.data&&(b.data=ah.data,ah.data.jstree)){for(ad in ah.data.jstree){ah.data.jstree.hasOwnProperty(ad)&&(b.state[ad]=ah.data.jstree[ad])}}if(ah&&"object"==typeof ah.state){for(ad in ah.state){ah.state.hasOwnProperty(ad)&&(b.state[ad]=ah.state[ad])}}if(ah&&"object"==typeof ah.li_attr){for(ad in ah.li_attr){ah.li_attr.hasOwnProperty(ad)&&(b.li_attr[ad]=ah.li_attr[ad])}}if(b.li_attr.id&&!b.id&&(b.id=b.li_attr.id.toString()),b.id||(b.id=ae),b.li_attr.id||(b.li_attr.id=b.id),ah&&"object"==typeof ah.a_attr){for(ad in ah.a_attr){ah.a_attr.hasOwnProperty(ad)&&(b.a_attr[ad]=ah.a_attr[ad])}}if(ah&&ah.children&&ah.children.length){for(ad=0,j=ah.children.length;j>ad;ad++){h=K(ah.children[ad],b.id,af),g=S[h],b.children.push(h),g.children_d.length&&(b.children_d=b.children_d.concat(g.children_d))}b.children_d=b.children_d.concat(b.children)}return ah&&ah.children&&ah.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),delete ah.data,delete ah.children,b.original=ah,S[b.id]=b,b.state.selected&&W.push(b.id),b.id};if(aa.length&&aa[0].id!==ab&&aa[0].parent!==ab){for(O=0,N=aa.length;N>O;O++){aa[O].children||(aa[O].children=[]),aa[O].state||(aa[O].state={}),S[aa[O].id.toString()]=aa[O]}for(O=0,N=aa.length;N>O;O++){S[aa[O].parent.toString()]?(S[aa[O].parent.toString()].children.push(aa[O].id.toString()),R.children_d.push(aa[O].id.toString())):(this._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:aa[O].id.toString(),parent:aa[O].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error))}for(O=0,N=R.children.length;N>O;O++){P=L(S[R.children[O]],Z,R.parents.concat()),X.push(P),S[P].children_d.length&&(X=X.concat(S[P].children_d))}for(O=0,N=R.parents.length;N>O;O++){S[R.parents[O]].children_d=S[R.parents[O]].children_d.concat(X)}M={cnt:T,mod:S,sel:Q,par:Z,dpc:X,add:W}}else{for(O=0,N=aa.length;N>O;O++){P=K(aa[O],Z,R.parents.concat()),P&&(Y.push(P),X.push(P),S[P].children_d.length&&(X=X.concat(S[P].children_d)))}for(R.children=Y,R.children_d=X,O=0,N=R.parents.length;N>O;O++){S[R.parents[O]].children_d=S[R.parents[O]].children_d.concat(X)}M={cnt:T,mod:S,sel:Q,par:Z,dpc:X,add:W}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?M:void postMessage(M)},k=function(d,Q){if(null!==this.element){this._cnt=d.cnt;var P,O=this._model.data;for(P in O){O.hasOwnProperty(P)&&O[P].state&&O[P].state.loading&&d.mod[P]&&(d.mod[P].state.loading=!0)}if(this._model.data=d.mod,Q){var N,M=d.add,L=d.sel,K=this._data.core.selected.slice();if(O=this._model.data,L.length!==K.length||H.vakata.array_unique(L.concat(K)).length!==L.length){for(P=0,N=L.length;N>P;P++){-1===H.inArray(L[P],M)&&-1===H.inArray(L[P],K)&&(O[L[P]].state.selected=!1)}for(P=0,N=K.length;N>P;P++){-1===H.inArray(K[P],L)&&(O[K[P]].state.selected=!0)}}}d.add.length&&(this._data.core.selected=this._data.core.selected.concat(d.add)),this.trigger("model",{nodes:d.dpc,parent:d.par}),d.par!==H.jstree.root?(this._node_changed(d.par),this.redraw()):this.redraw(!0),d.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),p.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+l.toString()],{type:"text/javascript"}))),!this._data.core.working||o?(this._data.core.working=!0,n=new window.Worker(this._wrk),n.onmessage=H.proxy(function(d){k.call(this,d.data,!0);try{n.terminate(),n=null}catch(c){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),m.par?n.postMessage(m):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([J,I,p,!0])}catch(a){k.call(this,l(m),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}}else{k.call(this,l(m),!1)}}},_parse_model_from_html:function(L,K,J){J=J?[].concat(J):[],K&&J.unshift(K);var I,p,o=this._model.data,n={id:!1,text:!1,icon:!0,parent:K,parents:J,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},m,b,a;for(m in this._model.default_state){this._model.default_state.hasOwnProperty(m)&&(n.state[m]=this._model.default_state[m])}if(b=H.vakata.attributes(L,!0),H.each(b,function(d,e){return e=H.trim(e),e.length?(n.li_attr[d]=e,void ("id"===d&&(n.id=e.toString()))):!0}),b=L.children("a").first(),b.length&&(b=H.vakata.attributes(b,!0),H.each(b,function(d,e){e=H.trim(e),e.length&&(n.a_attr[d]=e)})),b=L.children("a").first().length?L.children("a").first().clone():L.clone(),b.children("ins, i, ul").remove(),b=b.html(),b=H("<div />").html(b),n.text=this.settings.core.force_text?b.text():b.html(),b=L.data(),n.data=b?H.extend(!0,{},b):null,n.state.opened=L.hasClass("jstree-open"),n.state.selected=L.children("a").hasClass("jstree-clicked"),n.state.disabled=L.children("a").hasClass("jstree-disabled"),n.data&&n.data.jstree){for(m in n.data.jstree){n.data.jstree.hasOwnProperty(m)&&(n.state[m]=n.data.jstree[m])}}b=L.children("a").children(".jstree-themeicon"),b.length&&(n.icon=b.hasClass("jstree-themeicon-hidden")?!1:b.attr("rel")),n.state.icon!==G&&(n.icon=n.state.icon),(n.icon===G||null===n.icon||""===n.icon)&&(n.icon=!0),b=L.children("ul").children("li");do{a="j"+this._id+"_"+ ++this._cnt}while(o[a]);return n.id=n.li_attr.id?n.li_attr.id.toString():a,b.length?(b.each(H.proxy(function(d,e){I=this._parse_model_from_html(H(e),n.id,J),p=this._model.data[I],n.children.push(I),p.children_d.length&&(n.children_d=n.children_d.concat(p.children_d))},this)),n.children_d=n.children_d.concat(n.children)):L.hasClass("jstree-closed")&&(n.state.loaded=!1),n.li_attr["class"]&&(n.li_attr["class"]=n.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),n.a_attr["class"]&&(n.a_attr["class"]=n.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),o[n.id]=n,n.state.selected&&this._data.core.selected.push(n.id),n.id},_parse_model_from_flat_json:function(N,M,L){L=L?L.concat():[],M&&L.unshift(M);var K=N.id.toString(),J=this._model.data,I=this._model.default_state,p,o,n,m,b={id:K,text:N.text||"",icon:N.icon!==G?N.icon:!0,parent:M,parents:L,children:N.children||[],children_d:N.children_d||[],data:N.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(p in I){I.hasOwnProperty(p)&&(b.state[p]=I[p])}if(N&&N.data&&N.data.jstree&&N.data.jstree.icon&&(b.icon=N.data.jstree.icon),(b.icon===G||null===b.icon||""===b.icon)&&(b.icon=!0),N&&N.data&&(b.data=N.data,N.data.jstree)){for(p in N.data.jstree){N.data.jstree.hasOwnProperty(p)&&(b.state[p]=N.data.jstree[p])}}if(N&&"object"==typeof N.state){for(p in N.state){N.state.hasOwnProperty(p)&&(b.state[p]=N.state[p])}}if(N&&"object"==typeof N.li_attr){for(p in N.li_attr){N.li_attr.hasOwnProperty(p)&&(b.li_attr[p]=N.li_attr[p])}}if(b.li_attr.id||(b.li_attr.id=K),N&&"object"==typeof N.a_attr){for(p in N.a_attr){N.a_attr.hasOwnProperty(p)&&(b.a_attr[p]=N.a_attr[p])}}for(N&&N.children&&N.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),J[b.id]=b,p=0,o=b.children.length;o>p;p++){n=this._parse_model_from_flat_json(J[b.children[p]],b.id,L),m=J[n],b.children_d.push(n),m.children_d.length&&(b.children_d=b.children_d.concat(m.children_d))}return delete N.data,delete N.children,J[b.id].original=N,b.state.selected&&this._data.core.selected.push(b.id),b.id},_parse_model_from_json:function(N,M,L){L=L?L.concat():[],M&&L.unshift(M);var K=!1,J,I,p,o,n=this._model.data,m=this._model.default_state,b;do{K="j"+this._id+"_"+ ++this._cnt}while(n[K]);b={id:!1,text:"string"==typeof N?N:"",icon:"object"==typeof N&&N.icon!==G?N.icon:!0,parent:M,parents:L,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(J in m){m.hasOwnProperty(J)&&(b.state[J]=m[J])}if(N&&N.id&&(b.id=N.id.toString()),N&&N.text&&(b.text=N.text),N&&N.data&&N.data.jstree&&N.data.jstree.icon&&(b.icon=N.data.jstree.icon),(b.icon===G||null===b.icon||""===b.icon)&&(b.icon=!0),N&&N.data&&(b.data=N.data,N.data.jstree)){for(J in N.data.jstree){N.data.jstree.hasOwnProperty(J)&&(b.state[J]=N.data.jstree[J])}}if(N&&"object"==typeof N.state){for(J in N.state){N.state.hasOwnProperty(J)&&(b.state[J]=N.state[J])}}if(N&&"object"==typeof N.li_attr){for(J in N.li_attr){N.li_attr.hasOwnProperty(J)&&(b.li_attr[J]=N.li_attr[J])}}if(b.li_attr.id&&!b.id&&(b.id=b.li_attr.id.toString()),b.id||(b.id=K),b.li_attr.id||(b.li_attr.id=b.id),N&&"object"==typeof N.a_attr){for(J in N.a_attr){N.a_attr.hasOwnProperty(J)&&(b.a_attr[J]=N.a_attr[J])}}if(N&&N.children&&N.children.length){for(J=0,I=N.children.length;I>J;J++){p=this._parse_model_from_json(N.children[J],b.id,L),o=n[p],b.children.push(p),o.children_d.length&&(b.children_d=b.children_d.concat(o.children_d))}b.children_d=b.children_d.concat(b.children)}return N&&N.children&&N.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),delete N.data,delete N.children,b.original=N,n[b.id]=b,b.state.selected&&this._data.core.selected.push(b.id),b.id},_redraw:function(){var a=this._model.force_full_redraw?this._model.data[H.jstree.root].children.concat([]):this._model.changed.concat([]),m=z.createElement("UL"),l,k,j,h=this._data.core.focused;for(k=0,j=a.length;j>k;k++){l=this.redraw_node(a[k],!0,this._model.force_full_redraw),l&&this._model.force_full_redraw&&m.appendChild(l)}this._model.force_full_redraw&&(m.className=this.get_container_ul()[0].className,m.setAttribute("role","group"),this.element.empty().append(m)),null!==h&&this.settings.core.restore_focus&&(l=this.get_node(h,!0),l&&l.length&&l.children(".jstree-anchor")[0]!==z.activeElement?l.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:a})},redraw:function(b){b&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(a){var m=this.get_node(a),l=!1,k=!1,j=!1,h=z;if(!m){return !1}if(m.id===H.jstree.root){return this.redraw(!0)}if(a=this.get_node(a,!0),!a||!a.length){return !1}if(a.children(".jstree-children").remove(),a=a[0],m.children.length&&m.state.loaded){for(j=h.createElement("UL"),j.setAttribute("role","group"),j.className="jstree-children",l=0,k=m.children.length;k>l;l++){j.appendChild(this.redraw_node(m.children[l],!0,!0))}a.appendChild(j)}},redraw_node:function(ab,aa,Z,Y){var X=this.get_node(ab),W=!1,V=!1,U=!1,T=!1,S=!1,R=!1,Q="",P=z,O=this._model.data,N=!1,M=!1,L=null,K=0,J=0,I=!1,a=!1;if(!X){return !1}if(X.id===H.jstree.root){return this.redraw(!0)}if(aa=aa||0===X.children.length,ab=z.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(X.id[0])?"\\3"+X.id[0]+" "+X.id.substr(1).replace(H.jstree.idregex,"\\$&"):X.id.replace(H.jstree.idregex,"\\$&"))):z.getElementById(X.id)){ab=H(ab),Z||(W=ab.parent().parent()[0],W===this.element[0]&&(W=null),V=ab.index()),aa||!X.children.length||ab.children(".jstree-children").length||(aa=!0),aa||(U=ab.children(".jstree-children")[0]),N=ab.children(".jstree-anchor")[0]===z.activeElement,ab.remove()}else{if(aa=!0,!Z){if(W=X.parent!==H.jstree.root?H("#"+X.parent.replace(H.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===W||W&&O[X.parent].state.opened)){return !1}V=H.inArray(X.id,null===W?O[H.jstree.root].children:O[X.parent].children)}}ab=this._data.core.node.cloneNode(!0),Q="jstree-node ";for(T in X.li_attr){if(X.li_attr.hasOwnProperty(T)){if("id"===T){continue}"class"!==T?ab.setAttribute(T,X.li_attr[T]):Q+=X.li_attr[T]}}for(X.a_attr.id||(X.a_attr.id=X.id+"_anchor"),ab.setAttribute("aria-selected",!!X.state.selected),ab.setAttribute("aria-level",X.parents.length),ab.setAttribute("aria-labelledby",X.a_attr.id),X.state.disabled&&ab.setAttribute("aria-disabled",!0),T=0,S=X.children.length;S>T;T++){if(!O[X.children[T]].state.hidden){I=!0;break}}if(null!==X.parent&&O[X.parent]&&!X.state.hidden&&(T=H.inArray(X.id,O[X.parent].children),a=X.id,-1!==T)){for(T++,S=O[X.parent].children.length;S>T;T++){if(O[O[X.parent].children[T]].state.hidden||(a=O[X.parent].children[T]),a!==X.id){break}}}X.state.hidden&&(Q+=" jstree-hidden"),X.state.loading&&(Q+=" jstree-loading"),X.state.loaded&&!I?Q+=" jstree-leaf":(Q+=X.state.opened&&X.state.loaded?" jstree-open":" jstree-closed",ab.setAttribute("aria-expanded",X.state.opened&&X.state.loaded)),a===X.id&&(Q+=" jstree-last"),ab.id=X.id,ab.className=Q,Q=(X.state.selected?" jstree-clicked":"")+(X.state.disabled?" jstree-disabled":"");for(S in X.a_attr){if(X.a_attr.hasOwnProperty(S)){if("href"===S&&"#"===X.a_attr[S]){continue}"class"!==S?ab.childNodes[1].setAttribute(S,X.a_attr[S]):Q+=" "+X.a_attr[S]}}if(Q.length&&(ab.childNodes[1].className="jstree-anchor "+Q),(X.icon&&X.icon!==!0||X.icon===!1)&&(X.icon===!1?ab.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===X.icon.indexOf("/")&&-1===X.icon.indexOf(".")?ab.childNodes[1].childNodes[0].className+=" "+X.icon+" jstree-themeicon-custom":(ab.childNodes[1].childNodes[0].style.backgroundImage='url("'+X.icon+'")',ab.childNodes[1].childNodes[0].style.backgroundPosition="center center",ab.childNodes[1].childNodes[0].style.backgroundSize="auto",ab.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?ab.childNodes[1].appendChild(P.createTextNode(X.text)):ab.childNodes[1].innerHTML+=X.text,aa&&X.children.length&&(X.state.opened||Y)&&X.state.loaded){for(R=P.createElement("UL"),R.setAttribute("role","group"),R.className="jstree-children",T=0,S=X.children.length;S>T;T++){R.appendChild(this.redraw_node(X.children[T],aa,!0))}ab.appendChild(R)}if(U&&ab.appendChild(U),!Z){for(W||(W=this.element[0]),T=0,S=W.childNodes.length;S>T;T++){if(W.childNodes[T]&&W.childNodes[T].className&&-1!==W.childNodes[T].className.indexOf("jstree-children")){L=W.childNodes[T];break}}L||(L=P.createElement("UL"),L.setAttribute("role","group"),L.className="jstree-children",W.appendChild(L)),W=L,V<W.childNodes.length?W.insertBefore(ab,W.childNodes[V]):W.appendChild(ab),N&&(K=this.element[0].scrollTop,J=this.element[0].scrollLeft,ab.childNodes[1].focus(),this.element[0].scrollTop=K,this.element[0].scrollLeft=J)}return X.state.opened&&!X.state.loaded&&(X.state.opened=!1,setTimeout(H.proxy(function(){this.open_node(X.id,!1,0)},this),0)),ab},open_node:function(n,m,l){var k,j,b,a;if(H.isArray(n)){for(n=n.slice(),k=0,j=n.length;j>k;k++){this.open_node(n[k],m,l)}return !0}return n=this.get_node(n),n&&n.id!==H.jstree.root?(l=l===G?this.settings.core.animation:l,this.is_closed(n)?this.is_loaded(n)?(b=this.get_node(n,!0),a=this,b.length&&(l&&b.children(".jstree-children").length&&b.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(b.children(".jstree-children")[0])&&this.draw_children(n),l?(this.trigger("before_open",{node:n}),b.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(l,function(){this.style.display="",a.element&&a.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),b[0].className=b[0].className.replace("jstree-closed","jstree-open"),b[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,m&&m.call(this,n,!0),b.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),l&&b.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(H.proxy(function(){this.open_node(n,m,l)},this),500):void this.load_node(n,function(d,c){return c?this.open_node(d,m,l):m?m.call(this,d,!1):!1}):(m&&m.call(this,n,!1),!1)):!1},_open_to:function(a){if(a=this.get_node(a),!a||a.id===H.jstree.root){return !1}var h,g,f=a.parents;for(h=0,g=f.length;g>h;h+=1){h!==H.jstree.root&&this.open_node(f[h],!1,0)}return H("#"+a.id.replace(H.jstree.idregex,"\\$&"),this.element)},close_node:function(m,l){var k,j,b,a;if(H.isArray(m)){for(m=m.slice(),k=0,j=m.length;j>k;k++){this.close_node(m[k],l)}return !0}return m=this.get_node(m),m&&m.id!==H.jstree.root?this.is_closed(m)?!1:(l=l===G?this.settings.core.animation:l,b=this,a=this.get_node(m,!0),m.state.opened=!1,this.trigger("close_node",{node:m}),void (a.length?l?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(l,function(){this.style.display="",a.children(".jstree-children").remove(),b.element&&b.trigger("after_close",{node:m})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:m})):this.trigger("after_close",{node:m}))):!1},toggle_node:function(a){var f,e;if(H.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.toggle_node(a[f])}return !0}return this.is_closed(a)?this.open_node(a):this.is_open(a)?this.close_node(a):void 0},open_all:function(a,o,n){if(a||(a=H.jstree.root),a=this.get_node(a),!a){return !1}var m=a.id===H.jstree.root?this.get_container_ul():this.get_node(a,!0),l,k,j;if(!m.length){for(l=0,k=a.children_d.length;k>l;l++){this.is_closed(this._model.data[a.children_d[l]])&&(this._model.data[a.children_d[l]].state.opened=!0)}return this.trigger("open_all",{node:a})}n=n||m,j=this,m=this.is_closed(a)?m.find(".jstree-closed").addBack():m.find(".jstree-closed"),m.each(function(){j.open_node(this,function(d,c){c&&this.is_parent(d)&&this.open_all(d,o,n)},o||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(a,m){if(a||(a=H.jstree.root),a=this.get_node(a),!a){return !1}var l=a.id===H.jstree.root?this.get_container_ul():this.get_node(a,!0),k=this,j,h;for(l.length&&(l=this.is_open(a)?l.find(".jstree-open").addBack():l.find(".jstree-open"),H(l.get().reverse()).each(function(){k.close_node(this,m||0)})),j=0,h=a.children_d.length;h>j;j++){this._model.data[a.children_d[j]].state.opened=!1}this.trigger("close_all",{node:a})},is_disabled:function(b){return b=this.get_node(b),b&&b.state&&b.state.disabled},enable_node:function(a){var f,e;if(H.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.enable_node(a[f])}return !0}return a=this.get_node(a),a&&a.id!==H.jstree.root?(a.state.disabled=!1,this.get_node(a,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:a})):!1},disable_node:function(a){var f,e;if(H.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.disable_node(a[f])}return !0}return a=this.get_node(a),a&&a.id!==H.jstree.root?(a.state.disabled=!0,this.get_node(a,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:a})):!1},is_hidden:function(b){return b=this.get_node(b),b.state.hidden===!0},hide_node:function(a,h){var g,f;if(H.isArray(a)){for(a=a.slice(),g=0,f=a.length;f>g;g++){this.hide_node(a[g],!0)}return h||this.redraw(),!0}return a=this.get_node(a),a&&a.id!==H.jstree.root?void (a.state.hidden||(a.state.hidden=!0,this._node_changed(a.parent),h||this.redraw(),this.trigger("hide_node",{node:a}))):!1},show_node:function(a,h){var g,f;if(H.isArray(a)){for(a=a.slice(),g=0,f=a.length;f>g;g++){this.show_node(a[g],!0)}return h||this.redraw(),!0}return a=this.get_node(a),a&&a.id!==H.jstree.root?void (a.state.hidden&&(a.state.hidden=!1,this._node_changed(a.parent),h||this.redraw(),this.trigger("show_node",{node:a}))):!1},hide_all:function(a){var h,g=this._model.data,f=[];for(h in g){g.hasOwnProperty(h)&&h!==H.jstree.root&&!g[h].state.hidden&&(g[h].state.hidden=!0,f.push(h))}return this._model.force_full_redraw=!0,a||this.redraw(),this.trigger("hide_all",{nodes:f}),f},show_all:function(a){var h,g=this._model.data,f=[];for(h in g){g.hasOwnProperty(h)&&h!==H.jstree.root&&g[h].state.hidden&&(g[h].state.hidden=!1,f.push(h))}return this._model.force_full_redraw=!0,a||this.redraw(),this.trigger("show_all",{nodes:f}),f},activate_node:function(b,p){if(this.is_disabled(b)){return !1}if(p&&"object"==typeof p||(p={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==G?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(p.metaKey||p.ctrlKey||p.shiftKey)&&(!p.shiftKey||this._data.core.last_clicked&&this.get_parent(b)&&this.get_parent(b)===this._data.core.last_clicked.parent)){if(p.shiftKey){var o=this.get_node(b).id,n=this._data.core.last_clicked.id,m=this.get_node(this._data.core.last_clicked.parent).children,l=!1,k,j;for(k=0,j=m.length;j>k;k+=1){m[k]===o&&(l=!l),m[k]===n&&(l=!l),this.is_disabled(m[k])||!l&&m[k]!==o&&m[k]!==n?this.deselect_node(m[k],!0,p):this.is_hidden(m[k])||this.select_node(m[k],!0,!1,p)}this.trigger("changed",{action:"select_node",node:this.get_node(b),selected:this._data.core.selected,event:p})}else{this.is_selected(b)?this.deselect_node(b,!1,p):this.select_node(b,!1,!1,p)}}else{!this.settings.core.multiple&&(p.metaKey||p.ctrlKey||p.shiftKey)&&this.is_selected(b)?this.deselect_node(b,!1,p):(this.deselect_all(!0),this.select_node(b,!1,!1,p),this._data.core.last_clicked=this.get_node(b))}this.trigger("activate_node",{node:this.get_node(b),event:p})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length){return !1}var d=this.element.find(".jstree-hovered"),f=this.element;d&&d.length&&this.dehover_node(d),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){f.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(b){return b=this.get_node(b,!0),b&&b.length&&b.children(".jstree-hovered").length?(b.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(b)})):!1},select_node:function(a,p,o,n){var m,l,k,j;if(H.isArray(a)){for(a=a.slice(),l=0,k=a.length;k>l;l++){this.select_node(a[l],p,o,n)}return !0}return a=this.get_node(a),a&&a.id!==H.jstree.root?(m=this.get_node(a,!0),void (a.state.selected||(a.state.selected=!0,this._data.core.selected.push(a.id),o||(m=this._open_to(a)),m&&m.length&&m.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:a,selected:this._data.core.selected,event:n}),p||this.trigger("changed",{action:"select_node",node:a,selected:this._data.core.selected,event:n})))):!1},deselect_node:function(a,m,l){var k,j,h;if(H.isArray(a)){for(a=a.slice(),k=0,j=a.length;j>k;k++){this.deselect_node(a[k],m,l)}return !0}return a=this.get_node(a),a&&a.id!==H.jstree.root?(h=this.get_node(a,!0),void (a.state.selected&&(a.state.selected=!1,this._data.core.selected=H.vakata.array_remove_item(this._data.core.selected,a.id),h.length&&h.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:a,selected:this._data.core.selected,event:l}),m||this.trigger("changed",{action:"deselect_node",node:a,selected:this._data.core.selected,event:l})))):!1},select_all:function(a){var h=this._data.core.selected.concat([]),g,f;for(this._data.core.selected=this._model.data[H.jstree.root].children_d.concat(),g=0,f=this._data.core.selected.length;f>g;g++){this._model.data[this._data.core.selected[g]]&&(this._model.data[this._data.core.selected[g]].state.selected=!0)}this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),a||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:h})},deselect_all:function(f){var e=this._data.core.selected.concat([]),h,g;for(h=0,g=this._data.core.selected.length;g>h;h++){this._model.data[this._data.core.selected[h]]&&(this._model.data[this._data.core.selected[h]].state.selected=!1)}this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:e}),f||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:e})},is_selected:function(a){return a=this.get_node(a),a&&a.id!==H.jstree.root?a.state.selected:!1},get_selected:function(a){return a?H.map(this._data.core.selected,H.proxy(function(b){return this.get_node(b)},this)):this._data.core.selected.slice()},get_top_selected:function(a){var o=this.get_selected(!0),n={},m,l,k,j;for(m=0,l=o.length;l>m;m++){n[o[m].id]=o[m]}for(m=0,l=o.length;l>m;m++){for(k=0,j=o[m].children_d.length;j>k;k++){n[o[m].children_d[k]]&&delete n[o[m].children_d[k]]}}o=[];for(m in n){n.hasOwnProperty(m)&&o.push(m)}return a?H.map(o,H.proxy(function(b){return this.get_node(b)},this)):o},get_bottom_selected:function(a){var k=this.get_selected(!0),j=[],h,g;for(h=0,g=k.length;g>h;h++){k[h].children.length||j.push(k[h].id)}return a?H.map(j,H.proxy(function(b){return this.get_node(b)},this)):j},get_state:function(){var a={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},d;for(d in this._model.data){this._model.data.hasOwnProperty(d)&&d!==H.jstree.root&&(this._model.data[d].state.loaded&&this.settings.core.loaded_state&&a.core.loaded.push(d),this._model.data[d].state.opened&&a.core.open.push(d),this._model.data[d].state.selected&&a.core.selected.push(d))}return a},set_state:function(n,m){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===G&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var l,k,j,b,a;if(n.core.loaded){return this.settings.core.loaded_state&&H.isArray(n.core.loaded)&&n.core.loaded.length?this._load_nodes(n.core.loaded,function(c){delete n.core.loaded,this.set_state(n,m)}):(delete n.core.loaded,this.set_state(n,m)),!1}if(n.core.open){return H.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(c){this.open_node(c,!1,0),delete n.core.open,this.set_state(n,m)}):(delete n.core.open,this.set_state(n,m)),!1}if(n.core.scroll){return n.core.scroll&&n.core.scroll.left!==G&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==G&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,m),!1}if(n.core.selected){return b=this,(n.core.initial_selection===G||n.core.initial_selection===this._data.core.selected.concat([]).sort().join(","))&&(this.deselect_all(),H.each(n.core.selected,function(d,c){b.select_node(c,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,m),!1}for(a in n){n.hasOwnProperty(a)&&"core"!==a&&-1===H.inArray(a,this.settings.plugins)&&delete n[a]}if(H.isEmptyObject(n.core)){return delete n.core,this.set_state(n,m),!1}}return H.isEmptyObject(n)?(n=null,m&&m.call(this),this.trigger("set_state"),!1):!0}return !1},refresh:function(a,f){this._data.core.state=f===!0?{}:this.get_state(),f&&H.isFunction(f)&&(this._data.core.state=f.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[H.jstree.root]={id:H.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var e=this.get_container_ul()[0].className;a||(this.element.html("<ul class='"+e+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(H.jstree.root,function(d,g){g&&(this.get_container_ul()[0].className=e,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(H.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(a){if(a=this.get_node(a),!a||a.id===H.jstree.root){return !1}var h=[],g=[],f=this._data.core.selected.concat([]);g.push(a.id),a.state.opened===!0&&h.push(a.id),this.get_node(a,!0).find(".jstree-open").each(function(){g.push(this.id),h.push(this.id)}),this._load_nodes(g,H.proxy(function(b){this.open_node(h,!1,0),this.select_node(f),this.trigger("refresh_node",{node:a,nodes:b})},this),!1,!0)},set_id:function(a,m){if(a=this.get_node(a),!a||a.id===H.jstree.root){return !1}var l,k,j=this._model.data,h=a.id;for(m=m.toString(),j[a.parent].children[H.inArray(a.id,j[a.parent].children)]=m,l=0,k=a.parents.length;k>l;l++){j[a.parents[l]].children_d[H.inArray(a.id,j[a.parents[l]].children_d)]=m}for(l=0,k=a.children.length;k>l;l++){j[a.children[l]].parent=m}for(l=0,k=a.children_d.length;k>l;l++){j[a.children_d[l]].parents[H.inArray(a.id,j[a.children_d[l]].parents)]=m}return l=H.inArray(a.id,this._data.core.selected),-1!==l&&(this._data.core.selected[l]=m),l=this.get_node(a.id,!0),l&&(l.attr("id",m),this.element.attr("aria-activedescendant")===a.id&&this.element.attr("aria-activedescendant",m)),delete j[a.id],a.id=m,a.li_attr.id=m,j[m]=a,this.trigger("set_id",{node:a,"new":a.id,old:h}),!0},get_text:function(a){return a=this.get_node(a),a&&a.id!==H.jstree.root?a.text:!1},set_text:function(a,h){var g,f;if(H.isArray(a)){for(a=a.slice(),g=0,f=a.length;f>g;g++){this.set_text(a[g],h)}return !0}return a=this.get_node(a),a&&a.id!==H.jstree.root?(a.text=h,this.get_node(a,!0).length&&this.redraw_node(a.id),this.trigger("set_text",{obj:a,text:h}),!0):!1},get_json:function(a,m,l){if(a=this.get_node(a||H.jstree.root),!a){return !1}m&&m.flat&&!l&&(l=[]);var k={id:a.id,text:a.text,icon:this.get_icon(a),li_attr:H.extend(!0,{},a.li_attr),a_attr:H.extend(!0,{},a.a_attr),state:{},data:m&&m.no_data?!1:H.extend(!0,H.isArray(a.data)?[]:{},a.data)},j,h;if(m&&m.flat?k.parent=a.parent:k.children=[],m&&m.no_state){delete k.state}else{for(j in a.state){a.state.hasOwnProperty(j)&&(k.state[j]=a.state[j])}}if(m&&m.no_li_attr&&delete k.li_attr,m&&m.no_a_attr&&delete k.a_attr,m&&m.no_id&&(delete k.id,k.li_attr&&k.li_attr.id&&delete k.li_attr.id,k.a_attr&&k.a_attr.id&&delete k.a_attr.id),m&&m.flat&&a.id!==H.jstree.root&&l.push(k),!m||!m.no_children){for(j=0,h=a.children.length;h>j;j++){m&&m.flat?this.get_json(a.children[j],m,l):k.children.push(this.get_json(a.children[j],m))}}return m&&m.flat?l:a.id===H.jstree.root?k.children:k},create_node:function(J,I,p,o,n){if(null===J&&(J=H.jstree.root),J=this.get_node(J),!J){return !1}if(p=p===G?"last":p,!p.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(J)){return this.load_node(J,function(){this.create_node(J,I,p,o,!0)})}I||(I={text:this.get_string("New node")}),I="string"==typeof I?{text:I}:H.extend(!0,{},I),I.text===G&&(I.text=this.get_string("New node"));var m,l,b,a;switch(J.id===H.jstree.root&&("before"===p&&(p="first"),"after"===p&&(p="last")),p){case"before":m=this.get_node(J.parent),p=H.inArray(J.id,m.children),J=m;break;case"after":m=this.get_node(J.parent),p=H.inArray(J.id,m.children)+1,J=m;break;case"inside":case"first":p=0;break;case"last":p=J.children.length;break;default:p||(p=0)}if(p>J.children.length&&(p=J.children.length),I.id||(I.id=!0),!this.check("create_node",I,J,p)){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(I.id===!0&&delete I.id,I=this._parse_model_from_json(I,J.id,J.parents.concat()),!I){return !1}for(m=this.get_node(I),l=[],l.push(I),l=l.concat(m.children_d),this.trigger("model",{nodes:l,parent:J.id}),J.children_d=J.children_d.concat(l),b=0,a=J.parents.length;a>b;b++){this._model.data[J.parents[b]].children_d=this._model.data[J.parents[b]].children_d.concat(l)}for(I=m,m=[],b=0,a=J.children.length;a>b;b++){m[b>=p?b+1:b]=J.children[b]}return m[p]=I.id,J.children=m,this.redraw_node(J,!0),this.trigger("create_node",{node:this.get_node(I),parent:J.id,position:p}),o&&o.call(this,this.get_node(I)),I.id},rename_node:function(a,k){var j,h,g;if(H.isArray(a)){for(a=a.slice(),j=0,h=a.length;h>j;j++){this.rename_node(a[j],k)}return !0}return a=this.get_node(a),a&&a.id!==H.jstree.root?(g=a.text,this.check("rename_node",a,this.get_parent(a),k)?(this.set_text(a,k),this.trigger("rename_node",{node:a,text:k,old:g}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(R){var Q,P,O,N,M,L,K,J,I,p,o,a;if(H.isArray(R)){for(R=R.slice(),Q=0,P=R.length;P>Q;Q++){this.delete_node(R[Q])}return !0}if(R=this.get_node(R),!R||R.id===H.jstree.root){return !1}if(O=this.get_node(R.parent),N=H.inArray(R.id,O.children),p=!1,!this.check("delete_node",R,O,N)){return this.settings.core.error.call(this,this._data.core.last_error),!1}for(-1!==N&&(O.children=H.vakata.array_remove(O.children,N)),M=R.children_d.concat([]),M.push(R.id),L=0,K=R.parents.length;K>L;L++){this._model.data[R.parents[L]].children_d=H.vakata.array_filter(this._model.data[R.parents[L]].children_d,function(c){return -1===H.inArray(c,M)})}for(J=0,I=M.length;I>J;J++){if(this._model.data[M[J]].state.selected){p=!0;break}}for(p&&(this._data.core.selected=H.vakata.array_filter(this._data.core.selected,function(c){return -1===H.inArray(c,M)})),this.trigger("delete_node",{node:R,parent:O.id}),p&&this.trigger("changed",{action:"delete_node",node:R,selected:this._data.core.selected,parent:O.id}),J=0,I=M.length;I>J;J++){delete this._model.data[M[J]]}return -1!==H.inArray(this._data.core.focused,M)&&(this._data.core.focused=null,o=this.element[0].scrollTop,a=this.element[0].scrollLeft,O.id===H.jstree.root?this._model.data[H.jstree.root].children[0]&&this.get_node(this._model.data[H.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(O,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=o,this.element[0].scrollLeft=a),this.redraw_node(O,!0),!0},check:function(a,o,n,m,l){o=o&&o.id?o:this.get_node(o),n=n&&n.id?n:this.get_node(n);var k=a.match(/^move_node|copy_node|create_node$/i)?n:o,j=this.settings.core.check_callback;return"move_node"!==a&&"copy_node"!==a||l&&l.is_multi||o.id!==n.id&&("move_node"!==a||H.inArray(o.id,n.children)!==m)&&-1===H.inArray(n.id,o.children_d)?(k&&k.data&&(k=k.data),k&&k.functions&&(k.functions[a]===!1||k.functions[a]===!0)?(k.functions[a]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+a,data:JSON.stringify({chk:a,pos:m,obj:o&&o.id?o.id:!1,par:n&&n.id?n.id:!1})}),k.functions[a]):j===!1||H.isFunction(j)&&j.call(this,a,o,n,m,l)===!1||j&&j[a]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+a,data:JSON.stringify({chk:a,pos:m,obj:o&&o.id?o.id:!1,par:n&&n.id?n.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:a,pos:m,obj:o&&o.id?o.id:!1,par:n&&n.id?n.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(aa,Z,Y,X,W,V,U){var T,S,R,Q,P,O,N,M,L,K,J,I,b,a;if(Z=this.get_node(Z),Y=Y===G?0:Y,!Z){return !1}if(!Y.toString().match(/^(before|after)$/)&&!W&&!this.is_loaded(Z)){return this.load_node(Z,function(){this.move_node(aa,Z,Y,X,!0,!1,U)})}if(H.isArray(aa)){if(1!==aa.length){for(T=0,S=aa.length;S>T;T++){(L=this.move_node(aa[T],Z,Y,X,W,!1,U))&&(Z=L,Y="after")}return this.redraw(),!0}aa=aa[0]}if(aa=aa&&aa.id?aa:this.get_node(aa),!aa||aa.id===H.jstree.root){return !1}if(R=(aa.parent||H.jstree.root).toString(),P=Y.toString().match(/^(before|after)$/)&&Z.id!==H.jstree.root?this.get_node(Z.parent):Z,O=U?U:this._model.data[aa.id]?this:H.jstree.reference(aa.id),N=!O||!O._id||this._id!==O._id,Q=O&&O._id&&R&&O._model.data[R]&&O._model.data[R].children?H.inArray(aa.id,O._model.data[R].children):-1,O&&O._id&&(aa=O._model.data[aa.id]),N){return(L=this.copy_node(aa,Z,Y,X,W,!1,U))?(O&&O.delete_node(aa),L):!1}switch(Z.id===H.jstree.root&&("before"===Y&&(Y="first"),"after"===Y&&(Y="last")),Y){case"before":Y=H.inArray(Z.id,P.children);break;case"after":Y=H.inArray(Z.id,P.children)+1;break;case"inside":case"first":Y=0;break;case"last":Y=P.children.length;break;default:Y||(Y=0)}if(Y>P.children.length&&(Y=P.children.length),!this.check("move_node",aa,P,Y,{core:!0,origin:U,is_multi:O&&O._id&&O._id!==this._id,is_foreign:!O||!O._id})){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(aa.parent===P.id){for(M=P.children.concat(),L=H.inArray(aa.id,M),-1!==L&&(M=H.vakata.array_remove(M,L),Y>L&&Y--),L=[],K=0,J=M.length;J>K;K++){L[K>=Y?K+1:K]=M[K]}L[Y]=aa.id,P.children=L,this._node_changed(P.id),this.redraw(P.id===H.jstree.root)}else{for(L=aa.children_d.concat(),L.push(aa.id),K=0,J=aa.parents.length;J>K;K++){for(M=[],a=O._model.data[aa.parents[K]].children_d,I=0,b=a.length;b>I;I++){-1===H.inArray(a[I],L)&&M.push(a[I])}O._model.data[aa.parents[K]].children_d=M}for(O._model.data[R].children=H.vakata.array_remove_item(O._model.data[R].children,aa.id),K=0,J=P.parents.length;J>K;K++){this._model.data[P.parents[K]].children_d=this._model.data[P.parents[K]].children_d.concat(L)}for(M=[],K=0,J=P.children.length;J>K;K++){M[K>=Y?K+1:K]=P.children[K]}for(M[Y]=aa.id,P.children=M,P.children_d.push(aa.id),P.children_d=P.children_d.concat(aa.children_d),aa.parent=P.id,L=P.parents.concat(),L.unshift(P.id),a=aa.parents.length,aa.parents=L,L=L.concat(),K=0,J=aa.children_d.length;J>K;K++){this._model.data[aa.children_d[K]].parents=this._model.data[aa.children_d[K]].parents.slice(0,-1*a),Array.prototype.push.apply(this._model.data[aa.children_d[K]].parents,L)}(R===H.jstree.root||P.id===H.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(R),this._node_changed(P.id)),V||this.redraw()}return X&&X.call(this,aa,P,Y),this.trigger("move_node",{node:aa,parent:P.id,position:Y,old_parent:R,old_position:Q,is_multi:O&&O._id&&O._id!==this._id,is_foreign:!O||!O._id,old_instance:O,new_instance:this}),aa.id},copy_node:function(X,W,V,U,T,S,R){var Q,P,O,N,M,L,K,J,I,b,a;if(W=this.get_node(W),V=V===G?0:V,!W){return !1}if(!V.toString().match(/^(before|after)$/)&&!T&&!this.is_loaded(W)){return this.load_node(W,function(){this.copy_node(X,W,V,U,!0,!1,R)})}if(H.isArray(X)){if(1!==X.length){for(Q=0,P=X.length;P>Q;Q++){(N=this.copy_node(X[Q],W,V,U,T,!0,R))&&(W=N,V="after")}return this.redraw(),!0}X=X[0]}if(X=X&&X.id?X:this.get_node(X),!X||X.id===H.jstree.root){return !1}switch(J=(X.parent||H.jstree.root).toString(),I=V.toString().match(/^(before|after)$/)&&W.id!==H.jstree.root?this.get_node(W.parent):W,b=R?R:this._model.data[X.id]?this:H.jstree.reference(X.id),a=!b||!b._id||this._id!==b._id,b&&b._id&&(X=b._model.data[X.id]),W.id===H.jstree.root&&("before"===V&&(V="first"),"after"===V&&(V="last")),V){case"before":V=H.inArray(W.id,I.children);break;case"after":V=H.inArray(W.id,I.children)+1;break;case"inside":case"first":V=0;break;case"last":V=I.children.length;break;default:V||(V=0)}if(V>I.children.length&&(V=I.children.length),!this.check("copy_node",X,I,V,{core:!0,origin:R,is_multi:b&&b._id&&b._id!==this._id,is_foreign:!b||!b._id})){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(K=b?b.get_json(X,{no_id:!0,no_data:!0,no_state:!0}):X,!K){return !1}if(K.id===!0&&delete K.id,K=this._parse_model_from_json(K,I.id,I.parents.concat()),!K){return !1}for(N=this.get_node(K),X&&X.state&&X.state.loaded===!1&&(N.state.loaded=!1),O=[],O.push(K),O=O.concat(N.children_d),this.trigger("model",{nodes:O,parent:I.id}),M=0,L=I.parents.length;L>M;M++){this._model.data[I.parents[M]].children_d=this._model.data[I.parents[M]].children_d.concat(O)}for(O=[],M=0,L=I.children.length;L>M;M++){O[M>=V?M+1:M]=I.children[M]}return O[V]=N.id,I.children=O,I.children_d.push(N.id),I.children_d=I.children_d.concat(N.children_d),I.id===H.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(I.id),S||this.redraw(I.id===H.jstree.root),U&&U.call(this,N,I,V),this.trigger("copy_node",{node:N,original:X,parent:I.id,position:V,old_parent:J,old_position:b&&b._id&&J&&b._model.data[J]&&b._model.data[J].children?H.inArray(X.id,b._model.data[J].children):-1,is_multi:b&&b._id&&b._id!==this._id,is_foreign:!b||!b._id,old_instance:b,new_instance:this}),N.id},cut:function(a){if(a||(a=this._data.core.selected.concat()),H.isArray(a)||(a=[a]),!a.length){return !1}var j=[],f,e,d;for(e=0,d=a.length;d>e;e++){f=this.get_node(a[e]),f&&f.id&&f.id!==H.jstree.root&&j.push(f)}return j.length?(E=j,C=this,D="move_node",void this.trigger("cut",{node:a})):!1},copy:function(a){if(a||(a=this._data.core.selected.concat()),H.isArray(a)||(a=[a]),!a.length){return !1}var j=[],f,e,d;for(e=0,d=a.length;d>e;e++){f=this.get_node(a[e]),f&&f.id&&f.id!==H.jstree.root&&j.push(f)}return j.length?(E=j,C=this,D="copy_node",void this.trigger("copy",{node:a})):!1},get_buffer:function(){return{mode:D,node:E,inst:C}},can_paste:function(){return D!==!1&&E!==!1},paste:function(d,c){return d=this.get_node(d),d&&D&&D.match(/^(copy_node|move_node)$/)&&E?(this[D](E,d,c,!1,!1,!1,C)&&this.trigger("paste",{parent:d.id,node:E,mode:D}),E=!1,D=!1,void (C=!1)):!1},clear_buffer:function(){E=!1,D=!1,C=!1,this.trigger("clear_buffer")},edit:function(S,R,Q){var P,O,N,M,L,K,J,I,p,a=!1;return(S=this.get_node(S))?this.check("edit",S,this.get_parent(S))?(p=S,R="string"==typeof R?R:S.text,this.set_text(S,""),S=this._open_to(S),p.text=R,P=this._data.core.rtl,O=this.element.width(),this._data.core.focused=p.id,N=S.children(".jstree-anchor").focus(),M=H("<span>"),L=R,K=H("<div />",{css:{position:"absolute",top:"-200px",left:P?"0px":"-1000px",visibility:"hidden"}}).appendTo(z.body),J=H("<input />",{value:L,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:H.proxy(function(j){j.stopImmediatePropagation(),j.preventDefault();var h=M.children(".jstree-rename-input"),g=h.val(),d=this.settings.core.force_text,b;""===g&&(g=L),K.remove(),M.replaceWith(N),M.remove(),L=d?L:H("<div></div>").append(H.parseHTML(L)).html(),S=this.get_node(S),this.set_text(S,L),b=!!this.rename_node(S,d?H("<div></div>").text(g).text():H("<div></div>").append(H.parseHTML(g)).html()),b||this.set_text(S,L),this._data.core.focused=p.id,setTimeout(H.proxy(function(){var c=this.get_node(p.id,!0);c.length&&(this._data.core.focused=p.id,c.children(".jstree-anchor").focus())},this),0),Q&&Q.call(this,p,b,a),J=null},this),keydown:function(d){var c=d.which;27===c&&(a=!0,this.value=L),(27===c||13===c||37===c||38===c||39===c||40===c||32===c)&&d.stopImmediatePropagation(),(27===c||13===c)&&(d.preventDefault(),this.blur())},click:function(b){b.stopImmediatePropagation()},mousedown:function(b){b.stopImmediatePropagation()},keyup:function(b){J.width(Math.min(K.text("pW"+this.value).width(),O))},keypress:function(b){return 13===b.which?!1:void 0}}),I={fontFamily:N.css("fontFamily")||"",fontSize:N.css("fontSize")||"",fontWeight:N.css("fontWeight")||"",fontStyle:N.css("fontStyle")||"",fontStretch:N.css("fontStretch")||"",fontVariant:N.css("fontVariant")||"",letterSpacing:N.css("letterSpacing")||"",wordSpacing:N.css("wordSpacing")||""},M.attr("class",N.attr("class")).append(N.contents().clone()).append(J),N.replaceWith(M),K.css(I),J.css(I).width(Math.min(K.text("pW"+J[0].value).width(),O))[0].select(),void H(z).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(c){J&&c.target!==J&&H(J).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1):!1},set_theme:function(a,f){if(!a){return !1}if(f===!0){var e=this.settings.core.themes.dir;e||(e=H.jstree.path+"/themes"),f=e+"/"+a+"/style.css"}f&&-1===H.inArray(f,B)&&(H("head").append('<link rel="stylesheet" href="'+f+'" type="text/css" />'),B.push(f)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=a,this.element.addClass("jstree-"+a),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+a+"-responsive"),this.trigger("set_theme",{theme:a})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(b){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=b,b&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(m,l){var k,j,b,a;if(H.isArray(m)){for(m=m.slice(),k=0,j=m.length;j>k;k++){this.set_icon(m[k],l)}return !0}return m=this.get_node(m),m&&m.id!==H.jstree.root?(a=m.icon,m.icon=l===!0||null===l||l===G||""===l?!0:l,b=this.get_node(m,!0).children(".jstree-anchor").children(".jstree-themeicon"),l===!1?(b.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),this.hide_icon(m)):l===!0||null===l||l===G||""===l?(b.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),a===!1&&this.show_icon(m)):-1===l.indexOf("/")&&-1===l.indexOf(".")?(b.removeClass(a).css("background",""),b.addClass(l+" jstree-themeicon-custom").attr("rel",l),a===!1&&this.show_icon(m)):(b.removeClass(a).css("background",""),b.addClass("jstree-themeicon-custom").css("background","url('"+l+"') center center no-repeat").attr("rel",l),a===!1&&this.show_icon(m)),!0):!1},get_icon:function(a){return a=this.get_node(a),a&&a.id!==H.jstree.root?a.icon:!1},hide_icon:function(a){var f,e;if(H.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.hide_icon(a[f])}return !0}return a=this.get_node(a),a&&a!==H.jstree.root?(a.icon=!1,this.get_node(a,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(a){var h,g,f;if(H.isArray(a)){for(a=a.slice(),h=0,g=a.length;g>h;h++){this.show_icon(a[h])}return !0}return a=this.get_node(a),a&&a!==H.jstree.root?(f=this.get_node(a,!0),a.icon=f.length?f.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,a.icon||(a.icon=!0),f.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},H.vakata={},H.vakata.attributes=function(a,f){a=H(a)[0];var e=f?{}:[];return a&&a.attributes&&H.each(a.attributes,function(c,d){-1===H.inArray(d.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==d.value&&""!==H.trim(d.value)&&(f?e[d.name]=d.value:e.push(d.name))}),e},H.vakata.array_unique=function(b){var m=[],l,k,j,h={};for(l=0,j=b.length;j>l;l++){h[b[l]]===G&&(m.push(b[l]),h[b[l]]=!0)}return m},H.vakata.array_remove=function(d,c){return d.splice(c,1),d},H.vakata.array_remove_item=function(a,f){var e=H.inArray(f,a);return -1!==e?H.vakata.array_remove(a,e):a},H.vakata.array_filter=function(g,f,k,j,h){if(g.filter){return g.filter(f,k)}j=[];for(h in g){~~h+""==h+""&&h>=0&&f.call(k,g[h],+h,g)&&j.push(g[h])}return j},H.jstree.plugins.changed=function(e,d){var f=[];this.trigger=function(b,k){var j,h;if(k||(k={}),"changed"===b.replace(".jstree","")){k.changed={selected:[],deselected:[]};var c={};for(j=0,h=f.length;h>j;j++){c[f[j]]=1}for(j=0,h=k.selected.length;h>j;j++){c[k.selected[j]]?c[k.selected[j]]=2:k.changed.selected.push(k.selected[j])}for(j=0,h=f.length;h>j;j++){1===c[f[j]]&&k.changed.deselected.push(f[j])}f=k.selected.slice()}d.trigger.call(this,b,k)},this.refresh=function(b,c){return f=[],d.refresh.apply(this,arguments)}};var y=z.createElement("I");y.className="jstree-icon jstree-checkbox",y.setAttribute("role","presentation"),H.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},H.jstree.plugins.checkbox=function(b,a){this.bind=function(){a.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",H.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",H.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",H.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(H.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",H.proxy(function(j,h){var o=this._model.data,n=o[h.parent],m=h.nodes,l,k;for(l=0,k=m.length;k>l;l++){o[m[l]].state.checked=o[m[l]].state.checked||o[m[l]].original&&o[m[l]].original.state&&o[m[l]].original.state.checked,o[m[l]].state.checked&&this._data.checkbox.selected.push(m[l])}},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",H.proxy(function(U,T){var S=this._model.data,R=S[T.parent],Q=T.nodes,P=[],O,N,M,L,K,J,I=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==I.indexOf("down")){if(R.state[p?"selected":"checked"]){for(N=0,M=Q.length;M>N;N++){S[Q[N]].state[p?"selected":"checked"]=!0}this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(Q)}else{for(N=0,M=Q.length;M>N;N++){if(S[Q[N]].state[p?"selected":"checked"]){for(L=0,K=S[Q[N]].children_d.length;K>L;L++){S[S[Q[N]].children_d[L]].state[p?"selected":"checked"]=!0}this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(S[Q[N]].children_d)}}}}if(-1!==I.indexOf("up")){for(N=0,M=R.children_d.length;M>N;N++){S[R.children_d[N]].children.length||P.push(S[R.children_d[N]].parent)}for(P=H.vakata.array_unique(P),L=0,K=P.length;K>L;L++){R=S[P[L]];while(R&&R.id!==H.jstree.root){for(O=0,N=0,M=R.children.length;M>N;N++){O+=S[R.children[N]].state[p?"selected":"checked"]}if(O!==M){break}R.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(R.id),J=this.get_node(R,!0),J&&J.length&&J.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),R=this.get_node(R.parent)}}}this._data[p?"core":"checkbox"].selected=H.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",H.proxy(function(X,W){var V=this,U=W.node,T=this._model.data,S=this.get_node(U.parent),R,Q,P,O,N=this.settings.checkbox.cascade,M=this.settings.checkbox.tie_selection,L={},K=this._data[M?"core":"checkbox"].selected;for(R=0,Q=K.length;Q>R;R++){L[K[R]]=!0}if(-1!==N.indexOf("down")){var J=this._cascade_new_checked_state(U.id,!0),I=U.children_d.concat(U.id);for(R=0,Q=I.length;Q>R;R++){J.indexOf(I[R])>-1?L[I[R]]=!0:delete L[I[R]]}}if(-1!==N.indexOf("up")){while(S&&S.id!==H.jstree.root){for(P=0,R=0,Q=S.children.length;Q>R;R++){P+=T[S.children[R]].state[M?"selected":"checked"]}if(P!==Q){break}S.state[M?"selected":"checked"]=!0,L[S.id]=!0,O=this.get_node(S,!0),O&&O.length&&O.attr("aria-selected",!0).children(".jstree-anchor").addClass(M?"jstree-clicked":"jstree-checked"),S=this.get_node(S.parent)}}K=[];for(R in L){L.hasOwnProperty(R)&&K.push(R)}this._data[M?"core":"checkbox"].selected=K},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",H.proxy(function(j,p){var o=this.get_node(H.jstree.root),n=this._model.data,m,l,k;for(m=0,l=o.children_d.length;l>m;m++){k=n[o.children_d[m]],k&&k.original&&k.original.state&&k.original.state.undetermined&&(k.original.state.undetermined=!1)}},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",H.proxy(function(V,U){var T=this,S=U.node,R=this.get_node(S,!0),Q,P,O,N=this.settings.checkbox.cascade,M=this.settings.checkbox.tie_selection,L=this._data[M?"core":"checkbox"].selected,K={},J=[],I=S.children_d.concat(S.id);if(-1!==N.indexOf("down")){var p=this._cascade_new_checked_state(S.id,!1);L=L.filter(function(c){return -1===I.indexOf(c)||p.indexOf(c)>-1})}if(-1!==N.indexOf("up")&&-1===L.indexOf(S.id)){for(Q=0,P=S.parents.length;P>Q;Q++){O=this._model.data[S.parents[Q]],O.state[M?"selected":"checked"]=!1,O&&O.original&&O.original.state&&O.original.state.undetermined&&(O.original.state.undetermined=!1),O=this.get_node(S.parents[Q],!0),O&&O.length&&O.attr("aria-selected",!1).children(".jstree-anchor").removeClass(M?"jstree-clicked":"jstree-checked")}L=L.filter(function(c){return -1===S.parents.indexOf(c)})}this._data[M?"core":"checkbox"].selected=L},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",H.proxy(function(K,J){var I=this.get_node(J.parent),p=this._model.data,o,n,m,l,k=this.settings.checkbox.tie_selection;while(I&&I.id!==H.jstree.root&&!I.state[k?"selected":"checked"]){for(m=0,o=0,n=I.children.length;n>o;o++){m+=p[I.children[o]].state[k?"selected":"checked"]}if(!(n>0&&m===n)){break}I.state[k?"selected":"checked"]=!0,this._data[k?"core":"checkbox"].selected.push(I.id),l=this.get_node(I,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(k?"jstree-clicked":"jstree-checked"),I=this.get_node(I.parent)}},this)).on("move_node.jstree",H.proxy(function(Q,P){var O=P.is_multi,N=P.old_parent,M=this.get_node(P.parent),L=this._model.data,K,J,I,p,o,n=this.settings.checkbox.tie_selection;if(!O){K=this.get_node(N);while(K&&K.id!==H.jstree.root&&!K.state[n?"selected":"checked"]){for(J=0,I=0,p=K.children.length;p>I;I++){J+=L[K.children[I]].state[n?"selected":"checked"]}if(!(p>0&&J===p)){break}K.state[n?"selected":"checked"]=!0,this._data[n?"core":"checkbox"].selected.push(K.id),o=this.get_node(K,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked"),K=this.get_node(K.parent)}}K=M;while(K&&K.id!==H.jstree.root){for(J=0,I=0,p=K.children.length;p>I;I++){J+=L[K.children[I]].state[n?"selected":"checked"]}if(J===p){K.state[n?"selected":"checked"]||(K.state[n?"selected":"checked"]=!0,this._data[n?"core":"checkbox"].selected.push(K.id),o=this.get_node(K,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked"))}else{if(!K.state[n?"selected":"checked"]){break}K.state[n?"selected":"checked"]=!1,this._data[n?"core":"checkbox"].selected=H.vakata.array_remove_item(this._data[n?"core":"checkbox"].selected,K.id),o=this.get_node(K,!0),o&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(n?"jstree-clicked":"jstree-checked")}K=this.get_node(K.parent)}},this))},this.get_undetermined=function(R){if(-1===this.settings.checkbox.cascade.indexOf("undetermined")){return[]}var Q,P,O,N,M={},L=this._model.data,K=this.settings.checkbox.tie_selection,J=this._data[K?"core":"checkbox"].selected,I=[],p=this,o=[];for(Q=0,P=J.length;P>Q;Q++){if(L[J[Q]]&&L[J[Q]].parents){for(O=0,N=L[J[Q]].parents.length;N>O;O++){if(M[L[J[Q]].parents[O]]!==G){break}L[J[Q]].parents[O]!==H.jstree.root&&(M[L[J[Q]].parents[O]]=!0,I.push(L[J[Q]].parents[O]))}}}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e=p.get_node(this),d;if(e){if(e.state.loaded){for(Q=0,P=e.children_d.length;P>Q;Q++){if(d=L[e.children_d[Q]],!d.state.loaded&&d.original&&d.original.state&&d.original.state.undetermined&&d.original.state.undetermined===!0){for(M[d.id]===G&&d.id!==H.jstree.root&&(M[d.id]=!0,I.push(d.id)),O=0,N=d.parents.length;N>O;O++){M[d.parents[O]]===G&&d.parents[O]!==H.jstree.root&&(M[d.parents[O]]=!0,I.push(d.parents[O]))}}}}else{if(e.original&&e.original.state&&e.original.state.undetermined&&e.original.state.undetermined===!0){for(M[e.id]===G&&e.id!==H.jstree.root&&(M[e.id]=!0,I.push(e.id)),O=0,N=e.parents.length;N>O;O++){M[e.parents[O]]===G&&e.parents[O]!==H.jstree.root&&(M[e.parents[O]]=!0,I.push(e.parents[O]))}}}}}),Q=0,P=I.length;P>Q;Q++){L[I[Q]].state[K?"selected":"checked"]||o.push(R?L[I[Q]]:I[Q])}return o},this._undetermined=function(){if(null!==this.element){var f=this.get_undetermined(!1),e,h,g;for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,h=f.length;h>e;e++){g=this.get_node(f[e],!0),g&&g.length&&g.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}}},this.redraw_node=function(d,I,p,o){if(d=a.redraw_node.apply(this,arguments)){var n,m,l=null,j=null;for(n=0,m=d.childNodes.length;m>n;n++){if(d.childNodes[n]&&d.childNodes[n].className&&-1!==d.childNodes[n].className.indexOf("jstree-anchor")){l=d.childNodes[n];break}}l&&(!this.settings.checkbox.tie_selection&&this._model.data[d.id].state.checked&&(l.className+=" jstree-checked"),j=y.cloneNode(!1),this._model.data[d.id].state.checkbox_disabled&&(j.className+=" jstree-checkbox-disabled"),l.insertBefore(j,l.childNodes[0]))}return p||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(H.proxy(this._undetermined,this),50)),d},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(j){j=this.get_node(j);var p=this.settings.checkbox.cascade,o,n,m=this.settings.checkbox.tie_selection,l=this._data[m?"core":"checkbox"].selected,k=this._model.data;if(!j||j.state[m?"selected":"checked"]===!0||-1===p.indexOf("undetermined")||-1===p.indexOf("down")&&-1===p.indexOf("up")){return !1}if(!j.state.loaded&&j.original.state.undetermined===!0){return !0}for(o=0,n=j.children_d.length;n>o;o++){if(-1!==H.inArray(j.children_d[o],l)||!k[j.children_d[o]].state.loaded&&k[j.children_d[o]].original.state.undetermined){return !0}}return !1},this.disable_checkbox=function(f){var j,h,g;if(H.isArray(f)){for(f=f.slice(),j=0,h=f.length;h>j;j++){this.disable_checkbox(f[j])}return !0}return f=this.get_node(f),f&&f.id!==H.jstree.root?(g=this.get_node(f,!0),void (f.state.checkbox_disabled||(f.state.checkbox_disabled=!0,g&&g.length&&g.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:f})))):!1},this.enable_checkbox=function(f){var j,h,g;if(H.isArray(f)){for(f=f.slice(),j=0,h=f.length;h>j;j++){this.enable_checkbox(f[j])}return !0}return f=this.get_node(f),f&&f.id!==H.jstree.root?(g=this.get_node(f,!0),void (f.state.checkbox_disabled&&(f.state.checkbox_disabled=!1,g&&g.length&&g.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:f})))):!1},this.activate_node=function(d,e){return H(e.target).hasClass("jstree-checkbox-disabled")?!1:(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||H(e.target).hasClass("jstree-checkbox"))&&(e.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!H(e.target).hasClass("jstree-checkbox")?a.activate_node.call(this,d,e):this.is_disabled(d)?!1:(this.is_checked(d)?this.uncheck_node(d,e):this.check_node(d,e),void this.trigger("activate_node",{node:this.get_node(d)})))},this._cascade_new_checked_state=function(R,Q){var P=this,O=this.settings.checkbox.tie_selection,N=this._model.data[R],M=[],L=[],K,J,I;if(!this.settings.checkbox.cascade_to_disabled&&N.state.disabled||!this.settings.checkbox.cascade_to_hidden&&N.state.hidden){I=this.get_checked_descendants(R),N.state[O?"selected":"checked"]&&I.push(N.id),M=M.concat(I)}else{if(N.children){for(K=0,J=N.children.length;J>K;K++){var p=N.children[K];I=P._cascade_new_checked_state(p,Q),M=M.concat(I),I.indexOf(p)>-1&&L.push(p)}}var o=P.get_node(N,!0),n=L.length>0&&L.length<N.children.length;N.original&&N.original.state&&N.original.state.undetermined&&(N.original.state.undetermined=n),n?(N.state[O?"selected":"checked"]=!1,o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(O?"jstree-clicked":"jstree-checked")):Q&&L.length===N.children.length?(N.state[O?"selected":"checked"]=Q,M.push(N.id),o.attr("aria-selected",!0).children(".jstree-anchor").addClass(O?"jstree-clicked":"jstree-checked")):(N.state[O?"selected":"checked"]=!1,o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(O?"jstree-clicked":"jstree-checked"))}return M},this.get_checked_descendants=function(f){var e=this,h=e.settings.checkbox.tie_selection,g=e._model.data[f];return g.children_d.filter(function(c){return e._model.data[c].state[h?"selected":"checked"]})},this.check_node=function(h,n){if(this.settings.checkbox.tie_selection){return this.select_node(h,!1,!0,n)}var m,l,k,j;if(H.isArray(h)){for(h=h.slice(),l=0,k=h.length;k>l;l++){this.check_node(h[l],n)}return !0}return h=this.get_node(h),h&&h.id!==H.jstree.root?(m=this.get_node(h,!0),void (h.state.checked||(h.state.checked=!0,this._data.checkbox.selected.push(h.id),m&&m.length&&m.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:h,selected:this._data.checkbox.selected,event:n})))):!1},this.uncheck_node=function(g,l){if(this.settings.checkbox.tie_selection){return this.deselect_node(g,!1,l)}var k,j,h;if(H.isArray(g)){for(g=g.slice(),k=0,j=g.length;j>k;k++){this.uncheck_node(g[k],l)}return !0}return g=this.get_node(g),g&&g.id!==H.jstree.root?(h=this.get_node(g,!0),void (g.state.checked&&(g.state.checked=!1,this._data.checkbox.selected=H.vakata.array_remove_item(this._data.checkbox.selected,g.id),h.length&&h.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:g,selected:this._data.checkbox.selected,event:l})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all()}var e=this._data.checkbox.selected.concat([]),g,f;for(this._data.checkbox.selected=this._model.data[H.jstree.root].children_d.concat(),g=0,f=this._data.checkbox.selected.length;f>g;g++){this._model.data[this._data.checkbox.selected[g]]&&(this._model.data[this._data.checkbox.selected[g]].state.checked=!0)}this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all()}var e=this._data.checkbox.selected.concat([]),d,f;for(d=0,f=this._data.checkbox.selected.length;f>d;d++){this._model.data[this._data.checkbox.selected[d]]&&(this._model.data[this._data.checkbox.selected[d]].state.checked=!1)}this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(c){return this.settings.checkbox.tie_selection?this.is_selected(c):(c=this.get_node(c),c&&c.id!==H.jstree.root?c.state.checked:!1)},this.get_checked=function(c){return this.settings.checkbox.tie_selection?this.get_selected(c):c?H.map(this._data.checkbox.selected,H.proxy(function(d){return this.get_node(d)},this)):this._data.checkbox.selected},this.get_top_checked=function(j){if(this.settings.checkbox.tie_selection){return this.get_top_selected(j)}var p=this.get_checked(!0),o={},n,m,l,k;for(n=0,m=p.length;m>n;n++){o[p[n].id]=p[n]}for(n=0,m=p.length;m>n;n++){for(l=0,k=p[n].children_d.length;k>l;l++){o[p[n].children_d[l]]&&delete o[p[n].children_d[l]]}}p=[];for(n in o){o.hasOwnProperty(n)&&p.push(n)}return j?H.map(p,H.proxy(function(c){return this.get_node(c)},this)):p},this.get_bottom_checked=function(g){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(g)}var l=this.get_checked(!0),k=[],j,h;for(j=0,h=l.length;h>j;j++){l[j].children.length||k.push(l[j].id)}return g?H.map(k,H.proxy(function(c){return this.get_node(c)},this)):k},this.load_node=function(d,I){var p,o,n,m,l,k;if(!H.isArray(d)&&!this.settings.checkbox.tie_selection&&(k=this.get_node(d),k&&k.state.loaded)){for(p=0,o=k.children_d.length;o>p;p++){this._model.data[k.children_d[p]].state.checked&&(l=!0,this._data.checkbox.selected=H.vakata.array_remove_item(this._data.checkbox.selected,k.children_d[p]))}}return a.load_node.apply(this,arguments)},this.get_state=function(){var c=a.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?c:(c.checkbox=this._data.checkbox.selected.slice(),c)},this.set_state=function(d,j){var h=a.set_state.apply(this,arguments);if(h&&d.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var g=this;H.each(d.checkbox,function(e,c){g.check_node(c)})}return delete d.checkbox,this.set_state(d,j),!1}return h},this.refresh=function(d,c){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),a.refresh.apply(this,arguments)}},H.jstree.defaults.conditionalselect=function(){return !0},H.jstree.plugins.conditionalselect=function(d,c){this.activate_node=function(b,e){return this.settings.conditionalselect.call(this,this.get_node(b),e)?c.activate_node.call(this,b,e):void 0}},H.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(a,d){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var g=H.jstree.reference(e.reference),f=g.get_node(e.reference);g.create_node(f,{},"last",function(h){try{g.edit(h)}catch(c){setTimeout(function(){g.edit(h)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var g=H.jstree.reference(e.reference),f=g.get_node(e.reference);g.edit(f)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var g=H.jstree.reference(e.reference),f=g.get_node(e.reference);g.is_selected(f)?g.delete_node(g.get_selected()):g.delete_node(f)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var g=H.jstree.reference(e.reference),f=g.get_node(e.reference);g.is_selected(f)?g.cut(g.get_top_selected()):g.cut(f)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var g=H.jstree.reference(e.reference),f=g.get_node(e.reference);g.is_selected(f)?g.copy(g.get_top_selected()):g.copy(f)}},paste:{separator_before:!1,icon:!1,_disabled:function(c){return !H.jstree.reference(c.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var g=H.jstree.reference(e.reference),f=g.get_node(e.reference);g.paste(f)}}}}}}},H.jstree.plugins.contextmenu=function(b,a){this.bind=function(){a.bind.call(this);var d=0,j=null,h,g;this.element.on("init.jstree loading.jstree ready.jstree",H.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",H.proxy(function(c,e){"input"!==c.target.tagName.toLowerCase()&&(c.preventDefault(),d=c.ctrlKey?+new Date:0,(e||j)&&(d=+new Date+10000),j&&clearTimeout(j),this.is_loading(c.currentTarget)||this.show_contextmenu(c.currentTarget,c.pageX,c.pageY,c))},this)).on("click.jstree",".jstree-anchor",H.proxy(function(e){this._data.contextmenu.visible&&(!d||+new Date-d>250)&&H.vakata.context.hide(),d=0},this)).on("touchstart.jstree",".jstree-anchor",function(c){c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(h=c.originalEvent.changedTouches[0].clientX,g=c.originalEvent.changedTouches[0].clientY,j=setTimeout(function(){H(c.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(c){j&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(Math.abs(h-c.originalEvent.changedTouches[0].clientX)>10||Math.abs(g-c.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(j),H.vakata.context.hide())}).on("touchend.vakata.jstree",function(c){j&&clearTimeout(j)}),H(z).on("context_hide.vakata.jstree",H.proxy(function(e,f){this._data.contextmenu.visible=!1,H(f.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&H.vakata.context.hide(),a.teardown.call(this)},this.show_contextmenu=function(L,K,J,I){if(L=this.get_node(L),!L||L.id===H.jstree.root){return !1}var p=this.settings.contextmenu,o=this.get_node(L,!0),n=o.children(".jstree-anchor"),m=!1,l=!1;(p.show_at_node||K===G||J===G)&&(m=n.offset(),K=m.left,J=m.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(L)&&this.activate_node(L,I),l=p.items,H.isFunction(l)&&(l=l.call(this,L,H.proxy(function(c){this._show_contextmenu(L,K,J,c)},this))),H.isPlainObject(l)&&this._show_contextmenu(L,K,J,l)},this._show_contextmenu=function(h,n,m,l){var k=this.get_node(h,!0),j=k.children(".jstree-anchor");H(z).one("context_show.vakata.jstree",H.proxy(function(e,g){var f="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";H(g.element).addClass(f),j.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,H.vakata.context.show(j,{x:n,y:m},l),this.trigger("show_contextmenu",{node:h,x:n,y:m})}},function(e){var d=!1,f={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(a){e(z).triggerHandler("context_"+a+".vakata",{reference:f.reference,element:f.element,position:{x:f.position_x,y:f.position_y}})},_execute:function(a){return a=f.items[a],a&&(!a._disabled||e.isFunction(a._disabled)&&!a._disabled({item:a,reference:f.reference,element:f.element}))&&a.action?a.action.call(null,{item:a,reference:f.reference,element:f.element,position:{x:f.position_x,y:f.position_y}}):!1},_parse:function(a,k){if(!a){return !1}k||(f.html="",f.items=[]);var j="",h=!1,c;return k&&(j+="<ul>"),e.each(a,function(g,l){return l?(f.items.push(l),!h&&l.separator_before&&(j+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),h=!1,j+="<li class='"+(l._class||"")+(l._disabled===!0||e.isFunction(l._disabled)&&l._disabled({item:l,reference:f.reference,element:f.element})?" vakata-contextmenu-disabled ":"")+"' "+(l.shortcut?" data-shortcut='"+l.shortcut+"' ":"")+">",j+="<a href='#' rel='"+(f.items.length-1)+"' "+(l.title?"title='"+l.title+"'":"")+">",e.vakata.context.settings.icons&&(j+="<i ",l.icon&&(j+=-1!==l.icon.indexOf("/")||-1!==l.icon.indexOf(".")?" style='background:url(\""+l.icon+"\") center center no-repeat' ":" class='"+l.icon+"' "),j+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),j+=(e.isFunction(l.label)?l.label({item:g,reference:f.reference,element:f.element}):l.label)+(l.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+l.shortcut+'">'+(l.shortcut_label||"")+"</span>":"")+"</a>",l.submenu&&(c=e.vakata.context._parse(l.submenu,!0),c&&(j+=c)),j+="</li>",void (l.separator_after&&(j+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",h=!0))):!0}),j=j.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),k&&(j+="</ul>"),k||(f.html=j,e.vakata.context._trigger("parse")),j.length>10?j:!1},_show_submenu:function(J){if(J=e(J),J.length&&J.children("ul").length){var I=J.children("ul"),p=J.offset().left,o=p+J.outerWidth(),n=J.offset().top,m=I.width(),l=I.height(),b=e(window).width()+e(window).scrollLeft(),a=e(window).height()+e(window).scrollTop();d?J[o-(m+10+J.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):J[o+m>b&&p>b-o?"addClass":"removeClass"]("vakata-context-right"),n+l+10>a&&I.css("bottom","-1px"),J.hasClass("vakata-context-right")?m>p&&I.css("margin-right",p-m):m>b-o&&I.css("margin-left",b-o-m),I.show()}},show:function(Q,P,O){var N,M,L,K,J,I,c,b,a=!0;switch(f.element&&f.element.length&&f.element.width(""),a){case !P&&!Q:return !1;case !!P&&!!Q:f.reference=Q,f.position_x=P.x,f.position_y=P.y;break;case !P&&!!Q:f.reference=Q,N=Q.offset(),f.position_x=N.left+Q.outerHeight(),f.position_y=N.top;break;case !!P&&!Q:f.position_x=P.x,f.position_y=P.y}Q&&!O&&e(Q).data("vakata_contextmenu")&&(O=e(Q).data("vakata_contextmenu")),e.vakata.context._parse(O)&&f.element.html(f.html),f.items.length&&(f.element.appendTo(z.body),M=f.element,L=f.position_x,K=f.position_y,J=M.width(),I=M.height(),c=e(window).width()+e(window).scrollLeft(),b=e(window).height()+e(window).scrollTop(),d&&(L-=M.outerWidth()-e(Q).outerWidth(),L<e(window).scrollLeft()+20&&(L=e(window).scrollLeft()+20)),L+J+20>c&&(L=c-(J+20)),K+I+20>b&&(K=b-(I+20)),f.element.css({left:L,top:K}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),f.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){f.is_visible&&(f.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),f.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){d="rtl"===e(z.body).css("direction");var a=!1;f.element=e("<ul class='vakata-context'></ul>"),f.element.on("mouseenter","li",function(c){c.stopImmediatePropagation(),e.contains(this,c.relatedTarget)||(a&&clearTimeout(a),f.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(c){e.contains(this,c.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(c){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(a=setTimeout(function(g){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(c){c.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(c){var g=null;switch(c.which){case 13:case 32:c.type="click",c.preventDefault(),e(c.currentTarget).trigger(c);break;case 37:f.is_visible&&(f.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 38:f.is_visible&&(g=f.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),g.length||(g=f.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),g.addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 39:f.is_visible&&(f.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 40:f.is_visible&&(g=f.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),g.length||(g=f.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),g.addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 27:e.vakata.context.hide(),c.preventDefault()}}).on("keydown",function(g){g.preventDefault();var c=f.element.find(".vakata-contextmenu-shortcut-"+g.which).parent();c.parent().not(".vakata-context-disabled")&&c.click()}),e(z).on("mousedown.vakata.jstree",function(c){f.is_visible&&f.element[0]!==c.target&&!e.contains(f.element[0],c.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(b,c){f.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),d&&f.element.addClass("vakata-context-rtl").css("direction","rtl"),f.element.find("ul").hide().end()})})}(H),H.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var x,w;H.jstree.plugins.dnd=function(a,d){this.init=function(e,c){d.init.call(this,e,c),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable" in z.createElement("span")},this.bind=function(){d.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",H.proxy(function(f){if(this.settings.dnd.large_drag_target&&H(f.target).closest(".jstree-node")[0]!==f.currentTarget){return !0}if("touchstart"===f.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!H(f.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked"))){return !0}var j=this.get_node(f.target),h=this.is_selected(j)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,g=h>1?h+" "+this.get_string("nodes"):this.get_text(f.currentTarget);if(this.settings.core.force_text&&(g=H.vakata.html.escape(g)),j&&j.id&&j.id!==H.jstree.root&&(1===f.which||"touchstart"===f.type||"dragstart"===f.type)&&(this.settings.dnd.is_draggable===!0||H.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,h>1?this.get_top_selected(!0):[j],f))){if(x={jstree:!0,origin:this,obj:this.get_node(j,!0),nodes:h>1?this.get_top_selected():[j.id]},w=f.currentTarget,!this.settings.dnd.use_html5){return this.element.trigger("mousedown.jstree"),H.vakata.dnd.start(f,x,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+g+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}H.vakata.dnd._trigger("start",f,{helper:H(),element:w,data:x})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(c){return c.preventDefault(),H.vakata.dnd._trigger("move",c,{helper:H(),element:w,data:x}),!1}).on("drop.jstree",H.proxy(function(c){return c.preventDefault(),H.vakata.dnd._trigger("stop",c,{helper:H(),element:w,data:x}),!1},this))},this.redraw_node=function(j,c,o,n){if(j=d.redraw_node.apply(this,arguments),j&&this.settings.dnd.use_html5){if(this.settings.dnd.large_drag_target){j.setAttribute("draggable",!0)}else{var m,l,k=null;for(m=0,l=j.childNodes.length;l>m;m++){if(j.childNodes[m]&&j.childNodes[m].className&&-1!==j.childNodes[m].className.indexOf("jstree-anchor")){k=j.childNodes[m];break}}k&&k.setAttribute("draggable",!0)}}return j}},H(function(){var k=!1,j=!1,h=!1,b=!1,a=H('<div id="jstree-marker">&#160;</div>').hide();H(z).on("dragover.vakata.jstree",function(c){w&&H.vakata.dnd._trigger("move",c,{helper:H(),element:w,data:x})}).on("drop.vakata.jstree",function(c){w&&(H.vakata.dnd._trigger("stop",c,{helper:H(),element:w,data:x}),w=null,x=null)}).on("dnd_start.vakata.jstree",function(d,c){k=!1,h=!1,c&&c.data&&c.data.jstree&&a.appendTo(z.body)}).on("dnd_move.vakata.jstree",function(aa,Z){var Y=Z.event.target!==h.target;if(b&&(!Z.event||"dragover"!==Z.event.type||Y)&&clearTimeout(b),Z&&Z.data&&Z.data.jstree&&(!Z.event.target.id||"jstree-marker"!==Z.event.target.id)){h=Z.event;var X=H.jstree.reference(Z.event.target),W=!1,V=!1,U=!1,T,S,Q,O,M,K,I,g,f,e,d,c,R,P,N,L,J;if(X&&X._data&&X._data.dnd){if(a.attr("class","jstree-"+X.get_theme()+(X.settings.core.themes.responsive?" jstree-dnd-responsive":"")),L=Z.data.origin&&(Z.data.origin.settings.dnd.always_copy||Z.data.origin.settings.dnd.copy&&(Z.event.metaKey||Z.event.ctrlKey)),Z.helper.children().attr("class","jstree-"+X.get_theme()+" jstree-"+X.get_theme()+"-"+X.get_theme_variant()+" "+(X.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[L?"show":"hide"](),Z.event.target!==X.element[0]&&Z.event.target!==X.get_container_ul()[0]||0!==X.get_container_ul().children().length){if(W=X.settings.dnd.large_drop_target?H(Z.event.target).closest(".jstree-node").children(".jstree-anchor"):H(Z.event.target).closest(".jstree-anchor"),W&&W.length&&W.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(V=W.offset(),U=(Z.event.pageY!==G?Z.event.pageY:Z.event.originalEvent.pageY)-V.top,O=W.outerHeight(),I=O/3>U?["b","i","a"]:U>O-O/3?["a","i","b"]:U>O/2?["i","a","b"]:["i","b","a"],H.each(I,function(l,m){switch(m){case"b":S=V.left-6,Q=V.top,M=X.get_parent(W),K=W.parent().index();break;case"i":P=X.settings.dnd.inside_pos,N=X.get_node(W.parent()),S=V.left-2,Q=V.top+O/2+1,M=N.id,K="first"===P?0:"last"===P?N.children.length:Math.min(P,N.children.length);break;case"a":S=V.left-6,Q=V.top+O,M=X.get_parent(W),K=W.parent().index()+1}for(g=!0,f=0,e=Z.data.nodes.length;e>f;f++){if(d=Z.data.origin&&(Z.data.origin.settings.dnd.always_copy||Z.data.origin.settings.dnd.copy&&(Z.event.metaKey||Z.event.ctrlKey))?"copy_node":"move_node",c=K,"move_node"===d&&"a"===m&&Z.data.origin&&Z.data.origin===X&&M===X.get_parent(Z.data.nodes[f])&&(R=X.get_node(M),c>H.inArray(Z.data.nodes[f],R.children)&&(c-=1)),g=g&&(X&&X.settings&&X.settings.dnd&&X.settings.dnd.check_while_dragging===!1||X.check(d,Z.data.origin&&Z.data.origin!==X?Z.data.origin.get_node(Z.data.nodes[f]):Z.data.nodes[f],M,c,{dnd:!0,ref:X.get_node(W.parent()),pos:m,origin:Z.data.origin,is_multi:Z.data.origin&&Z.data.origin!==X,is_foreign:!Z.data.origin})),!g){X&&X.last_error&&(j=X.last_error());break}}return"i"===m&&W.parent().is(".jstree-closed")&&X.settings.dnd.open_timeout&&(!Z.event||"dragover"!==Z.event.type||Y)&&(b&&clearTimeout(b),b=setTimeout(function(o,n){return function(){o.open_node(n)}}(X,W),X.settings.dnd.open_timeout)),g?(J=X.get_node(M,!0),J.hasClass(".jstree-dnd-parent")||(H(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),J.addClass("jstree-dnd-parent")),k={ins:X,par:M,pos:"i"!==m||"last"!==P||0!==K||X.is_loaded(N)?K:"last"},a.css({left:S+"px",top:Q+"px"}).show(),Z.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),Z.event.originalEvent&&Z.event.originalEvent.dataTransfer&&(Z.event.originalEvent.dataTransfer.dropEffect=L?"copy":"move"),j={},I=!0,!1):void 0}),I===!0)){return}}else{for(g=!0,f=0,e=Z.data.nodes.length;e>f;f++){if(g=g&&X.check(Z.data.origin&&(Z.data.origin.settings.dnd.always_copy||Z.data.origin.settings.dnd.copy&&(Z.event.metaKey||Z.event.ctrlKey))?"copy_node":"move_node",Z.data.origin&&Z.data.origin!==X?Z.data.origin.get_node(Z.data.nodes[f]):Z.data.nodes[f],H.jstree.root,"last",{dnd:!0,ref:X.get_node(H.jstree.root),pos:"i",origin:Z.data.origin,is_multi:Z.data.origin&&Z.data.origin!==X,is_foreign:!Z.data.origin}),!g){break}}if(g){return k={ins:X,par:H.jstree.root,pos:"last"},a.hide(),Z.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void (Z.event.originalEvent&&Z.event.originalEvent.dataTransfer&&(Z.event.originalEvent.dataTransfer.dropEffect=L?"copy":"move"))}}}H(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),k=!1,Z.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),Z.event.originalEvent&&Z.event.originalEvent.dataTransfer,a.hide()}}).on("dnd_scroll.vakata.jstree",function(d,c){c&&c.data&&c.data.jstree&&(a.hide(),k=!1,h=!1,c.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(c,g){if(H(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),b&&clearTimeout(b),g&&g.data&&g.data.jstree){a.hide().detach();var f,e,d=[];if(k){for(f=0,e=g.data.nodes.length;e>f;f++){d[f]=g.data.origin?g.data.origin.get_node(g.data.nodes[f]):g.data.nodes[f]}k.ins[g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(g.event.metaKey||g.event.ctrlKey))?"copy_node":"move_node"](d,k.par,k.pos,!1,!1,!1,g.data.origin)}else{f=H(g.event.target).closest(".jstree"),f.length&&j&&j.error&&"check"===j.error&&(f=f.jstree(!0),f&&f.settings.core.error.call(this,j))}h=!1,k=!1}}).on("keyup.jstree keydown.jstree",function(c,d){d=H.vakata.dnd._get(),d&&d.data&&d.data.jstree&&("keyup"===c.type&&27===c.which?(b&&clearTimeout(b),k=!1,j=!1,h=!1,b=!1,a.hide().detach(),H.vakata.dnd._clean()):(d.helper.find(".jstree-copy").first()[d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(c.metaKey||c.ctrlKey))?"show":"hide"](),h&&(h.metaKey=c.metaKey,h.ctrlKey=c.ctrlKey,H.vakata.dnd._trigger("move",h))))})}),function(b){b.vakata.html={div:b("<div />"),escape:function(a){return b.vakata.html.div.text(a).html()},strip:function(a){return b.vakata.html.div.empty().append(b.parseHTML(a)).text()}};var d={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};b.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(g,f,a){a===G&&(a=b.vakata.dnd._get()),a.event=f,b(z).triggerHandler("dnd_"+g+".vakata",a)},_get:function(){return{data:d.data,element:d.element,helper:d.helper}},_clean:function(){d.helper&&d.helper.remove(),d.scroll_i&&(clearInterval(d.scroll_i),d.scroll_i=!1),d={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},b(z).off("mousemove.vakata.jstree touchmove.vakata.jstree",b.vakata.dnd.drag),b(z).off("mouseup.vakata.jstree touchend.vakata.jstree",b.vakata.dnd.stop)},_scroll:function(a){if(!d.scroll_e||!d.scroll_l&&!d.scroll_t){return d.scroll_i&&(clearInterval(d.scroll_i),d.scroll_i=!1),!1}if(!d.scroll_i){return d.scroll_i=setInterval(b.vakata.dnd._scroll,100),!1}if(a===!0){return !1}var f=d.scroll_e.scrollTop(),c=d.scroll_e.scrollLeft();d.scroll_e.scrollTop(f+d.scroll_t*b.vakata.dnd.settings.scroll_speed),d.scroll_e.scrollLeft(c+d.scroll_l*b.vakata.dnd.settings.scroll_speed),(f!==d.scroll_e.scrollTop()||c!==d.scroll_e.scrollLeft())&&b.vakata.dnd._trigger("scroll",d.scroll_e)},start:function(a,h,g){"touchstart"===a.type&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a.target=z.elementFromPoint(a.originalEvent.changedTouches[0].pageX-window.pageXOffset,a.originalEvent.changedTouches[0].pageY-window.pageYOffset)),d.is_drag&&b.vakata.dnd.stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return !1},a.currentTarget.style&&(a.currentTarget.style.touchAction="none",a.currentTarget.style.msTouchAction="none",a.currentTarget.style.MozUserSelect="none")}catch(c){}return d.init_x=a.pageX,d.init_y=a.pageY,d.data=h,d.is_down=!0,d.element=a.currentTarget,d.target=a.target,d.is_touch="touchstart"===a.type,g!==!1&&(d.helper=b("<div id='vakata-dnd'></div>").html(g).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),b(z).on("mousemove.vakata.jstree touchmove.vakata.jstree",b.vakata.dnd.drag),b(z).on("mouseup.vakata.jstree touchend.vakata.jstree",b.vakata.dnd.stop),!1},drag:function(O){if("touchmove"===O.type&&O.originalEvent&&O.originalEvent.changedTouches&&O.originalEvent.changedTouches[0]&&(O.pageX=O.originalEvent.changedTouches[0].pageX,O.pageY=O.originalEvent.changedTouches[0].pageY,O.target=z.elementFromPoint(O.originalEvent.changedTouches[0].pageX-window.pageXOffset,O.originalEvent.changedTouches[0].pageY-window.pageYOffset)),d.is_down){if(!d.is_drag){if(!(Math.abs(O.pageX-d.init_x)>(d.is_touch?b.vakata.dnd.settings.threshold_touch:b.vakata.dnd.settings.threshold)||Math.abs(O.pageY-d.init_y)>(d.is_touch?b.vakata.dnd.settings.threshold_touch:b.vakata.dnd.settings.threshold))){return}d.helper&&(d.helper.appendTo(z.body),d.helper_w=d.helper.outerWidth()),d.is_drag=!0,b(d.target).one("click.vakata",!1),b.vakata.dnd._trigger("start",O)}var N=!1,M=!1,L=!1,K=!1,J=!1,I=!1,p=!1,o=!1,c=!1,a=!1;return d.scroll_t=0,d.scroll_l=0,d.scroll_e=!1,b(b(O.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(b(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var g=b(this),f=g.offset();return this.scrollHeight>this.offsetHeight&&(f.top+g.height()-O.pageY<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_t=1),O.pageY-f.top<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(f.left+g.width()-O.pageX<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_l=1),O.pageX-f.left<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_l=-1)),d.scroll_t||d.scroll_l?(d.scroll_e=b(this),!1):void 0}),d.scroll_e||(N=b(z),M=b(window),L=N.height(),K=M.height(),J=N.width(),I=M.width(),p=N.scrollTop(),o=N.scrollLeft(),L>K&&O.pageY-p<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_t=-1),L>K&&K-(O.pageY-p)<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_t=1),J>I&&O.pageX-o<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_l=-1),J>I&&I-(O.pageX-o)<b.vakata.dnd.settings.scroll_proximity&&(d.scroll_l=1),(d.scroll_t||d.scroll_l)&&(d.scroll_e=N)),d.scroll_e&&b.vakata.dnd._scroll(!0),d.helper&&(c=parseInt(O.pageY+b.vakata.dnd.settings.helper_top,10),a=parseInt(O.pageX+b.vakata.dnd.settings.helper_left,10),L&&c+25>L&&(c=L-50),J&&a+d.helper_w>J&&(a=J-(d.helper_w+2)),d.helper.css({left:a+"px",top:c+"px"})),b.vakata.dnd._trigger("move",O),!1}},stop:function(a){if("touchend"===a.type&&a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a.target=z.elementFromPoint(a.originalEvent.changedTouches[0].pageX-window.pageXOffset,a.originalEvent.changedTouches[0].pageY-window.pageYOffset)),d.is_drag){a.target!==d.target&&b(d.target).off("click.vakata"),b.vakata.dnd._trigger("stop",a)}else{if("touchend"===a.type&&a.target===d.target){var c=setTimeout(function(){b(a.target).click()},100);b(a.target).one("click",function(){c&&clearTimeout(c)})}}return b.vakata.dnd._clean(),!1}}}(H),H.jstree.defaults.massload=null,H.jstree.plugins.massload=function(a,d){this.init=function(e,c){this._data.massload={},d.init.call(this,e,c)},this._load_nodes=function(O,N,M,L){var K=this.settings.massload,J=JSON.stringify(O),I=[],p=this._model.data,o,n,c;if(!M){for(o=0,n=O.length;n>o;o++){(!p[O[o]]||!p[O[o]].state.loaded&&!p[O[o]].state.failed||L)&&(I.push(O[o]),c=this.get_node(O[o],!0),c&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0))}if(this._data.massload={},I.length){if(H.isFunction(K)){return K.call(this,I,H.proxy(function(b){var f,e;if(b){for(f in b){b.hasOwnProperty(f)&&(this._data.massload[f]=b[f])}}for(f=0,e=O.length;e>f;f++){c=this.get_node(O[f],!0),c&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1)}d._load_nodes.call(this,O,N,M,L)},this))}if("object"==typeof K&&K&&K.url){return K=H.extend(!0,{},K),H.isFunction(K.url)&&(K.url=K.url.call(this,I)),H.isFunction(K.data)&&(K.data=K.data.call(this,I)),H.ajax(K).done(H.proxy(function(b,l,k){var f,e;if(b){for(f in b){b.hasOwnProperty(f)&&(this._data.massload[f]=b[f])}}for(f=0,e=O.length;e>f;f++){c=this.get_node(O[f],!0),c&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1)}d._load_nodes.call(this,O,N,M,L)},this)).fail(H.proxy(function(b){d._load_nodes.call(this,O,N,M,L)},this))}}}return d._load_nodes.call(this,O,N,M,L)},this._load_node=function(c,l){var k=this._data.massload[c.id],j=null,h;return k?(j=this["string"==typeof k?"_append_html_data":"_append_json_data"](c,"string"==typeof k?H(H.parseHTML(k)).filter(function(){return 3!==this.nodeType}):k,function(b){l.call(this,b)}),h=this.get_node(c.id,!0),h&&h.length&&h.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[c.id],j):d._load_node.call(this,c,l)}},H.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},H.jstree.plugins.search=function(b,a){this.bind=function(){a.bind.call(this),this._data.search.str="",this._data.search.dom=H(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",H.proxy(function(j,I){if(this._data.search.som&&I.res.length){var p=this._model.data,o,n,m=[],l,k;for(o=0,n=I.res.length;n>o;o++){if(p[I.res[o]]&&!p[I.res[o]].state.hidden&&(m.push(I.res[o]),m=m.concat(p[I.res[o]].parents),this._data.search.smc)){for(l=0,k=p[I.res[o]].children_d.length;k>l;l++){p[p[I.res[o]].children_d[l]]&&!p[p[I.res[o]].children_d[l]].state.hidden&&m.push(p[I.res[o]].children_d[l])}}}m=H.vakata.array_remove_item(H.vakata.array_unique(m),H.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(m,!0),this.redraw(!0)}},this)).on("clear_search.jstree",H.proxy(function(d,c){this._data.search.som&&c.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(V,U,T,S,R,Q){if(V===!1||""===H.trim(V.toString())){return this.clear_search()}S=this.get_node(S),S=S&&S.id?S.id:null,V=V.toString();var P=this.settings.search,O=P.ajax?P.ajax:!1,N=this._model.data,M=null,L=[],K=[],J,I;if(this._data.search.res.length&&!R&&this.clear_search(),T===G&&(T=P.show_only_matches),Q===G&&(Q=P.show_only_matches_children),!U&&O!==!1){return H.isFunction(O)?O.call(this,V,H.proxy(function(c){c&&c.d&&(c=c.d),this._load_nodes(H.isArray(c)?H.vakata.array_unique(c):[],function(){this.search(V,!0,T,S,R,Q)})},this),S):(O=H.extend({},O),O.data||(O.data={}),O.data.str=V,S&&(O.data.inside=S),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=H.ajax(O).fail(H.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(O)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(H.proxy(function(c){c&&c.d&&(c=c.d),this._load_nodes(H.isArray(c)?H.vakata.array_unique(c):[],function(){this.search(V,!0,T,S,R,Q)})},this)),this._data.search.lastRequest)}if(R||(this._data.search.str=V,this._data.search.dom=H(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=T,this._data.search.smc=Q),M=new H.vakata.search(V,!0,{caseSensitive:P.case_sensitive,fuzzy:P.fuzzy}),H.each(N[S?S:H.jstree.root].children_d,function(e,c){var f=N[c];f.text&&!f.state.hidden&&(!P.search_leaves_only||f.state.loaded&&0===f.children.length)&&(P.search_callback&&P.search_callback.call(this,V,f)||!P.search_callback&&M.search(f.text).isMatch)&&(L.push(c),K=K.concat(f.parents))}),L.length){for(K=H.vakata.array_unique(K),J=0,I=K.length;I>J;J++){K[J]!==H.jstree.root&&N[K[J]]&&this.open_node(K[J],null,0)===!0&&this._data.search.opn.push(K[J])}R?(this._data.search.dom=this._data.search.dom.add(H(this.element[0].querySelectorAll("#"+H.map(L,function(c){return -1!=="0123456789".indexOf(c[0])?"\\3"+c[0]+" "+c.substr(1).replace(H.jstree.idregex,"\\$&"):c.replace(H.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=H.vakata.array_unique(this._data.search.res.concat(L))):(this._data.search.dom=H(this.element[0].querySelectorAll("#"+H.map(L,function(c){return -1!=="0123456789".indexOf(c[0])?"\\3"+c[0]+" "+c.substr(1).replace(H.jstree.idregex,"\\$&"):c.replace(H.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=L),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:V,res:this._data.search.res,show_only_matches:T})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=H(this.element[0].querySelectorAll("#"+H.map(this._data.search.res,function(c){return -1!=="0123456789".indexOf(c[0])?"\\3"+c[0]+" "+c.substr(1).replace(H.jstree.idregex,"\\$&"):c.replace(H.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=H()},this.redraw_node=function(d,o,n,m){if(d=a.redraw_node.apply(this,arguments),d&&-1!==H.inArray(d.id,this._data.search.res)){var l,k,j=null;for(l=0,k=d.childNodes.length;k>l;l++){if(d.childNodes[l]&&d.childNodes[l].className&&-1!==d.childNodes[l].className.indexOf("jstree-anchor")){j=d.childNodes[l];break}}j&&(j.className+=" jstree-search")}return d}},function(b){b.vakata.search=function(N,M,L){L=L||{},L=b.extend({},b.vakata.search.defaults,L),L.fuzzy!==!1&&(L.fuzzy=!0),N=L.caseSensitive?N:N.toLowerCase();var K=L.location,J=L.distance,I=L.threshold,p=N.length,o,n,m,a;return p>32&&(L.fuzzy=!1),L.fuzzy&&(o=1<<p-1,n=function(){var d={},e=0;for(e=0;p>e;e++){d[N.charAt(e)]=0}for(e=0;p>e;e++){d[N.charAt(e)]|=1<<p-e-1}return d}(),m=function(f,e){var h=f/p,g=Math.abs(K-e);return J?h+g/J:g?1:h}),a=function(S){if(S=L.caseSensitive?S:S.toLowerCase(),N===S||-1!==S.indexOf(N)){return{isMatch:!0,score:0}}if(!L.fuzzy){return{isMatch:!1,score:1}}var Q,P,O=S.length,k=I,j=S.indexOf(N,K),h,g,e=p+O,d,X,W,V,U,T=1,R=[];for(-1!==j&&(k=Math.min(m(0,j),k),j=S.lastIndexOf(N,K+p),-1!==j&&(k=Math.min(m(0,j),k))),j=-1,Q=0;p>Q;Q++){h=0,g=e;while(g>h){m(Q,K+g)<=k?h=g:e=g,g=Math.floor((e-h)/2+h)}for(e=g,X=Math.max(1,K-g+1),W=Math.min(K+g,O)+p,V=new Array(W+2),V[W+1]=(1<<Q)-1,P=W;P>=X;P--){if(U=n[S.charAt(P-1)],0===Q?V[P]=(V[P+1]<<1|1)&U:V[P]=(V[P+1]<<1|1)&U|((d[P+1]|d[P])<<1|1)|d[P+1],V[P]&o&&(T=m(Q,P-1),k>=T)){if(k=T,j=P-1,R.push(j),!(j>K)){break}X=Math.max(1,2*K-j)}}if(m(Q+1,K)>k){break}d=V}return{isMatch:j>=0,score:T}},M===!0?{search:a}:a(M)},b.vakata.search.defaults={location:0,distance:100,threshold:0.6,fuzzy:!1,caseSensitive:!1}}(H),H.jstree.defaults.sort=function(d,c){return this.get_text(d)>this.get_text(c)?1:-1},H.jstree.plugins.sort=function(a,d){this.bind=function(){d.bind.call(this),this.element.on("model.jstree",H.proxy(function(e,c){this.sort(c.parent,!0)},this)).on("rename_node.jstree create_node.jstree",H.proxy(function(e,c){this.sort(c.parent||c.node.parent,!1),this.redraw_node(c.parent||c.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",H.proxy(function(e,c){this.sort(c.parent,!1),this.redraw_node(c.parent,!0)},this))},this.sort=function(f,j){var h,g;if(f=this.get_node(f),f&&f.children&&f.children.length&&(f.children.sort(H.proxy(this.settings.sort,this)),j)){for(h=0,g=f.children_d.length;g>h;h++){this.sort(f.children_d[h],!1)}}}};var u=!1;H.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},H.jstree.plugins.state=function(a,d){this.bind=function(){d.bind.call(this);var c=H.proxy(function(){this.element.on(this.settings.state.events,H.proxy(function(){u&&clearTimeout(u),u=setTimeout(H.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",H.proxy(function(b,e){this.element.one("restore_state.jstree",c),this.restore_state()||c()},this))},this.save_state=function(){var e=this.get_state();this.settings.state.preserve_loaded||delete e.core.loaded;var f={state:e,ttl:this.settings.state.ttl,sec:+new Date};H.vakata.storage.set(this.settings.state.key,JSON.stringify(f))},this.restore_state=function(){var e=H.vakata.storage.get(this.settings.state.key);if(e){try{e=JSON.parse(e)}catch(f){return !1}}return e&&e.ttl&&e.sec&&+new Date-e.sec>e.ttl?!1:(e&&e.state&&(e=e.state),e&&H.isFunction(this.settings.state.filter)&&(e=this.settings.state.filter.call(this,e)),e?(this.settings.state.preserve_loaded||delete e.core.loaded,this.element.one("set_state.jstree",function(g,b){b.instance.trigger("restore_state",{state:H.extend(!0,{},e)})}),this.set_state(e),!0):!1)},this.clear_state=function(){return H.vakata.storage.del(this.settings.state.key)}},function(d,c){d.vakata.storage={set:function(f,e){return window.localStorage.setItem(f,e)},get:function(b){return window.localStorage.getItem(b)},del:function(b){return window.localStorage.removeItem(b)}}}(H),H.jstree.defaults.types={"default":{}},H.jstree.defaults.types[H.jstree.root]={},H.jstree.plugins.types=function(b,a){this.init=function(k,j){var h,d;if(j&&j.types&&j.types["default"]){for(h in j.types){if("default"!==h&&h!==H.jstree.root&&j.types.hasOwnProperty(h)){for(d in j.types["default"]){j.types["default"].hasOwnProperty(d)&&j.types[h][d]===G&&(j.types[h][d]=j.types["default"][d])}}}}a.init.call(this,k,j),this._model.data[H.jstree.root].type=H.jstree.root},this.refresh=function(d,e){a.refresh.call(this,d,e),this._model.data[H.jstree.root].type=H.jstree.root},this.bind=function(){this.element.on("model.jstree",H.proxy(function(L,K){var J=this._model.data,I=K.nodes,p=this.settings.types,o,n,m="default",l;for(o=0,n=I.length;n>o;o++){if(m="default",J[I[o]].original&&J[I[o]].original.type&&p[J[I[o]].original.type]&&(m=J[I[o]].original.type),J[I[o]].data&&J[I[o]].data.jstree&&J[I[o]].data.jstree.type&&p[J[I[o]].data.jstree.type]&&(m=J[I[o]].data.jstree.type),J[I[o]].type=m,J[I[o]].icon===!0&&p[m].icon!==G&&(J[I[o]].icon=p[m].icon),p[m].li_attr!==G&&"object"==typeof p[m].li_attr){for(l in p[m].li_attr){if(p[m].li_attr.hasOwnProperty(l)){if("id"===l){continue}J[I[o]].li_attr[l]===G?J[I[o]].li_attr[l]=p[m].li_attr[l]:"class"===l&&(J[I[o]].li_attr["class"]=p[m].li_attr["class"]+" "+J[I[o]].li_attr["class"])}}}if(p[m].a_attr!==G&&"object"==typeof p[m].a_attr){for(l in p[m].a_attr){if(p[m].a_attr.hasOwnProperty(l)){if("id"===l){continue}J[I[o]].a_attr[l]===G?J[I[o]].a_attr[l]=p[m].a_attr[l]:"href"===l&&"#"===J[I[o]].a_attr[l]?J[I[o]].a_attr.href=p[m].a_attr.href:"class"===l&&(J[I[o]].a_attr["class"]=p[m].a_attr["class"]+" "+J[I[o]].a_attr["class"])}}}}J[H.jstree.root].type=H.jstree.root},this)),a.bind.call(this)},this.get_json=function(d,I,p){var o,n,m=this._model.data,l=I?H.extend(!0,{},I,{no_id:!1}):{},k=a.get_json.call(this,d,l,p);if(k===!1){return !1}if(H.isArray(k)){for(o=0,n=k.length;n>o;o++){k[o].type=k[o].id&&m[k[o].id]&&m[k[o].id].type?m[k[o].id].type:"default",I&&I.no_id&&(delete k[o].id,k[o].li_attr&&k[o].li_attr.id&&delete k[o].li_attr.id,k[o].a_attr&&k[o].a_attr.id&&delete k[o].a_attr.id)}}else{k.type=k.id&&m[k.id]&&m[k.id].type?m[k.id].type:"default",I&&I.no_id&&(k=this._delete_ids(k))}return k},this._delete_ids=function(e){if(H.isArray(e)){for(var g=0,f=e.length;f>g;g++){e[g]=this._delete_ids(e[g])}return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&H.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(N,M,L,K,J){if(a.check.call(this,N,M,L,K,J)===!1){return !1}M=M&&M.id?M:this.get_node(M),L=L&&L.id?L:this.get_node(L);var I=M&&M.id?J&&J.origin?J.origin:H.jstree.reference(M.id):null,p,o,n,d;switch(I=I&&I._model&&I._model.data?I._model.data:null,N){case"create_node":case"move_node":case"copy_node":if("move_node"!==N||-1===H.inArray(M.id,L.children)){if(p=this.get_rules(L),p.max_children!==G&&-1!==p.max_children&&p.max_children===L.children.length){return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+N,data:JSON.stringify({chk:N,pos:K,obj:M&&M.id?M.id:!1,par:L&&L.id?L.id:!1})},!1}if(p.valid_children!==G&&-1!==p.valid_children&&-1===H.inArray(M.type||"default",p.valid_children)){return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+N,data:JSON.stringify({chk:N,pos:K,obj:M&&M.id?M.id:!1,par:L&&L.id?L.id:!1})},!1}if(I&&M.children_d&&M.parents){for(o=0,n=0,d=M.children_d.length;d>n;n++){o=Math.max(o,I[M.children_d[n]].parents.length)}o=o-M.parents.length+1}(0>=o||o===G)&&(o=1);do{if(p.max_depth!==G&&-1!==p.max_depth&&p.max_depth<o){return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+N,data:JSON.stringify({chk:N,pos:K,obj:M&&M.id?M.id:!1,par:L&&L.id?L.id:!1})},!1}L=this.get_node(L.parent),p=this.get_rules(L),o++}while(L)}}return !0},this.get_rules=function(d){if(d=this.get_node(d),!d){return !1}var e=this.get_type(d,!0);return e.max_depth===G&&(e.max_depth=-1),e.max_children===G&&(e.max_children=-1),e.valid_children===G&&(e.valid_children=-1),e},this.get_type=function(d,e){return d=this.get_node(d),d?e?H.extend({type:d.type},this.settings.types[d.type]):d.type:!1},this.set_type=function(P,O){var N=this._model.data,M,L,K,J,I,p,o,n;if(H.isArray(P)){for(P=P.slice(),L=0,K=P.length;K>L;L++){this.set_type(P[L],O)}return !0}if(M=this.settings.types,P=this.get_node(P),!M[O]||!P){return !1}if(o=this.get_node(P,!0),o&&o.length&&(n=o.children(".jstree-anchor")),J=P.type,I=this.get_icon(P),P.type=O,(I===!0||!M[J]||M[J].icon!==G&&I===M[J].icon)&&this.set_icon(P,M[O].icon!==G?M[O].icon:!0),M[J]&&M[J].li_attr!==G&&"object"==typeof M[J].li_attr){for(p in M[J].li_attr){if(M[J].li_attr.hasOwnProperty(p)){if("id"===p){continue}"class"===p?(N[P.id].li_attr["class"]=(N[P.id].li_attr["class"]||"").replace(M[J].li_attr[p],""),o&&o.removeClass(M[J].li_attr[p])):N[P.id].li_attr[p]===M[J].li_attr[p]&&(N[P.id].li_attr[p]=null,o&&o.removeAttr(p))}}}if(M[J]&&M[J].a_attr!==G&&"object"==typeof M[J].a_attr){for(p in M[J].a_attr){if(M[J].a_attr.hasOwnProperty(p)){if("id"===p){continue}"class"===p?(N[P.id].a_attr["class"]=(N[P.id].a_attr["class"]||"").replace(M[J].a_attr[p],""),n&&n.removeClass(M[J].a_attr[p])):N[P.id].a_attr[p]===M[J].a_attr[p]&&("href"===p?(N[P.id].a_attr[p]="#",n&&n.attr("href","#")):(delete N[P.id].a_attr[p],n&&n.removeAttr(p)))}}}if(M[O].li_attr!==G&&"object"==typeof M[O].li_attr){for(p in M[O].li_attr){if(M[O].li_attr.hasOwnProperty(p)){if("id"===p){continue}N[P.id].li_attr[p]===G?(N[P.id].li_attr[p]=M[O].li_attr[p],o&&("class"===p?o.addClass(M[O].li_attr[p]):o.attr(p,M[O].li_attr[p]))):"class"===p&&(N[P.id].li_attr["class"]=M[O].li_attr[p]+" "+N[P.id].li_attr["class"],o&&o.addClass(M[O].li_attr[p]))}}}if(M[O].a_attr!==G&&"object"==typeof M[O].a_attr){for(p in M[O].a_attr){if(M[O].a_attr.hasOwnProperty(p)){if("id"===p){continue}N[P.id].a_attr[p]===G?(N[P.id].a_attr[p]=M[O].a_attr[p],n&&("class"===p?n.addClass(M[O].a_attr[p]):n.attr(p,M[O].a_attr[p]))):"href"===p&&"#"===N[P.id].a_attr[p]?(N[P.id].a_attr.href=M[O].a_attr.href,n&&n.attr("href",M[O].a_attr.href)):"class"===p&&(N[P.id].a_attr["class"]=M[O].a_attr["class"]+" "+N[P.id].a_attr["class"],n&&n.addClass(M[O].a_attr[p]))}}}return !0}},H.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(d,c){return d+" ("+c+")"}},H.jstree.plugins.unique=function(b,a){this.check=function(S,R,Q,P,O){if(a.check.call(this,S,R,Q,P,O)===!1){return !1}if(R=R&&R.id?R:this.get_node(R),Q=Q&&Q.id?Q:this.get_node(Q),!Q||!Q.children){return !0}var N="rename_node"===S?P:R.text,M=[],L=this.settings.unique.case_sensitive,K=this.settings.unique.trim_whitespace,J=this._model.data,I,p,d;for(I=0,p=Q.children.length;p>I;I++){d=J[Q.children[I]].text,L||(d=d.toLowerCase()),K&&(d=d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),M.push(d)}switch(L||(N=N.toLowerCase()),K&&(N=N.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),S){case"delete_node":return !0;case"rename_node":return d=R.text||"",L||(d=d.toLowerCase()),K&&(d=d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),I=-1===H.inArray(N,M)||R.text&&d===N,I||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+N+" already exists. Preventing: "+S,data:JSON.stringify({chk:S,pos:P,obj:R&&R.id?R.id:!1,par:Q&&Q.id?Q.id:!1})}),I;case"create_node":return I=-1===H.inArray(N,M),I||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+N+" already exists. Preventing: "+S,data:JSON.stringify({chk:S,pos:P,obj:R&&R.id?R.id:!1,par:Q&&Q.id?Q.id:!1})}),I;case"copy_node":return I=-1===H.inArray(N,M),I||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+N+" already exists. Preventing: "+S,data:JSON.stringify({chk:S,pos:P,obj:R&&R.id?R.id:!1,par:Q&&Q.id?Q.id:!1})}),I;case"move_node":return I=R.parent===Q.id&&(!O||!O.is_multi)||-1===H.inArray(N,M),I||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+N+" already exists. Preventing: "+S,data:JSON.stringify({chk:S,pos:P,obj:R&&R.id?R.id:!1,par:Q&&Q.id?Q.id:!1})}),I}return !0},this.create_node=function(V,U,T,S,R){if(!U||U.text===G){if(null===V&&(V=H.jstree.root),V=this.get_node(V),!V){return a.create_node.call(this,V,U,T,S,R)}if(T=T===G?"last":T,!T.toString().match(/^(before|after)$/)&&!R&&!this.is_loaded(V)){return a.create_node.call(this,V,U,T,S,R)}U||(U={});var Q,P,O,N,M,L=this._model.data,K=this.settings.unique.case_sensitive,J=this.settings.unique.trim_whitespace,I=this.settings.unique.duplicate,d;for(P=Q=this.get_string("New node"),O=[],N=0,M=V.children.length;M>N;N++){d=L[V.children[N]].text,K||(d=d.toLowerCase()),J&&(d=d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),O.push(d)}N=1,d=P,K||(d=d.toLowerCase()),J&&(d=d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));while(-1!==H.inArray(d,O)){P=I.call(this,Q,++N).toString(),d=P,K||(d=d.toLowerCase()),J&&(d=d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}U.text=P}return a.create_node.call(this,V,U,T,S,R)}};var s=z.createElement("DIV");if(s.setAttribute("unselectable","on"),s.setAttribute("role","presentation"),s.className="jstree-wholerow",s.innerHTML="&#160;",H.jstree.plugins.wholerow=function(a,d){this.bind=function(){d.bind.call(this),this.element.on("ready.jstree set_state.jstree",H.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",H.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",H.proxy(function(e,c){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",H.proxy(function(g,f){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var k=!1,j,h;for(j=0,h=f.selected.length;h>j;j++){k=this.get_node(f.selected[j],!0),k&&k.length&&k.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}},this)).on("open_node.jstree",H.proxy(function(e,c){this.get_node(c.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",H.proxy(function(e,c){"hover_node"===e.type&&this.is_disabled(c.node)||this.get_node(c.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",H.proxy(function(e){if(this._data.contextmenu){e.preventDefault();var f=H.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});H(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f)}},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var f=H.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});H(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f).focus()}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var f=H.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});H(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",H.proxy(function(e){e.stopImmediatePropagation();var f=H.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});H(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",H.proxy(function(b){return b.stopImmediatePropagation(),this.is_disabled(b.currentTarget)||this.hover_node(b.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",H.proxy(function(b){this.dehover_node(b.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),d.teardown.call(this)},this.redraw_node=function(c,l,k,j){if(c=d.redraw_node.apply(this,arguments)){var h=s.cloneNode(!0);-1!==H.inArray(c.id,this._data.core.selected)&&(h.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===c.id&&(h.className+=" jstree-wholerow-hovered"),c.insertBefore(h,c.childNodes[0])}return c}},window.customElements&&Object&&Object.create){var r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var a={core:{},plugins:[]},d;for(d in H.jstree.plugins){H.jstree.plugins.hasOwnProperty(d)&&this.attributes[d]&&(a.plugins.push(d),this.getAttribute(d)&&JSON.parse(this.getAttribute(d))&&(a[d]=JSON.parse(this.getAttribute(d))))}for(d in H.jstree.defaults.core){H.jstree.defaults.core.hasOwnProperty(d)&&this.attributes[d]&&(a.core[d]=JSON.parse(this.getAttribute(d))||this.getAttribute(d))}H(this).jstree(a)};try{window.customElements.define("vakata-jstree",function(){},{prototype:r})}catch(q){}}}});(function(d){var c={defaultDescription:"empty",counterDescription:"selected item(s): %count",maxHeight:150,counterIfNotFit:true,events:{onItemSelect:function(){},onItemDeselect:function(){},onListHide:function(){},onListShow:function(){}}};function g(k){var q=this;var n="multiSelect";var p={};var l={};var m={};var j=0;var o=function(){return""};(function r(){if(typeof generateUniqueId==="function"){o=function(){return generateUniqueId(n)}}})();this.addItem=function(z,y,w,s){if(l.hasOwnProperty(z)){return false}var x=o();var u=new h(z,x,y,w);p[x]=u;l[z]=x;if(s){this.selectItem(x)}return u};this.getItems=function(){return p};this.selectItem=function(s){j++;m[s]=p[s]};this.deselectItem=function(s){j--;delete m[s]};this.getItem=function(s){return p[s]};this.getSelectedItems=function(){return m};this.getSelectedItemsIds=function(){var s=[];for(var u in m){s.push(m[u].getRealId())}return s};this.getDeselectedDomIds=function(){const s=[];for(var u in p){if(this.isItemSelected(p[u].getDOMId())){continue}s.push(p[u].getDOMId())}return s};this.isItemSelected=function(s){return m.hasOwnProperty(s)};this.countSelected=function(){return j};this.getSelectedTitle=function(){var w=[];for(var s in m){var u=m[s];w.push(u.getTitle())}return w.join(", ")};this.getItemDomId=function(s){return l[s]};function h(x,u,w,s){this.getDescription=function(){return s};this.getTitle=function(){return w};this.getRealId=function(){return x};this.getDOMId=function(){return u}}}function a(){this.onItemSelect=function(h){};this.onItemDeselect=function(h){};this.onListShow=function(){};this.onListHide=function(){}}function f(p,J,h){var H=this;var w,z,x,s,m,I,u;var q={row:"row_",checkbox:"checkbox_"};var B=false;(function y(){K()})();function K(){p.empty();w=d('<div class="multiselect">');L();D();E();F();r();s.add(u).click(function(){if(B){H.hideList()}else{H.showList()}});p.append(w)}function E(){s=d('<div class="description"></div>');w.append(s)}function F(){u=d('<div class="arrow"></div>');w.append(u)}function j(M){return q.hasOwnProperty(M)?q[M]:""}function k(M,N){return j(M)+""+N}function n(M,N){return N.substr(j(M).length)}function r(){m=d('<div class="list"></div>');m.css("max-height",J.maxHeight+"px");I=d('<div class="itemsTable"></div>');m.append(I);w.append(m)}function L(){z=d('<div class="spinner"></div>');z.css("display","none");w.append(z)}function D(){x=d('<div class="shade"></div>');x.css("display","none");w.append(x)}function A(N){var O=n("checkbox",this.id);var M=d(this).prop("checked");if(M){h.onItemSelect(O)}else{h.onItemDeselect(O)}}function o(N){if(N.target.type&&N.target.type==="checkbox"){return}var M=n("row",this.id);var O=k("checkbox",M);d("#"+O).click()}function l(M){if(w.find(M.target).length!==0){return true}H.hideList()}function C(){var N=0;var M=w.get(0);while((M=M.parentNode)!==null){if(M.scrollHeight>N){N=M.scrollHeight}}return N}function G(M){M=M?M:J.maxHeight;var N=w.offset().top+w.height()+M;return C()>N}this.getDescriptionWidth=function(){return s.width()};this.setDescription=function(M){s.empty();s.text(M)};this.showSpinner=function(){z.show()};this.hideSpinner=function(){z.hide()};this.enable=function(){x.hide()};this.disable=function(){x.show()};this.showList=function(){u.addClass("up");if(G()){m.addClass("down")}else{m.addClass("up");var M=m.height();if(G(M)){m.removeClass("up").addClass("down")}}d(document).on("click",l);B=true;h.onListShow()};this.hideList=function(){u.removeClass("up");m.removeClass("down").removeClass("up");d(document).off("click",l);B=false;h.onListHide()};this.clearList=function(){I.empty()};this.addItem=function(M,U,S){var V=d("<div></div>");var N=k("row",M);V.attr("id",N);I.append(V);V.click(o);var Q=d("<div></div>");var O=d('<input type="checkbox" />');var T=k("checkbox",M);O.attr("id",T);if(S){O.prop("checked",true)}O.click(A);Q.append(O);V.append(Q);var R=d("<div></div>");var P=d("<div></div>");P.text(U);R.append(P);V.append(R)};this.changeItemState=function(O){var N=k("checkbox",O);var M=d("#"+N);M.click()};this.disableItem=function(Q){const P=k("checkbox",Q);const M=d("#"+P);M.prop("disabled",true);M.css({opacity:"40%",cursor:"default"});const N=k("row",Q);const O=d("#"+N);O.css({cursor:"default"});O.children().eq(1).children().eq(0).css({opacity:"26%"})};this.enableItem=function(Q){const P=k("checkbox",Q);const M=d("#"+P);M.prop("disabled",false);M.css({opacity:1,cursor:"pointer"});const N=k("row",Q);const O=d("#"+N);O.css({cursor:"pointer"});O.children().eq(1).children().eq(0).css({opacity:1})}}function e(m,k,n,j){var h=this;this.addItem=function(r,q,p,o){if(typeof p==="boolean"){o=p;p=q}else{if(typeof p==="undefined"){p=q;o=false}}return m.addItem(r,q,p,o)};this.refreshList=function(){var o=m.getItems();k.clearList();for(var p in o){k.addItem(p,o[p].getDescription(),m.isItemSelected(p))}l()};this.showSpinner=function(){k.disable();k.showSpinner()};this.hideSpinner=function(){k.hideSpinner();k.enable()};this.disable=function(){k.disable()};this.enable=function(){k.enable()};this.selectItem=function(q,p){var o=m.getItemDomId(q);if(m.isItemSelected(o)){return}if(p!==false){k.changeItemState(o)}else{m.selectItem(o)}};this.getSelectedItemsIds=function(){return m.getSelectedItemsIds()};this.disableItem=function(o){return k.disableItem(o)};function l(){var o=m.countSelected();if(o===0){k.setDescription(n.defaultDescription)}else{var p=m.getSelectedTitle();if(n.counterIfNotFit){if(p.length*9>k.getDescriptionWidth()){p=n.counterDescription.replace("%count",o).replace("%n",o)}}k.setDescription(p)}}j.onItemSelect=function(o){m.selectItem(o);l();n.events.onItemSelect(o,m.getItem(o).getRealId(),k,m)};j.onItemDeselect=function(o){m.deselectItem(o);l();n.events.onItemDeselect(o,m.getItem(o).getRealId(),k,m)};j.onListShow=function(){n.events.onListShow(k,m)};j.onListHide=function(){n.events.onListHide()}}e.createInstance=function(l,p,o,n){if(p===undefined){p={}}var k=new a();var j=new f(l,p,k);var m=new g(p);var h=new e(m,j,p,k);if(typeof o==="function"){o(h)}};d.multiSelectPlugin={};d.multiSelectPlugin.bind=function(j,h){return h.multiSelectPlugin(j)};d.fn.multiSelectPlugin=function(j,h,k){j=d.extend(true,d.extend(true,{},c),j);b(this,j,h,k);return this};function b(h,k,j,l){e.createInstance(h,k,function(m){if(j!==undefined){j.call(h,m,k)}},function(){if(l!==undefined){l.call()}});return true}})(jQuery);var JSEncryptExports={};(function(aq){function bg(L,z,bX){null!=L&&("number"==typeof L?this.fromNumber(L,z,bX):null==z&&"string"!=typeof L?this.fromString(L,256):this.fromString(L,z))}function bn(){return new bg(null)}function a8(L,z,b1,b0,bZ,bY){for(;--bY>=0;){var bX=z*this[L++]+b1[b0]+bZ;bZ=Math.floor(bX/67108864),b1[b0++]=67108863&bX}return bZ}function a7(b5,b4,b3,b2,b1,b0){for(var bZ=32767&b4,bY=b4>>15;--b0>=0;){var bX=32767&this[b5],L=this[b5++]>>15,z=bY*bX+L*bZ;bX=bZ*bX+((32767&z)<<15)+b3[b2]+(1073741823&b1),b1=(bX>>>30)+(z>>>15)+bY*L+(b1>>>30),b3[b2++]=1073741823&bX}return b1}function a6(b5,b4,b3,b2,b1,b0){for(var bZ=16383&b4,bY=b4>>14;--b0>=0;){var bX=16383&this[b5],L=this[b5++]>>14,z=bY*bX+L*bZ;bX=bZ*bX+((16383&z)<<14)+b3[b2]+b1,b1=(bX>>28)+(z>>14)+bY*L,b3[b2++]=268435455&bX}return b1}function Z(z){return a.charAt(z)}function aY(L,z){var bX=g[L.charCodeAt(z)];return null==bX?-1:bX}function d(L){for(var z=this.t-1;z>=0;--z){L[z]=this[z]}L.t=this.t,L.s=this.s}function h(z){this.t=1,this.s=0>z?-1:0,z>0?this[0]=z:-1>z?this[0]=z+DV:this.t=0}function bj(L){var z=bn();return z.fromInt(L),z}function bJ(L,z){var b1;if(16==z){b1=4}else{if(8==z){b1=3}else{if(256==z){b1=8}else{if(2==z){b1=1}else{if(32==z){b1=5}else{if(4!=z){return void this.fromRadix(L,z)}b1=2}}}}}this.t=0,this.s=0;for(var b0=L.length,bZ=!1,bY=0;--b0>=0;){var bX=8==b1?255&L[b0]:aY(L,b0);0>bX?"-"==L.charAt(b0)&&(bZ=!0):(bZ=!1,0==bY?this[this.t++]=bX:bY+b1>this.DB?(this[this.t-1]|=(bX&(1<<this.DB-bY)-1)<<bY,this[this.t++]=bX>>this.DB-bY):this[this.t-1]|=bX<<bY,bY+=b1,bY>=this.DB&&(bY-=this.DB))}8==b1&&0!=(128&L[0])&&(this.s=-1,bY>0&&(this[this.t-1]|=(1<<this.DB-bY)-1<<bY)),this.clamp(),bZ&&bg.ZERO.subTo(this,this)}function bB(){for(var z=this.s&this.DM;this.t>0&&this[this.t-1]==z;){--this.t}}function w(L){if(this.s<0){return"-"+this.negate().toString(L)}var z;if(16==L){z=4}else{if(8==L){z=3}else{if(2==L){z=1}else{if(32==L){z=5}else{if(4!=L){return this.toRadix(L)}z=2}}}}var b2,b1=(1<<z)-1,b0=!1,bZ="",bY=this.t,bX=this.DB-bY*this.DB%z;if(bY-->0){for(bX<this.DB&&(b2=this[bY]>>bX)>0&&(b0=!0,bZ=Z(b2));bY>=0;){z>bX?(b2=(this[bY]&(1<<bX)-1)<<z-bX,b2|=this[--bY]>>(bX+=this.DB-z)):(b2=this[bY]>>(bX-=z)&b1,0>=bX&&(bX+=this.DB,--bY)),b2>0&&(b0=!0),b0&&(bZ+=Z(b2))}}return b0?bZ:"0"}function bD(){var z=bn();return bg.ZERO.subTo(this,z),z}function bC(){return this.s<0?this.negate():this}function bO(L){var z=this.s-L.s;if(0!=z){return z}var bX=this.t;if(z=bX-L.t,0!=z){return this.s<0?-z:z}for(;--bX>=0;){if(0!=(z=this[bX]-L[bX])){return z}}return 0}function r(L){var z,bX=1;return 0!=(z=L>>>16)&&(L=z,bX+=16),0!=(z=L>>8)&&(L=z,bX+=8),0!=(z=L>>4)&&(L=z,bX+=4),0!=(z=L>>2)&&(L=z,bX+=2),0!=(z=L>>1)&&(L=z,bX+=1),bX}function bu(){return this.t<=0?0:this.DB*(this.t-1)+r(this[this.t-1]^this.s&this.DM)}function bw(L,z){var bX;for(bX=this.t-1;bX>=0;--bX){z[bX+L]=this[bX]}for(bX=L-1;bX>=0;--bX){z[bX]=0}z.t=this.t+L,z.s=this.s}function a3(L,z){for(var bX=L;bX<this.t;++bX){z[bX-L]=this[bX]}z.t=Math.max(this.t-L,0),z.s=this.s}function u(L,z){var b2,b1=L%this.DB,b0=this.DB-b1,bZ=(1<<b0)-1,bY=Math.floor(L/this.DB),bX=this.s<<b1&this.DM;for(b2=this.t-1;b2>=0;--b2){z[b2+bY+1]=this[b2]>>b0|bX,bX=(this[b2]&bZ)<<b1}for(b2=bY-1;b2>=0;--b2){z[b2]=0}z[bY]=bX,z.t=this.t+bY+1,z.s=this.s,z.clamp()}function bU(L,z){z.s=this.s;var b1=Math.floor(L/this.DB);if(b1>=this.t){return void (z.t=0)}var b0=L%this.DB,bZ=this.DB-b0,bY=(1<<b0)-1;z[0]=this[b1]>>b0;for(var bX=b1+1;bX<this.t;++bX){z[bX-b1-1]|=(this[bX]&bY)<<bZ,z[bX-b1]=this[bX]>>b0}b0>0&&(z[this.t-b1-1]|=(this.s&bY)<<bZ),z.t=this.t-b1,z.clamp()}function bt(L,z){for(var bZ=0,bY=0,bX=Math.min(L.t,this.t);bX>bZ;){bY+=this[bZ]-L[bZ],z[bZ++]=bY&this.DM,bY>>=this.DB}if(L.t<this.t){for(bY-=L.s;bZ<this.t;){bY+=this[bZ],z[bZ++]=bY&this.DM,bY>>=this.DB}bY+=this.s}else{for(bY+=this.s;bZ<L.t;){bY-=L[bZ],z[bZ++]=bY&this.DM,bY>>=this.DB}bY-=L.s}z.s=0>bY?-1:0,-1>bY?z[bZ++]=this.DV+bY:bY>0&&(z[bZ++]=bY),z.t=bZ,z.clamp()}function bK(L,z){var bZ=this.abs(),bY=L.abs(),bX=bZ.t;for(z.t=bX+bY.t;--bX>=0;){z[bX]=0}for(bX=0;bX<bY.t;++bX){z[bX+bZ.t]=bZ.am(0,bY[bX],z,bX,0,bZ.t)}z.s=0,z.clamp(),this.s!=L.s&&bg.ZERO.subTo(z,z)}function av(L){for(var z=this.abs(),bY=L.t=2*z.t;--bY>=0;){L[bY]=0}for(bY=0;bY<z.t-1;++bY){var bX=z.am(bY,z[bY],L,2*bY,0,1);(L[bY+z.t]+=z.am(bY+1,2*z[bY],L,2*bY+1,bX,z.t-bY-1))>=z.DV&&(L[bY+z.t]-=z.DV,L[bY+z.t+1]=1)}L.t>0&&(L[L.t-1]+=z.am(bY,z[bY],L,2*bY,0,1)),L.s=0,L.clamp()}function ba(cd,cc,cb){var ca=cd.abs();if(!(ca.t<=0)){var b9=this.abs();if(b9.t<ca.t){return null!=cc&&cc.fromInt(0),void (null!=cb&&this.copyTo(cb))}null==cb&&(cb=bn());var b8=bn(),b7=this.s,b6=cd.s,b5=this.DB-r(ca[ca.t-1]);b5>0?(ca.lShiftTo(b5,b8),b9.lShiftTo(b5,cb)):(ca.copyTo(b8),b9.copyTo(cb));var b4=b8.t,b3=b8[b4-1];if(0!=b3){var b2=b3*(1<<this.F1)+(b4>1?b8[b4-2]>>this.F2:0),b1=this.FV/b2,b0=(1<<this.F1)/b2,bZ=1<<this.F2,bY=cb.t,bX=bY-b4,L=null==cc?bn():cc;for(b8.dlShiftTo(bX,L),cb.compareTo(L)>=0&&(cb[cb.t++]=1,cb.subTo(L,cb)),bg.ONE.dlShiftTo(b4,L),L.subTo(b8,b8);b8.t<b4;){b8[b8.t++]=0}for(;--bX>=0;){var z=cb[--bY]==b3?this.DM:Math.floor(cb[bY]*b1+(cb[bY-1]+bZ)*b0);if((cb[bY]+=b8.am(0,z,cb,bX,0,b4))<z){for(b8.dlShiftTo(bX,L),cb.subTo(L,cb);cb[bY]<--z;){cb.subTo(L,cb)}}}null!=cc&&(cb.drShiftTo(b4,cc),b7!=b6&&bg.ZERO.subTo(cc,cc)),cb.t=b4,cb.clamp(),b5>0&&cb.rShiftTo(b5,cb),0>b7&&bg.ZERO.subTo(cb,cb)}}}function bi(L){var z=bn();return this.abs().divRemTo(L,null,z),this.s<0&&z.compareTo(bg.ZERO)>0&&L.subTo(z,z),z}function aU(z){this.m=z}function aJ(z){return z.s<0||z.compareTo(this.m)>=0?z.mod(this.m):z}function c(z){return z}function W(z){z.divRemTo(this.m,null,z)}function q(L,z,bX){L.multiplyTo(z,bX),this.reduce(bX)}function aG(L,z){L.squareTo(z),this.reduce(z)}function ac(){if(this.t<1){return 0}var L=this[0];if(0==(1&L)){return 0}var z=3&L;return z=z*(2-(15&L)*z)&15,z=z*(2-(255&L)*z)&255,z=z*(2-((65535&L)*z&65535))&65535,z=z*(2-L*z%this.DV)%this.DV,z>0?this.DV-z:-z}function M(z){this.m=z,this.mp=z.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<z.DB-15)-1,this.mt2=2*z.t}function bz(L){var z=bn();return L.abs().dlShiftTo(this.m.t,z),z.divRemTo(this.m,null,z),L.s<0&&z.compareTo(bg.ZERO)>0&&this.m.subTo(z,z),z}function bm(L){var z=bn();return L.copyTo(z),this.reduce(z),z}function bW(L){for(;L.t<=this.mt2;){L[L.t++]=0}for(var z=0;z<this.m.t;++z){var bY=32767&L[z],bX=bY*this.mpl+((bY*this.mph+(L[z]>>15)*this.mpl&this.um)<<15)&L.DM;for(bY=z+this.m.t,L[bY]+=this.m.am(0,bX,L,z,0,this.m.t);L[bY]>=L.DV;){L[bY]-=L.DV,L[++bY]++}}L.clamp(),L.drShiftTo(this.m.t,L),L.compareTo(this.m)>=0&&L.subTo(this.m,L)}function ad(L,z){L.squareTo(z),this.reduce(z)}function bA(L,z,bX){L.multiplyTo(z,bX),this.reduce(bX)}function ae(){return 0==(this.t>0?1&this[0]:this.s)}function an(L,z){if(L>4294967295||1>L){return bg.ONE}var b1=bn(),b0=bn(),bZ=z.convert(this),bY=r(L)-1;for(bZ.copyTo(b1);--bY>=0;){if(z.sqrTo(b1,b0),(L&1<<bY)>0){z.mulTo(b0,bZ,b1)}else{var bX=b1;b1=b0,b0=bX}}return z.revert(b1)}function aH(L,z){var bX;return bX=256>L||z.isEven()?new aU(z):new M(z),this.exp(L,bX)}function f(){var z=bn();return this.copyTo(z),z}function b(){if(this.s<0){if(1==this.t){return this[0]-this.DV}if(0==this.t){return -1}}else{if(1==this.t){return this[0]}if(0==this.t){return 0}}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bG(){return 0==this.t?this.s:this[0]<<24>>24}function ah(){return 0==this.t?this.s:this[0]<<16>>16}function aV(z){return Math.floor(Math.LN2*this.DB/Math.log(z))}function a0(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function J(L){if(null==L&&(L=10),0==this.signum()||2>L||L>36){return"0"}var z=this.chunkSize(L),b1=Math.pow(L,z),b0=bj(b1),bZ=bn(),bY=bn(),bX="";for(this.divRemTo(b0,bZ,bY);bZ.signum()>0;){bX=(b1+bY.intValue()).toString(L).substr(1)+bX,bZ.divRemTo(b0,bZ,bY)}return bY.intValue().toString(L)+bX}function aw(b3,b2){this.fromInt(0),null==b2&&(b2=10);for(var b1=this.chunkSize(b2),b0=Math.pow(b2,b1),bZ=!1,bY=0,bX=0,L=0;L<b3.length;++L){var z=aY(b3,L);0>z?"-"==b3.charAt(L)&&0==this.signum()&&(bZ=!0):(bX=b2*bX+z,++bY>=b1&&(this.dMultiply(b0),this.dAddOffset(bX,0),bY=0,bX=0))}bY>0&&(this.dMultiply(Math.pow(b2,bY)),this.dAddOffset(bX,0)),bZ&&bg.ZERO.subTo(this,this)}function aQ(L,z,bZ){if("number"==typeof z){if(2>L){this.fromInt(1)}else{for(this.fromNumber(L,bZ),this.testBit(L-1)||this.bitwiseTo(bg.ONE.shiftLeft(L-1),al,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(z);){this.dAddOffset(2,0),this.bitLength()>L&&this.subTo(bg.ONE.shiftLeft(L-1),this)}}}else{var bY=new Array,bX=7&L;bY.length=(L>>3)+1,z.nextBytes(bY),bX>0?bY[0]&=(1<<bX)-1:bY[0]=0,this.fromString(bY,256)}}function aL(){var L=this.t,z=new Array;z[0]=this.s;var bZ,bY=this.DB-L*this.DB%8,bX=0;if(L-->0){for(bY<this.DB&&(bZ=this[L]>>bY)!=(this.s&this.DM)>>bY&&(z[bX++]=bZ|this.s<<this.DB-bY);L>=0;){8>bY?(bZ=(this[L]&(1<<bY)-1)<<8-bY,bZ|=this[--L]>>(bY+=this.DB-8)):(bZ=this[L]>>(bY-=8)&255,0>=bY&&(bY+=this.DB,--L)),0!=(128&bZ)&&(bZ|=-256),0==bX&&(128&this.s)!=(128&bZ)&&++bX,(bX>0||bZ!=this.s)&&(z[bX++]=bZ)}}return z}function bH(z){return 0==this.compareTo(z)}function X(z){return this.compareTo(z)<0?this:z}function bv(z){return this.compareTo(z)>0?this:z}function aK(L,z,b0){var bZ,bY,bX=Math.min(L.t,this.t);for(bZ=0;bX>bZ;++bZ){b0[bZ]=z(this[bZ],L[bZ])}if(L.t<this.t){for(bY=L.s&this.DM,bZ=bX;bZ<this.t;++bZ){b0[bZ]=z(this[bZ],bY)}b0.t=this.t}else{for(bY=this.s&this.DM,bZ=bX;bZ<L.t;++bZ){b0[bZ]=z(bY,L[bZ])}b0.t=L.t}b0.s=z(this.s,L.s),b0.clamp()}function p(L,z){return L&z}function bP(L){var z=bn();return this.bitwiseTo(L,p,z),z}function al(L,z){return L|z}function aT(L){var z=bn();return this.bitwiseTo(L,al,z),z}function ab(L,z){return L^z}function C(L){var z=bn();return this.bitwiseTo(L,ab,z),z}function j(L,z){return L&~z}function aE(L){var z=bn();return this.bitwiseTo(L,j,z),z}function U(){for(var L=bn(),z=0;z<this.t;++z){L[z]=this.DM&~this[z]}return L.t=this.t,L.s=~this.s,L}function aO(L){var z=bn();return 0>L?this.rShiftTo(-L,z):this.lShiftTo(L,z),z}function S(L){var z=bn();return 0>L?this.lShiftTo(-L,z):this.rShiftTo(L,z),z}function bd(L){if(0==L){return -1}var z=0;return 0==(65535&L)&&(L>>=16,z+=16),0==(255&L)&&(L>>=8,z+=8),0==(15&L)&&(L>>=4,z+=4),0==(3&L)&&(L>>=2,z+=2),0==(1&L)&&++z,z}function ar(){for(var z=0;z<this.t;++z){if(0!=this[z]){return z*this.DB+bd(this[z])}}return this.s<0?this.t*this.DB:-1}function bk(L){for(var z=0;0!=L;){L&=L-1,++z}return z}function ap(){for(var L=0,z=this.s&this.DM,bX=0;bX<this.t;++bX){L+=bk(this[bX]^z)}return L}function aM(L){var z=Math.floor(L/this.DB);return z>=this.t?0!=this.s:0!=(this[z]&1<<L%this.DB)}function V(L,z){var bX=bg.ONE.shiftLeft(L);return this.bitwiseTo(bX,z,bX),bX}function a2(z){return this.changeBit(z,al)}function ai(z){return this.changeBit(z,j)}function aP(z){return this.changeBit(z,ab)}function T(L,z){for(var bZ=0,bY=0,bX=Math.min(L.t,this.t);bX>bZ;){bY+=this[bZ]+L[bZ],z[bZ++]=bY&this.DM,bY>>=this.DB}if(L.t<this.t){for(bY+=L.s;bZ<this.t;){bY+=this[bZ],z[bZ++]=bY&this.DM,bY>>=this.DB}bY+=this.s}else{for(bY+=this.s;bZ<L.t;){bY+=L[bZ],z[bZ++]=bY&this.DM,bY>>=this.DB}bY+=L.s}z.s=0>bY?-1:0,bY>0?z[bZ++]=bY:-1>bY&&(z[bZ++]=this.DV+bY),z.t=bZ,z.clamp()}function bh(L){var z=bn();return this.addTo(L,z),z}function aB(L){var z=bn();return this.subTo(L,z),z}function bI(L){var z=bn();return this.multiplyTo(L,z),z}function bV(){var z=bn();return this.squareTo(z),z}function be(L){var z=bn();return this.divRemTo(L,z,null),z}function bQ(L){var z=bn();return this.divRemTo(L,null,z),z}function bl(L){var z=bn(),bX=bn();return this.divRemTo(L,z,bX),new Array(z,bX)}function e(z){this[this.t]=this.am(0,z-1,this,0,0,this.t),++this.t,this.clamp()}function aS(L,z){if(0!=L){for(;this.t<=z;){this[this.t++]=0}for(this[z]+=L;this[z]>=this.DV;){this[z]-=this.DV,++z>=this.t&&(this[this.t++]=0),++this[z]}}}function aa(){}function bx(z){return z}function bL(L,z,bX){L.multiplyTo(z,bX)}function aj(L,z){L.squareTo(z)}function R(z){return this.exp(z,new aa)}function aR(L,z,bZ){var bY=Math.min(this.t+L.t,z);for(bZ.s=0,bZ.t=bY;bY>0;){bZ[--bY]=0}var bX;for(bX=bZ.t-this.t;bX>bY;++bY){bZ[bY+this.t]=this.am(0,L[bY],bZ,bY,0,this.t)}for(bX=Math.min(L.t,z);bX>bY;++bY){this.am(0,L[bY],bZ,bY,0,z-bY)}bZ.clamp()}function a1(L,z,bY){--z;var bX=bY.t=this.t+L.t-z;for(bY.s=0;--bX>=0;){bY[bX]=0}for(bX=Math.max(z-this.t,0);bX<L.t;++bX){bY[this.t+bX-z]=this.am(z-bX,L[bX],bY,0,0,this.t+bX-z)}bY.clamp(),bY.drShiftTo(1,bY)}function bS(z){this.r2=bn(),this.q3=bn(),bg.ONE.dlShiftTo(2*z.t,this.r2),this.mu=this.r2.divide(z),this.m=z}function I(L){if(L.s<0||L.t>2*this.m.t){return L.mod(this.m)}if(L.compareTo(this.m)<0){return L}var z=bn();return L.copyTo(z),this.reduce(z),z}function bN(z){return z}function E(z){for(z.drShiftTo(this.m.t-1,this.r2),z.t>this.m.t+1&&(z.t=this.m.t+1,z.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);z.compareTo(this.r2)<0;){z.dAddOffset(1,this.m.t+1)}for(z.subTo(this.r2,z);z.compareTo(this.m)>=0;){z.subTo(this.m,z)}}function aN(L,z){L.squareTo(z),this.reduce(z)}function y(L,z,bX){L.multiplyTo(z,bX),this.reduce(bX)}function O(ca,b9){var b8,b7,b6=ca.bitLength(),b5=bj(1);if(0>=b6){return b5}b8=18>b6?1:48>b6?3:144>b6?4:768>b6?5:6,b7=8>b6?new aU(b9):b9.isEven()?new bS(b9):new M(b9);var b4=new Array,b3=3,b2=b8-1,b1=(1<<b8)-1;if(b4[1]=b7.convert(this),b8>1){var b0=bn();for(b7.sqrTo(b4[1],b0);b1>=b3;){b4[b3]=bn(),b7.mulTo(b0,b4[b3-2],b4[b3]),b3+=2}}var bZ,bY,bX=ca.t-1,L=!0,z=bn();for(b6=r(ca[bX])-1;bX>=0;){for(b6>=b2?bZ=ca[bX]>>b6-b2&b1:(bZ=(ca[bX]&(1<<b6+1)-1)<<b2-b6,bX>0&&(bZ|=ca[bX-1]>>this.DB+b6-b2)),b3=b8;0==(1&bZ);){bZ>>=1,--b3}if((b6-=b3)<0&&(b6+=this.DB,--bX),L){b4[bZ].copyTo(b5),L=!1}else{for(;b3>1;){b7.sqrTo(b5,z),b7.sqrTo(z,b5),b3-=2}b3>0?b7.sqrTo(b5,z):(bY=b5,b5=z,z=bY),b7.mulTo(z,b4[bZ],b5)}for(;bX>=0&&0==(ca[bX]&1<<b6);){b7.sqrTo(b5,z),bY=b5,b5=z,z=bY,--b6<0&&(b6=this.DB-1,--bX)}}return b7.revert(b5)}function aC(L){var z=this.s<0?this.negate():this.clone(),b0=L.s<0?L.negate():L.clone();if(z.compareTo(b0)<0){var bZ=z;z=b0,b0=bZ}var bY=z.getLowestSetBit(),bX=b0.getLowestSetBit();if(0>bX){return z}for(bX>bY&&(bX=bY),bX>0&&(z.rShiftTo(bX,z),b0.rShiftTo(bX,b0));z.signum()>0;){(bY=z.getLowestSetBit())>0&&z.rShiftTo(bY,z),(bY=b0.getLowestSetBit())>0&&b0.rShiftTo(bY,b0),z.compareTo(b0)>=0?(z.subTo(b0,z),z.rShiftTo(1,z)):(b0.subTo(z,b0),b0.rShiftTo(1,b0))}return bX>0&&b0.lShiftTo(bX,b0),b0}function ak(L){if(0>=L){return 0}var z=this.DV%L,bY=this.s<0?L-1:0;if(this.t>0){if(0==z){bY=this[0]%L}else{for(var bX=this.t-1;bX>=0;--bX){bY=(z*bY+this[bX])%L}}}return bY}function bT(L){var z=L.isEven();if(this.isEven()&&z||0==L.signum()){return bg.ZERO}for(var b2=L.clone(),b1=this.clone(),b0=bj(1),bZ=bj(0),bY=bj(0),bX=bj(1);0!=b2.signum();){for(;b2.isEven();){b2.rShiftTo(1,b2),z?(b0.isEven()&&bZ.isEven()||(b0.addTo(this,b0),bZ.subTo(L,bZ)),b0.rShiftTo(1,b0)):bZ.isEven()||bZ.subTo(L,bZ),bZ.rShiftTo(1,bZ)}for(;b1.isEven();){b1.rShiftTo(1,b1),z?(bY.isEven()&&bX.isEven()||(bY.addTo(this,bY),bX.subTo(L,bX)),bY.rShiftTo(1,bY)):bX.isEven()||bX.subTo(L,bX),bX.rShiftTo(1,bX)}b2.compareTo(b1)>=0?(b2.subTo(b1,b2),z&&b0.subTo(bY,b0),bZ.subTo(bX,bZ)):(b1.subTo(b2,b1),z&&bY.subTo(b0,bY),bX.subTo(bZ,bX))}return 0!=b1.compareTo(bg.ONE)?bg.ZERO:bX.compareTo(L)>=0?bX.subtract(L):bX.signum()<0?(bX.addTo(L,bX),bX.signum()<0?bX.add(L):bX):bX}function bM(L){var z,bZ=this.abs();if(1==bZ.t&&bZ[0]<=aA[aA.length-1]){for(z=0;z<aA.length;++z){if(bZ[0]==aA[z]){return !0}}return !1}if(bZ.isEven()){return !1}for(z=1;z<aA.length;){for(var bY=aA[z],bX=z+1;bX<aA.length&&l>bY;){bY*=aA[bX++]}for(bY=bZ.modInt(bY);bX>z;){if(bY%aA[z++]==0){return !1}}}return bZ.millerRabin(L)}function aF(L){var z=this.subtract(bg.ONE),b2=z.getLowestSetBit();if(0>=b2){return !1}var b1=z.shiftRight(b2);L=L+1>>1,L>aA.length&&(L=aA.length);for(var b0=bn(),bZ=0;L>bZ;++bZ){b0.fromInt(aA[Math.floor(Math.random()*aA.length)]);var bY=b0.modPow(b1,this);if(0!=bY.compareTo(bg.ONE)&&0!=bY.compareTo(z)){for(var bX=1;bX++<b2&&0!=bY.compareTo(z);){if(bY=bY.modPowInt(2,this),0==bY.compareTo(bg.ONE)){return !1}}if(0!=bY.compareTo(z)){return !1}}}return !0}function bq(){this.i=0,this.j=0,this.S=new Array}function ag(L){var z,bY,bX;for(z=0;256>z;++z){this.S[z]=z}for(bY=0,z=0;256>z;++z){bY=bY+this.S[z]+L[z%L.length]&255,bX=this.S[z],this.S[z]=this.S[bY],this.S[bY]=bX}this.i=0,this.j=0}function bf(){var z;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,z=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=z,this.S[z+this.S[this.i]&255]}function Q(){return new bq}function bc(){if(null==k){for(k=Q();A>D;){var z=Math.floor(65536*Math.random());m[D++]=255&z}for(k.init(m),D=0;D<m.length;++D){m[D]=0}D=0}return k.next()}function aZ(L){var z;for(z=0;z<L.length;++z){L[z]=bc()}}function H(){}function x(L,z){return new bg(L,z)}function n(L,z){for(var bY="",bX=0;bX+z<L.length;){bY+=L.substring(bX,bX+z)+"\n",bX+=z}return bY+L.substring(bX,L.length)}function bs(z){return 16>z?"0"+z.toString(16):z.toString(16)}function bE(L,z){if(z<L.length+11){return console.error("Message too long for RSA"),null}for(var b1=new Array,b0=L.length-1;b0>=0&&z>0;){var bZ=L.charCodeAt(b0--);128>bZ?b1[--z]=bZ:bZ>127&&2048>bZ?(b1[--z]=63&bZ|128,b1[--z]=bZ>>6|192):(b1[--z]=63&bZ|128,b1[--z]=bZ>>6&63|128,b1[--z]=bZ>>12|224)}b1[--z]=0;for(var bY=new H,bX=new Array;z>2;){for(bX[0]=0;0==bX[0];){bY.nextBytes(bX)}b1[--z]=bX[0]}return b1[--z]=2,b1[--z]=0,new bg(b1)}function B(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ao(L,z){null!=L&&null!=z&&L.length>0&&z.length>0?(this.n=x(L,16),this.e=parseInt(z,16)):console.error("Invalid RSA public key")}function br(z){return z.modPowInt(this.e,this.n)}function am(L){var z=bE(L,this.n.bitLength()+7>>3);if(null==z){return null}var bY=this.doPublic(z);if(null==bY){return null}var bX=bY.toString(16);return 0==(1&bX.length)?bX:"0"+bX}function bp(L,z){for(var b0=L.toByteArray(),bZ=0;bZ<b0.length&&0==b0[bZ];){++bZ}if(b0.length-bZ!=z-1||2!=b0[bZ]){return null}for(++bZ;0!=b0[bZ];){if(++bZ>=b0.length){return null}}for(var bY="";++bZ<b0.length;){var bX=255&b0[bZ];128>bX?bY+=String.fromCharCode(bX):bX>191&&224>bX?(bY+=String.fromCharCode((31&bX)<<6|63&b0[bZ+1]),++bZ):(bY+=String.fromCharCode((15&bX)<<12|(63&b0[bZ+1])<<6|63&b0[bZ+2]),bZ+=2)}return bY}function aD(L,z,bX){null!=L&&null!=z&&L.length>0&&z.length>0?(this.n=x(L,16),this.e=parseInt(z,16),this.d=x(bX,16)):console.error("Invalid RSA private key")}function P(L,z,b2,b1,b0,bZ,bY,bX){null!=L&&null!=z&&L.length>0&&z.length>0?(this.n=x(L,16),this.e=parseInt(z,16),this.d=x(b2,16),this.p=x(b1,16),this.q=x(b0,16),this.dmp1=x(bZ,16),this.dmq1=x(bY,16),this.coeff=x(bX,16)):console.error("Invalid RSA private key")}function ay(b3,b2){var b1=new H,b0=b3>>1;this.e=parseInt(b2,16);for(var bZ=new bg(b2,16);;){for(;this.p=new bg(b3-b0,1,b1),0!=this.p.subtract(bg.ONE).gcd(bZ).compareTo(bg.ONE)||!this.p.isProbablePrime(10);){}for(;this.q=new bg(b0,1,b1),0!=this.q.subtract(bg.ONE).gcd(bZ).compareTo(bg.ONE)||!this.q.isProbablePrime(10);){}if(this.p.compareTo(this.q)<=0){var bY=this.p;this.p=this.q,this.q=bY}var bX=this.p.subtract(bg.ONE),L=this.q.subtract(bg.ONE),z=bX.multiply(L);if(0==z.gcd(bZ).compareTo(bg.ONE)){this.n=this.p.multiply(this.q),this.d=bZ.modInverse(z),this.dmp1=this.d.mod(bX),this.dmq1=this.d.mod(L),this.coeff=this.q.modInverse(this.p);break}}}function az(L){if(null==this.p||null==this.q){return L.modPow(this.d,this.n)}for(var z=L.mod(this.p).modPow(this.dmp1,this.p),bX=L.mod(this.q).modPow(this.dmq1,this.q);z.compareTo(bX)<0;){z=z.add(this.p)}return z.subtract(bX).multiply(this.coeff).mod(this.p).multiply(this.q).add(bX)}function s(L){var z=x(L,16),bX=this.doPrivate(z);return null==bX?null:bp(bX,this.n.bitLength()+7>>3)}function af(L){var z,bY,bX="";for(z=0;z+3<=L.length;z+=3){bY=parseInt(L.substring(z,z+3),16),bX+=a5.charAt(bY>>6)+a5.charAt(63&bY)}for(z+1==L.length?(bY=parseInt(L.substring(z,z+1),16),bX+=a5.charAt(bY<<2)):z+2==L.length&&(bY=parseInt(L.substring(z,z+2),16),bX+=a5.charAt(bY>>2)+a5.charAt((3&bY)<<4));(3&bX.length)>0;){bX+=K}return bX}function aX(L){var z,bZ,bY="",bX=0;for(z=0;z<L.length&&L.charAt(z)!=K;++z){v=a5.indexOf(L.charAt(z)),v<0||(0==bX?(bY+=Z(v>>2),bZ=3&v,bX=1):1==bX?(bY+=Z(bZ<<2|v>>4),bZ=15&v,bX=2):2==bX?(bY+=Z(bZ),bY+=Z(v>>2),bZ=3&v,bX=3):(bY+=Z(bZ<<2|v>>4),bY+=Z(15&v),bX=0))}return 1==bX&&(bY+=Z(bZ<<2)),bY}function N(L){var z,bY=aX(L),bX=new Array;for(z=0;2*z<bY.length;++z){bX[z]=parseInt(bY.substring(2*z,2*z+2),16)}return bX}var bF,o=244837814094590,aW=15715070==(16777215&o);aW&&"Microsoft Internet Explorer"==navigator.appName?(bg.prototype.am=a7,bF=30):aW&&"Netscape"!=navigator.appName?(bg.prototype.am=a8,bF=26):(bg.prototype.am=a6,bF=28),bg.prototype.DB=bF,bg.prototype.DM=(1<<bF)-1,bg.prototype.DV=1<<bF;var bR=52;bg.prototype.FV=Math.pow(2,bR),bg.prototype.F1=bR-bF,bg.prototype.F2=2*bF-bR;var a="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array,aI,F;for(aI="0".charCodeAt(0),F=0;9>=F;++F){g[aI++]=F}for(aI="a".charCodeAt(0),F=10;36>F;++F){g[aI++]=F}for(aI="A".charCodeAt(0),F=10;36>F;++F){g[aI++]=F}aU.prototype.convert=aJ,aU.prototype.revert=c,aU.prototype.reduce=W,aU.prototype.mulTo=q,aU.prototype.sqrTo=aG,M.prototype.convert=bz,M.prototype.revert=bm,M.prototype.reduce=bW,M.prototype.mulTo=bA,M.prototype.sqrTo=ad,bg.prototype.copyTo=d,bg.prototype.fromInt=h,bg.prototype.fromString=bJ,bg.prototype.clamp=bB,bg.prototype.dlShiftTo=bw,bg.prototype.drShiftTo=a3,bg.prototype.lShiftTo=u,bg.prototype.rShiftTo=bU,bg.prototype.subTo=bt,bg.prototype.multiplyTo=bK,bg.prototype.squareTo=av,bg.prototype.divRemTo=ba,bg.prototype.invDigit=ac,bg.prototype.isEven=ae,bg.prototype.exp=an,bg.prototype.toString=w,bg.prototype.negate=bD,bg.prototype.abs=bC,bg.prototype.compareTo=bO,bg.prototype.bitLength=bu,bg.prototype.mod=bi,bg.prototype.modPowInt=aH,bg.ZERO=bj(0),bg.ONE=bj(1),aa.prototype.convert=bx,aa.prototype.revert=bx,aa.prototype.mulTo=bL,aa.prototype.sqrTo=aj,bS.prototype.convert=I,bS.prototype.revert=bN,bS.prototype.reduce=E,bS.prototype.mulTo=y,bS.prototype.sqrTo=aN;var aA=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],l=(1<<26)/aA[aA.length-1];bg.prototype.chunkSize=aV,bg.prototype.toRadix=J,bg.prototype.fromRadix=aw,bg.prototype.fromNumber=aQ,bg.prototype.bitwiseTo=aK,bg.prototype.changeBit=V,bg.prototype.addTo=T,bg.prototype.dMultiply=e,bg.prototype.dAddOffset=aS,bg.prototype.multiplyLowerTo=aR,bg.prototype.multiplyUpperTo=a1,bg.prototype.modInt=ak,bg.prototype.millerRabin=aF,bg.prototype.clone=f,bg.prototype.intValue=b,bg.prototype.byteValue=bG,bg.prototype.shortValue=ah,bg.prototype.signum=a0,bg.prototype.toByteArray=aL,bg.prototype.equals=bH,bg.prototype.min=X,bg.prototype.max=bv,bg.prototype.and=bP,bg.prototype.or=aT,bg.prototype.xor=C,bg.prototype.andNot=aE,bg.prototype.not=U,bg.prototype.shiftLeft=aO,bg.prototype.shiftRight=S,bg.prototype.getLowestSetBit=ar,bg.prototype.bitCount=ap,bg.prototype.testBit=aM,bg.prototype.setBit=a2,bg.prototype.clearBit=ai,bg.prototype.flipBit=aP,bg.prototype.add=bh,bg.prototype.subtract=aB,bg.prototype.multiply=bI,bg.prototype.divide=be,bg.prototype.remainder=bQ,bg.prototype.divideAndRemainder=bl,bg.prototype.modPow=O,bg.prototype.modInverse=bT,bg.prototype.pow=R,bg.prototype.gcd=aC,bg.prototype.isProbablePrime=bM,bg.prototype.square=bV,bq.prototype.init=ag,bq.prototype.next=bf;var A=256,k,m,D;if(null==m){m=new Array,D=0;var bb;if(window.crypto&&window.crypto.getRandomValues){var a9=new Uint32Array(256);for(window.crypto.getRandomValues(a9),bb=0;bb<a9.length;++bb){m[D++]=255&a9[bb]}}var G=function(L){if(this.count=this.count||0,this.count>=256||D>=A){return void (window.removeEventListener?window.removeEventListener("mousemove",G):window.detachEvent&&window.detachEvent("onmousemove",G))}this.count+=1;var z=L.x+L.y;m[D++]=255&z};window.addEventListener?window.addEventListener("mousemove",G):window.attachEvent&&window.attachEvent("onmousemove",G)}H.prototype.nextBytes=aZ,B.prototype.doPublic=br,B.prototype.setPublic=ao,B.prototype.encrypt=am,B.prototype.doPrivate=az,B.prototype.setPrivate=aD,B.prototype.setPrivateEx=P,B.prototype.generate=ay,B.prototype.decrypt=s,function(){var L=function(bZ,bY,b5){var b4=new H,b3=bZ>>1;this.e=parseInt(bY,16);var b2=new bg(bY,16),b1=this,b0=function(){var b6=function(){if(b1.p.compareTo(b1.q)<=0){var ca=b1.p;b1.p=b1.q,b1.q=ca}var b9=b1.p.subtract(bg.ONE),cc=b1.q.subtract(bg.ONE),cb=b9.multiply(cc);0==cb.gcd(b2).compareTo(bg.ONE)?(b1.n=b1.p.multiply(b1.q),b1.d=b2.modInverse(cb),b1.dmp1=b1.d.mod(b9),b1.dmq1=b1.d.mod(cc),b1.coeff=b1.q.modInverse(b1.p),setTimeout(function(){b5()},0)):setTimeout(b0,0)},b8=function(){b1.q=bn(),b1.q.fromNumberAsync(b3,1,b4,function(){b1.q.subtract(bg.ONE).gcda(b2,function(b9){0==b9.compareTo(bg.ONE)&&b1.q.isProbablePrime(10)?setTimeout(b6,0):setTimeout(b8,0)})})},b7=function(){b1.p=bn(),b1.p.fromNumberAsync(bZ-b3,1,b4,function(){b1.p.subtract(bg.ONE).gcda(b2,function(b9){0==b9.compareTo(bg.ONE)&&b1.p.isProbablePrime(10)?setTimeout(b8,0):setTimeout(b7,0)})})};setTimeout(b7,0)};setTimeout(b0,0)};B.prototype.generateAsync=L;var z=function(bZ,bY){var b5=this.s<0?this.negate():this.clone(),b4=bZ.s<0?bZ.negate():bZ.clone();if(b5.compareTo(b4)<0){var b3=b5;b5=b4,b4=b3}var b2=b5.getLowestSetBit(),b1=b4.getLowestSetBit();if(0>b1){return void bY(b5)}b1>b2&&(b1=b2),b1>0&&(b5.rShiftTo(b1,b5),b4.rShiftTo(b1,b4));var b0=function(){(b2=b5.getLowestSetBit())>0&&b5.rShiftTo(b2,b5),(b2=b4.getLowestSetBit())>0&&b4.rShiftTo(b2,b4),b5.compareTo(b4)>=0?(b5.subTo(b4,b5),b5.rShiftTo(1,b5)):(b4.subTo(b5,b4),b4.rShiftTo(1,b4)),b5.signum()>0?setTimeout(b0,0):(b1>0&&b4.lShiftTo(b1,b4),setTimeout(function(){bY(b4)},0))};setTimeout(b0,10)};bg.prototype.gcda=z;var bX=function(bZ,bY,b5,b4){if("number"==typeof bY){if(2>bZ){this.fromInt(1)}else{this.fromNumber(bZ,b5),this.testBit(bZ-1)||this.bitwiseTo(bg.ONE.shiftLeft(bZ-1),al,this),this.isEven()&&this.dAddOffset(1,0);var b3=this,b2=function(){b3.dAddOffset(2,0),b3.bitLength()>bZ&&b3.subTo(bg.ONE.shiftLeft(bZ-1),b3),b3.isProbablePrime(bY)?setTimeout(function(){b4()},0):setTimeout(b2,0)};setTimeout(b2,0)}}else{var b1=new Array,b0=7&bZ;b1.length=(bZ>>3)+1,bY.nextBytes(b1),b0>0?b1[0]&=(1<<b0)-1:b1[0]=0,this.fromString(b1,256)}};bg.prototype.fromNumberAsync=bX}();var a5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="=",au=au||{};au.env=au.env||{};var bo=au,ax=Object.prototype,at="[object Function]",Y=["toString","valueOf"];au.env.parseUA=function(L){var z,b2=function(b4){var b3=0;return parseFloat(b4.replace(/\./g,function(){return 1==b3++?"":"."}))},b1=navigator,b0={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:b1&&b1.cajaVersion,secure:!1,os:null},bZ=L||navigator&&navigator.userAgent,bY=window&&window.location,bX=bY&&bY.href;return b0.secure=bX&&0===bX.toLowerCase().indexOf("https"),bZ&&(/windows|win32/i.test(bZ)?b0.os="windows":/macintosh/i.test(bZ)?b0.os="macintosh":/rhino/i.test(bZ)&&(b0.os="rhino"),/KHTML/.test(bZ)&&(b0.webkit=1),z=bZ.match(/AppleWebKit\/([^\s]*)/),z&&z[1]&&(b0.webkit=b2(z[1]),/ Mobile\//.test(bZ)?(b0.mobile="Apple",z=bZ.match(/OS ([^\s]*)/),z&&z[1]&&(z=b2(z[1].replace("_","."))),b0.ios=z,b0.ipad=b0.ipod=b0.iphone=0,z=bZ.match(/iPad|iPod|iPhone/),z&&z[0]&&(b0[z[0].toLowerCase()]=b0.ios)):(z=bZ.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),z&&(b0.mobile=z[0]),/webOS/.test(bZ)&&(b0.mobile="WebOS",z=bZ.match(/webOS\/([^\s]*);/),z&&z[1]&&(b0.webos=b2(z[1]))),/ Android/.test(bZ)&&(b0.mobile="Android",z=bZ.match(/Android ([^\s]*);/),z&&z[1]&&(b0.android=b2(z[1])))),z=bZ.match(/Chrome\/([^\s]*)/),z&&z[1]?b0.chrome=b2(z[1]):(z=bZ.match(/AdobeAIR\/([^\s]*)/),z&&(b0.air=z[0]))),b0.webkit||(z=bZ.match(/Opera[\s\/]([^\s]*)/),z&&z[1]?(b0.opera=b2(z[1]),z=bZ.match(/Version\/([^\s]*)/),z&&z[1]&&(b0.opera=b2(z[1])),z=bZ.match(/Opera Mini[^;]*/),z&&(b0.mobile=z[0])):(z=bZ.match(/MSIE\s([^;]*)/),z&&z[1]?b0.ie=b2(z[1]):(z=bZ.match(/Gecko\/([^\s]*)/),z&&(b0.gecko=1,z=bZ.match(/rv:([^\s\)]*)/),z&&z[1]&&(b0.gecko=b2(z[1]))))))),b0},au.env.ua=au.env.parseUA(),au.isFunction=function(z){return"function"==typeof z||ax.toString.apply(z)===at},au._IEEnumFix=au.env.ua.ie?function(L,z){var bZ,bY,bX;for(bZ=0;bZ<Y.length;bZ+=1){bY=Y[bZ],bX=z[bY],bo.isFunction(bX)&&bX!=ax[bY]&&(L[bY]=bX)}}:function(){},au.extend=function(L,z,bZ){if(!z||!L){throw new Error("extend failed, please check that all dependencies are included.")}var bY,bX=function(){};if(bX.prototype=z.prototype,L.prototype=new bX,L.prototype.constructor=L,L.superclass=z.prototype,z.prototype.constructor==ax.constructor&&(z.prototype.constructor=z),bZ){for(bY in bZ){bo.hasOwnProperty(bZ,bY)&&(L.prototype[bY]=bZ[bY])}bo._IEEnumFix(L.prototype,bZ)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(L){var z=L.toString(16);return z.length%2==1&&(z="0"+z),z},this.bigIntToMinTwosComplementsHex=function(L){var z=L.toString(16);if("-"!=z.substr(0,1)){z.length%2==1?z="0"+z:z.match(/^[0-7]/)||(z="00"+z)}else{var b2=z.substr(1),b1=b2.length;b1%2==1?b1+=1:z.match(/^[0-7]/)||(b1+=2);for(var b0="",bZ=0;b1>bZ;bZ++){b0+="f"}var bY=new bg(b0,16),bX=bY.xor(L).add(bg.ONE);z=bX.toString(16).replace(/^-/,"")}return z},this.getPEMStringFromHex=function(L,z){var bZ=CryptoJS.enc.Hex.parse(L),bY=CryptoJS.enc.Base64.stringify(bZ),bX=bY.replace(/(.{64})/g,"$1\r\n");return bX=bX.replace(/\r\n$/,""),"-----BEGIN "+z+"-----\r\n"+bX+"\r\n-----END "+z+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){var z="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV){throw"this.hV is null or undefined."}if(this.hV.length%2==1){throw"value hex must be even length: n="+z.length+",v="+this.hV}var L=this.hV.length/2,bZ=L.toString(16);if(bZ.length%2==1&&(bZ="0"+bZ),128>L){return bZ}var bY=bZ.length/2;if(bY>15){throw"ASN.1 length too long to represent by 8x: n = "+L.toString(16)}var bX=128+bY;return bX.toString(16)+bZ},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(z){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(L){this.hTLV=null,this.isModified=!0,this.s=L,this.hV=stohex(this.s)},this.setStringHex=function(L){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=L},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof z&&("undefined"!=typeof z.str?this.setString(z.str):"undefined"!=typeof z.hex&&this.setStringHex(z.hex))},au.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(L){utc=L.getTime()+60000*L.getTimezoneOffset();var z=new Date(utc);return z},this.formatDate=function(b4,b3){var b2=this.zeroPadding,b1=this.localDateToUTC(b4),b0=String(b1.getFullYear());"utc"==b3&&(b0=b0.substr(2,2));var bZ=b2(String(b1.getMonth()+1),2),bY=b2(String(b1.getDate()),2),bX=b2(String(b1.getHours()),2),L=b2(String(b1.getMinutes()),2),z=b2(String(b1.getSeconds()),2);return b0+bZ+bY+bX+L+z+"Z"},this.zeroPadding=function(L,z){return L.length>=z?L:new Array(z-L.length+1).join("0")+L},this.getString=function(){return this.s},this.setString=function(z){this.hTLV=null,this.isModified=!0,this.s=z,this.hV=stohex(this.s)},this.setByDateValue=function(L,z,b1,b0,bZ,bY){var bX=new Date(Date.UTC(L,z-1,b1,b0,bZ,bY,0));this.setByDate(bX)},this.getFreshValueHex=function(){return this.hV}},au.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(z){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(L){this.hTLV=null,this.isModified=!0,this.asn1Array=L},this.appendASN1Object=function(L){this.hTLV=null,this.isModified=!0,this.asn1Array.push(L)},this.asn1Array=new Array,"undefined"!=typeof z&&"undefined"!=typeof z.array&&(this.asn1Array=z.array)},au.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},au.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(z){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(L){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(L)},this.setByInteger=function(bX){var L=new bg(String(bX),10);this.setByBigInteger(L)},this.setValueHex=function(L){this.hV=L},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof z&&("undefined"!=typeof z.bigint?this.setByBigInteger(z.bigint):"undefined"!=typeof z["int"]?this.setByInteger(z["int"]):"undefined"!=typeof z.hex&&this.setValueHex(z.hex))},au.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(z){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(L){this.hTLV=null,this.isModified=!0,this.hV=L},this.setUnusedBitsAndHexValue=function(bX,L){if(0>bX||bX>7){throw"unused bits shall be from 0 to 7: u = "+bX}var bY="0"+bX;this.hTLV=null,this.isModified=!0,this.hV=bY+L},this.setByBinaryString=function(bX){bX=bX.replace(/0+$/,"");var L=8-bX.length%8;8==L&&(L=0);for(var b1=0;L>=b1;b1++){bX+="0"}for(var b0="",b1=0;b1<bX.length-1;b1+=8){var bZ=bX.substr(b1,8),bY=parseInt(bZ,2).toString(16);1==bY.length&&(bY="0"+bY),b0+=bY}this.hTLV=null,this.isModified=!0,this.hV="0"+L+b0},this.setByBooleanArray=function(bX){for(var L="",bY=0;bY<bX.length;bY++){L+=1==bX[bY]?"1":"0"}this.setByBinaryString(L)},this.newFalseArray=function(bX){for(var L=new Array(bX),bY=0;bX>bY;bY++){L[bY]=!1}return L},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof z&&("undefined"!=typeof z.hex?this.setHexValueIncludingUnusedBits(z.hex):"undefined"!=typeof z.bin?this.setByBinaryString(z.bin):"undefined"!=typeof z.array&&this.setByBooleanArray(z.array))},au.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(z){KJUR.asn1.DEROctetString.superclass.constructor.call(this,z),this.hT="04"},au.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},au.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(L){var z=function(bZ){var bY=bZ.toString(16);return 1==bY.length&&(bY="0"+bY),bY},bX=function(bY){var b5="",b4=new bg(bY,10),b3=b4.toString(2),b2=7-b3.length%7;7==b2&&(b2=0);for(var b1="",b0=0;b2>b0;b0++){b1+="0"}b3=b1+b3;for(var b0=0;b0<b3.length-1;b0+=7){var bZ=b3.substr(b0,7);b0!=b3.length-7&&(bZ="1"+bZ),b5+=z(parseInt(bZ,2))}return b5};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(bY){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=bY},this.setValueOidString=function(bY){if(!bY.match(/^[0-9.]+$/)){throw"malformed oid string: "+bY}var b2="",b1=bY.split("."),b0=40*parseInt(b1[0])+parseInt(b1[1]);b2+=z(b0),b1.splice(0,2);for(var bZ=0;bZ<b1.length;bZ++){b2+=bX(b1[bZ])}this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b2},this.setValueName=function(bZ){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[bZ]){throw"DERObjectIdentifier oidName undefined: "+bZ}var bY=KJUR.asn1.x509.OID.name2oidList[bZ];this.setValueOidString(bY)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof L&&("undefined"!=typeof L.oid?this.setValueOidString(L.oid):"undefined"!=typeof L.hex?this.setValueHex(L.hex):"undefined"!=typeof L.name&&this.setValueName(L.name))},au.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(z){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,z),this.hT="0c"},au.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(z){KJUR.asn1.DERNumericString.superclass.constructor.call(this,z),this.hT="12"},au.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(z){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,z),this.hT="13"},au.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(z){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,z),this.hT="14"},au.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(z){KJUR.asn1.DERIA5String.superclass.constructor.call(this,z),this.hT="16"},au.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(z){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,z),this.hT="17",this.setByDate=function(L){this.hTLV=null,this.isModified=!0,this.date=L,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},"undefined"!=typeof z&&("undefined"!=typeof z.str?this.setString(z.str):"undefined"!=typeof z.hex?this.setStringHex(z.hex):"undefined"!=typeof z.date&&this.setByDate(z.date))},au.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(z){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,z),this.hT="18",this.setByDate=function(L){this.hTLV=null,this.isModified=!0,this.date=L,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},"undefined"!=typeof z&&("undefined"!=typeof z.str?this.setString(z.str):"undefined"!=typeof z.hex?this.setStringHex(z.hex):"undefined"!=typeof z.date&&this.setByDate(z.date))},au.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(z){KJUR.asn1.DERSequence.superclass.constructor.call(this,z),this.hT="30",this.getFreshValueHex=function(){for(var bX="",L=0;L<this.asn1Array.length;L++){var bY=this.asn1Array[L];bX+=bY.getEncodedHex()}return this.hV=bX,this.hV}},au.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(z){KJUR.asn1.DERSet.superclass.constructor.call(this,z),this.hT="31",this.getFreshValueHex=function(){for(var bX=new Array,L=0;L<this.asn1Array.length;L++){var bY=this.asn1Array[L];bX.push(bY.getEncodedHex())}return bX.sort(),this.hV=bX.join(""),this.hV}},au.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(z){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(bX,L,bY){this.hT=L,this.isExplicit=bX,this.asn1Object=bY,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=bY.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,L),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof z&&("undefined"!=typeof z.tag&&(this.hT=z.tag),"undefined"!=typeof z.explicit&&(this.isExplicit=z.explicit),"undefined"!=typeof z.obj&&(this.asn1Object=z.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},au.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(L){var z,bX={};bX.decode=function(b5){var b4;if(z===L){var b3="0123456789ABCDEF",b2=" \f\n\r	 \u2028\u2029";for(z=[],b4=0;16>b4;++b4){z[b3.charAt(b4)]=b4}for(b3=b3.toLowerCase(),b4=10;16>b4;++b4){z[b3.charAt(b4)]=b4}for(b4=0;b4<b2.length;++b4){z[b2.charAt(b4)]=-1}}var b1=[],b0=0,bZ=0;for(b4=0;b4<b5.length;++b4){var bY=b5.charAt(b4);if("="==bY){break}if(bY=z[bY],-1!=bY){if(bY===L){throw"Illegal character at offset "+b4}b0|=bY,++bZ>=2?(b1[b1.length]=b0,b0=0,bZ=0):b0<<=4}}if(bZ){throw"Hex encoding incomplete: 4 bits missing"}return b1},window.Hex=bX}(),function(L){var z,bX={};bX.decode=function(b5){var b4;if(z===L){var b3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b2="= \f\n\r	 \u2028\u2029";for(z=[],b4=0;64>b4;++b4){z[b3.charAt(b4)]=b4}for(b4=0;b4<b2.length;++b4){z[b2.charAt(b4)]=-1}}var b1=[],b0=0,bZ=0;for(b4=0;b4<b5.length;++b4){var bY=b5.charAt(b4);if("="==bY){break}if(bY=z[bY],-1!=bY){if(bY===L){throw"Illegal character at offset "+b4}b0|=bY,++bZ>=4?(b1[b1.length]=b0>>16,b1[b1.length]=b0>>8&255,b1[b1.length]=255&b0,b0=0,bZ=0):b0<<=6}}switch(bZ){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:b1[b1.length]=b0>>10;break;case 3:b1[b1.length]=b0>>16,b1[b1.length]=b0>>8&255}return b1},bX.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,bX.unarmor=function(bZ){var bY=bX.re.exec(bZ);if(bY){if(bY[1]){bZ=bY[1]}else{if(!bY[2]){throw"RegExp out of sync"}bZ=bY[2]}}return bX.decode(bZ)},window.Base64=bX}(),function(L){function z(b1,b2){b1 instanceof z?(this.enc=b1.enc,this.pos=b1.pos):(this.enc=b1,this.pos=b2)}function b0(b2,b1,b5,b4,b3){this.stream=b2,this.header=b1,this.length=b5,this.tag=b4,this.sub=b3}var bZ=100,bY="…",bX={tag:function(b2,b1){var b3=document.createElement(b2);return b3.className=b1,b3},text:function(b1){return document.createTextNode(b1)}};z.prototype.get=function(b1){if(b1===L&&(b1=this.pos++),b1>=this.enc.length){throw"Requesting byte offset "+b1+" on a stream of length "+this.enc.length}return this.enc[b1]},z.prototype.hexDigits="0123456789ABCDEF",z.prototype.hexByte=function(b1){return this.hexDigits.charAt(b1>>4&15)+this.hexDigits.charAt(15&b1)},z.prototype.hexDump=function(b2,b1,b5){for(var b4="",b3=b2;b1>b3;++b3){if(b4+=this.hexByte(this.get(b3)),b5!==!0){switch(15&b3){case 7:b4+="  ";break;case 15:b4+="\n";break;default:b4+=" "}}}return b4},z.prototype.parseStringISO=function(b2,b1){for(var b4="",b3=b2;b1>b3;++b3){b4+=String.fromCharCode(this.get(b3))}return b4},z.prototype.parseStringUTF=function(b2,b1){for(var b5="",b4=b2;b1>b4;){var b3=this.get(b4++);b5+=String.fromCharCode(128>b3?b3:b3>191&&224>b3?(31&b3)<<6|63&this.get(b4++):(15&b3)<<12|(63&this.get(b4++))<<6|63&this.get(b4++))}return b5},z.prototype.parseStringBMP=function(b2,b1){for(var b6="",b5=b2;b1>b5;b5+=2){var b4=this.get(b5),b3=this.get(b5+1);b6+=String.fromCharCode((b4<<8)+b3)}return b6},z.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,z.prototype.parseTime=function(b2,b1){var b4=this.parseStringISO(b2,b1),b3=this.reTime.exec(b4);return b3?(b4=b3[1]+"-"+b3[2]+"-"+b3[3]+" "+b3[4],b3[5]&&(b4+=":"+b3[5],b3[6]&&(b4+=":"+b3[6],b3[7]&&(b4+="."+b3[7]))),b3[8]&&(b4+=" UTC","Z"!=b3[8]&&(b4+=b3[8],b3[9]&&(b4+=":"+b3[9]))),b4):"Unrecognized time: "+b4},z.prototype.parseInteger=function(b2,b1){var b6=b1-b2;if(b6>4){b6<<=3;var b5=this.get(b2);if(0===b5){b6-=8}else{for(;128>b5;){b5<<=1,--b6}}return"("+b6+" bit)"}for(var b4=0,b3=b2;b1>b3;++b3){b4=b4<<8|this.get(b3)}return b4},z.prototype.parseBitString=function(b9,b8){var b7=this.get(b9),b6=(b8-b9-1<<3)-b7,b5="("+b6+" bit)";if(20>=b6){var b4=b7;b5+=" ";for(var b3=b8-1;b3>b9;--b3){for(var b2=this.get(b3),b1=b4;8>b1;++b1){b5+=b2>>b1&1?"1":"0"}b4=0}}return b5},z.prototype.parseOctetString=function(b2,b1){var b5=b1-b2,b4="("+b5+" byte) ";b5>bZ&&(b1=b2+bZ);for(var b3=b2;b1>b3;++b3){b4+=this.hexByte(this.get(b3))}return b5>bZ&&(b4+=bY),b4},z.prototype.parseOID=function(b2,b1){for(var b8="",b7=0,b6=0,b5=b2;b1>b5;++b5){var b4=this.get(b5);if(b7=b7<<7|127&b4,b6+=7,!(128&b4)){if(""===b8){var b3=80>b7?40>b7?0:1:2;b8=b3+"."+(b7-40*b3)}else{b8+="."+(b6>=31?"bigint":b7)}b7=b6=0}}return b8},b0.prototype.typeName=function(){if(this.tag===L){return"unknown"}var b1=this.tag>>6,b2=(this.tag>>5&1,31&this.tag);switch(b1){case 0:switch(b2){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+b2.toString(16)}case 1:return"Application_"+b2.toString(16);case 2:return"["+b2+"]";case 3:return"Private_"+b2.toString(16)}},b0.prototype.reSeemsASCII=/^[ -~]+$/,b0.prototype.content=function(){if(this.tag===L){return null}var b1=this.tag>>6,b5=31&this.tag,b4=this.posContent(),b3=Math.abs(this.length);if(0!==b1){if(null!==this.sub){return"("+this.sub.length+" elem)"}var b2=this.stream.parseStringISO(b4,b4+Math.min(b3,bZ));return this.reSeemsASCII.test(b2)?b2.substring(0,2*bZ)+(b2.length>2*bZ?bY:""):this.stream.parseOctetString(b4,b4+b3)}switch(b5){case 1:return 0===this.stream.get(b4)?"false":"true";case 2:return this.stream.parseInteger(b4,b4+b3);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(b4,b4+b3);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(b4,b4+b3);case 6:return this.stream.parseOID(b4,b4+b3);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(b4,b4+b3);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(b4,b4+b3);case 30:return this.stream.parseStringBMP(b4,b4+b3);case 23:case 24:return this.stream.parseTime(b4,b4+b3)}return null},b0.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},b0.prototype.print=function(b1){if(b1===L&&(b1=""),document.writeln(b1+this),null!==this.sub){b1+="  ";for(var b3=0,b2=this.sub.length;b2>b3;++b3){this.sub[b3].print(b1)}}},b0.prototype.toPrettyString=function(b1){b1===L&&(b1="");var b4=b1+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(b4+="+"),b4+=this.length,32&this.tag?b4+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(b4+=" (encapsulates)"),b4+="\n",null!==this.sub){b1+="  ";for(var b3=0,b2=this.sub.length;b2>b3;++b3){b4+=this.sub[b3].toPrettyString(b1)}}return b4},b0.prototype.toDOM=function(){var ca=bX.tag("div","node");ca.asn1=this;var b9=bX.tag("div","head"),b8=this.typeName().replace(/_/g," ");b9.innerHTML=b8;var b7=this.content();if(null!==b7){b7=String(b7).replace(/</g,"&lt;");var b6=bX.tag("span","preview");b6.appendChild(bX.text(b7)),b9.appendChild(b6)}ca.appendChild(b9),this.node=ca,this.head=b9;var b5=bX.tag("div","value");if(b8="Offset: "+this.stream.pos+"<br/>",b8+="Length: "+this.header+"+",b8+=this.length>=0?this.length:-this.length+" (undefined)",32&this.tag?b8+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(b8+="<br/>(encapsulates)"),null!==b7&&(b8+="<br/>Value:<br/><b>"+b7+"</b>","object"==typeof oids&&6==this.tag)){var b4=oids[b7];b4&&(b4.d&&(b8+="<br/>"+b4.d),b4.c&&(b8+="<br/>"+b4.c),b4.w&&(b8+="<br/>(warning!)"))}b5.innerHTML=b8,ca.appendChild(b5);var b3=bX.tag("div","sub");if(null!==this.sub){for(var b2=0,b1=this.sub.length;b1>b2;++b2){b3.appendChild(this.sub[b2].toDOM())}}return ca.appendChild(b3),b9.onclick=function(){ca.className="node collapsed"==ca.className?"node":"node collapsed"},ca},b0.prototype.posStart=function(){return this.stream.pos},b0.prototype.posContent=function(){return this.stream.pos+this.header},b0.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},b0.prototype.fakeHover=function(b1){this.node.className+=" hover",b1&&(this.head.className+=" hover")},b0.prototype.fakeOut=function(b2){var b1=/ ?hover/;this.node.className=this.node.className.replace(b1,""),b2&&(this.head.className=this.head.className.replace(b1,""))},b0.prototype.toHexDOM_sub=function(b2,b1,b6,b5,b4){if(!(b5>=b4)){var b3=bX.tag("span",b1);b3.appendChild(bX.text(b6.hexDump(b5,b4))),b2.appendChild(b3)}},b0.prototype.toHexDOM=function(b1){var b6=bX.tag("span","hex");if(b1===L&&(b1=b6),this.head.hexNode=b6,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},b6.asn1=this,b6.onmouseover=function(){var b7=!b1.selected;b7&&(b1.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(b7)},b6.onmouseout=function(){var b7=b1.selected==this.asn1;this.asn1.fakeOut(b7),b7&&(b1.selected=null,this.className="hex")},this.toHexDOM_sub(b6,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(b6,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub){b6.appendChild(bX.text(this.stream.hexDump(this.posContent(),this.posEnd())))}else{if(this.sub.length>0){var b5=this.sub[0],b4=this.sub[this.sub.length-1];this.toHexDOM_sub(b6,"intro",this.stream,this.posContent(),b5.posStart());for(var b3=0,b2=this.sub.length;b2>b3;++b3){b6.appendChild(this.sub[b3].toHexDOM(b1))}this.toHexDOM_sub(b6,"outro",this.stream,b4.posEnd(),this.posEnd())}}return b6},b0.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},b0.decodeLength=function(b2){var b1=b2.get(),b4=127&b1;if(b4==b1){return b4}if(b4>3){throw"Length over 24 bits not supported at position "+(b2.pos-1)}if(0===b4){return -1}b1=0;for(var b3=0;b4>b3;++b3){b1=b1<<8|b2.get()}return b1},b0.hasContent=function(b1,b7,b6){if(32&b1){return !0}if(3>b1||b1>4){return !1}var b5=new z(b6);3==b1&&b5.get();var b4=b5.get();if(b4>>6&1){return !1}try{var b3=b0.decodeLength(b5);return b5.pos-b6.pos+b3==b7}catch(b2){return !1}},b0.decode=function(ca){ca instanceof z||(ca=new z(ca,0));var b9=new z(ca),b8=ca.get(),b7=b0.decodeLength(ca),b6=ca.pos-b9.pos,b5=null;if(b0.hasContent(b8,b7,ca)){var b4=ca.pos;if(3==b8&&ca.get(),b5=[],b7>=0){for(var b3=b4+b7;ca.pos<b3;){b5[b5.length]=b0.decode(ca)}if(ca.pos!=b3){throw"Content size is not correct for container starting at offset "+b4}}else{try{for(;;){var b2=b0.decode(ca);if(0===b2.tag){break}b5[b5.length]=b2}b7=b4-ca.pos}catch(b1){throw"Exception while decoding undefined length content: "+b1}}}else{ca.pos+=b7}return new b0(b9,b6,b7,b8,b5)},b0.test=function(){for(var b1=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],b5=0,b4=b1.length;b4>b5;++b5){var b3=new z(b1[b5].value,0),b2=b0.decodeLength(b3);b2!=b1[b5].expected&&document.write("In test["+b5+"] expected "+b1[b5].expected+" got "+b2+"\n")}},window.ASN1=b0}(),ASN1.prototype.getHexStringValue=function(){var L=this.toHexString(),z=2*this.header,bX=2*this.length;return L.substr(z,bX)},B.prototype.parseKey=function(b9){try{var b8=0,b7=0,b6=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,b5=b6.test(b9)?Hex.decode(b9):Base64.unarmor(b9),b4=ASN1.decode(b5);if(3===b4.sub.length&&(b4=b4.sub[2].sub[0]),9===b4.sub.length){b8=b4.sub[1].getHexStringValue(),this.n=x(b8,16),b7=b4.sub[2].getHexStringValue(),this.e=parseInt(b7,16);var b3=b4.sub[3].getHexStringValue();this.d=x(b3,16);var b2=b4.sub[4].getHexStringValue();this.p=x(b2,16);var b1=b4.sub[5].getHexStringValue();this.q=x(b1,16);var b0=b4.sub[6].getHexStringValue();this.dmp1=x(b0,16);var bZ=b4.sub[7].getHexStringValue();this.dmq1=x(bZ,16);var bY=b4.sub[8].getHexStringValue();this.coeff=x(bY,16)}else{if(2!==b4.sub.length){return !1}var bX=b4.sub[1],L=bX.sub[0];b8=L.sub[0].getHexStringValue(),this.n=x(b8,16),b7=L.sub[1].getHexStringValue(),this.e=parseInt(b7,16)}return !0}catch(z){return !1}},B.prototype.getPrivateBaseKey=function(){var L={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},z=new KJUR.asn1.DERSequence(L);return z.getEncodedHex()},B.prototype.getPrivateBaseKeyB64=function(){return af(this.getPrivateBaseKey())},B.prototype.getPublicBaseKey=function(){var L={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},z=new KJUR.asn1.DERSequence(L);L={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var bZ=new KJUR.asn1.DERSequence(L);L={hex:"00"+bZ.getEncodedHex()};var bY=new KJUR.asn1.DERBitString(L);L={array:[z,bY]};var bX=new KJUR.asn1.DERSequence(L);return bX.getEncodedHex()},B.prototype.getPublicBaseKeyB64=function(){return af(this.getPublicBaseKey())},B.prototype.wordwrap=function(L,z){if(z=z||64,!L){return L}var bX="(.{1,"+z+"})( +|$\n?)|(.{1,"+z+"})";return L.match(RegExp(bX,"g")).join("\n")},B.prototype.getPrivateKey=function(){var z="-----BEGIN RSA PRIVATE KEY-----\n";return z+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",z+="-----END RSA PRIVATE KEY-----"},B.prototype.getPublicKey=function(){var z="-----BEGIN PUBLIC KEY-----\n";return z+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",z+="-----END PUBLIC KEY-----"},B.prototype.hasPublicKeyProperty=function(z){return z=z||{},z.hasOwnProperty("n")&&z.hasOwnProperty("e")},B.prototype.hasPrivateKeyProperty=function(z){return z=z||{},z.hasOwnProperty("n")&&z.hasOwnProperty("e")&&z.hasOwnProperty("d")&&z.hasOwnProperty("p")&&z.hasOwnProperty("q")&&z.hasOwnProperty("dmp1")&&z.hasOwnProperty("dmq1")&&z.hasOwnProperty("coeff")},B.prototype.parsePropertiesFrom=function(z){this.n=z.n,this.e=z.e,z.hasOwnProperty("d")&&(this.d=z.d,this.p=z.p,this.q=z.q,this.dmp1=z.dmp1,this.dmq1=z.dmq1,this.coeff=z.coeff)};var by=function(z){B.call(this),z&&("string"==typeof z?this.parseKey(z):(this.hasPrivateKeyProperty(z)||this.hasPublicKeyProperty(z))&&this.parsePropertiesFrom(z))};by.prototype=new B,by.prototype.constructor=by;var a4=function(z){z=z||{},this.default_key_size=parseInt(z.default_key_size)||1024,this.default_public_exponent=z.default_public_exponent||"010001",this.log=z.log||!1,this.key=null};a4.prototype.setKey=function(z){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new by(z)},a4.prototype.setPrivateKey=function(z){this.setKey(z)},a4.prototype.setPublicKey=function(z){this.setKey(z)},a4.prototype.decrypt=function(L){try{return this.getKey().decrypt(aX(L))}catch(z){return !1}},a4.prototype.encrypt=function(L){try{return af(this.getKey().encrypt(L))}catch(z){return !1}},a4.prototype.getKey=function(z){if(!this.key){if(this.key=new by,z&&"[object Function]"==={}.toString.call(z)){return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,z)}this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},a4.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},a4.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},a4.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},a4.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()};aq.JSEncrypt=a4})(JSEncryptExports);var JSEncrypt=JSEncryptExports.JSEncrypt;var Group={};Group.id_users="group-edit-users";Group.delConfirm=function(a){var c=$("input.key:checked").length;if(c>0){var b=(c>1)?t._groups_will_be_deleted:t._group_will_be_deleted;$("#"+a+" .question").html(b);Confirm.dialog(a)}};Group.moveUsers=function(b,a){$("#"+b+" option:selected").remove().appendTo("#"+a).removeAttr("selected");$("#"+b+" option").removeAttr("selected");$("#participants-checkbox, #participants-all-checkbox").attr("checked",false);this.updateCounters();return 1};Group.updateCounters=function(){$("span#users-in-group").html($("#group-edit-users option").length);$("span#all-users").html($("#group-edit-users-all option").length)};Group.submitForm=function(){$("#"+this.id_users+" option").attr("selected","selected");$("#group-edit")[0].submit()};Group.changeRights=function(a,c,b){$.ajax({type:"POST",url:"/admin/group/change-rights/",data:{key:a,bit:c,value:b},dataType:"json",success:function(d){$(document).trigger("display-header-messages",{message:t._settings_are_saved})}})};Group.setOperators=function(a,b){$.ajax({type:"POST",url:"/admin/group/set-operators/",data:{key:a,value:b},dataType:"json",success:function(c){$(document).trigger("display-header-messages",{message:t._settings_are_saved})}})};function missedCallMailReverse(){if($("#suppress_missed_call_mail").prop("checked")){$("#suppress_missed_call_mail").prop("checked",false);$("#invite_mail_subj").attr("disabled",true);$("#invite_mail_body").attr("disabled",true);$("#missed_call_mail_subj").attr("disabled",true);$("#missed_call_mail_body").attr("disabled",true)}else{$("#suppress_missed_call_mail").prop("checked",true);$("#invite_mail_subj").attr("disabled",false);$("#invite_mail_body").attr("disabled",false);$("#missed_call_mail_subj").attr("disabled",false);$("#missed_call_mail_body").attr("disabled",false)}if($("#suppress_conf_invite_mail").prop("checked")){$("#suppress_conf_invite_mail").prop("checked",false);$("#conf_invite_mail_subj").attr("disabled",true);$("#conf_invite_mail_body").attr("disabled",true);$("#registration_success_mail_subj").attr("disabled",true);$("#registration_success_mail_body").attr("disabled",true);$("#conf_remind_mail_subj").attr("disabled",true);$("#conf_remind_mail_body").attr("disabled",true)}else{$("#suppress_conf_invite_mail").prop("checked",true);$("#conf_invite_mail_subj").attr("disabled",false);$("#conf_invite_mail_body").attr("disabled",false);$("#registration_success_mail_subj").attr("disabled",false);$("#registration_success_mail_body").attr("disabled",false);$("#conf_remind_mail_subj").attr("disabled",false);$("#conf_remind_mail_body").attr("disabled",false)}if($("#suppress_registration_revoke").prop("checked")){$("#suppress_registration_revoke").prop("checked",false);$("#registration_revoke_mail_subj").attr("disabled",true);$("#registration_revoke_mail_body").attr("disabled",true)}else{$("#suppress_registration_revoke").prop("checked",true);$("#registration_revoke_mail_subj").attr("disabled",false);$("#registration_revoke_mail_body").attr("disabled",false)}if($("#suppress_conf_remind").prop("checked")){$("#suppress_conf_remind").prop("checked",false);$("#conf_remind_mail_subj").attr("disabled",true);$("#conf_remind_mail_body").attr("disabled",true)}else{$("#suppress_conf_remind").prop("checked",true);$("#conf_remind_mail_subj").attr("disabled",false);$("#conf_remind_mail_body").attr("disabled",false)}}function emptyFieldsSolution(){if(!$("#restart_notification").prop("checked")&&$("#email").val()==""){$("#email").val(current_smtp.admin_email);$("#admin-email #email + div.error > div").text("")}if(!$("#restart_notification").prop("checked")&&$("#suppress_missed_call_mail").prop("checked")){if($("#host").val()==""){$("#host").val(current_smtp.host);$("#smtp-settings #host + div.error > div").text("")}if($("#port").val()==""){$("#port").val(current_smtp.port);$("#smtp-settings #port + div.error > div").text("")}}$("#smtp-sender-email").val($("#smtp-sender-email").val().replace(/^.*<(.*)>.*$/,"$1"))}function errorServerSMTP(a){if(a.checked&&($("#host").val()==""||$("#port").val()=="")){if($("#host").val()==""){$("#smtp-settings #host + div.error > div").text(t._mail_server_is_not_specified);$("#host").focus()}else{if($("#port").val()==""){$("#smtp-settings #port + div.error > div").text(t._port_is_not_specified);$("#port").focus()}}a.checked=false}}$(document).ready(function(){missedCallMailReverse();$(document).bind("display-message",function(a,b,c){if(b.error){$("#"+c+" + div.error > div").text(b.message);$(document).trigger("display-header-messages",{message:""})}else{$(document).trigger("display-header-messages")}});$(document).bind("keyup",function(a){if(a.target.id===undefined||a.target.id.length===0){return}$("#"+a.target.id+" + div.error > div").text("")});$("#restart_notification").bind("click",function(){emptyFieldsSolution();if(this.checked&&($("#host").val()==""||$("#port").val()==""||$("#email").val()=="")){if($("#host").val()==""){$("#smtp-settings #host + div.error > div").text(t._mail_server_is_not_specified);$("#host").focus()}else{if($("#port").val()==""){$("#smtp-settings #port + div.error > div").text(t._port_is_not_specified);$("#port").focus()}else{if($("#email").val()==""){$("#admin-email #email + div.error > div").text(t._e_mail_is_not_specified);$("#email").focus()}}}this.checked=false}});$("#suppress_missed_call_mail").bind("click",function(){errorServerSMTP(this);if(!this.checked){$("#missed_call_mail_subj").attr("disabled",true);$("#missed_call_mail_body").attr("disabled",true);$("#invite_mail_subj").attr("disabled",true);$("#invite_mail_body").attr("disabled",true)}else{$("#missed_call_mail_subj").attr("disabled",false);$("#missed_call_mail_body").attr("disabled",false);$("#invite_mail_subj").attr("disabled",false);$("#invite_mail_body").attr("disabled",false)}});$("#suppress_conf_invite_mail").bind("click",function(){errorServerSMTP(this);if(!this.checked){$("#conf_invite_mail_subj").attr("disabled",true);$("#conf_invite_mail_body").attr("disabled",true);$("#registration_success_mail_subj").attr("disabled",true);$("#registration_success_mail_body").attr("disabled",true);$("#conf_remind_mail_subj").attr("disabled",true);$("#conf_remind_mail_body").attr("disabled",true)}else{$("#conf_invite_mail_subj").attr("disabled",false);$("#conf_invite_mail_body").attr("disabled",false);$("#registration_success_mail_subj").attr("disabled",false);$("#registration_success_mail_body").attr("disabled",false);$("#conf_remind_mail_subj").attr("disabled",false);$("#conf_remind_mail_body").attr("disabled",false)}});$("#suppress_registration_revoke").bind("click",function(){errorServerSMTP(this);if(!this.checked){$("#registration_revoke_mail_subj").attr("disabled",true);$("#registration_revoke_mail_body").attr("disabled",true)}else{$("#registration_revoke_mail_subj").attr("disabled",false);$("#registration_revoke_mail_body").attr("disabled",false)}});$("#suppress_conf_remind").bind("click",function(){errorServerSMTP(this);if(!this.checked){$("#conf_remind_mail_subj").attr("disabled",true);$("#conf_remind_mail_body").attr("disabled",true);selectPlugin.disable()}else{$("#conf_remind_mail_subj").attr("disabled",false);$("#conf_remind_mail_body").attr("disabled",false);selectPlugin.enable()}})});(function(g){var f={elements:[],header:true,columns:{selector:{enabled:true,show:true,width:"3%"},fields:{display_name:{label:t._display_name,width:"40%"},login_name:{label:t._trueconf_id,width:"40%"},online_status:{label:t._status,width:"17%"}}},filter:{enabled:true,placeholder:t._online,field:"online_status"},search:{enabled:true,placeholder:t._search_users,close_img:"images/ab-cross.png",fields:["login_name","display_name"]},height:500,show_step:100,append_timeout:200,no_elements_text:t._no_users};var k;var e;var h;var b;var j;var a;var m;var l=[];var c=0;var d={init:function(n){k=this;f=g.extend(f,n);g("<div id='elements-list'><div class='tools'></div><div class='list'></div></div>").appendTo(k);g("<table class='tb-fix'><tbody><tr></tr></tbody></table>").appendTo(k.find(".tools"));if(f.search.enabled){g("<td><div id='strpos-block'></div></td>").appendTo(k.find(".tools tr"));$search_placeholder=g("<div id='pre-text'>"+f.search.placeholder+"</div>").appendTo(k.find("#strpos-block"));j=g("<input id='search-str' type='text' value='' maxlength='255' />").appendTo(k.find("#strpos-block"));$close_btn=g("<img id='close-btn' src='"+f.search.close_img+"' style='display: none;'>").appendTo(k.find("#strpos-block"));j.keyup(function(){if(g(this).val().length){$close_btn.show()}else{$close_btn.hide()}d.renderElements()}).focus(function(){$search_placeholder.hide()}).focusout(function(){if(!g(this).val().length){$search_placeholder.show()}});$search_placeholder.click(function(){j.trigger("focus")});$close_btn.click(function(){j.val("").trigger("focusout").trigger("keyup")})}if(f.filter.enabled){g("<colgroup><col><col width='100px'></colgroup>").prependTo(k.find(".tools table"));g("<td><input id='filter' type='checkbox' /> <label for='filter' style='margin-left: 5px;'>"+f.filter.placeholder+"</label></td>").appendTo(k.find(".tools tr"));a=g("#filter");a.change(function(){d.renderElements()})}e=g("<div />",{id:"progressbar"}).appendTo(k.find(".list"));e.progressbar({value:0});g("<div />",{"class":"wrapper",style:"height: "+f.height+"px"}).appendTo(k.find(".list"));g("<div />",{"class":"header-wrapper"}).appendTo(k.find(".wrapper"));g("<table class='table-header tb-fix "+(!(f.header)?"none":"")+"'><colgroup></colgroup><tbody><tr></tr></tbody></table>").appendTo(k.find(".header-wrapper"));if(f.columns.selector.enabled){g("<col class='"+(!(f.columns.selector.show)?"none":"")+"' width='"+f.columns.selector.width+"'>").appendTo(k.find(".table-header colgroup"));g("<th class='text-c "+(!(f.columns.selector.show)?"none":"")+"'><input class='radio' type='checkbox' name='checkall' /></th>").appendTo(k.find(".table-header tr"));m=g('input.radio[name="checkall"]');m.on("check-all-click",function(){var o=g(this).is(":checked");h.find("input:checkbox:enabled").prop("checked",o).first().trigger("change")}).click(function(){g(this).trigger("check-all-click")})}for(field in f.columns.fields){g("<col width='"+f.columns.fields[field].width+"'>").appendTo(k.find(".table-header colgroup"));g("<th class='sort desc' field='"+field+"'><a href='#'>"+f.columns.fields[field].label+"</a></th>").appendTo(k.find(".table-header tr"))}g(".sort > a").each(function(){g(this).click(function(){g(".sort").each(function(){g(this).removeClass("current-sort")});var o=g(this).parent();var p=o.hasClass("desc");if(p){o.removeClass("desc")}else{o.addClass("desc")}o.addClass("current-sort");d.renderElements();return !1})});b=g(".wrapper").height()-g(".header-wrapper").height();g("<div />",{"class":"body-wrapper",style:"height:"+b+"px"}).appendTo(k.find(".wrapper"));g("<table class='table-body tb-fix'><colgroup></colgroup><tbody></tbody></table>").appendTo(k.find(".body-wrapper"));if(f.columns.selector.enabled){g("<col class='"+(!(f.columns.selector.show)?"none":"")+"' width='"+f.columns.selector.width+"'>").appendTo(k.find(".body-wrapper colgroup"))}for(field in f.columns.fields){g("<col width='"+f.columns.fields[field].width+"'>").appendTo(k.find(".body-wrapper colgroup"))}h=k.find(".table-body tbody");l=f.elements.slice(0);d.renderElements();return k},updateElements:function(n){f.elements=n.slice(0);return k},searchElements:function(r){var p=[];var n=new RegExp(r,"i");for(var o in l){for(var q in f.search.fields){if(n.test(l[o][f.search.fields[q]])){p.push(l[o]);break}}}l=p.slice(0);return k},sortElements:function(n,o){o=o||false;if(n=="online_status"){return l.sort(function(r,q){var p=0,u=Number(r[n]),s=Number(q[n]);if(u<s){p=-1}if(u>s){p=1}return(p*((o)?(-1):1))})}l.sort(function(q,p){return(q[n].localeCompare(p[n])*((o)?(-1):1))});return k},onlineFilterElements:function(){var o=[];for(var n in l){if(parseInt(l[n].online_status)>0){o.push(l[n])}}l=o.slice(0);return k},appendElements:function(o){html="";for(var n in o){html+=o[n].render((j)?j.val():"")}h.append(html);c+=f.show_step;return k},renderElements:function(){c=0;l=f.elements.slice(0);e.progressbar({value:0});if(m){m.attr("disabled","disabled").trigger("check-all-click").removeAttr("checked")}if(a&&a.is(":checked")){d.onlineFilterElements()}if(j&&j.val().length){d.searchElements(j.val())}$sort=g(".current-sort");if($sort.length){d.sortElements($sort.attr("field"),$sort.hasClass("desc"))}if(navigator.appVersion.match(/MSIE\s+(5|6|7|8|9)/i)){h.html("")}else{if(h[0]){h[0].innerHTML=""}}if(l.length>0){g(document).bind("elements.block-render",function(){var o=l.length;if(c<o){d.appendElements(l.slice(c,c+f.show_step));e.progressbar({value:(c*100/o)});if(c<o){setTimeout(function(){g(document).trigger("elements.block-render")},f.append_timeout)}else{if(m&&(h.find("input:checkbox:enabled").length>0)){m.removeAttr("disabled")}}}g(document).trigger("elements.block-render.success")});g(document).trigger("elements.block-render")}else{e.progressbar({value:100});var n=0;if(f.columns.selector.enabled){n++}for(field in f.columns.fields){n++}g("<tr><td colspan='"+n+"' class='text-c'><b>"+f.no_elements_text+"</b></td></tr>").appendTo(h)}d.addEmptyLines();return k},addEmptyLines:function(){var n=h.find("tr:first-child > td:visible");var p=n.length;var s=n.attr("colspan");var r=n.parent().height();var o=0,q="<tr class='empty-tr' style='height:"+r+"px;'>";while(o++<p){q+="<td "+(s?("colspan='"+s+"'"):"")+"></td>"}q+="</tr>";while((b-h.height())>=r){h.append(q)}return k}};g.fn.elementsList=function(n){if(d[n]){return d[n].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof n==="object"||!n){return d.init.apply(this,arguments)}else{g.error("Method "+n+" not exists in jQuery.elementsList")}}}})(jQuery);
/*
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(f){var a=/\+/g;function d(j){return b.raw?j:encodeURIComponent(j)}function g(j){return b.raw?j:decodeURIComponent(j)}function h(j){return d(b.json?JSON.stringify(j):String(j))}function c(j){if(j.indexOf('"')===0){j=j.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{j=decodeURIComponent(j.replace(a," "));return b.json?JSON.parse(j):j}catch(k){}}function e(k,j){var l=b.raw?k:c(k);return f.isFunction(j)?j(l):l}var b=f.cookie=function(q,p,w){if(arguments.length>1&&!f.isFunction(p)){w=f.extend({},b.defaults,w);if(typeof w.expires==="number"){var r=w.expires,u=w.expires=new Date();u.setMilliseconds(u.getMilliseconds()+r*86400000)}return(document.cookie=[d(q),"=",h(p),w.expires?"; expires="+w.expires.toUTCString():"",w.path?"; path="+w.path:"",w.domain?"; domain="+w.domain:"",w.secure?"; secure":""].join(""))}var x=q?undefined:{},s=document.cookie?document.cookie.split("; "):[],o=0,m=s.length;for(;o<m;o++){var n=s[o].split("="),j=g(n.shift()),k=n.join("=");if(q===j){x=e(k,p);break}if(!q&&(k=e(k))!==undefined){x[j]=k}}return x};b.defaults={};f.removeCookie=function(k,j){f.cookie(k,"",f.extend({},j,{expires:-1}));return !f.cookie(k)}}));(function(b,c,a){if(!b.composedPath){b.composedPath=function(){if(this.path){return this.path}var d=this.target;this.path=[];while(d.parentNode!==null){this.path.push(d);d=d.parentNode}this.path.push(c,a);return this.path}}})(Event.prototype,document,window);(function(c){var a=function(d){};a.prototype.init=function(d){if(d!==undefined&&typeof d==="object"&&d!==null){c.extend(true,b,d)}};a.prototype.bind=function(d,e){return d.addressBookPlugin(e)};a.prototype.DELETE_MODE={ALL:1,USERS:2,CONTACTS:3,NONE:4};a.prototype.OWNER_TYPE_USER=1;a.prototype.OWNER_TYPE_GROUP=2;c.addressBookPlugin=new a();var b={prefix:"adpl",cssPrefix:"adpl_",ownerType:c.addressBookPlugin.OWNER_TYPE_USER,ownerId:null,handlers:{removeUser:"/admin/users/remove/",editUser:"/admin/users/edit/",userList:"/handlers/directory.php",addressBookOwners:"/handlers/addressBookOwners.php"},deleteMode:c.addressBookPlugin.DELETE_MODE.ALL,locale:{},_main:function(d){if(d.ownerId){d.abOwners._loadList(d)}return d.containers.get(d)},containers:{get:function(e){var d=e.parentObject;e.plugins.memberList=e.plugins.memberList.bind(d,e.plugins.getInitMemberListObj(e));d.append(e.containers.errorList.get(e));return d},member:{prepareMember:function(g,h,d){if(h.type===g.plugins.user.USER_TYPE.USER||h.type===g.plugins.user.USER_TYPE.USER_IN_CONTACTS){d.css("cursor","pointer")}if(g.deleteMode===c.addressBookPlugin.DELETE_MODE.NONE){return d}else{if(g.deleteMode===c.addressBookPlugin.DELETE_MODE.CONTACTS){if((h.type===g.plugins.user.USER_TYPE.USER||h.owner!==g.ownerId)&&(g.ownerId!==User.NO_GROUP_ID&&h.owner!==null)){return d}}else{if(h.type!==g.plugins.user.USER_TYPE.USER&&g.deleteMode===c.addressBookPlugin.DELETE_MODE.USERS){return d}}}var f=c('<div class="'+g.plugins.user.cssPrefix+'memberActionsIcon">');var e=c('<div class="'+g.plugins.user.cssPrefix+'iconRemove activeIcon">');e.click(function(){g.containers.removeDialog.show(g,function(k,j){j.dialog("close");k.deleteMember(k,h)})});f.append(e);d.prepend(f);return d}},removeDialog:{get:function(d){if(d.containers.removeDialog._rendered===null){d.containers.removeDialog._rendered=d.containers.removeDialog._render(d)}return d.containers.removeDialog._rendered},_render:function(e){var d=c("<div></div>");d.append("<span>"+_("The user will be <b>deleted</b>. Are you sure?")+"</span>");d.dialog({title:_("Question"),autoOpen:false,position:["center","center"],closeOnEscape:true,draggable:true,modal:true,resizable:false,dialogClass:"dialog-question-form",width:400,height:150,buttons:{close:{text:_("Cancel"),click:function(){d.dialog("close")}},apply:{text:_("Delete"),click:function(){d.dialog("close")}}}});return d},show:function(g,e){var d=g.containers.removeDialog.get(g);d.dialog("open");var f=d.dialog("option","buttons");f.apply.click=function(){e(g,d)};d.dialog("option","buttons",f)},_rendered:null},errorList:{INVALID_LIMIT_TYPE:0,LIMIT_BY_GROUP_CUSTOM_CONTACTS:1,LIMIT_BY_ALL_USERS:2,LIMIT_BY_GROUP:3,LIMIT_BY_USER:4,WARN_BY_GROUP:5,WARN_BY_USER:6,LEVEL_ERROR:1,LEVEL_WARNING:2,CATEGORY_GROUP_ERROR:1,CATEGORY_GROUP_CONTACTS_ERROR:2,CATEGORY_USER_CONTACTS_ERROR:3,CATEGORY_GROUP_WARNING:4,CATEGORY_USER_CONTACTS_WARNING:5,get:function(d){if(d.containers.errorList._rendered===null){d.containers.errorList._rendered=d.containers.errorList._render(d)}return d.containers.errorList._rendered},_render:function(e){var d=this;var f=c('<div class="'+e.cssPrefix+'abLimitsButtons"></div>');this.errorBtn=c('<span class="'+e.cssPrefix+'errorBtn"></span>');this.errorBtn.hide();this.errorBtn.text(_("Error"));this.errorBtn.click(function(){d.showDialog(e,d.LEVEL_ERROR)});f.append(this.errorBtn);this.warningBtn=c('<span class="'+e.cssPrefix+'warningBtn"></span>');this.warningBtn.hide();this.warningBtn.text(_("Warning"));this.warningBtn.click(function(){d.showDialog(e,d.LEVEL_WARNING)});f.append(this.warningBtn);this.dialog=c("<div></div>");this.dialog.dialog({title:"",autoOpen:false,position:["center","center"],closeOnEscape:true,draggable:true,dialogClass:e.cssPrefix+"abLimitsPopup",modal:true,resizable:true,width:640,height:320,buttons:{close:{text:_("Close"),click:function(){c(this).dialog("close")}}}});this.errorsBlock=c('<div class="'+e.cssPrefix+"errors "+e.cssPrefix+'list"></div>');this.errorsBlock.hide();this.dialog.append(this.errorsBlock);this.warningsBlock=c('<div class="'+e.cssPrefix+"warnings "+e.cssPrefix+'list"></div>');this.warningsBlock.hide();this.dialog.append(this.warningsBlock);return f},clear:function(d){this.errorBtn.hide();this.errorsBlock.empty();this.warningBtn.hide();this.warningsBlock.empty()},setList:function(g,h){var f={};f[this.LEVEL_WARNING]=0;f[this.LEVEL_ERROR]=0;for(var d=0;d<h.length;d++){var e=g.containers.errorList.add(g,h[d]);f[e]++}this.get(g).show();if(f[this.LEVEL_WARNING]>0){this.warningBtn.text(_("Warning")+": "+f[this.LEVEL_WARNING]);this.warningBtn.show()}if(f[this.LEVEL_ERROR]>0){this.errorBtn.text(_("Error")+": "+f[this.LEVEL_ERROR]);this.errorBtn.show()}},add:function(g,e){var k=this.getErrorParams(e.type);var j=this.errorsBlock;if(k.level===this.LEVEL_WARNING){j=this.warningsBlock}if(!e.hasOwnProperty("invalid_group_id")||e.invalid_group_id.length===0){e.invalid_group_id=e.parent_group_id}var f=c("<div></div>");j.append(f);var h=this.getCategoryTitle(g,k.category);if(h){f.append(c("<b></b>").text(h))}var d=c("<div></div>");if(this.setCategoryErrorText(g,k.category,e,d)){f.append(d)}return k.level},getErrorParams:function(d){switch(d){case this.LIMIT_BY_ALL_USERS:case this.LIMIT_BY_GROUP:return{level:this.LEVEL_ERROR,category:this.CATEGORY_GROUP_ERROR};break;case this.LIMIT_BY_GROUP_CUSTOM_CONTACTS:return{level:this.LEVEL_ERROR,category:this.CATEGORY_GROUP_CONTACTS_ERROR};break;case this.LIMIT_BY_USER:return{level:this.LEVEL_ERROR,category:this.CATEGORY_USER_CONTACTS_ERROR};break;case this.WARN_BY_GROUP:return{level:this.LEVEL_WARNING,category:this.CATEGORY_GROUP_WARNING};break;case this.WARN_BY_USER:return{level:this.LEVEL_WARNING,category:this.CATEGORY_USER_CONTACTS_WARNING};break}return false},getLevelBlock:function(d){switch(d){case this.LEVEL_ERROR:return this.errorsBlock;break;case this.LEVEL_WARNING:return this.warningsBlock;break}},getCategoryTitle:function(e,d){switch(d){case this.CATEGORY_GROUP_ERROR:return _("Failed to add contacts from the group");case this.CATEGORY_GROUP_CONTACTS_ERROR:return _("Maximum number of custom entries in group Address Book has been exceeded")}return false},setCategoryErrorText:function(j,g,e,k){switch(g){case this.CATEGORY_GROUP_ERROR:case this.CATEGORY_GROUP_CONTACTS_ERROR:k.append("<span>"+_("Group name")+": </span>");var d=j.abOwners.getGroupDisplayName(j,e.invalid_group_id);var f=j.abOwners.getGroupValidId(j,e.invalid_group_id);var h=c('<a target="_blank" rel="noopener" href="/admin/group/ab/?key='+encodeURIComponent(f)+'"></a>');h.text(d);k.append(h);k.append("<span>; "+_("The number of users in the group")+": "+e.invalid_group_size+"; </span>");k.append("<span>"+_("Current address book capacity")+": "+e.current_size+"; </span>");k.append("<span>"+_("The number of vacant entries in address book")+": "+(e.max_size-e.current_size)+"</span>");break;case this.CATEGORY_USER_CONTACTS_ERROR:k.text(_("Maximum number of custom entries in user's Address Book has been exceeded (%n)").replace("%n",e.max_size));break;case this.CATEGORY_USER_CONTACTS_WARNING:k.text(_("You are approaching the maximum number of custom entries"));break;case this.CATEGORY_GROUP_WARNING:k.text(_("You are approaching the maximum Address Book capacity"));break}return g},showDialog:function(d,e){this.warningsBlock.hide();this.errorsBlock.hide();this.getLevelBlock(e).show();switch(e){case this.LEVEL_ERROR:this.dialog.dialog("option","title",_("Error"));break;case this.LEVEL_WARNING:this.dialog.dialog("option","title",_("Warning"));break}this.dialog.dialog("open")},warningBtn:null,errorBtn:null,errorsBlock:null,warningsBlock:null,_errorListDialog:null,_rendered:null}},abOwners:{onLoad:function(e,d){this.callbacks.push(d);if(this.ready){this._loadList(e)}},_loadList:function(d){this.ready=false;if(this.loadXHR){this.loadXHR.abort();this.loadXHR=null}this.loadXHR=c.getJSON(d.handlers.addressBookOwners,{owner:d.ownerId,ownerType:d.ownerType}).done(function(e){d.abOwners.list=e;d.abOwners.runCallbacks(d,e);d.abOwners.clearCallbacks()}).always(function(){d.abOwners.ready=true})},runCallbacks:function(f,e){for(var d=0;d<this.callbacks.length;d++){this.callbacks[d].call(f,e)}},getGroupDisplayName:function(f,d){var e=this.getGroupObject(f,d);if(!e){return d}if(!e.displayName){if(d===User.NO_GROUP_ID){return _("Without group")}return d}return e.displayName},getGroupValidId:function(f,d){var e=this.getGroupObject(f,d);if(!e){return d}if(!e.hasOwnProperty("id")){return d}if(e.id.length===0){return d}return e.id},getGroupObject:function(e,d){if(!this.list.hasOwnProperty("groups")){return false}if(!this.list.groups.hasOwnProperty(d)){return false}return this.list.groups[d]},clearCallbacks:function(){this.callbacks=[]},callbacks:[],list:{},loadXHR:null,ready:false},deleteMember:function(d,e){Server.showLoadEffect();c.post(d.handlers.removeUser,{uid:e.id}).done(function(f){d.plugins.memberList.removeMember(d.plugins.memberList,e.id);Server.setServerMessage(_("User have been successfully deleted"),Server.MESSAGE_TYPE.NOTE,2000);d.parentObject.trigger(d.prefix+"onUserRemoved",{status:true})}).fail(function(f){Server.setServerMessage(_("Unable to delete the user"),Server.MESSAGE_TYPE.ERROR,3000);d.parentObject.trigger(d.prefix+"onUserRemoved",{status:false})}).always(function(){Server.removeLoadEffect()})},refreshList:function(d){d.plugins.memberList.refreshList(d.plugins.memberList)},onNextPartLoaded:function(d){this.containers.errorList.clear(this);if(d.hasOwnProperty("errors")){this.abOwners.onLoad(this,function(){this.containers.errorList.setList(this,d.errors)})}},onMemberClick:function(g,f,h,d,e){if((h.type===g.plugins.user.USER_TYPE.USER||h.type===g.plugins.user.USER_TYPE.USER_IN_CONTACTS)&&!c(e.target).is("."+g.plugins.user.cssPrefix+"iconRemove")){document.location.href=g.handlers.editUser+"?login="+encodeURIComponent(h.id)}},onCreated:function(d){},plugins:{user:null,memberList:null,getInitMemberListObj:function(d){return{height:640,onMemberClick:function(h,g,e,f){d.onMemberClick(d,h,g,e,f)},handlers:{userList:d.handlers.userList},plugins:{user:d.plugins.user},beforeMemberAdd:function(g,f,e){return d.containers.member.prepareMember(d,f,e)},onCreated:function(e){e.events.add(e,e.events.NEXT_PART_LOADED,d,d.onNextPartLoaded);e.start(e)}}}},parentObject:null};c.fn.addressBookPlugin=function(e){var d=this.data("addressBookPlugin");if(d===undefined||d===false){var d=c.extend(true,{},b);c.extend(true,d,c.addressBookPlugin);c.extend(true,d,e);d.prefix=generateUniqueId(d.prefix)+"_";d.parentObject=this;this.append(d._main(d));this.data("addressBookPlugin",d);d.onCreated(d,e)}return d}})(jQuery);(function(c){var a=function(){};a.prototype.init=function(d){c.extend(true,a.prototype,d)};a.prototype.setUserPlugin=function(d){b.plugins.user=d};a.prototype.bind=function(d,f){var e=d.memberListPlugin(f);return e};c.memberListPlugin=new a();var b={prefix:"mlpl",cssPrefix:"mlpl_",height:500,loadLimit:200,expectLimit:1000,parent:null,searchTypingDelay:500,nextPageId:0,inUpdate:false,searchString:"",searchRegexp:null,SEARCH_METHODS:{ALL:"all",USERS:"users",GROUPS:"groups"},lastInsertedCount:null,handlers:{userList:"/handlers/directory.php"},list:{},inList:function(d,e){if(d.list.hasOwnProperty(e)){return true}return false},refreshList:function(d){d.stop(d);d.start(d)},get:function(e){var d=e.containers.get(e);return d},stop:function(d){d.containers.list._list.empty();d.containers.search._searchField.val(_("Enter the user name"));d.setDefaultServerParams(d,true)},start:function(e){e.containers.list.showProgressBar(e);var d=function(){e.containers.list._wait.remove();if(e.lastInsertedCount!==e.loadLimit){e.plugins.user.updateUserStatus(e.plugins.user);return}if(e.containers.list._list[0].scrollHeight>e.containers.list._list.height()+e.expectLimit||e.containers.list._list[0].scrollHeight===0){e.plugins.user.updateUserStatus(e.plugins.user);return}e.containers.list._list.append(e.containers.list._wait);e.loadNextPart(e,function(){d()},function(){e.containers.list._wait.remove()})};e.loadNextPart(e,function(f){f.containers.list.hideProgressBar(f);d()},function(f){f.containers.list.hideProgressBar(f);f.containers.list.showEmpty(f)})},containers:{get:function(d){if(d.containers._rendered===null){d.containers._rendered=d.containers._render(d)}return d.containers._rendered},_render:function(f){var d=c('<div class="'+f.cssPrefix+'memberList">');var e=c('<div class="'+f.cssPrefix+'inner">');d.append(e);e.append(f.containers.search.get(f));e.append(c('<div style="display: table-row">').append(f.containers.list.get(f)));e.append('<div class="clear">');return d},addList:function(h,e,j){var d=h.containers.list;for(var f in e.list){var g=e.list[f];d.addMember(h,g)}},member:{get:function(e,f){if(e.plugins.user===null){return c("<div>")}var d=e.plugins.user.createUser(f,{prefix:e.prefix});return d},updateMembersStatus:function(g,d,e){var f=e.obj;g.updateListStatuses(f.list)},setDefaultMembersStatus:function(f,d){var e=d.obj;f.setDefaultListStatuses(e.list)},highlight:function(h,j){var d=Array();d=new Array("id","displayName");for(var e=0;e<d.length;e++){var g=d[e];var f=j[g]+"";if(h.searchRegexp.test(f)){f=f.replace(h.searchRegexp,'<span class="'+h.plugins.user.cssPrefix+'highlighted">$&</span>');c("#"+j.htmlId+"_"+g).html(f)}}}},list:{get:function(d){if(d.containers.list._rendered===null){d.containers.list._rendered=d.containers.list._render(d)}return d.containers.list._rendered},_render:function(g){var d=g.containers.list;var e=c('<div class="'+g.cssPrefix+'list">');var f=c('<div class="'+g.cssPrefix+'members">');e.append(c('<div class="'+g.cssPrefix+'innerList">').append(f));f.scroll(function(){var h=c(this);d._reloadByScroll(g,h)});d._wait=c('<div class="'+g.cssPrefix+'wait"><img src="/img/spinner.gif" alt="wait" /></div>');d._listInfoContainer=c('<div class="'+g.cssPrefix+'listInfo">');d._fullWait=c('<div class="'+g.cssPrefix+'innerListInfo"><img src="/img/spinner.gif" alt="wait" /></div>');d._emptyList=c('<div class="'+g.cssPrefix+'emptyList"><span>'+_("No users found. Check the search criteria")+"</span></div>");d._list=f;return e},addMember:function(e,f){var d=e.containers.member.get(e,f);d=e.beforeMemberAdd(e,f,d);if(!(d instanceof jQuery)){if(e.list.hasOwnProperty(f.id)){delete e.list[f.id]}return}d.click(function(g){e.onMemberClick(e,f,d,g)});d.mouseover(function(g){e.mouseOnMember(e,f,d,g)});d.mouseout(function(g){e.mouseOutMember(e,f,d,g)});e.containers.list._list.append(d);if(e.searchString!==""){e.containers.member.highlight(e,f)}},removeMember:function(d,f){if(d.list[f].htmlId===undefined){return}var e=d.containers.list._list.find("#"+d.list[f].htmlId);e.remove()},_reloadByScroll:function(e,f){var d=f[0].scrollHeight-(f[0].scrollTop+f.outerHeight());if(d<=e.expectLimit&&!e.inUpdate&&e.lastInsertedCount>=e.loadLimit){e.containers.list._list.append(e.containers.list._wait);e.loadNextPart(e,function(){e.containers.list._wait.remove()},function(){e.containers.list._wait.remove()})}},showProgressBar:function(d){d.containers.list._listInfoContainer.empty();d.containers.list._listInfoContainer.append(d.containers.list._fullWait);d.containers.list._list.append(d.containers.list._listInfoContainer)},hideProgressBar:function(d){d.containers.list._listInfoContainer.remove()},showEmpty:function(d){d.containers.list._list.append(d.containers.list._emptyList)},hideEmpty:function(d){d.containers.list._emptyList.remove()},_list:null,_emptyList:null,_fullWait:null,_wait:null,_listInfoContainer:null,_rendered:null},search:{get:function(d){if(d.containers.search._rendered===null){d.containers.search._rendered=d.containers.search._render(d)}return d.containers.search._rendered},_render:function(h){var d=c('<div class="'+h.cssPrefix+'innerSearch">');var g=c('<input id="search-str" class="'+h.cssPrefix+'lightGray" tabindex="-1" type="text" />');var e=c('<div class="'+h.cssPrefix+'searchFieldWrapper"></div>');e.append(g);g.val(_("Enter the user name"));g.focusin(function(){if(g.val()===_("Enter the user name")){g.val("");g.removeClass(h.cssPrefix+"lightGray")}});g.focusout(function(){if(g.val().length===0){g.val(_("Enter the user name"));g.addClass(h.cssPrefix+"lightGray")}});var f=function(k){var j=g.val();if(h.searchString===j){return false}if(j.length===0){h.setDefaultServerParams(h,true)}else{if(j!==h.searchString.substring(0,h.searchString.length-1)&&j.substring(0,j.length-1)!==h.searchString){h.setDefaultServerParams(h,true)}else{h.setDefaultServerParams(h,false)}}h.searchString=j;h.searchRegexp=new RegExp(j.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"ig");h.containers.search._startSearch(h)};g.on("propertychange",f);g.on("input",f);h.containers.search._searchField=g;d.append(e);d.append('<div class="clear"></div>');return c('<div class="'+h.cssPrefix+'searchBlock">').append(d)},_startSearch:function(g,e){var d=g.containers.search;if(d._searchTimer!==null){clearTimeout(d._searchTimer)}else{g.containers.list._list.empty();g.containers.list.showProgressBar(g)}var f=function(h){h.loadNextPart(h,function(k,j){k.containers.list.hideProgressBar(k);k.plugins.user.updateUserStatus(k.plugins.user)},function(j){j.containers.list.hideProgressBar(j);j.containers.list.showEmpty(j)})};if(e===true){f(g)}else{d._searchTimer=setTimeout(function(){f(g);d._searchTimer=null},g.searchTypingDelay)}},_searchTimer:null,_searchField:null,_rendered:null},_rendered:null},setDefaultServerParams:function(d,e){if(e===true){d.searchString=""}if(d.ajaxProcess!==null){d.ajaxProcess.abort();d.ajaxProcess=null}d.list={};d.nextPageId=0;d.lastInsertedCount=null},loadNextPart:function(g,h,f,e,d){if(g.ajaxProcess!==null){g.ajaxProcess.abort()}g.loadUsersList(g,{nextPageId:g.nextPageId,limit:g.loadLimit,searchStr:g.searchString,successCallback:function(k,j,l){k.events.trigger(k,k.events.NEXT_PART_LOADED,[j]);if(j.status===true&&j.count>0){k.nextPageId=j.nextPageId;k.addList(k,j,l);if(h!==undefined&&h!==null){h(k,j,l)}}else{k.lastInsertedCount=0;if(f!==undefined&&f!==null){f(k,j,l)}}},alwaysCallback:d})},addList:function(f,e,g){if(e.status===false){return}var d=0;c.each(e.list,function(j,h){if(f.list.hasOwnProperty(j)){delete e.list[j];return true}d++;h.id=j;f.list[j]=h;f.list[j].htmlId=generateUniqueId(f.prefix+"member");e.list[j].htmlId=f.list[j].htmlId});f.lastInsertedCount=d;f.containers.addList(f,e,g);f.onListUpdated(f,e,g)},addMember:function(d,f,e){if(d.list.hasOwnProperty(f.id)){return}d.list[f.id]=f;d.list[f.id].htmlId=generateUniqueId(d.prefix+"member");f.htmlId=d.list[f.id].htmlId;d.containers.list.addMember(d,f,e);d.onListUpdated(d,f,e)},removeMember:function(d,e){if(!d.list.hasOwnProperty(e)){return false}d.containers.list.removeMember(d,e);delete d.list[e];d.onListUpdated(d,d.list,null)},ajaxProcess:null,loadUsersList:function(k,l){if(l===undefined||l===null){return}var g=l.nextPageId;var e=l.limit;var f=l.searchStr;var d=l.successCallback;var j=l.failCallback;var h=l.alwaysCallback;if(f===undefined||f===null){f=""}if(g===undefined){g=0}if(e===undefined){e=0}k.inUpdate=true;k.ajaxProcess=c.getJSON(k.handlers.userList,{page:g,limit:e,searchStr:f},function(m){}).done(function(m){if(d!==undefined&&d!==null){d(k,m,l)}}).fail(function(){if(j!==undefined&&j!==null){j(k,l)}}).always(function(){if(h!==undefined&&h!==null){h(k,l)}k.inUpdate=false;k.ajaxProcess=null})},mouseOnMember:function(f,g,d,e){},mouseOutMember:function(f,g,d,e){},onMemberClick:function(f,g,d,e){},onListUpdated:function(f,e,d){},onUserStatusUpdated:function(e,d){},beforeMemberAdd:function(e,f,d){return d},onCreated:function(d){},events:{NEXT_PART_LOADED:1,list:{},add:function(f,h,e,g){if(!f.events.list.hasOwnProperty(h)){f.events.list[h]=[]}var d={};d.context=e;d.callback=g;f.events.list[h].push(d)},trigger:function(g,h,f){if(!g.events.list.hasOwnProperty(h)){return false}var e=g.events.list[h];if(f!==undefined){f.push(g)}else{f=[g]}for(var d=0;d<e.length;d++){e[d].callback.apply(e[d].context,f)}}},plugins:{user:null,init:function(d){if(d.plugins.user===null){return false}d.plugins.user.addUpdateListener(d.containers.member.updateMembersStatus,{obj:d});d.plugins.user.addErrorListener(d.containers.member.setDefaultMembersStatus,{obj:d});return true}}};c.fn.memberListPlugin=function(e){var d=this.data("memberListPlugin");if(d===undefined||d===false){var d=c.extend(true,{},b);c.extend(true,d,c.memberListPlugin);c.extend(true,d,e);d.prefix=generateUniqueId(d.prefix)+"_";d.parent=this;if(!d.plugins.init(d)){this.append("<div>Error<div>");return}this.append(d.get(d));this.data("memberListPlugin",d);d.onCreated(d,e)}return d}})(jQuery);(function(d){var j=0;var f=1;var b=3;var m="/admin/conferences/schemesList/";d.conferenceSchemaPlugin={};d.conferenceSchemaPlugin.regional={};d.conferenceSchemaPlugin.bind=function(o,n){return n.conferenceSchemaPlugin(o)};d.fn.conferenceSchemaPlugin=function(o){var n=this.data("conferenceSchemaPlugin");if(n===undefined){o=d.extend(true,d.extend(true,{},e),o);n=l(this,o);this.data("conferenceSchemaPlugin",n)}return this};function g(o){var r;var p={};(function n(){q()})();this.getSchemaDescription=function(s){switch(s){case b:return _("In role-based mode all participants see and hear several casters. Anyone can start casting, if invited or approved by host.");case f:return _("In asymmetric mode conference owner sees all participants and all participants see the host.");case j:return _("In symmetric mode all participants see each other.")}};this.getSchemaName=function(s){switch(s){case b:return _("Role-based");case f:return _("Asymmetric");case j:return _("Symmetric")}};this.countSchemes=function(){return countObject(o)};this.getList=function(s){if(typeof s!=="number"){s=g.FLAGS.NONE}var w={};for(var u in o){w[u]=this.getSchema(u,s)}return w};this.getSchema=function(u,s){var w={};w.id=o[u].id;w.isSelectable=o[u].isSelectable;w.maxParticipants=this.getMaxParticipants(u,s);w.podiums=this.getPodiums(u,s);if(o[u].isSelectable&&o[u].hasOwnProperty("podiumsDepend")){w.podiumsDepend=this.getPodiumsDepend(u,s)}return w};this.countSchemes=function(){return r.length};this.getPodiumsDepend=function(u,s){return o[u].podiumsDepend[p[u].podiumsDepend&s]};this.getMaxParticipants=function(u,s){return o[u].maxParticipants[p[u].maxParticipants&s]};this.getPodiums=function(u,s){return o[u].podiums[p[u].podiums&s]};this.isSelectableSchema=function(s){return o[s].isSelectable};this.getOriginalSchemesList=function(){return o};this.destruct=function(){};this.getSchemesIds=function(){return r};function q(){r=[];for(var u in o){r.push(u);p[u]={};s(u,"podiums");s(u,"maxParticipants");if(o[u].isSelectable&&o[u].hasOwnProperty("podiumsDepend")){s(u,"podiumsDepend")}}function s(y,x){for(var w in o[y][x]){p[y][x]|=w}}}}g.FLAGS={NONE:0,WEBINAR:1,UDP:2};d.conferenceSchemaPlugin.FLAGS=g.FLAGS;g.createInstance=function(o,p,q,r){var n=this;if(typeof q!=="function"){console.error("invalid callback");return false}d.getJSON(o,{key:p}).done(function(u){var s=new g(u);q.call(s,s)}).fail(function(w,s,u){typeof r==="function"?r.call(n,s,u):null});return true};function c(p){var o;var r;(function n(){p.empty();o=s();p.append(o)})();function q(){var D=0;var C=1;var I=1;var F=1;var u;var w;var y=[];var z={};(function E(){u=B();w=d("<colgroup></colgroup>");u.append(w)})();this.getRenderedSchema=function(J){if(z.hasOwnProperty(J)){return z[J]}return null};this.getRenderedSchemesList=function(){return z};this.addSchema=function(J){D++;z[J.getId()]=J;var L=G();y.push(L);var K=J.getContainer();L.append(K);x()};this.removeSchema=function(J){};this.getContainer=function(){return u};function B(){return d('<table class="schemaTable"></table>')}function G(){return d("<td></td>")}function x(){H();A();var K=u.find("tr");var L=0;for(var N=0;N<I;N++){var M=K[N]?d(K[N]):d("<tr></tr>");for(var J=0;J<C;J++){if(L===y.length){break}if(L===y.length-2){y[L].removeAttr("colspan")}if(F!==0){if(L===y.length-1){y[L].attr("colspan",C-F+1)}}M.append(y[L]);L++}u.append(M)}}function H(){C=Math.ceil(Math.sqrt(D));I=Math.ceil(D/C);F=D%C}function A(){w.empty();var K=100/C;for(var J=0;J<C;J++){w.append('<col width="'+K+'%" />')}}}this.getSchemesTable=function(){if(r!==undefined&&r!==null){return r}r=new q();o.append(r.getContainer());return r};this.destruct=function(){};function s(){var u=d('<div class="tc-plugin-ui"></div>');u.append('<div class="smallTitle">'+_("Choose conference mode")+":</div>");return u}}function h(o){var z=this;var q;var x;var y;var B;var r;var u;var s;var n;var p=[];(function A(){q=w();q.click(function(){for(var C=0;C<p.length;C++){p[C].call(z,o)}})})();this.getContainer=function(){return q};this.getId=function(){return o};this.setTitle=function(C){r.text(C)};this.setDescription=function(C){u.text(C)};this.setIcon=function(C,E){var D=d('<img src="'+C+'" />');D.attr("alt",E);s.append(D)};this.setSizeDescription=function(C){n.text(C)};this.click=function(C){p.push(C)};this.setCounter=function(C){B=C;y.empty();y.append(C.getContainer());y.show()};this.hasCounter=function(){return B!==undefined};this.getCounter=function(){return B};this.enableHighlight=function(){q.addClass("selected")};this.disableHighlight=function(){q.removeClass("selected")};function w(){var C=d('<div id="schema_'+o+'" class="selectableBlock contentPadding confTypeSelectionSide"></div>');x=d('<td class="schemaEntry"></td>');y=d('<td style="display: none; width: 20%" class="schemaCounterBlock"></td>');C.append(d("<table><tr></tr></table>").append(x).append(y));r=d('<div class="schemaTitle"></div>');x.append(r);s=d('<div class="schemaIcon"></div>');x.append(s);u=d('<div class="schemaDescription"></div>');x.append(u);x.append('<div class="clear"></div>');n=d('<div class="sizeDescription"></div>');x.append(n);return C}}function a(q){var p;var o=[];(function n(){p=r();p.change(function(){var u=p.find("option:selected");for(var s=0;s<o.length;s++){o[s].call(this,q,u.val(),u.text())}})})();this.getContainer=function(){return p};this.getSelectedValue=function(){var s=p.find("option:selected");return s.val()};this.change=function(s){o.push(s)};this.disable=function(){p.addClass("disabled")};this.enable=function(){p.removeClass("disabled")};this.setValues=function(s){p.empty();for(var u in s){var w=d('<option id="schemaCounter_'+q+"_option_"+u+'">');w.attr("value",u);w.text(u+"x"+s[u]);p.append(w)}w.prop("selected",true)};this.setSelected=function(s){p.find("#schemaCounter_"+q+"_option_"+s).prop("selected",true)};function r(){return d('<select class="fullBlock blueText usersCounter disabled" id="schemaCounter_'+q+'" name="schemaCounter_'+q+'">')}}a.TYPE_SELECT=1;function k(o,r){var x=this;var q=6;var w;var p=g.FLAGS.NONE;(function y(){n()})();this.setUserEvents=function(z){s=d.extend(true,s,z)};var s={};this.refreshTable=function(){var D=r.getSchemesTable();var E=o.getList(p);for(var B in E){var C=E[B];var A=D.getRenderedSchema(B);if(C.hasOwnProperty("podiumsDepend")){var z=A.getCounter();z.setValues(C.podiumsDepend);z.setSelected(q)}else{A.setSizeDescription(C.podiums+"x"+C.maxParticipants)}}};function n(){var D=r.getSchemesTable();var E=o.getList(p);for(var B in E){var C=E[B];var A=new h(B);A.setTitle(o.getSchemaName(C.id));A.setDescription(o.getSchemaDescription(C.id));A.setIcon("/images/schema_id_"+B+".png");if(C.hasOwnProperty("podiumsDepend")){var z=new a(B);z.setValues(C.podiumsDepend);z.change(function(F,G){if(w!==F){return}q=parseInt(G)});A.setCounter(z)}else{A.setSizeDescription(C.podiums+"x"+C.maxParticipants)}A.click(function(F){x.setCurrentSchemaId(F)});D.addSchema(A)}}function u(E,A){var C=r.getSchemesTable();if(E!==undefined){var B=C.getRenderedSchema(E);B.disableHighlight();if(B.hasCounter()){B.getCounter().disable()}}var D=C.getRenderedSchema(A);D.enableHighlight();if(D.hasCounter()){var z=D.getCounter();z.enable();q=parseInt(z.getSelectedValue())}}this.setCurrentSchemaId=function(z){u(w,z);w=z};this.setCurrentPodiums=function(B){q=B;if(!o.isSelectableSchema(w)){return}var A=r.getSchemesTable().getRenderedSchema(w);var z=A.getCounter();z.setSelected(q)};this.setFlags=function(z){p=z;this.refreshTable()};this.getCurrentSchema=function(){return o.getSchema(w,p)};this.getCurrentSchemaId=function(){return w};this.getCurrentPodiums=function(){return q};this.getCurrentSchemaShortDescription=function(){var A=o.getSchema(w,p);var B=o.getSchemaName(A.id);var z="";if(A.isSelectable){z=q+"x"+A.podiumsDepend[q]}else{z=A.podiums+"x"+A.maxParticipants}B+=" "+z;return B};this.getCurrentMaxParticipants=function(){var z=o.getSchema(w,p);if(!z.isSelectable){return z.maxParticipants}else{return z.podiumsDepend[q]}}}k.createInstance=function(n,p,q,x){if(p===undefined){p={}}if(typeof q!=="function"){console.error("invalid callback");return false}var u=true;var w,y;var r=p.hasOwnProperty("schemesListHandler")?p.schemesListHandler:m;var s=p.hasOwnProperty("conferenceId")?p.conferenceId:null;function z(){if(w!==undefined&&y!==undefined){return true}}function A(){var B=new k(w,y);if(p.hasOwnProperty("events")){B.setUserEvents(p.userEvents)}if(p.hasOwnProperty("flags")){B.setFlags(p.flags)}if(w.countSchemes()===0){q.call(B,B);return}if(p.hasOwnProperty("schemaId")){B.setCurrentSchemaId(p.schemaId)}else{B.setCurrentSchemaId(w.getSchemesIds()[0])}if(p.hasOwnProperty("podiums")){B.setCurrentPodiums(p.podiums)}q.call(B,B)}function o(){u=false;if(w!==undefined){w.destruct()}if(y!==undefined){y.destruct()}typeof x==="function"?x():null}y=new c(n);g.createInstance(r,s,function(B){if(!u){return}w=B;if(z()){A()}},function(){o()})};var e={};function l(n,p){var o,q;if(p.hasOwnProperty("events")){o=p.events.hasOwnProperty("onSuccessInit")?p.events.onSuccessInit:function(){};q=p.events.hasOwnProperty("onFailInit")?p.events.onFailInit:function(){}}k.createInstance(n,p,function(r){if(o!==undefined){o.call(n,r,p)}},function(){if(q!==undefined){q.call(n,p)}});return true}})(jQuery);(function(c){var a=function(){};a.prototype.setMemberListPlugin=function(e,d){b.plugins.addFromList=e;if(d!==undefined){b.plugins.getAddFromListObj=d}};a.prototype.setAddByIdPlugin=function(e,d){b.plugins.addById=e;if(d!==undefined){b.plugins.getAddByIdObj=d}};a.prototype.init=function(d){c.extend(true,b,d)};a.prototype.setUserPlugin=function(d){b.plugins.user=d};a.prototype.bind=function(f,d){var e=d.conferenceParticipantsPlugin(f);return e};var b={inviteMessage:{text:"Текст приглашения",subject:"Заголовок сообщения"},debug:false,enableInvitations:true,invitationStatus:false,text:{},handlers:{userById:"/admin/handler/getUserById",saveInviteMessage:"/admin/handler/saveInviteMessage"},prefix:"cpl",cssPrefix:"cpl_",conferencePlugin:null,getContainer:function(d){return d.containers.get(d)},participants:{max:5,guestAccess:true,addLocked:false,list:{},setList:function(e,d){c.each(d,function(f,g){e.participants.list[f]=g})},count:function(f){var e=0;for(var d in f.participants.list){if(f.participants.list.hasOwnProperty(d)){e++}}return e},getIDs:function(g){var e=new Array();var f=g.participants.list;for(var d in f){e.push(d)}return e},countGroups:function(h){var f={};for(var e in h.participants.list){if(!h.participants.list.hasOwnProperty(e)){continue}if(!h.participants.list[e].hasOwnProperty("groups")){continue}var d=h.participants.list[h].groups;for(var g in d){if(!f.hasOwnProperty(g)){f[g]=0}f[g]++}}return f},setMax:function(j,d){var f=j.participants.max;j.participants.max=d;var h=j.participants.count(j);if(j.plugins.addFromList!==null&&j.plugins.addFromList!==undefined){if(f!==d){var g=j.plugins.addFromList.containers.list._list;if(d>h){j.participants.addLocked=false;g.find("."+j.plugins.user.cssPrefix+"iconAdd").addClass("activeIcon")}else{j.participants.addLocked=true;g.find("."+j.plugins.user.cssPrefix+"iconAdd").removeClass("activeIcon")}}}if(h<=d){j.onMaxParticipantsChanged(j,f,d,j.participants.setMax);return}var e=0;c.each(j.participants.list,function(k,l){e++;if(e<=d){return true}delete j.participants.list[k]});j.onMaxParticipantsChanged(j,f,d,j.participants.setMax);j.onListChanged(j,j.participants.setMax)},removeGuests:function(d){c.each(d.participants.list,function(e,f){if(f.participantType===d.plugins.user.USER_TYPE.GUEST){delete d.participants.list[e]}});d.containers.memberList.refreshList(d);d.onListChanged(d,d.participants.setMax)},isFull:function(d){if(d.participants.count(d)>=d.participants.max){return true}else{return false}}},operatorsGroups:{_isListLoaded:false,list:{},isMemberOperator:function(e,f){if(!f.hasOwnProperty("groups")){return false}for(var d in f.groups){if(e.operatorsGroups.list.hasOwnProperty(d)){return true}}return false},isOperatorsGroup:function(e,d){return e.operatorsGroups.list.hasOwnProperty(d)},isListLoaded:function(d){return d.operatorsGroups._isListLoaded}},containers:{get:function(d){if(d.containers._rendered===null){d.containers._rendered=d.containers._render(d)}d.containers.memberList.refreshList(d);return d.containers._rendered},_render:function(d){return d.containers.mainPanel.get(d)},_rendered:null,mainPanel:{height:660,width:1200,get:function(d){if(d.containers.mainPanel._rendered===null){d.containers.mainPanel._rendered=d.containers.mainPanel._render(d)}return d.containers.mainPanel._rendered},_render:function(g){var e=c(' <div class="'+g.cssPrefix+'participantsPlugin">').append('<table style="width:100%; height:100%"><tr><td class="'+g.cssPrefix+'leftPanel"></td><td class="'+g.cssPrefix+'rightPanel"></td></tr></table>');var d=g.containers.memberList.get(g);e.find("td:first").append(d);var f=g.containers.rightPanel.get(g);e.find("td:last").append(f);return e},_rendered:null},rightPanel:{get:function(d){if(d.containers.rightPanel._rendered===null){d.containers.rightPanel._rendered=d.containers.rightPanel._render(d)}return d.containers.rightPanel._rendered},_render:function(f){var d=c('<div style="width: 100%; height: 100%">').append('<div style="padding-bottom: 6px;">'+_("Add new participants")+"</div>");var e=c('<div id="'+f.prefix+'addMembersContainer" style="width: 100%; height: 100%;" >');e.append(f.containers.buttonsPanel.get(f));if(f.plugins.addFromList!==null){e.append(f.containers.addFromListPanel.get(f).hide())}if(f.plugins.addById!==null){e.append(f.containers.addByIdPanel.get(f).hide())}e.append(f.containers.inviteGuestsPanel.get(f).hide());e.append(f.containers.otherMethodsButton.get(f).hide());d.append(e);return d},_rendered:null,_visibleMethodObjName:null},buttonsPanel:{get:function(d){if(d.containers.buttonsPanel._rendered===null){d.containers.buttonsPanel._rendered=d.containers.buttonsPanel._render(d)}return d.containers.buttonsPanel._rendered},_render:function(j){var d=j.containers.buttonsPanel;var e=c('<div id="'+j.prefix+'addMembersButtonsPanel" >').append("<hr/>");var h=d._buttons;for(var g in h){if(g==="inviteGuests"&&!j.participants.guestAccess){continue}else{if(g==="addById"&&j.plugins.addById===null){continue}else{if(g==="addFromList"&&j.plugins.addFromList===null){continue}}}var f=d._createButton(j,g,h[g]);e.append(f)}return e},_rendered:null,_buttons:{addFromList:_("Select from the contact list"),addById:_("Add via ID"),inviteGuests:_("Invite guests")},_createButton:function(f,g,e){var d=c('<div class="grayButton contentMargin memberListActionButton">');d.prop("id",f.prefix+g);d.text(e);d.click(function(){var h=this.id;if(h===undefined){return}f.containers.buttonsPanel._applyClick(f,h)});return d},_applyClick:function(d,e){if(e.length<=d.prefix.length){return}e=e.substr(d.prefix.length);e=e+"Panel";if(!d.containers.hasOwnProperty(e)){d.log("Undefined button : "+e);return}if(!d.containers[e].hasOwnProperty("show")){d.log("Invalid button or method : "+e);return}d.containers.buttonsPanel.hide(d);d.containers[e].show(d);d.containers.otherMethodsButton.show(d);d.containers.rightPanel._visibleMethodObjName=e},hide:function(d){d.containers.buttonsPanel.get(d).hide()},show:function(d){d.containers.buttonsPanel.get(d).show()},hideButton:function(f,e){var d=f.containers.buttonsPanel.get(f).find("#"+f.prefix+e);if(d.length===0){console.log("button '"+e+"' not found");return}d.hide()},showButton:function(f,e){var d=f.containers.buttonsPanel.get(f).find("#"+f.prefix+e);if(d.length===0){console.log("button '"+e+"' not found");return}d.show()}},otherMethodsButton:{get:function(d){if(d.containers.otherMethodsButton._rendered===null){d.containers.otherMethodsButton._rendered=d.containers.otherMethodsButton._render(d)}return d.containers.otherMethodsButton._rendered},_render:function(e){var g=false;if(!!navigator.userAgent.match(/Trident\/7\./)){var f=navigator.userAgent.toLowerCase();var g=(f.indexOf("msie")!==-1)?parseInt(f.split("msie")[1]):false}if(g!==false){var d=c('<p  style="margin-top: 55px; text-align: center;"><a href="#">'+_("Other ways to add users")+"</a></p>")}else{var d=c('<p  style="margin-top: 5px; text-align: center;"><a href="#">'+_("Other ways to add users")+"</a></p>")}d.click(function(){if(e.containers.rightPanel._visibleMethodObjName===null){return}if(!e.containers.hasOwnProperty(e.containers.rightPanel._visibleMethodObjName)){return}if(!e.containers[e.containers.rightPanel._visibleMethodObjName].hasOwnProperty("hide")){return}e.containers[e.containers.rightPanel._visibleMethodObjName].hide(e);e.containers.otherMethodsButton.hide(e);e.containers.buttonsPanel.show(e)});return d},hide:function(d){d.containers.otherMethodsButton.get(d).hide()},show:function(d){d.containers.otherMethodsButton.get(d).show()},_rendered:null},memberList:{get:function(d){if(d.containers.memberList._rendered===null){d.containers.memberList._rendered=d.containers.memberList._render(d)}return d.containers.memberList._rendered},_render:function(f){var j=f.containers.memberList;j._searchInput=c('<input tabindex="-1" class="lightGray" maxlength="64" type="text" />');j._searchField=c('<div class="inputBlock"></div>');j._searchField.append(j._searchInput);j._list=c('<div class="cpl_members full"></div>');j._maxUsersAvailable=c("<span></span>");j._totalMembers=c("<span></span>");j._listInfoContainer=c('<div class="'+f.cssPrefix+'listInfo">');j._usersNotFoundContainer=c('<div style="display: table; width: 100%; height:100%;"><div class="'+f.cssPrefix+'notFound">'+_("No users found. Check the search criteria")+"</div></div>");j._progressBarContainer=c('<div class="'+f.cssPrefix+'wait"><img src="/img/spinner.gif" alt="wait" /></div>');var d=c('<div style="height: 100%; width:100%"></div>').append('<div style="padding-bottom: 6px;">'+_("Conference participants")+":</div>");var e=c('<div class="cpl_userList">');var m=c('<div class="cpl_inner">');var g=c('<div class="searchBlock">');j._limits=c('<div class="limit">');j._limits.append(j._maxUsersAvailable);j._limits.append("<span> / </span>");j._limits.append(j._totalMembers);g.append(j._limits);g.append(j._searchField);g.append('<div class="clear">');e.append(g);m.append(j._listInfoContainer);m.append(j._list);m.append('<div class="clear">');var k=c('<div style="display: table-row; height:100%; width:100%">');e.append(k.append(c('<div style="display: table-cell; height:100%; width:100%; padding: 2px;">').append(m)));d.append(e);d.append("<br/>");d.append(f.containers.inviteButton.get(f));d.append(f.containers.inviteMessage.get(f));d.append(f.containers.sendInvitations.get(f));j.setMaxUsers(f,f.participants.max);j.setUsersCount(f,f.participants.count(f));var l=this._searchInput;l.val(_("Enter the user name"));l.focusin(function(){if(l.val()===_("Enter the user name")){l.val("");j._searchString=""}l.removeClass("lightGray")});l.focusout(function(){if(l.val().length===0){l.val(_("Enter the user name"));j._searchString=_("Enter the user name");l.addClass("lightGray")}});var h=function(n){if(j._searchString!==l.val()){j._searchString=l.val();j._searchTimeoutFunc(f)}};l.on("input",h);return d},setMaxUsers:function(e,d){e.containers.memberList._maxUsersAvailable.text(d)},setUsersCount:function(e,d){e.containers.memberList._totalMembers.text(d);if(d>=e.participants.max){e.containers.memberList._limits.addClass("reached")}else{e.containers.memberList._limits.removeClass("reached")}},refreshList:function(g){var f=g.containers.memberList._list;f.empty();for(var d in g.participants.list){var h=g.participants.list[d];var e=g.containers.member.get(g,h);f.append(e)}g.containers.memberList.setMaxUsers(g,g.participants.max);g.containers.memberList.setUsersCount(g,g.participants.count(g));g.onHtmlListChanged(g,g.containers.memberList.refreshList)},searchFromList:function(f){var u=f.containers.memberList._searchString.toLowerCase();var k=new RegExp(u,"ig");var j=f.containers.memberList._list;var n={displayName:{type:1},id:{type:1}};var m=false;for(var s in f.participants.list){var h=false;var e=f.participants.list[s];for(var p in n){var l=n[p].type;switch(l){case 1:var q=e[p];if(k.test(q)&&u.length!==0){q=q.replace(k,'<span class="'+f.cssPrefix+'found">$&</span>');c("#"+e.htmlId+"_"+p).html(q);h=true}else{c("#"+e.htmlId+"_"+p).text(q)}break;case 2:var r=e[p];var d=[];for(var o in r){var q=r[o];if(k.test(q)&&u.length!==0){h=true;q=q.replace(k,'<span class="'+f.cssPrefix+'found">$&</span>')}d.push(q)}if(d.length!==0){c("#"+e.htmlId+"_"+p).html(d.join(", "))}break}var g=j.find("#"+e.htmlId);if(h===false&&u.length!==0){g.hide()}else{m=true;g.show()}}}if(m){f.containers.memberList._listInfoContainer.hide()}else{if(u.length>0){f.containers.memberList._listInfoContainer.empty();f.containers.memberList._listInfoContainer.append(f.containers.memberList._usersNotFoundContainer);f.containers.memberList._listInfoContainer.show()}else{f.containers.memberList._listInfoContainer.hide()}}f.onHtmlListChanged(f,f.containers.memberList.searchFromList)},highlightMember:function(){},addMember:function(f,e,h,g){var d=f.containers.memberList;e.hide();if(g.addToTop===true){d._list.prepend(e)}else{d._list.append(e)}f.containers.memberList.setUsersCount(f,f.participants.count(f));if(d._searchString.length!==0&&d._searchString!==_("Enter the user name")){d.searchFromList(f);return true}e.show();f.onHtmlListChanged(f,f.containers.memberList.addMember);return true},removeMember:function(e,f){var d=c("#"+f);if(d===undefined||d.length===0){return false}d.remove();e.containers.memberList.setUsersCount(e,e.participants.count(e));e.onHtmlListChanged(e,e.containers.memberList.removeMember);return true},_searchTimeoutFunc:function(e){var d=e.containers.memberList;clearTimeout(d._searchTimeout);d._searchTimeout=setTimeout(function(){d.searchFromList(e)},d._searchDelay)},_searchDelay:50,_searchTimeout:null,_searchString:"",_rendered:null,_maxUsersAvailable:null,_limits:null,_totalMembers:null,_list:null,_searchField:null,_listInfoContainer:null,_progressBarContainer:null,_usersNotFoundContainer:null},inviteButton:{get:function(d){if(d.containers.inviteButton._rendered===null){d.containers.inviteButton._rendered=d.containers.inviteButton._render(d)}return d.containers.inviteButton._rendered},_render:function(e){var d=c('<div class="blueButton disabled" style="margin: 0 auto; width: 240px;">'+e.text.sendInvitations+"</div>");d.addClass("disabled");d.click(function(){if(d.hasClass("disabled")){return false}e.onInvitationClick(e)});return d},enable:function(e){if(e.participants.count(e)<1){return false}var d=e.containers.inviteButton.get(e);d.removeClass("disabled");d.removeAttr("title")},disable:function(e,f){var d=e.containers.inviteButton.get(e);d.addClass("disabled");if(typeof f==="string"){d.attr("title",f)}else{if(f!==false){d.removeAttr("title")}}},_rendered:null},member:{get:function(j,l,e){if(j.plugins.user===null){return c("<div>")}var k={prefix:j.prefix,nameLength:j.containers.member._nameVisibleLength,idLength:j.containers.member._idVisibleLength,groupsLength:j.containers.member._groupsVisibleLength};if(e!==undefined&&typeof e==="object"&&e!==null){k=c.extend(true,k,e)}var d=j.plugins.user.createUser(l,k);var g=c('<div class="'+j.plugins.user.cssPrefix+'memberActionsIcon">');d.prepend(g);d.addClass(j.plugins.user.cssPrefix+"hasButtons");if(l.disabled!==true){var f=c('<div class="'+j.plugins.user.cssPrefix+'iconRemove activeIcon">');f.click(function(){j.removeParticipant(j,l.id)});g.append(f)}var h=c('<div class="'+j.plugins.user.cssPrefix+'iconOperator activeIcon">');h.click(function(){j.changeOperatorStatus(j,l)});g.append(h);if(l.isOperator){d.addClass(j.plugins.user.cssPrefix+"operator")}if(l.isOwner||l.hasOperatorsGroup){h.addClass(j.plugins.user.cssPrefix+"immutable");if(l.isOwner){h.attr("title",_("The user is the conference owner. He or she automatically becomes a moderator in the conference."))}else{if(l.hasOperatorsGroup){h.attr("title",_("The user is a member of operators group. He or she automatically becomes a moderator in the conference."))}}}else{if(l.isOperator){h.attr("title",_("Revoke moderator rights"))}else{h.attr("title",_("Assign as a moderator"))}}d.hover(function(){j.mouseOnParticipant(j,l,d)},function(){j.mouseOutParticipant(j,l,d)});return d},getCreateUserObj:function(d){return{prefix:d.prefix,cssPrefix:d.cssPrefix,nameLength:d.containers.member._nameVisibleLength,idLength:d.containers.member._idVisibleLength,groupsLength:d.containers.member._groupsVisibleLength}},updateMembersStatus:function(g,d,e){var f=e.obj;g.updateListStatuses(f.participants.list)},setDefaultMembersStatus:function(f,d){var e=d.obj;f.setDefaultListStatuses(e.participants.list)},_nameVisibleLength:23,_idVisibleLength:24,_groupsVisibleLength:40},addByIdPanel:{get:function(d){if(d.containers.addByIdPanel._rendered===null){d.containers.addByIdPanel._rendered=d.containers.addByIdPanel._render(d)}return d.containers.addByIdPanel._rendered},_render:function(e){var d=c("<div>");e.plugins.addById=e.plugins.addById.bind(d,e.plugins.getAddByIdObj(e));return d},hide:function(d){d.containers.addByIdPanel.get(d).hide();d.plugins.addById.container.clear(d.plugins.addById);d.plugins.addById.btnContainer.getButton(d.plugins.addById,"addByIdButton")._rendered.addClass("disabled");d.log("hide AddById plugin")},show:function(d){d.containers.addByIdPanel.get(d).show();d.log("show AddById plugin")},_rendered:null},addFromListPanel:{get:function(d){if(d.containers.addFromListPanel._rendered===null){d.containers.addFromListPanel._rendered=d.containers.addFromListPanel._render(d)}return d.containers.addFromListPanel._rendered},_render:function(e){var d=c('<div style="height: 100%; width: 100%">');e.plugins.addFromList=e.plugins.addFromList.bind(d,e.plugins.getAddFromListObj(e));return d},prepareMember:function(h,g,j,d){if(j.disabled===true){return d}if(h.participants.list.hasOwnProperty(j.id)){d.hide()}var f=c('<div class="'+h.plugins.user.cssPrefix+'memberActionsIcon">');var e=c('<div class="'+h.plugins.user.cssPrefix+'iconAdd">');e.click(function(){d.hide();var k=c.extend(true,{},j);k.htmlId=generateUniqueId(h.prefix+"member_");h.addParticipant(h,k)});if(h.participants.count(h)<h.participants.max){e.addClass("activeIcon")}if(h.operatorsGroups.isMemberOperator(h,j)){d.addClass(h.plugins.user.cssPrefix+"operator");j.isOperator=true;j.hasOperatorsGroup=true}f.append(e);d.prepend(f);return d},hide:function(d){d.containers.addFromListPanel.get(d).hide();d.log("hide addFromListPanel plugin")},show:function(d){d.plugins.addFromList.refreshList(d.plugins.addFromList);d.containers.addFromListPanel.get(d).show();d.log("show addFromListPanel plugin")},_rendered:null},inviteGuestsPanel:{get:function(d){if(d.containers.inviteGuestsPanel._rendered===null){d.containers.inviteGuestsPanel._rendered=d.containers.inviteGuestsPanel._render(d)}return d.containers.inviteGuestsPanel._rendered},_render:function(f){f.containers.inviteGuestsPanel._nameField=c('<input type="text" />');var j=f.containers.inviteGuestsPanel._nameField;f.containers.inviteGuestsPanel._emailField=c('<input type="text" />');var l=f.containers.inviteGuestsPanel._emailField;f.containers.inviteGuestsPanel._addButton=c('<div class="grayButton small disabled"><div>');var h=f.containers.inviteGuestsPanel._addButton;var d=c('<div class="'+f.cssPrefix+'inviteGuests">');d.append('<div class="'+f.cssPrefix+'title">'+_("Add guests")+":</div>");d.append("<hr/>");var g=c('<div class="'+f.cssPrefix+'inner"></div>');var m=c('<div class="'+f.cssPrefix+'tr"></div>');m.append('<div class="'+f.cssPrefix+'td">'+_("Name")+":</div>");m.append(c('<div class="'+f.cssPrefix+"td "+f.cssPrefix+'filed">').append(j));var e=c('<div class="'+f.cssPrefix+'tr"></div>');e.append('<div class="'+f.cssPrefix+'td">'+_("E-mail")+":</div>");e.append(c('<div class="'+f.cssPrefix+"td "+f.cssPrefix+'filed">').append(l));g.append(m);g.append(e);j.add(l).keyup(function(){if(h.hasClass("locked")){return false}if(c.trim(j.val()).length>0&&c.trim(l.val()).length>0){h.removeClass("disabled")}else{h.addClass("disabled")}});l.keydown(function(){l.removeClass(f.cssPrefix+"error")});var k=f.containers.inviteGuestsPanel;h.click(function(){if(h.hasClass("disabled")){return}if(!k._emailRegex.test(l.val())){h.addClass("disabled");l.addClass(f.cssPrefix+"error");l.focus()}else{var p=l.val();var n=generateUniqueId(f.prefix+"guest_");var o={};o.id=p;o.htmlId=n;o.displayName=j.val();o.groups=[];o.type=f.plugins.user.USER_TYPE.GUEST;o.participantType=f.plugins.user.USER_TYPE.GUEST;f.addParticipant(f,o);l.val("");j.val("");h.addClass("disabled")}});h.text(_("Add"));d.append(g);d.append(h);return d},_nameField:null,_emailField:null,_addButton:null,hide:function(d){d.containers.inviteGuestsPanel.get(d).hide();d.log("hide inviteGuest panel")},show:function(d){d.containers.inviteGuestsPanel.get(d).show();d.log("show inviteGuest panel")},lock:function(d){d.containers.inviteGuestsPanel._addButton.addClass("locked");d.containers.inviteGuestsPanel._addButton.addClass("disabled")},unlock:function(d){d.containers.inviteGuestsPanel._addButton.removeClass("locked");if(c.trim(d.containers.inviteGuestsPanel._nameField.val()).length>0&&c.trim(d.containers.inviteGuestsPanel._emailField.val()).length>0){d.containers.inviteGuestsPanel._addButton.removeClass("disabled")}},_rendered:null,_emailRegex:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/},inviteMessage:{get:function(d){if(d.containers.inviteMessage._rendered===null){d.containers.inviteMessage._rendered=d.containers.inviteMessage._render(d)}return d.containers.inviteMessage._rendered},_render:function(f){var d=c('<div class="'+f.cssPrefix+'inviteMessage">');f.containers.inviteMessage._inviteMessageAnchor=c('<a href="#"></a>');f.containers.inviteMessage._inviteMessageAnchor.css("font-weight","normal");var e=c("<span>");e.append(f.containers.inviteMessage._inviteMessageAnchor);d.append(e);f.containers.inviteMessage._inviteMessageAnchor.click(function(){f.containers.inviteMessage._dialog.dialog("open")});f.containers.inviteMessage._dialog=f.containers.inviteMessage._renderDialog(f);f.containers.inviteMessage._saveDialog=f.containers.inviteMessage._renderSaveDialog(f);f.containers.inviteMessage.updateDialogBtn(f);return d},_renderDialog:function(e){var d=c('<div class="'+e.cssPrefix+'inviteMessageDialog">');d.dialog({autoOpen:false,height:(this.height===undefined?360:this.height),width:(this.width===undefined?640:this.width),modal:true,dialogClass:"tc-plugin-ui",draggable:true,resizable:true,close:function(){e.containers.inviteMessage.onClose(e)},buttons:[{text:_("Save"),id:e.prefix+"buttonApplyInviteMessage",click:function(){e.containers.inviteMessage.onApply(e)}},{text:_("Cancel"),id:e.prefix+"buttonCloseInviteMessage",click:function(){e.containers.inviteMessage.onClose(e);e.containers.inviteMessage._dialog.dialog("close")}}]});d.dialog("option","title",_("Invitation message"));e.containers.inviteMessage._errorField=c('<div class="'+e.cssPrefix+'error"></div>');e.containers.inviteMessage._errorField.hide();d.append(e.containers.inviteMessage._errorField);d.append('<label for="'+e.prefix+'inviteMessageSubject" class="smallTitle">'+_("Invitation message subject")+":</label>");e.containers.inviteMessage._inviteMessageSubjectField=c('<input id="'+e.prefix+'inviteMessageSubject" type="text"  value="'+e.inviteMessage.subject+'" />');d.append(e.containers.inviteMessage._inviteMessageSubjectField);d.append('<label for="'+e.prefix+'inviteMessageText" class="smallTitle">'+_("Invitation message")+":</label>");e.containers.inviteMessage._inviteMessageField=c('<textarea  id="'+e.prefix+'inviteMessageText" rows="6"></textarea>');e.containers.inviteMessage._inviteMessageField.text(e.inviteMessage.text);d.append(e.containers.inviteMessage._inviteMessageField);e.containers.inviteMessage._inviteMessageField.on("input",function(){if(e.containers.inviteMessage._inviteMessageField.val().trim().length===0){c("#"+e.prefix+"buttonApplyInviteMessage").prop("disabled",true).addClass("disabled")}else{c("#"+e.prefix+"buttonApplyInviteMessage").prop("disabled",false).removeClass("disabled")}});return d},_renderSaveDialog:function(e){var d=c('<div class="'+e.cssPrefix+'inviteMessageDialog">');d.dialog({autoOpen:false,height:(this.saveDialogHeight===undefined?160:this.saveDialogHeight),width:(this.saveDialogWidth===undefined?320:this.saveDialogWidth),modal:true,draggable:true,resizable:true,buttons:[{text:_("Cancel"),id:e.prefix+"buttonCancelSaveInviteMessage",click:function(){if(e.containers.inviteMessage._saveXHR!==null){e.containers.inviteMessage._saveXHR.abort()}}}]});d.dialog("option","title",_("Saving"));d.append("<div>"+_("Please wait")+"</div>");return d},setError:function(e,d){e.containers.inviteMessage._errorField.show();e.containers.inviteMessage._errorField.text(d)},removeError:function(d){d.containers.inviteMessage._errorField.empty();d.containers.inviteMessage._errorField.hide()},updateDialogBtn:function(e){var d=e.text.invitationSample;e.containers.inviteMessage._inviteMessageAnchor.text(d)},onClose:function(d){d.containers.inviteMessage._inviteMessageField.val(d.inviteMessage.text);d.containers.inviteMessage._inviteMessageSubjectField.val(d.inviteMessage.subject);c("#"+d.prefix+"buttonApplyInviteMessage").prop("disabled",false).removeClass("disabled")},onApply:function(d){d.containers.inviteMessage._saveDialog.dialog("open");d.containers.inviteMessage._saveXHR=c.post(d.handlers.saveInviteMessage,{message:d.containers.inviteMessage._inviteMessageField.val(),subject:d.containers.inviteMessage._inviteMessageSubjectField.val()},function(){},"json").done(function(e){if(!e.status){if(e.error==="undefined"){d.containers.inviteMessage.setError(d,_("Unknown error"))}else{d.containers.inviteMessage.setError(d,e.error)}return}d.inviteMessage.text=d.containers.inviteMessage._inviteMessageField.val();d.inviteMessage.subject=d.containers.inviteMessage._inviteMessageSubjectField.val();d.containers.inviteMessage.updateDialogBtn(d);d.containers.inviteMessage._dialog.dialog("close")}).fail(function(e,g,f){d.containers.inviteMessage.setError(d,_("System error")+": "+g)}).always(function(){d.containers.inviteMessage._saveXHR=null;d.containers.inviteMessage._saveDialog.dialog("close")})},_inviteMessageSubjectField:null,_inviteMessageField:null,_errorField:null,_inviteMessageAnchor:null,_dialog:null,_saveDialog:null,_saveXHR:null,_rendered:null},sendInvitations:{get:function(d){if(d.containers.sendInvitations._rendered===null){d.containers.sendInvitations._rendered=d.containers.sendInvitations._render(d)}return d.containers.sendInvitations._rendered},_render:function(e){var d=c('<div class="'+e.cssPrefix+'inviteMessage"></div>');return d},setEnabled:function(e,d){if(e.containers.sendInvitations._chcekbox!==null){e.containers.sendInvitations._chcekbox.prop("checked",d)}},_chcekbox:null,_rendered:null}},addParticipant:function(h,g,j,e){h.groupLog({name:"Add participant (id : "+g.id+")",fields:["participant","params"]},g,j);var f=h.participants.count(h);if(f>h.participants.max){h.log("Participants list is full, unable to add user");return false}if(j===undefined||j===null||typeof j!=="object"){j={}}if(h.participants.list.hasOwnProperty(g.id)&&j.refresh!==true){return}else{if(h.participants.list.hasOwnProperty(g.id)&&j.refresh===true){h.removeParticipant(h,g.id);h.plugins.addFromList.refreshList(h.plugins.addFromList);f--}}if(e&&!g.isOwner){if(h.operatorsGroups.isMemberOperator(h,g)){g.isOperator=true;g.hasOperatorsGroup=true}}h.participants.list[g.id]=g;var d=h.containers.member.get(h,g,j);h.containers.memberList.addMember(h,d,g,j);h.onListChanged(h,h.addParticipant);f++;h.log("Paricipants.count: "+f);if(h.invitationStatus===c.conferencePlugin.INVITATIONS_STATUSES.OK){h.containers.inviteButton.enable(h)}if(f<h.participants.max){return true}h.participants.addLocked=true;h.log("Participants list is full, lock adding buttons");if(h.plugins.addFromList!==null){h.plugins.addFromList.containers.list._list.find("."+h.plugins.user.cssPrefix+"iconAdd").removeClass("activeIcon")}h.containers.inviteGuestsPanel.lock(h);if(h.plugins.addById!==null){h.plugins.addById.btnContainer.lockAll(h.plugins.addById)}},removeParticipant:function(f,g){f.log("Remove participant (id : "+g+" )");if(!f.participants.list.hasOwnProperty(g)){f.log("Participant ID '"+g+"' not found!");return}var d=f.participants.list[g].htmlId;delete f.participants.list[g];f.containers.memberList.removeMember(f,d);f.onListChanged(f,f.removeParticipant);var e=f.participants.count(f);if(f.plugins.addFromList!==null){if(f.plugins.addFromList.inList(f.plugins.addFromList,g)){d=f.plugins.addFromList.list[g].htmlId;c("#"+d).show()}}f.log("Participants count: "+e);if(e===0){f.containers.inviteButton.disable(f,false)}if(e>=f.participants.max){return}else{if(!f.participants.addLocked){return}f.participants.addLocked=false}f.log("Participants list has free space, unlock adding buttons");f.containers.inviteGuestsPanel.unlock(f);if(f.plugins.addById!==null){f.plugins.addById.btnContainer.unlockAll(f.plugins.addById)}if(f.plugins.addFromList!==null){f.plugins.addFromList.containers.list._list.find("."+f.plugins.user.cssPrefix+"iconAdd").addClass("activeIcon")}},changeOperatorStatus:function(e,f){if(f.isOwner||f.hasOperatorsGroup){return false}var d=c("#"+f.htmlId);if(!f.isOperator){f.isOperator=true;d.addClass(e.plugins.user.cssPrefix+"operator");d.find("."+e.plugins.user.cssPrefix+"iconOperator").attr("title",_("Revoke moderator rights"))}else{f.isOperator=false;d.removeClass(e.plugins.user.cssPrefix+"operator");d.find("."+e.plugins.user.cssPrefix+"iconOperator").attr("title",_("Assign as a moderator"))}},getParticipants:function(f,d){if(d===true){return c.extend({},f.participants.list)}var e=[];c.each(f.participants.list,function(g,h){e.push(h.id)});return e},isInvitationEnabled:function(d){return d.enableInvitations},setInvitationEnabled:function(e,d){e.enableInvitations=d;e.containers.sendInvitations.setEnabled(d)},setInvitationsStatus:function(e,d){e.invitationStatus=d;switch(d){case c.conferencePlugin.INVITATIONS_STATUSES.NOT_SAVE:e.containers.inviteButton.disable(e,_("Invitations delivery will be available after saving the conference and setting the starting time"));break;case c.conferencePlugin.INVITATIONS_STATUSES.SCHEDULE_NONE:e.containers.inviteButton.disable(e,_("Invitations delivery will be available after setting the starting time"));break;case c.conferencePlugin.INVITATIONS_STATUSES.OK:e.containers.inviteButton.enable(e)}},onCreated:function(d){},onDialogApply:function(e,d){},onMaxParticipantsChanged:function(f,d,e){},onListChanged:function(e,d){},onHtmlListChanged:function(e,d){},onInvitationClick:function(d){},mouseOnParticipant:function(e,f,d){},mouseOutParticipant:function(e,f,d){},onParticipantClick:function(e,f,d){},plugins:{user:null,addById:null,addFromList:null,getAddByIdObj:function(d){var e={buttons:{addByIdButton:{text:_("Add"),click:function(h,f,g){var j=c.extend(true,{},h.member);j.htmlId=generateUniqueId(d.prefix+"member");d.addParticipant(d,j);h.btnContainer.lockAll(h)},onSearchFieldEmpty:function(h,f,g){h.btnContainer.lockAll(h)},onSearchStarted:function(h,f,g){h.btnContainer.lockAll(h)},onSearchFinished:function(k,g,f,h,j){if(f===false){return}if(d.participants.list.hasOwnProperty(k.member.id)||d.participants.addLocked){return}k.btnContainer.unlockAll(k)},onRendered:function(h,f,g){h.btnContainer.lockAll(h)},onLock:function(h,f,g){f.addClass("disabled")},onUnlock:function(h,f,g){if(d.participants.list.hasOwnProperty(h.member.id)||h.member.id===undefined||h.member.id===null){return}f.removeClass("disabled")}}},plugins:{user:d.plugins.user}};return e},getAddFromListObj:function(d){var e={height:440,onMemberClick:function(f,g){},plugins:{user:d.plugins.user},beforeMemberAdd:function(g,j,f){var h=d.containers.addFromListPanel.prepareMember(d,g,j,f);return h}};return e},init:function(d){if(d.plugins.user!==null){d.plugins.user.addUpdateListener(d.containers.member.updateMembersStatus,{obj:d});d.plugins.user.addErrorListener(d.containers.member.setDefaultMembersStatus,{obj:d})}}},log:function(){if(!this.debug){return}if(arguments.length<1){return}if(arguments.length>1){console.log.apply(console,arguments)}else{console.debug(arguments[0])}},groupLog:function(){if(!this.debug){return}if(arguments.length<2){return}var l=arguments[0];if(typeof l!=="object"){return}var e=l.name?l.name:"";var j=l.collapsed===false?false:true;var h=l.fields?l.fields:new Array();var g=l.type==="error"?"error":"log";if(j&&g!=="error"){console.groupCollapsed(e)}else{console.group(e)}for(var f=1,d=0;f<arguments.length;f++,d++){if(h[d]!==undefined){console[g](h[d]+":",arguments[f])}else{console[g](arguments[f])}}console.trace();console.groupEnd()}};c.fn.conferenceParticipantsPlugin=function(e){var d=this.data("participantsPlugin");if(d===undefined||d===false){var d=c.extend(true,{},b);c.extend(true,d,c.conferenceParticipantsPlugin);c.extend(true,d,e);d.prefix=generateUniqueId(d.prefix)+"_";d.parent=this;this.append(d.getContainer(d));this.data("participantsPlugin",d);d.plugins.init(d);d.onCreated(d,e)}return d};c.conferenceParticipantsPlugin=new a()})(jQuery);(function(c){var a=function(){};a.prototype.FIELD={DAY_OF_WEEK:1,MONTHLY_INTERVAL:2,START_DATE:3,START_TIME:4,DURATION:5,TIME_ZONE:6};a.prototype.INV_FIELDS={1:"DAY_OF_WEEK",2:"MONTHLY_INTERVAL",3:"START_DATE",4:"START_TIME",5:"DURATION",6:"TIME_ZONE"};a.prototype.init=function(d){if(d!==undefined&&typeof d==="object"){c.extend(true,b,d)}};a.prototype.bind=function(e,d){return d.conferenceSchedulePlugin(e)};c.conferenceSchedulePlugin=new a();var b={region:"ru",timeZones:{},prefix:"cspl_",schedule:"none",currentSchedule:"none",items:{none:{fields:[c.conferenceSchedulePlugin.FIELD.START_DATE,c.conferenceSchedulePlugin.FIELD.TIME_ZONE],disabled:true,renderTooltip:function(d){return _("The conference will be started manually.")},name:_("Without schedule")},once:{fields:[c.conferenceSchedulePlugin.FIELD.START_DATE,c.conferenceSchedulePlugin.FIELD.DURATION,c.conferenceSchedulePlugin.FIELD.TIME_ZONE],renderTooltip:function(e){var d=new Date(e.getStartTime(e));return _("Next event start")+": "+e.formatTime(d)},onChange:function(d,f,e){d.refreshTooltip(d,this)},name:_("Nonrecurrent")},weekly:{fields:[c.conferenceSchedulePlugin.FIELD.DAY_OF_WEEK,c.conferenceSchedulePlugin.FIELD.START_TIME,c.conferenceSchedulePlugin.FIELD.DURATION,c.conferenceSchedulePlugin.FIELD.TIME_ZONE],renderTooltip:function(e){var d=e.getStartTime(e);if(d===-1){return""}return _("Next event start")+": "+e.formatTime(new Date(d))},onChange:function(d,f,e){d.refreshTooltip(d,this)},name:_("Every week")}},fields:{DAY_OF_WEEK:[0,0,0,0,0,0,0],MONTHLY_INTERVAL:null,START_DATE:null,START_TIME:null,DURATION:null,TIME_ZONE:null},fieldNames:{DAY_OF_WEEK:"scheduleDayOfWeek",MONTHLY_INTERVAL:"scheduleInterval",START_DATE:"scheduleStartDate",START_TIME:"scheduleStartTime",DURATION:"scheduleDuration",TIME_ZONE:"scheduleTimeZone"},last_valide_start_date:new Date().getTime(),max_start_date_offset:365,getContainer:function(f){var d=f.container.get(f);var e=d.find("li.selected").removeClass("selected");f.onMenuItemSelected(f,d,e);return d},container:{get:function(d){if(d.container._rendered===null){d.container._rendered=d.container._render(d)}return d.container._rendered},_render:function(k){var f=k.container.menu.get(k);var l=k.container.schedule.get(k);var e=c('<div class="tc-plugin-ui">').append('<div class="smallTitle">'+_("Conference schedule")+":</div>").append(f);e.append(c('<input type="text" style="height:0px;width:1px; border-radius: none; padding:0px;margin:0px; line-height: 0px;  border:none; outline:none;"  />'));e.append(l);var f=e.find("#"+k.prefix+"scheduleMenu");if(f.length>0){f.find("li").click(function(n){k.onMenuItemSelected(k,e,c(n.target))})}var h=e.find("#"+k.prefix+k.fieldNames.START_DATE);var j=e.find("#"+k.prefix+k.fieldNames.DURATION);h.datetimepicker(c.extend(c.timepicker.regional[k.region],c.datepicker.regional[k.region],{buttonText:"",beforeShow:function(n){c("#"+n.id+"Entry").find("td.fieldError").empty()},onSelect:function(n,o){k.onFieldChange(k,c.conferenceSchedulePlugin.FIELD.START_DATE,h,n)},onChangeMonthYear:function(n,p,q,o){k.onFieldChange(k,c.conferenceSchedulePlugin.FIELD.START_DATE,h,o.formattedDateTime)},dateFormat:"dd.mm.yy"}));if(k.fields.START_DATE===null){h.datetimepicker("setDate",new Date())}var g=e.find("#"+k.prefix+k.fieldNames.START_TIME);g.timepicker(c.extend(c.timepicker.regional[k.region],c.datepicker.regional[k.region],{onSelect:function(n,o){k.onFieldChange(k,c.conferenceSchedulePlugin.FIELD.START_TIME,g,n)},beforeShow:function(n){c("#"+n.id+"Entry").find("td.fieldError").empty()},onChangeMonthYear:function(n,p,q,o){k.onFieldChange(k,c.conferenceSchedulePlugin.FIELD.START_TIME,g,o.formattedDateTime)},buttonPanel:"<div>test</div>",showButtonPanel:false}));if(k.fields.START_TIME===null){g.val("00:00")}j.timepicker(c.extend(c.timepicker.regional[k.region],c.datepicker.regional[k.region],{onSelect:function(n,o){k.onFieldChange(k,c.conferenceSchedulePlugin.FIELD.DURATION,j,n)},beforeShow:function(n){c("#"+n.id+"Entry").find("td.fieldError").empty()}}));if(k.fields.DURATION===null){j.val("")}var d=e.find("#"+k.prefix+k.fieldNames.DAY_OF_WEEK);var m=d.weekpicker({listHeight:130,onShow:function(){d.parent("tr").find("td.fieldError").empty()},onChange:function(n){k.onFieldChange(k,c.conferenceSchedulePlugin.FIELD.DAY_OF_WEEK,d,n)}});m.setDays(k.fields.DAY_OF_WEEK);return e},menu:{get:function(d){if(d.container.menu._rendered===null){d.container.menu._rendered=d.container.menu._render(d)}return d.container.menu._rendered},_render:function(g){if(g.items===undefined||typeof g.items!=="object"){return c("<span>")}var f=0;for(var e in g.items){if(g.items.hasOwnProperty(e)){f++}}if(f<2){return c("<span>")}var d=c('<div class="menu">');var h='<ul id="'+g.prefix+'scheduleMenu">';c.each(g.items,function(l,k){var j="itemSchedule"+l[0].toUpperCase()+l.substring(1);h+="<li "+(l===g.schedule?'class="selected"':"")+'id="'+g.prefix+j+'">'+(k.name===undefined?l:k.name)+"</li>"});h+="</ul>";d.append(h);d.append('<div class="clear"></div>');if(d.find("li.selected").length===0){d.find("li:first").addClass("selected")}return d},_rendered:null},schedule:{get:function(d){if(d.container.schedule._rendered===null){d.container.schedule._rendered=d.container.schedule._render(d)}return d.container.schedule._rendered},_render:function(g){var d=c('<table id="schedule-form" class="scheduleTable">').append('<colgroup class="fieldName" />').append("<colgroup />").append('<colgroup class="fieldError" />').append('<tr class="hidden" id="'+g.prefix+g.fieldNames.DAY_OF_WEEK+'Entry"><td>'+_("Day of week")+':</td><td id="'+g.prefix+g.fieldNames.DAY_OF_WEEK+'" class="field"></td><td class="fieldError"></td></tr>').append('<tr class="hidden" id="'+g.prefix+g.fieldNames.MONTHLY_INTERVAL+'Entry"><td>'+_("The interval between conferences")+':</td><td class="field"><select class="'+g.prefix+'scheduleValue" '+ +' id="'+g.prefix+g.fieldNames.MONTHLY_INTERVAL+'" ><option>'+_("Calendar month")+"</option><option>"+_("4 weeks")+'</option></select></td><td class="fieldError"></td></tr>').append('<tr class="hidden" id="'+g.prefix+g.fieldNames.START_DATE+'Entry"><td>'+_("The start date and time")+':</td><td class="field"><input id="'+g.prefix+g.fieldNames.START_DATE+'" class="'+g.prefix+'scheduleValue start-date-value" readonly="readonly" tabindex="-1" type="text" '+(g.fields.START_DATE!==null?' value="'+g.fields.START_DATE+'" ':"")+' /></td><td class="fieldError"></td></tr>').append('<tr class="hidden" id="'+g.prefix+g.fieldNames.START_TIME+'Entry"><td>'+_("The start time")+':</td><td class="field"><input id="'+g.prefix+g.fieldNames.START_TIME+'" class="'+g.prefix+'scheduleValue" readonly="readonly" tabindex="-1" type="text" '+(g.fields.START_TIME!==null?' value="'+g.fields.START_TIME+'" ':"")+' /></td><td class="fieldError"></td></tr>').append('<tr class="hidden" id="'+g.prefix+g.fieldNames.DURATION+'Entry"><td>'+_("Duration")+':</td><td class="field"><input id="'+g.prefix+g.fieldNames.DURATION+'" class="'+g.prefix+'scheduleValue" tabindex="-1" readonly="readonly" type="text" '+(g.fields.DURATION!==null?' value="'+g.fields.DURATION+'" ':"")+' /></td><td class="fieldError"></td></tr>');if(g.fields.TIME_ZONE===null||g.fields.TIME_ZONE==="null"){g.fields.TIME_ZONE=(new Date().getTimezoneOffset()*-1)}var e=c('<select class="'+g.prefix+'scheduleValue" name="'+g.prefix+g.fieldNames.TIME_ZONE+'" id="'+g.prefix+g.fieldNames.TIME_ZONE+'">');c.each(g.timeZones,function(j,k){if(parseInt(j)===parseInt(g.fields.TIME_ZONE)){e.append('<option selected="selected" value="'+j+'">'+k+"</option>")}else{e.append('<option value="'+j+'">'+k+"</option>")}});e.change(function(){g.onFieldChange(g,c.conferenceSchedulePlugin.FIELD.TIME_ZONE,e,e.val())});var f=c('<tr class="hidden" id="'+g.prefix+g.fieldNames.TIME_ZONE+'Entry">');f.append("<td>"+_("Timezone")+":</td>");var h=c('<td class="field">');h.append(e);f.append(h);f.append('<td class="fieldError"></td>');d.append(f).append('<tr class="scheduleHint hidden" id="'+g.prefix+'scheduleHint"><td class="greenText" colspan="3"></td></tr>');return d},_rendered:null},_renderedButton:null,_rendered:null},onCreated:function(d,e){},onRendered:function(d){},onMenuItemSelected:function(h,e,d){if(d.hasClass("selected")){return}if(d===undefined||d.length===0){return}var m=d.attr("id").substr(h.prefix.length+"itemSchedule".length);m=m[0].toLowerCase()+m.substr(1);var p=h.items[m];if(p===undefined){return}h.currentSchedule=m;e.find("#"+h.prefix+"scheduleMenu li").removeClass("selected");e.find("tr").addClass("hidden");e.find("."+h.prefix+"scheduleValue").prop("disabled",false);d.addClass("selected");e.find(".fieldError").empty();var k=p.fields;if(k===undefined){return}var f=false;if(p.hasOwnProperty("disabled")){if(p.disabled===false){return}if(c.isArray(p.disabled)){f=p.disabled}else{if(p.disabled===true){f=k}}}var n=[];for(var g=0;g<k.length;g++){var o=k[g];var j=null;var l=h.fieldNames[c.conferenceSchedulePlugin.INV_FIELDS[o]];j=e.find("#"+h.prefix+l+"Entry").removeClass("hidden");if(j!==null){j=j.find("."+h.prefix+"scheduleValue");if(f!==false){if(c.inArray(o,f)!==-1){j.prop("disabled",true)}}n[o]=j}}if(p.hasOwnProperty("renderTooltip")){var q=p.renderTooltip.call(p,h);if(q===undefined){q=""}e.find("#"+h.prefix+"scheduleHint").removeClass("hidden").find("td").text(q)}},refreshTooltip:function(f,d){if(d.hasOwnProperty("renderTooltip")){var e=d.renderTooltip.call(d,f);if(e===undefined){e=""}f.container.get(f).find("#"+f.prefix+"scheduleHint").removeClass("hidden").find("td").text(e)}},onFieldChange:function(g,f,h,e){var d=g.items[g.currentSchedule];if(!d.hasOwnProperty("onChange")){return}d.onChange.call(d,g,f,h)},onSave:function(k){c(".date-error-message").addClass("hidden");if(!k.items.hasOwnProperty(k.currentSchedule)){return}var m=k.items[k.currentSchedule];if(m.disabled){return true}var g=[];var n=m.fields;for(var l=0;l<n.length;l++){var p=n[l];var o=k.fieldNames[c.conferenceSchedulePlugin.INV_FIELDS[p]];switch(p){case c.conferenceSchedulePlugin.FIELD.DAY_OF_WEEK:var e=c("#"+k.prefix+o).weekpicker().getDays();if(e.length===0){g.push([o,1])}break;case c.conferenceSchedulePlugin.FIELD.START_DATE:var e=c("#"+k.prefix+o).datetimepicker("getDate");var j=(new Date(Date.now()-300000)<=e);if(!j){g.push([o,2])}break;case c.conferenceSchedulePlugin.FIELD.DURATION:var d=c("#"+k.prefix+o)[0].value;if(d.length===0||d==="00:00"){g.push([o,3])}break;default:var d=c("#"+k.prefix+o).val();if(d===null||d===undefined){g.push([o,1])}else{if(d.length===0){g.push([o,1])}}}}if(g.length===0){return true}for(var l=0;l<g.length;l++){var f=c("#"+k.prefix+g[l][0]+"Entry").find("td:last");if(f.length===0){continue}f.empty();var h="";switch(g[l][1]){case 1:h=_("Error: The field is empty");break;case 2:h=_("You can’t select a date in the past");break;case 3:h=_("Please specify the conference duration")}f.append(c('<div class="error"></div>').text(h))}return false},getSchedule:function(e){var n=e.items[e.schedule];var d=e.container.get(e);var f={type:e.schedule};var j=n.fields;for(var g=0;g<j.length;g++){var l=j[g];var k=c.conferenceSchedulePlugin.INV_FIELDS[l];var m=e.fieldNames[k];if(m===undefined){continue}var h=d.find("#"+e.prefix+m);if(h.length===0){continue}switch(l){case c.conferenceSchedulePlugin.FIELD.DAY_OF_WEEK:f[k]=h.weekpicker().getDays();break;case c.conferenceSchedulePlugin.FIELD.START_DATE:case c.conferenceSchedulePlugin.FIELD.START_TIME:f[k]={};f[k].raw=h.val();f[k].value=h.datetimepicker("getDate");break;case c.conferenceSchedulePlugin.FIELD.DURATION:default:f[k]=h.val();break}}return f},getStartTime:function(j){switch(j.currentSchedule){case"weekly":var h=this.container.get(j).find("#"+j.prefix+j.fieldNames.DAY_OF_WEEK).weekpicker();var o=h.getDays();if(o.length===0){return -1}var e=new Date();var m=e.getDay();var p=new Date(Date.now()-300000);var g=this.container.get(j).find("#"+j.prefix+j.fieldNames.START_TIME).datepicker("getDate");for(var k=0,d=0;k<=1;k++,m=0){for(var n=m;n<=6;n++,d++){if(c.inArray(n,o)===-1){continue}g.setDate(e.getDate()+d);if(p<g){return g.getTime()}}}return 0;break;case"once":var l=this.container.get(j).find("#"+j.prefix+j.fieldNames.START_DATE);var g=l.datepicker("getDate");var f=g.getTime();f=(f-(new Date().getTime()))<b.daysTo_msecs(b.max_start_date_offset)?f:b.last_valide_start_date;l.value=b.formatTime(new Date(f));b.last_valide_start_date=f;return f;break;default:return 0}},daysTo_msecs:function(d){return d*24*3600*1000},getTimeZoneString:function(g){var f=parseInt(c("#"+g.prefix+g.fieldNames.TIME_ZONE).find("option:selected").val());if(f===0){return"GMT"}var d=0;if(f>0){d=Math.floor(f/60).toString();if(d.length<2){d="+0"+d}else{d="+"+d}}else{d=Math.ceil(f/60).toString();if(d.length===2){d="-0"+d.substr(1)}}var e=Math.abs((f%60)).toString();if(e.length<2){e="0"+e}return"GMT "+d+":"+e},formatTime:function(f){var e=f.getDate();if(e<10){e="0"+e}var j=f.getMonth()+1;if(j<10){j="0"+j}var h=f.getFullYear();var d=f.getHours();if(d<10){d="0"+d}var k=f.getMinutes();if(k<10){k="0"+k}var g=e+"."+j+"."+h+" "+d+":"+k;return g}};c.fn.conferenceSchedulePlugin=function(e){var d=this.data("conferenceSchedulePlugin");if(d===undefined||d===false){var d=c.extend(true,{},b);c.extend(true,d,c.searchByIdPlugin);c.extend(true,d,e);d.prefix=generateUniqueId(d.prefix)+"_";d.parentObject=this;this.append(d.getContainer(d));this.data("conferenceSchedulePlugin",d);d.onCreated(d,e)}return d}})(jQuery);(function(c){var a=function(d){};a.prototype.init=function(d){if(d!==undefined&&typeof d==="object"&&d!==null){c.extend(true,b,d)}};a.prototype.CONFERENCE_TYPE={CONFERENCE:0,WEBINAR:1};a.prototype.CURRENT_ACTION={CREATE:1,EDIT:2};a.prototype.INVITATIONS_STATUSES={OK:1,SCHEDULE_NONE:3,NOT_SAVE:4};a.prototype.SAVING_ERRORS={CONFERENCE_NOT_FOUND:1,CONFERENCE_RUNNING:2};a.prototype.DESCRIPTION_MAX_LENGTH=10000;a.prototype.setUserPlugin=function(d){b.plugins.userPlugin=d};a.prototype.setMemberListPlugin=function(d){b.plugins.memberListPlugin=d};a.prototype.setSchemaPlugin=function(d){b.plugins.schemaPlugin=d};a.prototype.setSchedulePlugin=function(d){b.plugins.schedulePlugin=d};a.prototype.setParticipantsPlugin=function(d){b.plugins.participantsPlugin=d};a.prototype.setAddByIdPlugin=function(d){b.plugins.addByIdPlugin=d};a.prototype.setPresetManagerPlugin=function(d){b.plugins.presetManagerPlugin=d};c.conferencePlugin=new a();var b={region:"en",debug:false,prefix:"cmpl",cssPrefix:"cmpl_",handlers:{owner:"/admin/handler/getUserById",participantsList:"/admin/handler/getParticipants",applyCreate:"/admin/conferences/applyCreate",applyEdit:"/admin/conferences/applyEdit",sendInvitations:"/admin/conferences/sendInvitations/",cidExists:"/admin/conferences/isExists/",getPresetList:"/admin/conferences/getPresetList",getCDNvideoIframe:"/admin/handler/getCDNvideoIframe",getOperatorsGroups:"/admin/group/getOperators",conferenceTemplatesControllerUrl:"/api/v3.1/templates/conferences",setTemplateUserTimeZone:"/admin/conferences/setTemplateUserTimeZone"},links:{recordController:"/admin/conferences/recordings/"},guestAccess:{sendMsg:true,sendVideo:true,count:0},name:null,cid:{charRegexp:/[a-z\d\.\-\_ ]/i,regexp:/^(\\c\\)[a-z\d\.\-\_]+$/i,value:null,real:null,alias:null},template_id:"",rtsp:{status:false,allowed:true,announce:false,announceURL:"",announceLogin:"",announcePassword:"",inactiveReceiverTimeout:60,rtpOverTcp:true,videoCodec:"VP8",audioCodec:"MP3",preset:"",provider_type:"",videoCodecList:{VP8:"VP8",H264:"H264"},audioCodecList:{MP3:"MP3",PCM:"L16",G711U:"G711Ulaw64k",G711A:"G711Alaw64k"}},udp:{status:false,address:"",allowed:true},webUrl:"/",outsideUrl:"/",owner:null,description:null,type:c.conferencePlugin.CONFERENCE_TYPE.CONFERENCE,action:c.conferencePlugin.CURRENT_ACTION.CREATE,sslEnabled:false,schemaId:3,podiums:6,enableRecording:{globalSetting:0,thisConference:false},main:function(e){var d=e.containers.get(e);if(e.owner!==null){e._loadOwner(e)}if(e.type===c.conferencePlugin.CONFERENCE_TYPE.WEBINAR||e.type===c.conferencePlugin.CONFERENCE_TYPE.CONFERENCE){e._setConferenceType(e,e.type)}else{return c("<div></div>")}return d},containers:{get:function(d){if(d.containers._rendered===null){d.containers._rendered=d.containers._render(d)}return this._rendered},_render:function(k){var d=c("<div></div>");var e=k.containers._renderMainPanel(k);var l=k.containers.scheduleContainer.get(k);var j=k.containers.participantsContainer.get(k);var f=k.containers.additional.get(k);var n=k.containers.rtsp.get(k);var h=k.containers.enableRecording.get(k);var o=k.containers._renderButtons(k);var m=c("<div></div>").append(e).append('<div class="clear"><br/></div>').append(j).append(l).append('<div class="clear"><br/></div>').append(f).append('<div class="clear"><br/></div>').append(n).append('<div class="clear"><br/></div>').append(h);if(k.type===c.conferencePlugin.CONFERENCE_TYPE.WEBINAR){var g=k.containers.integration.get(k);if(k.schemaId===1||k.schemaId==="1"){k.containers.integration.hide(k)}else{k.containers.integration.show(k)}m.append('<div class="clear"><br/></div>').append(g)}m.append('<div class="clear"><br/></div>').append(o).append('<div class="clear"></div>');d.append(m);return d},_renderMainPanel:function(f){var d=c('<div class="whiteBlock">');var e=c("<table>").append('<colgroup><col width="200px"></col><col></col><col width="200px"></col></colgroup>').append(f.containers.name.get(f)).append(f.containers.schemaContainer.get(f)).append(f.containers.owner.get(f)).append(f.containers.cid.get(f)).append(f.containers.guestAccess.get(f)).append(f.containers.showAdvanced.get(f)).append(f.containers.udp.get(f));if(!f.udp.allowed){f.containers.udp.setEnabled(f,false)}d.append(e);return d},type:{get:function(d){if(d.containers.type._rendered===null){d.containers.type._rendered=d.containers.type._render(d)}return d.containers.type._rendered},_render:function(j){var e=c("<div></div>");e.append("<h1>"+_("New video conference")+"</h1>");e.append("<div>"+_("Select the type of the conference")+":</div>");var f=c('<div class="typeList"></div>');e.append(f);var h=c("<div></div>");var m=c('<div class="conferenceType"></div>');var k=c('<div class="content"></div>');m.append(k);k.append('<div class="title">'+_("Private Conference")+"</div>");k.append('<div class="description">'+_("Authentication is required. Any TrueConf client application supporting WebRTC can join it. Allows to invite existing users via calendar invitations and conference web pages. Automatically adds pre-configured participants to the conference.")+"</div>");m.append('<div type="'+c.conferencePlugin.CONFERENCE_TYPE.CONFERENCE+'" class="btn">'+_("Create")+"</div>");h.append(m);var g=c("<div></div>");var d=c('<div class="conferenceType"></div>');var l=c('<div class="content"></div>');d.append(l);l.append('<div class="title">'+_("Public Web Conference")+"</div>");l.append('<div class="description">'+_("In addition to Private Conference features allows any user with a link to join it, including guests and remote participants. Can be embedded into third-party web sites via HTML5 widget. Also known as Web Conference or Webinar.")+"</div>");if(!j.enableWebinars){l.append('<div class="notAvailable">('+_('Not available in your <a href="%license_url">license</a>').replace("%license_url","/admin/general/info")+")</div>");d.addClass("disabled")}d.append('<div type="'+c.conferencePlugin.CONFERENCE_TYPE.WEBINAR+'" class="btn">'+_("Create")+"</div>");g.append(d);f.append(h);f.append(g);f.find(".btn").click(function(){var n=c(this);if(n.parent().hasClass("disabled")){return false}var o=c(this).attr("type");j.containers.type.onSelect(j,o)});return e},onSelect:function(e,d){},_rendered:null},name:{get:function(d){if(d.containers.name._rendered===null){d.containers.name._rendered=d.containers.name._render(d)}return d.containers.name._rendered},_render:function(l){var d=c("<tr>");var j=c("<td>");j.append('<label for="'+l.prefix+'conferenceName">'+_("Topic")+":</label>");d.append(j);var k=this._field;var g=(l.name===null||l.name===undefined)?"":l.name;k.val(g);k.prop("id",l.prefix+"conferenceName");k.prop("name",l.prefix+"conferenceName");var h=c("<td>");h.append(k);d.append(h);var f=c("<td>");var e=this._error;e.text(_("Please specify the conference name"));f.append(e);e.hide();k.keyup(function(){if(this.value.length===0){e.show()}else{e.hide()}l.name=k.val()});d.append(f);return d},val:function(d){return d.containers.name._field.val()},_showError:function(d){d.containers.name._error.show();d.containers.name._field.focus()},_field:c('<input maxlength="240" class="fullBlock" type="text" />'),_error:c('<span class="error"></span>'),_rendered:null},cid:{get:function(d){if(d.containers.cid._rendered===null){d.containers.cid._rendered=d.containers.cid._render(d)}return d.containers.cid._rendered},_render:function(k){var l=c("<tr>");l.append('<td colspan="3">'+_("ID for connecting from client applications")+"</td>");var j=c("<tr>");var g=c("<td></td>");g.append('<label for="'+k.prefix+'conferenceId">'+_("Conference ID")+":</label>");j.append(g);k.containers.cid._field=c('<input maxlength="128" class="fullBlock" type="text" />');var n=k.containers.cid._field;var f=c("<td></td>");f.append(n);j.append(f);var e=c("<td></td>");j.append(e);var m=(k.cid.value===null||k.cid.value===undefined)?"":k.cid.value;n.val(m);n.prop("id",k.prefix+"conferenceId");n.prop("name",k.prefix+"conferenceId");if(k.type!==c.conferencePlugin.CONFERENCE_TYPE.WEBINAR||k.action===c.conferencePlugin.CURRENT_ACTION.EDIT){n.attr("readonly","readonly");n.addClass("disabled");n.attr("onclick","this.select();");return l.add(j)}n.keydown(function(o){if(n.val()==="\\c\\"&&o.keyCode===8){o.preventDefault();o.stopPropagation()}});n.keypress(function(p){var o=String.fromCharCode(p.which);if(p.charCode!==0&&!o.match(k.cid.charRegexp)){p.preventDefault();p.stopPropagation();return false}});n.keyup(function(q){var s=n.val();if(s.length===0){n.val("\\c\\");k.containers.outside.setAddress(k,"/c/");q.preventDefault();q.stopPropagation();return false}var p=s.indexOf("\\c\\");if(p===-1||p>0){var o=s.lastIndexOf("\\");s="\\c\\"+s.substr(o+1);if(q.keyCode===8){n.val(s)}}if(q.keyCode===8){k.containers.outside.setAddress(k,s.replace("\\c\\","/c/"));return}var r=this.selectionStart,u=this.selectionEnd;if(u===undefined){k.containers.outside.setAddress(k,s.replace("\\c\\","/c/"));return}var s=s.toLowerCase();s=s.replace(/ /g,"_");n.val(s);k.containers.outside.setAddress(k,s.replace("\\c\\","/c/"));if(this.setSelectionRange){this.focus();this.setSelectionRange(r,u)}});n.focusin(function(){k.containers.cid._errorText.hide();k.containers.cid._waitSpinner.hide();k.containers.cid._successText.hide();n.removeClass("errorInput");k.saveButton.removeClass("disabled")});n.focusout(function(){var o=n.val();if(k.cid.value===o){k.containers.cid._successText.show();return}if(!o.match(k.cid.regexp)){k.containers.cid._errorText.text(_("Invalid ID"));n.addClass("errorInput");k.containers.cid._errorText.show();return}k.saveButton.addClass("disabled");n.prop("disabled",true);k.containers.cid._waitSpinner.show();k.containers.cid.isCidExists(k,o,function(){k.containers.cid._errorText.text(_("ID not available"));n.addClass("errorInput");k.containers.cid._errorText.show()},function(){k.containers.cid._successText.show();k.cid.value=o;k.cid.real=o.replace("\\c\\","");k.saveButton.removeClass("disabled");k.containers.cid.onCidChanged(k)},function(){k.containers.cid._waitSpinner.hide();n.prop("disabled",false)})});var d=c('<div class="errorText"></div>');k.containers.cid._error=d;e.append(d);k.containers.cid._errorText=c('<div style="display: none;" class="errorFieldText"></div>');d.append(k.containers.cid._errorText);k.containers.cid._successText=c('<div style="display: none;" class="successFieldText">'+_("ID available")+"</div>");d.append(k.containers.cid._successText);k.containers.cid._waitSpinner=c('<div style="display: none;" class="spinner"></div>');d.append(k.containers.cid._waitSpinner);if(k.type===c.conferencePlugin.CONFERENCE_TYPE.WEBINAR&&k.action===c.conferencePlugin.CURRENT_ACTION.CREATE){k.containers.cid._successText.show();var h=c("<tr></tr>");h.append("<td></td>");h.append('<td class="underlayText" colspan="2">'+_("Please note that changing Conference ID will be unavailable once the conference has been created")+"</td>");return l.add(j).add(h)}return l.add(j)},isCidExists:function(f,h,e,g,d){if(f.containers.cid._cidExistsHxr!==null){f.containers.cid._cidExistsHxr.abort()}f.containers.cid._cidExistsHxr=c.post(f.handlers.cidExists,{key:h},null,"json").success(function(j){if(j.status===true){e(f,h)}else{g(f,h)}}).fail(function(){g(f,h)}).always(function(){f.containers.cid._cidExistsHxr=null;if(typeof d==="function"){d(f,h)}})},val:function(d){return d.containers.cid._field.val()},onCidChanged:function(d){d.containers.integration.onCidChanged(d)},_field:null,_error:null,_errorText:null,_successText:null,_waitSpinner:null,_cidExistsHxr:null,hasError:false,_rendered:null},alias:{get:function(d){if(d.containers.alias._rendered===null){d.containers.alias._rendered=d.containers.alias._render(d)}return d.containers.alias._rendered},_render:function(k){var d=c("<tr>");var h=c("<td></td>");h.append('<label for="'+k.prefix+'alias">'+_("Alias")+":</label>");d.append(h);var j=c('<input  class="fullBlock" type="text" />');var g=(k.cid.alias===null||k.cid.alias===undefined)?"":k.cid.alias;j.val(g);j.prop("id",k.prefix+"alias");j.prop("name",k.prefix+"alias");j.keyup(function(){k.cid.alias=j.val();k.containers.alias._hideError(k)});k.containers.alias._field=j;var l=c("<td>");l.append(j);d.append(l);var f=c("<td></td>");var e=c('<span style="display: none;" class="error"></span>');k.containers.alias._error=e;f.append(e);d.append(f);return d},validate:function(e){var d=new RegExp(e.containers.alias.regexp,"gi");return d.test(e.containers.alias._field.val())},_showError:function(d){d.containers.alias._error.empty();d.containers.alias._error.text(_("Invalid conference alias"));d.containers.alias._error.show()},_hideError:function(d){d.containers.alias._error.empty();d.containers.alias._error.hide()},val:function(d){return d.containers.alias._field.val()},regexp:"^[а-яА-ЯёЁa-zA-Z0-9-_]+$",_field:null,_error:null,_rendered:null},udp:{get:function(d){if(d.containers.udp._rendered===null){d.containers.udp._rendered=d.containers.udp._render(d)}return d.containers.udp._rendered},_render:function(m){var n=c("<tr></tr>");var j=c('<td colspan="3"></td>');n.append(j);m.containers.udp._checkbox=c('<input type="checkbox" />');var o=m.containers.udp._checkbox;if(m.udp.status===true||m.udp.status===1){o.prop("checked",true)}o.prop("id",m.prefix+"udpMulticast");o.prop("name",m.prefix+"udpMulticast");j.append(o);m.containers.udp._checkboxLabel=c('<label for="'+m.prefix+'udpMulticast">&nbsp;'+_("Use UDP Multicast in the conference")+":</label>");j.append(m.containers.udp._checkboxLabel);var l=c("<tr></tr>");var g=c("<td></td>");l.append(g);m.containers.udp._addressLabel=c('<label for="'+m.prefix+'multicastAddress"  class="leftMargin">'+_("Multicast address")+": </label>");g.append(m.containers.udp._addressLabel);var f=c("<td></td>");l.append(f);m.containers.udp._addressField=c('<input onclick="this.select();" type="text" />');var r=m.containers.udp._addressField;var q=(m.udp.address===null||m.udp.address===undefined)?"":m.udp.address;r.val(q);r.prop("id",m.prefix+"multicastAddress");r.prop("name",m.prefix+"multicastAddress");if(m.udp.status!==true&&m.udp.status!==1){r.attr("readonly","readonly");r.addClass("disabled")}f.append(r);var e=c("<td>");var p=this._error;p.text(_("Invalid address"));p.hide();e.append(p);l.append(e);r.keyup(function(){if(m.containers.udp.isValid(m)){p.hide();return}p.show()});o.click(function(){m.udp.status=this.checked;if(!this.checked){r.attr("readonly","readonly");r.addClass("disabled");p.hide()}else{r.removeAttr("readonly");r.removeClass("disabled");if(!m.containers.udp.isValid(m)){p.show()}}if(m.rtsp.allowed){m.containers.rtsp.setEnabled(m,!this.checked)}});if(!m.udp.allowed){var h=_('Not available in your <a href="%license_url">license</a>').replace(/<\/?[^>]+>/gi,"");m.containers.udp._checkbox.attr("title",h)}var k=c("<tr></tr>");var d=c('<td colspan="3"></td>');var s=c('<label class="leftMargin smallText">'+_("This feature requires a special configuration of your network infrastructure. Conference recording, WebRTC broadcasting and RTSP are not available in a UDP Multicast conference")+".</label>");d.append(s);k.append(d);m.containers.udp._udpDescription=s;return n.add(l).add(k)},_error:c('<span class="error"></span>'),_addressField:null,_checkbox:null,_checkboxLabel:null,_addressLabel:null,_udpDescription:null,status:function(d){return d.udp.status},address:function(d){return d.containers.udp._addressField.val()},isValid:function(j){var e=j.containers.udp.address(j);var g=function(l,k){if(l<1||l>65535||l>k){return false}if(k<1||k>65535){return false}return true};var h=function(p){var o=/^(\d+)\.(\d+).(\d+).(\d+):(\d+)\-(\d+)$/i;var l=o.exec(p);if(l===null){return false}var k=parseInt(l[0]);if(k<224||k>239){return false}for(var m=1;m<4;m++){var n=parseInt(l[m]);if(n<0||n>255){return false}}var r=parseInt(l[5]);var q=parseInt(l[6]);return g(r,q)};var f=function(n){var k="[0-9a-fA-F]{1,4}";var o="FF[0-9a-fA-F]{2}";var q="^\\[(";q+=o+"(:"+k+"){7}|";q+=o+"(:"+k+"){0,6}::|";q+=o+"(:"+k+"){0,5}::"+k+"|";q+=o+"(:"+k+"){0,4}:(:"+k+"){2}|";q+=o+"(:"+k+"){0,3}:(:"+k+"){3}|";q+=o+"(:"+k+"){0,2}:(:"+k+"){4}|";q+=o+"(:"+k+"){0,1}:(:"+k+"){5}|";q+=o+":(:"+k+"){6}";q+=")\\]:(\\d+)-(\\d+)$";var m=new RegExp(q,"i");var l=m.exec(n);if(l===null){return false}var r=parseInt(l[14]);var p=parseInt(l[15]);return g(r,p)};var d=function(m){var l=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]:(\d+)\-(\d+))$/i;var k=l.exec(m);if(k===null){return false}var o=parseInt(k[4]);var n=parseInt(k[5]);return g(o,n)};if(h(e)||h(e)||f(e)){return true}return false},setEnabled:function(e,d){if(d){if(!e.udp.allowed){return}e.containers.udp._checkbox.prop("disabled",false);e.containers.udp._checkbox.removeAttr("title");e.containers.udp._checkboxLabel.removeClass("disabled");e.containers.udp._addressLabel.removeClass("disabled");e.containers.udp._addressField.prop("disabled",false);e.containers.udp._udpDescription.removeClass("disabled")}else{e.containers.udp._checkbox.prop("disabled",true);if(e.udp.allowed){e.containers.udp._checkbox.attr("title",_("Unavailable if RTSP broadcasting is enabled"))}e.containers.udp._checkboxLabel.addClass("disabled");e.containers.udp._addressLabel.addClass("disabled");e.containers.udp._addressField.prop("disabled",true);e.containers.udp._udpDescription.addClass("disabled")}},_rendered:null},showAdvanced:{get:function(d){if(d.containers.showAdvanced._rendered===null){d.containers.showAdvanced._rendered=d.containers.showAdvanced._render(d)}return d.containers.showAdvanced._rendered},_render:function(f){var e=c("<tr></tr>");var g=c('<td colspan="3"></td>');var d=c('<a href="#">'+_("Show advanced settings")+"</a>");d.click(function(){if(f.containers.showAdvanced.collapsed){f.containers.udp.get(f).show();f.containers.showAdvanced.setExpanded(f)}else{f.containers.udp.get(f).hide();f.containers.showAdvanced.setCollapsed(f)}return false});g.append(d);f.containers.showAdvanced._anchor=d;e.append(g);return e},setCollapsed:function(d){d.containers.showAdvanced._anchor.text(_("Show advanced settings"));d.containers.showAdvanced.collapsed=true},setExpanded:function(d){d.containers.showAdvanced._anchor.text(_("Hide advanced settings"));d.containers.showAdvanced.collapsed=false},collapsed:true,_anchor:null,_rendered:null},rtsp:{get:function(d){if(d.containers.rtsp._rendered===null){d.containers.rtsp._rendered=d.containers.rtsp._render(d)}return d.containers.rtsp._rendered},_render:function(f){var d=c('<div style="position: relative;" class="whiteBlock extBlock"></div>');f.containers.rtsp._fade=c('<div style="display: none;" class="transparentBlock"></div>');f.containers.rtsp._fade.attr("title",_("Unavailable if UDP Multicast is enabled"));d.append(f.containers.rtsp._fade);var e=c("<table>",{id:"streaming"});e.append('<colgroup width="150"></colgroup>');e.append("<colgroup></colgroup>");e.append('<colgroup width="100"></colgroup>');e.append(f.containers.rtsp.broadcast.get(f));if(f.udp.status===true||f.udp.status===1){f.containers.rtsp.setEnabled(f,false)}else{if(f.rtsp.status===true||f.rtsp.status===1){f.containers.rtsp.setEnabled(f,true);if(f.rtsp.allowed){f.containers.udp.setEnabled(f,false)}}else{if(f.rtsp.status!==true&&f.rtsp.status!==1){}}}d.append(e);return d},broadcast:{_rendered:null,get:function(d){if(d.containers.rtsp.broadcast._rendered===null){d.containers.rtsp.broadcast._rendered=d.containers.rtsp.broadcast._render(d)}return d.containers.rtsp.broadcast._rendered},_render:function(e){var d=c("<tr>");var f=c("<div>");f.append(c("<span>").html('<i class="zmdi zmdi-rss zmdi-hc-2x"></i>')).append(c("<span>",{"class":"stream"}).text(_("Streaming")+":"));d.append(c("<td>").append(f)).append(c("<td>").append(e.containers.rtsp.presetManager.get(e)));return d}},onCidChanged:function(d){},setAddress:function(e,d){},setEnabled:function(e,d){if(d){e.containers.rtsp._fade.hide()}else{e.containers.rtsp._fade.show()}},presetManager:{_rendered:null,_renderedPlugin:null,get:function(d){if(this._rendered===null){this._rendered=this.init(d)}return this._rendered},init:function(e){e.containers.rtsp.presetManager._renderedPlugin=c("<div>");e.plugins.presetManagerPlugin=e.plugins.presetManagerPlugin.bind(e.plugins.presetManagerObj(e),e.containers.rtsp.presetManager._renderedPlugin);if(!e.rtsp.allowed){var d=_("Not available in your license. <a>How to enable this feature?</a>").replace("<a>","<a id='dlg_broadcasting' href='#'>");var f=c("<span></span>");f.html(d);f.find("#dlg_broadcasting").extensionsPopup("streaming");return f}return e.containers.rtsp.presetManager._renderedPlugin},savePreset:function(e,d){e.containers.udp.setEnabled(e,false);e.rtsp.preset=d;e.rtsp.status=1},deletePreset:function(e,d){if(e.rtsp.preset==d){e.containers.rtsp.presetManager.broadcastDisable(e)}},broadcastDisable:function(d){d.containers.udp.setEnabled(d,true);d.rtsp.status=0;d.rtsp.preset=null}},_fade:null,_rendered:null},guestAccess:{get:function(d){if(d.containers.guestAccess._rendered===null){d.containers.guestAccess._rendered=d.containers.guestAccess._render(d)}return d.containers.guestAccess._rendered},_render:function(r){var q=true;if(r.guestAccess.count===0){q=false}var s=r.containers.guestAccess._sendMsg;if(r.guestAccess.sendMsg){s.prop("checked",true)}else{s.prop("checked",false)}s.prop("id",r.prefix+"guestMsg");s.prop("name",r.prefix+"guestMsg");var k=this._sendAudio;if(r.guestAccess.sendAudio){k.prop("checked",true)}else{k.prop("checked",false)}k.prop("id",r.prefix+"guestAudio");k.prop("name",r.prefix+"guestAudio");var p=this._sendVideo;if(r.guestAccess.sendVideo){p.prop("checked",true)}else{p.prop("checked",false)}p.prop("id",r.prefix+"guestVideo");p.prop("name",r.prefix+"guestVideo");if(!q){s.prop("disabled",true);k.prop("disabled",true);p.prop("disabled",true)}var y=c("<tr>");var l=c('<td colspan="3">');var d=c("<span></span>");d.append("<span>"+_("The maximum number of guests")+": </span>");if(r.guestAccess.count===-1){d.append("<b>"+_("unlimited")+"</b>")}else{d.append("<b>&nbsp;&nbsp;"+r.guestAccess.count+"&nbsp;&nbsp;&nbsp;</b>");d.append('<a id="increaseLink" href="#">'+_("Increase")+"</a>")}l.append(d);y.append(l);var x=c("<tr>");var j=c('<td colspan="3">');var g=c('<div class="leftMargin"></div>');g.append(k);var o=c('<label for="'+r.prefix+'guestAudio">&nbsp;'+_("Allow guests to transmit audio")+"</label>");g.append(o);j.append(g);x.append(j);var w=c("<tr>");var h=c('<td colspan="3">');var g=c('<div class="leftMargin"></div>');g.append(p);var n=c('<label for="'+r.prefix+'guestVideo">&nbsp;'+_("Allow guests to transmit video")+"</label>");g.append(n);h.append(g);w.append(h);var u=c("<tr>");var f=c('<td colspan="3">');var e=c('<div class="leftMargin"></div>');e.append(s);var m=c('<label for="'+r.prefix+'guestMsg">&nbsp;'+_("Allow guests to send messages")+"</label>");e.append(m);f.append(e);u.append(f);if(!q){o.addClass("disabled");n.addClass("disabled");m.addClass("disabled")}return y.add(x).add(w).add(u)},allow:function(d){return d.containers.guestAccess._guestAccess.prop("checked")},allowMsg:function(d){return d.containers.guestAccess._sendMsg.prop("checked")},allowAudio:function(d){return d.containers.guestAccess._sendAudio.prop("checked")},allowVideo:function(d){return d.containers.guestAccess._sendVideo.prop("checked")},_sendMsg:c('<input type="checkbox" />'),_sendAudio:c('<input type="checkbox" />'),_sendVideo:c('<input type="checkbox" />'),_rendered:null},owner:{get:function(d){if(d.containers.owner._rendered===null){d.containers.owner._rendered=d.containers.owner._render(d)}return d.containers.owner._rendered},_render:function(e){var d=c("<tr></tr>");e.containers.owner._showPluginButton=c('<a id="'+e.prefix+'selectOwner" href="#">'+_("Select")+"</a>");if(e.action===c.conferencePlugin.CURRENT_ACTION.EDIT){e.containers.owner._showPluginButton.addClass("disabled")}d.append("<td>"+_("Owner")+": </td>");d.append(c("<td></td>").append(e.containers.owner._showPluginButton));e.containers.owner._error=c('<span style="display: none;" class="error">'+_("You didn't choose the conference owner")+"</span>");d.append(c("<td></td>").append(e.containers.owner._error));e.containers.owner._listFullDialog=c("<div>");e.containers.owner._listFullDialog.append("<div>"+_("You have reached the maximum number of participants allowed. To add a host, please remove one participant from the list.")+"</div>");e.containers.owner._listFullDialog.dialog({autoOpen:false,modal:true,draggable:true,resizable:true,buttons:[{text:_("Ok"),id:e.prefix+"buttonCloseOwnerErrorDialog",click:function(){e.containers.owner._listFullDialog.dialog("close")}}]});e.containers.owner._listFullDialog.dialog("option","title",_("Error"));e.containers.owner._renderedPlugin=c('<div class="tc-plugin-ui">');e.plugins.ownerPlugin=e.plugins.memberListPlugin.bind(e.containers.owner._renderedPlugin,e.plugins.getOwnerObj(e));e.containers.owner._applyDialog(e,e.containers.owner._renderedPlugin);e.containers.owner._showPluginButton.click(function(){if(e.containers.owner._showPluginButton.hasClass("disabled")){return false}if(e.plugins.participantsPlugin!==null){if(e.plugins.participantsPlugin.participants.isFull(e.plugins.participantsPlugin)&&!e.plugins.participantsPlugin.participants.list.hasOwnProperty(e.owner)){e.containers.owner._listFullDialog.dialog("open")}else{e.plugins.ownerPlugin.refreshList(e.plugins.ownerPlugin);e.containers.owner._renderedPlugin.dialog("open")}}else{e.plugins.ownerPlugin.refreshList(e.plugins.ownerPlugin);e.containers.owner._renderedPlugin.dialog("open")}});return d},_applyDialog:function(e,d){d.dialog({autoOpen:false,height:(e.containers.owner.height===undefined?600:e.containers.owner.height),width:(e.containers.owner.width===undefined?1024:e.containers.owner.width),modal:true,draggable:true,resizable:true,close:function(){e.plugins.ownerPlugin.stop(e.plugins.ownerPlugin)},buttons:[{text:_("Cancel"),id:e.prefix+"buttonCloseOwnerDialog",click:function(){d.dialog("close")}}]});d.dialog("option","title",_("Owner"))},hidePlugin:function(d){d.containers.owner._renderedPlugin.dialog("close")},setOwner:function(d,e){d.owner=e.id;d.containers.owner._showPluginButton.text(e.displayName);d.containers.owner._error.hide()},showError:function(d){d.containers.owner._error.show();document.location.hash="";document.location.hash="wrapper"},_showPluginButton:null,_renderedPlugin:null,_listFullDialog:null,_rendered:null},additional:{get:function(d){if(d.containers.additional._rendered===null){d.containers.additional._rendered=d.containers.additional._render(d)}return d.containers.additional._rendered},_render:function(f){var d=c('<div class="whiteBlock extBlock"></div>');var e=c("<table></table>");e.append('<colgroup width="150" />');e.append("<colgroup />");e.append('<colgroup width="100" />');d.append(e);e.append(f.containers.outside.get(f));e.append(f.containers.description.get(f));return d},_rendered:null},description:{get:function(d){if(d.containers.description._rendered===null){d.containers.description._rendered=d.containers.description._render(d)}return d.containers.description._rendered},_render:function(f){var d=c("<tr></tr>");f.containers.description.dialog=f.containers.description._renderDialog(f);f.containers.description.pasteOverflowDialog=f.containers.description._renderOverflowDialog(f);d.append("<td>"+_("Description")+":</td>");var e=c('<a href="#">'+_("Edit description")+"</a>");e.click(function(){f.containers.description.dialog.dialog("open")});d.append(c("<td></td>").append(e));d.append("<td></td>");return d},_renderDialog:function(f){var e=c("<div></div>");e.append("<h2>"+_("Enter the conference description")+":</h2>");e.append("<div><br/></div>");var d=c('<textarea id="'+f.prefix+'conferenceDescription">'+f.description+"</textarea>");e.append(d);tinymce.init({selector:"#"+f.prefix+"conferenceDescription",plugins:["advlist autolink lists link charmap preview anchor","searchreplace visualblocks code","insertdatetime  contextmenu paste"],doctype:"<!DOCTYPE HTML>",toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link ",height:240,count_chars:0,limit_chars:c.conferencePlugin.DESCRIPTION_MAX_LENGTH,setup:function(g){g.on("init",function(h){g.settings.count_chars=g.getContent().length});g.on("keydown",function(h){g.settings.count_chars=g.getContent().length;if(g.settings.count_chars>=g.settings.limit_chars){if(h.which!==8&&h.which!==46){h.preventDefault()}}})},paste_preprocess:function(g,m){var j=tinymce.activeEditor;var h=j.settings.count_chars;var l=j.settings.limit_chars;var k=m.content.length;if((h+k)>l){m.preventDefault();m.stopPropagation();f.containers.description.showPasteOverflow(f)}else{j.settings.count_chars+=k}}});e.dialog({autoOpen:false,height:(f.containers.description.height===undefined?520:f.containers.description.height),width:(f.containers.description.width===undefined?960:f.containers.description.width),modal:true,draggable:true,resizable:true,title:_("Description"),buttons:[{text:_("Cancel"),id:f.prefix+"buttonCloseTinymce",click:function(g){f.containers.description.onCancel(f,e,g)}},{text:_("Save"),id:f.prefix+"buttonApplyTinymce",click:function(g){f.containers.description.onApply(f,e,g)}}],open:function(){tinymce.activeEditor.setContent(f.description);tinymce.activeEditor.show()}});return e},_renderOverflowDialog:function(e){var d=c("<div></div>");d.append("<span>"+_("Conference description cannot be larger than 10000 characters")+"</span>");d.dialog({title:_("Error"),autoOpen:false,modal:true,draggable:true,resizable:false,buttons:[{text:_("Ok"),click:function(){d.dialog("close")}}]});return d},showPasteOverflow:function(d){d.containers.description.pasteOverflowDialog.dialog("open")},onCancel:function(d){d.containers.description.dialog.dialog("close")},onApply:function(e){var d=tinymce.activeEditor.getContent();e.description=d;e.containers.description.dialog.dialog("close")},dialog:null,pasteOverflowDialog:null,_rendered:null},outside:{get:function(d){if(d.containers.outside._rendered===null){d.containers.outside._rendered=d.containers.outside._render(d)}return d.containers.outside._rendered},_render:function(f){var e=c("<tr></tr>");e.append("<td>"+_("External page")+":</td>");var d=c("<td></td>");d.append(f.containers.outside._address);if(!f.sslEnabled){d.append('<br/><span class="error">'+_("Full conference participation via WebRTC is available only when [a]HTTPS is on[/a]").replace("[a]",'<a target="_blank" href="/admin/web/https/">').replace("[/a]","</a>")+"</span>")}e.append(d);e.append("<td></td>");if(f.action===c.conferencePlugin.CURRENT_ACTION.CREATE){f.containers.outside._address.click(function(){return false});f.containers.outside._address.addClass("disabled")}var g=f.cid.value;if(g===undefined||g===null||g.length===0){f.containers.outside.setAddress(f,"")}else{g=g.replace(/\\/g,"/");f.containers.outside.setAddress(f,g)}return e},_address:c('<a href="#" target="_blank"></a>'),setAddress:function(e,d){if(d.indexOf("/")===0&&e.webUrl.indexOf("/")===e.webUrl.length-1){d=d.substr(1)}e.containers.outside._address.prop("href",e.webUrl+d);e.containers.outside._address.text(e.webUrl+d)},_rendered:null},integration:{get:function(d){if(d.containers.integration._rendered===null){d.containers.integration._rendered=d.containers.integration._render(d)}return d.containers.integration._rendered},_render:function(e){var d=c("<div></div>");e.containers.integration._anchor=c('<a href="#">'+_("HTML code for conference integration")+"</a>");e.containers.integration._anchor.click(function(){e.containers.integration._dialog.dialog("open");return false});d.append(e.containers.integration._anchor);e.containers.integration._dialog=e.containers.integration._renderDialog(e);return d},_renderDialog:function(f){var e=c("<div></div>");e.append("<h2>"+_("Use this code to embed the conference in external website")+":</h2>");e.append("<div><br/></div>");var d=c('<textarea id="'+f.prefix+'integrationCode" class="'+f.cssPrefix+'integrationCode">'+f.description+"</textarea>");e.append(d);f.containers.integration._codeTextArea=d;f.containers.integration._integrationObj=f.containers.integration._createIntegrationCode(f);d.val(f.containers.integration._integrationObj.prop("outerHTML"));e.dialog({autoOpen:false,height:(f.containers.description.height===undefined?400:f.containers.description.height),width:(f.containers.description.width===undefined?800:f.containers.description.width),modal:true,draggable:true,resizable:true,dialogClass:"tc-plugin-ui",title:_("HTML code for conference integration"),buttons:[{text:_("Ok"),id:f.prefix+"buttonCloseIntegrationDialog",click:function(g){e.dialog("close")}}]});return e},_createIntegrationCode:function(e){var d=c('<iframe allowfullscreen="allowfullscreen"></iframe>');d.attr("width","720");d.attr("height","405");d.attr("allow","microphone; camera");d.attr("src",e.webUrl+"/c/"+e.cid.real);return d},onCidChanged:function(d){d.containers.integration._integrationObj.attr("src",d.webUrl+"/c/"+d.cid.real);d.containers.integration._codeTextArea.val(d.containers.integration._integrationObj.prop("outerHTML"))},show:function(d){d.containers.integration.get(d).show()},hide:function(d){d.containers.integration.get(d).hide()},_anchor:null,_integrationObj:null,_codeTextArea:null,_dialog:null,_rendered:null},_renderButtons:function(h){var e=c('<div style="float: right;" class="contentMargin">');var g=_("Add to templates");var d=c('<span class="grayButton"></span>');d.text(g);h.saveTemplateButton=d;d.click(function(){if(d.hasClass("disabled")){return false}h.onTemplateSave(h)});var f=c('<span class="grayButton leftMargin">'+_("Save")+"</span>");h.saveButton=f;f.click(function(){if(f.hasClass("disabled")){return false}h.onSave(h)});var j=c('<span class="grayButton leftMargin">'+_("Cancel")+"</span>");j.click(function(){h.onCancel(h)});e.append(j).append(d);e.append(j).append(f);return e},saveButton:null,saveTemplateButton:null,_rendered:null,schemaContainer:{get:function(d){if(d.containers.schemaContainer._rendered===null){d.containers.schemaContainer._rendered=d.containers.schemaContainer._render(d)}return d.containers.schemaContainer._rendered},_render:function(f){f.containers.schemaContainer._renderedPlugin=c('<div class="tc-plugin-ui">');f.plugins.schemaPlugin=f.plugins.schemaPlugin.bind(f.plugins.getSchemaObj(f),f.containers.schemaContainer._renderedPlugin);f.containers.schemaContainer._applyDialog(f,f.containers.schemaContainer._renderedPlugin);f.containers.schemaContainer._showPluginButton=c('<a class="disabled" href="#">'+_("Select")+"</a>");var d=c("<tr></tr>");d.append("<td><span>"+_("Conference mode")+":</span></td>");d.append(c("<td></td>").append(f.containers.schemaContainer._showPluginButton));var e=c("<div></div>");d.append(c("<td></td>").append(e));f.containers.schemaContainer._showPluginButton.click(function(){if(f.containers.schemaContainer._showPluginButton.hasClass("disabled")){return false}f.containers.schemaContainer._renderedPlugin.dialog("open")});return d},_applyDialog:function(e,d){d.dialog({autoOpen:false,height:(e.containers.schemaContainer.height===undefined?520:e.containers.schemaContainer.height),width:(e.containers.schemaContainer.width===undefined?1200:e.containers.schemaContainer.width),modal:true,draggable:true,resizable:true,close:function(f){e.containers.schemaContainer.onClose(e,d,f)},buttons:[{text:_("Cancel"),id:e.prefix+"buttonCloseScheme",click:function(f){e.containers.schemaContainer.onCancel(e,d,f)}},{text:_("Save"),id:e.prefix+"buttonApplyScheme",click:function(f){e.containers.schemaContainer.onApply(e,d,f)}}]});d.dialog("option","title",_("Conference mode"))},enablePluginBtn:function(d){d.containers.schemaContainer._showPluginButton.removeClass("disabled")},setSchemaTitle:function(e,d){e.containers.schemaContainer._showPluginButton.text(d)},onApply:function(f,d,e){f.schemaId=f.plugins.schemaController.getCurrentSchemaId();f.podiums=f.plugins.schemaController.getCurrentPodiums();f.containers.schemaContainer.setSchemaTitle(f,f.plugins.schemaController.getCurrentSchemaShortDescription());if(f.plugins.hasOwnProperty("participantsPlugin")){f.plugins.participantsPlugin.participants.setMax(f.plugins.participantsPlugin,parseInt(f.plugins.schemaController.getCurrentMaxParticipants()));f.plugins.participantsPlugin.containers.memberList.refreshList(f.plugins.participantsPlugin)}if(f.schemaId===1||f.schemaId==="1"){f.containers.integration.hide(f)}else{f.containers.integration.show(f)}d.dialog("close")},onCancel:function(f,d,e){d.dialog("close")},onClose:function(f,d,e){if(f.schemaId!==f.plugins.schemaController.getCurrentSchemaId()){f.plugins.schemaController.setCurrentSchemaId(f.schemaId)}if(f.podiums!==f.plugins.schemaController.getCurrentPodiums()){f.plugins.schemaController.setCurrentPodiums(f.podiums)}},_showPluginButton:null,_renderedPlugin:null,_rendered:null},participantsContainer:{get:function(d){if(d.containers.participantsContainer._rendered===null){if(d.plugins.participantsPlugin!==null){d.containers.participantsContainer._rendered=d.containers.participantsContainer._render(d)}else{return c("<div>")}}return d.containers.participantsContainer._rendered},_render:function(g){g.containers.participantsContainer._renderedPlugin=c('<div class="tc-plugin-ui">');g.plugins.participantsPlugin=g.plugins.participantsPlugin.bind(g.plugins.getParticipantsObj(g),g.containers.participantsContainer._renderedPlugin);g.containers.participantsContainer._currentMembers=c("<span>"+g.plugins.participantsPlugin.participants.count(g.plugins.participantsPlugin)+"</span>");g.containers.participantsContainer._maxMembers=c("<span>"+g.plugins.participantsPlugin.participants.max+"</span>");var d=c('<div class="tc-plugin-ui grayBlock halfLeftBlock">');var e=c('<div class="stbtn"></div>');e.append('<i class="zmdi zmdi-account-add zmdi-hc-2x"></i>');var f=c('<div class="buttonData"></div>');f.append("<span>"+_("Participants")+":</span>");g.containers.participantsContainer._openParticipantsPluginBtn=c('<a href="#" id="'+g.prefix+'showMemberListAnchor"></a>');g.containers.participantsContainer._openParticipantsPluginBtn.append(c('<span class="leftMargin"></span>').append(g.containers.participantsContainer._currentMembers).append("<span> / </span>").append(g.containers.participantsContainer._maxMembers));f.append(g.containers.participantsContainer._openParticipantsPluginBtn);e.append(f);e.append('<div class="clear"></div>');if(g.action===c.conferencePlugin.CURRENT_ACTION.EDIT){g.containers.participantsContainer._openParticipantsPluginBtn.addClass("disabled")}g.containers.participantsContainer._openParticipantsPluginBtn.click(function(h){if(g.containers.participantsContainer._openParticipantsPluginBtn.hasClass("disabled")){h.stopPropagation();return false}g.containers.participantsContainer.showDialog(g)});g.containers.participantsContainer._setDialog(g,g.containers.participantsContainer._renderedPlugin);d.append(e);if(g.action===c.conferencePlugin.CURRENT_ACTION.EDIT){g.containers.participantsContainer._loadList(g,g.cid.real)}return d},_openParticipantsPluginBtn:null,_maxMembers:null,_currentMembers:null,setMax:function(e,d){e.containers.participantsContainer._maxMembers.text(d)},setCurrent:function(e,d){e.containers.participantsContainer._currentMembers.text(d)},_setDialog:function(f,e){var d=f.containers.participantsContainer;e.dialog({autoOpen:false,height:(f.containers.participantsContainer.height===undefined?480:f.containers.participantsContainer.height),width:(f.containers.participantsContainer.width===undefined?640:f.containers.participantsContainer.width),modal:true,draggable:true,resizable:true,buttons:[{text:_("Apply"),id:f.prefix+"buttonApplyMembers",click:function(){d.onApply(f)}}]});e.dialog("option","title",_("Participants list"))},onApply:function(d){d.containers.participantsContainer._renderedPlugin.dialog("close")},showDialog:function(d){d.containers.participantsContainer._renderedPlugin.dialog("open")},updateButton:function(d){d.containers.participantsContainer.setCurrent(d,d.plugins.participantPlugin.participants.count(d.plugins.participantPlugin));d.containers.participantsContainer.setMax(d,d.plugins.participantPlugin.participants.max)},_loadList:function(d,e){},_rendered:null,_renderedPlugin:null,height:600,width:1050},scheduleContainer:{get:function(d){if(d.containers.scheduleContainer._rendered===null){d.containers.scheduleContainer._rendered=d.containers.scheduleContainer._render(d)}return d.containers.scheduleContainer._rendered},_render:function(h){h.containers.scheduleContainer._renderedPlugin=c("<div>");h.plugins.schedulePlugin=h.plugins.schedulePlugin.bind({},h.containers.scheduleContainer._renderedPlugin);h.containers.scheduleContainer._applyDialog(h,h.containers.scheduleContainer._renderedPlugin);h.containers.scheduleContainer._showDialogButton=c('<a href="#"></a>');var d=c('<div class="grayBlock halfRightBlock tc-plugin-ui">');var e=c('<div class="stbtn"></div>');e.append('<i class="zmdi zmdi-time zmdi-hc-2x" style=""></i>');var g=c('<div class="buttonData">');g.append("<span>"+_("Schedule")+": </span>");var f=c('<span class="leftMargin"></span>');f.append(h.containers.scheduleContainer._showDialogButton);g.append(f);e.append(g);e.append('<div class="clear"></div>');d.append(e);h.containers.scheduleContainer._showDialogButton.click(function(){h.containers.scheduleContainer._renderedPlugin.dialog("open")});h.containers.scheduleContainer.setScheduleTitle(h,h.plugins.schedulePlugin.schedule);return d},_applyDialog:function(e,d){d.dialog({autoOpen:false,height:(e.height===undefined?420:e.containers.scheduleContainer.height),width:(e.width===undefined?920:e.containers.scheduleContainer.width),modal:true,draggable:true,resizable:true,buttons:[{text:_("Cancel"),id:e.prefix+"buttonCloseSchedule",click:function(f){e.containers.scheduleContainer.onClose(e,d,f)}},{text:_("Save"),id:e.prefix+"buttonApplySchedule","class":"schedule-save-btn",click:function(f){e.containers.scheduleContainer.onApply(e,d,f)}}]});d.dialog("option","title",_("Schedule"))},setScheduleTitle:function(e,f){var d=_("Without schedule");if(f!==undefined&&f!==null){switch(f){case"once":d=_("Nonrecurrent");break;case"weekly":d=_("Every week");break;case"monthly":d=_("Every month");break}}e.containers.scheduleContainer._showDialogButton.text(d).attr("title",d)},onApply:function(g,e,f){var d=g.plugins.schedulePlugin.onSave(g.plugins.schedulePlugin);if(d===false){return}var h=e.find(".selected").attr("id").substr(g.plugins.schedulePlugin.prefix.length+"itemSchedule".length).toLowerCase();if(!g.plugins.schedulePlugin.items.hasOwnProperty(h)){return}g.containers.scheduleContainer.setScheduleTitle(g,h);g.plugins.schedulePlugin.schedule=h;if(h==="none"){g.plugins.participantsPlugin.setInvitationsStatus(g.plugins.participantsPlugin,c.conferencePlugin.INVITATIONS_STATUSES.SCHEDULE_NONE)}else{if(g.action!==c.conferencePlugin.CURRENT_ACTION.CREATE){g.plugins.participantsPlugin.setInvitationsStatus(g.plugins.participantsPlugin,c.conferencePlugin.INVITATIONS_STATUSES.OK)}}g.containers.scheduleContainer._renderedPlugin.dialog("close")},onClose:function(f,d,e){f.containers.scheduleContainer._renderedPlugin.dialog("close")},_showDialogButton:null,_rendered:null,_renderedPlugin:null},statusDialog:{get:function(d){if(this._rendered===null){this._rendered=this._render(d)}return this._rendered},_render:function(e){var d=c("<div></div>");e.containers.statusDialog._status=c("<span></span>");d.append(e.containers.statusDialog._status);d.dialog({autoOpen:false,height:(this.height===undefined?120:this.height),width:(this.width===undefined?320:this.width),modal:true,draggable:true,resizable:false});d.dialog("option","title",_("Please wait"));return d},_status:null,setStatus:function(e,d,f){},setError:function(f,e){var d=_("Error");var g=_("Error");switch(e){case c.conferencePlugin.SAVING_ERRORS.CONFERENCE_RUNNING:g=_("Conference editing error");d=_("No changes can be made when the conference is running");break}f.containers.statusDialog._status.html(d);f.containers.statusDialog.get(f).dialog("option","title",g)},setCustomError:function(f,d,e){if(e===undefined){e=_("Error")}f.containers.statusDialog._status.html(d);f.containers.statusDialog.get(f).dialog("option","title",e)},setWait:function(d){d.containers.statusDialog._status.html(_("Saving")+"...");d.containers.statusDialog.get(d).dialog("option","title",_("Please wait"))},setSaved:function(d){d.containers.statusDialog._status.html(_("Saved"));d.containers.statusDialog.get(d).dialog("option","title",_("Please wait"))},_rendered:null},sendInvitationsDialog:{get:function(d){if(d.containers.sendInvitationsDialog._rendered===null){d.containers.sendInvitationsDialog._rendered=d.containers.sendInvitationsDialog._render(d)}return d.containers.sendInvitationsDialog._rendered},_render:function(g){var d=c('<div class="'+g.cssPrefix+'sendInvitationDialog"></div>');g.containers.sendInvitationsDialog._questionContainer=c("<span>"+_("Send invitations?")+"</span>");d.append(g.containers.sendInvitationsDialog._questionContainer);var f=c('<div style="display: none;"></div>');f.append("<span>"+_("Please wait")+"</span><br/>");f.append('<img src="/img/spinner-16.gif" alt="" />');g.containers.sendInvitationsDialog._waitContainer=f;d.append(f);var h=c('<div style="display: none;"></div>');h.append("<span>"+_("The invitations have been successfully sent")+"</span>");g.containers.sendInvitationsDialog._successSendContainer=h;d.append(h);var e=c('<div style="display: none;"></div>');e.append("<span>"+_("Error occured when sending the invitations")+"!</span>");g.containers.sendInvitationsDialog._failedSendContainer=e;d.append(e);d.dialog({autoOpen:false,height:(this.height===undefined?160:this.height),width:(this.width===undefined?320:this.width),modal:true,draggable:true,resizable:false,title:_("Send invitations?"),buttons:[{text:_("Send"),id:g.prefix+"buttonSendInvite",click:function(){g.containers.sendInvitationsDialog.setDefault(g);g.containers.sendInvitationsDialog.lockDialog(g);g.containers.sendInvitationsDialog.waitSend(g);g.sendInvitations(g,function(k,j){k.containers.sendInvitationsDialog.finishSend(k,j.status)},function(){g.containers.sendInvitationsDialog.finishSend(g,false)},function(){})}},{text:_("Cancel"),id:g.prefix+"buttonCloseSendInvite",click:function(){g.onInvitationsCancelSend(g);d.dialog("close")}}],beforeClose:function(j,k){if(d.hasClass("disabled")){j.preventDefault();j.stopPropagation();return false}g.containers.sendInvitationsDialog.setDefault(g);g.onInvitationsCancelSend(g)}});d.dialog("option","title",_("Send invitations"));return d},waitSend:function(d){d.containers.sendInvitationsDialog._questionContainer.hide();d.containers.sendInvitationsDialog._waitContainer.show()},finishSend:function(e,d){e.containers.sendInvitationsDialog._waitContainer.hide();c("#"+e.prefix+"buttonSendInvite").hide();c("#"+e.prefix+"buttonCloseSendInvite").button("option","label",_("Close"));e.containers.sendInvitationsDialog.unlockDialog(e);if(d){e.containers.sendInvitationsDialog.get(e).dialog("option","title",_("Ok"));e.containers.sendInvitationsDialog._successSendContainer.show();e.onInvitationsSuccessSend(e)}else{e.containers.sendInvitationsDialog.get(e).dialog("option","title",_("Error"));e.containers.sendInvitationsDialog._failedSendContainer.show();e.onInvitationsFailedSend(e)}},setDefault:function(d){d.containers.sendInvitationsDialog.get(d).dialog("option","title",_("Send"));c("#"+d.prefix+"buttonSendInvite").show();c("#"+d.prefix+"buttonCloseSendInvite").button("option","label",_("Cancel"));d.containers.sendInvitationsDialog.unlockDialog(d);d.containers.sendInvitationsDialog._waitContainer.hide();d.containers.sendInvitationsDialog._successSendContainer.hide();d.containers.sendInvitationsDialog._failedSendContainer.hide();d.containers.sendInvitationsDialog._questionContainer.show()},lockDialog:function(g){g.containers.sendInvitationsDialog._rendered.addClass("disabled");var f=g.containers.sendInvitationsDialog._rendered.dialog("option","buttons");for(var e=0;e<f.length;e++){var h=f[e].id;if(h===undefined){continue}var d=c("#"+h);d.attr("disabled",true);d.addClass("ui-state-disabled")}},unlockDialog:function(g){g.containers.sendInvitationsDialog._rendered.removeClass("disabled");var f=g.containers.sendInvitationsDialog._rendered.dialog("option","buttons");for(var e=0;e<f.length;e++){var h=f[e].id;if(h===undefined){continue}var d=c("#"+h);d.attr("disabled",false);d.removeClass("ui-state-disabled")}},_questionContainer:null,_waitContainer:null,_failedSendContainer:null,_successSendContainer:null,_rendered:null},enableRecording:{get:function(d){if(d.containers.enableRecording._rendered===null){d.containers.enableRecording._rendered=d.containers.enableRecording._render(d)}return d.containers.enableRecording._rendered},_render:function(j){var d=c('<a target="_blank" href="'+j.links.recordController+'" class="tc-plugin-ui"></a>').text(_("Enabled"));var f=c('<a target="_blank" href="'+j.links.recordController+'" class="tc-plugin-ui"></a>').text(_("Disabled"));var m=j.enableRecording.thisConference?"checked":"";var k=c('<input id="enable-recording" type="checkbox" style="position: relative;top:4px" '+m+">").change(function(){j.enableRecording.thisConference=this.checked?1:0});var l=c("<div></div>").append(k).append('<label style="padding-left: 4px;position: relative;top:3px">'+_("Enable")+"</label>");var g=[f,d,d,l];var h=typeof(g[j.enableRecording.globalSetting])!=="undefined"?g[j.enableRecording.globalSetting]:f;var e=c('<div style="position: relative;" class="whiteBlock extBlock"></div>');var n=c('<table id="streaming"></table>').append(c("<tbody></tbody>").append(c("<tr></tr>").append(c("<td></td>").append(c("<div></div>").append(c("<span></span>").html(c('<i class="material-icons" style="position:relative;top:3px;right:3px"></i>').text("videocam"))).append(c('<span class="stream" style="position:relative;right:6px;"></span>').text(_("Recording")+":")))).append(c("<td></td>").append(h))));e.append(n);return e},_rendered:null}},_setConferenceType:function(e,d){e.type=d;if(e.type===c.conferencePlugin.CONFERENCE_TYPE.CONFERENCE){e.containers.guestAccess.get(e).hide();if(e.action===c.conferencePlugin.CURRENT_ACTION.CREATE||(e.action===c.conferencePlugin.CURRENT_ACTION.EDIT&&e.udp.status!==true&&e.udp.status!==1)){e.containers.udp.get(e).hide();e.containers.showAdvanced.setCollapsed(e)}else{e.containers.udp.get(e).show();e.containers.showAdvanced.setExpanded(e)}}else{if(e.type===c.conferencePlugin.CONFERENCE_TYPE.WEBINAR){e.containers.udp.get(e).hide();e.containers.showAdvanced.get(e).hide();e.containers.guestAccess.get(e).show();if(e.action===c.conferencePlugin.CURRENT_ACTION.EDIT){}}}},_loadOwner:function(d){c.getJSON(d.handlers.owner,{id:d.owner}).then(function(f){var e=c.Deferred();if(f.status){e.resolve(f)}else{e.reject(f.error)}return e.promise()}).done(function(e){var f={};f.id=e.id;f.displayName=e.displayName;f.groups=e.groups;f.disabled=true;f.type=e.type;d.containers.owner.setOwner(d,f);f.isOperator=true;f.isOwner=true;d.plugins.participantsPlugin.addParticipant(d.plugins.participantsPlugin,f,{addToTop:true,refresh:true})}).always(function(){d.containers.owner._showPluginButton.removeClass("disabled")})},sendInvitations:function(f,m,d,e){f.log("Send invitations");var g={};g.users=new Array();g.guests={};g.id=f.cid.real;g.name=f.name;g.owner=f.owner;function k(o){var s=h.getDate();var n=h.getMonth()+1;var r=h.getFullYear();var q=h.getHours();var p=h.getMinutes();return[[(s+"").length===1?"0"+s:s,(n+"").length===1?"0"+n:n,(r+"").length===1?"0"+r:r].join("."),[(q+"").length===1?"0"+q:q,(p+"").length===1?"0"+p:p].join(":")].join(" ")}function l(n){var p=h.getHours();var o=h.getMinutes();return[(p+"").length===1?"0"+p:p,(o+"").length===1?"0"+o:o].join(":")}var j=f.plugins.schedulePlugin.getSchedule(f.plugins.schedulePlugin);g.schedule=j.type;switch(j.type){case"none":g.startTime=-1;g.endTime=-1;break;case"once":g.startTime=j.START_DATE.raw;var h=new Date(j.START_DATE.value.getTime()+f.strToTimestamp(j.DURATION)*1000);g.endTime=k(h);break;case"weekly":g.startTime=j.START_TIME.raw;var h=new Date(j.START_TIME.value.getTime()+f.strToTimestamp(j.DURATION)*1000);g.endTime=l(h);g.days=j.DAY_OF_WEEK;break}g.timeZone=j.TIME_ZONE;c.each(f.plugins.participantsPlugin.participants.list,function(o,n){if(n.type===f.plugins.userPlugin.USER_TYPE.USER){g.users.push(o)}else{g.guests[o]=n.displayName}});f.log("invitatiosn participants list:",g);c.ajax({type:"POST",url:f.handlers.sendInvitations,processData:false,contentType:"application/json",dataType:"json",data:JSON.stringify(g)}).then(function(p,q,o){var n=c.Deferred();if(p.status!==true){return n.reject(o,p,p)}return n.resolve(p,q,o)}).done(function(n){f.log("Invitations send successfully:",n);if(typeof m==="function"){m(f,n)}f.onInvitationsSuccessSend(f,n)}).fail(function(){f.log("Invitations send failed!");if(typeof d==="function"){d(f)}f.onInvitationsFailedSend(f)}).always(function(){if(typeof e==="function"){e(f)}})},plugins:{userPlugin:null,schemaPlugin:null,schedulePlugin:null,participantsPlugin:null,memberListPlugin:null,addByIdPlugin:null,presetManagerPlugin:null,presetManagerObj:function(d){return{confPage:true,onPresetSave:function(e){d.containers.rtsp.presetManager.savePreset(d,e)},onPresetDelete:function(e){d.containers.rtsp.presetManager.deletePreset(d,e)},onBroadcastDisable:function(){d.containers.rtsp.presetManager.broadcastDisable(d)}}},getParticipantsObj:function(d){return{onInvitationClick:function(e){d.containers.sendInvitationsDialog.get(d).dialog("open")},onMaxParticipantsChanged:function(e){d.containers.participantsContainer.setMax(d,e.participants.max)},onListChanged:function(e){d.containers.participantsContainer.setCurrent(d,e.participants.count(e))},onCreated:function(e){d.plugins._onParticipantsPluginCreated(d,e)}}},getOwnerObj:function(d){return{height:440,onMemberClick:function(f,g){if(d.plugins.participantsPlugin!==null){var e=c.extend(true,{},g);delete e.htmlId;e.disabled=true;e.isOperator=true;e.isOwner=true;if(d.owner!==null){d.plugins.participantsPlugin.removeParticipant(d.plugins.participantsPlugin,d.owner)}d.plugins.participantsPlugin.addParticipant(d.plugins.participantsPlugin,e,{addToTop:true,refresh:true})}d.containers.owner.setOwner(d,g);d.containers.owner.hidePlugin(d)},mouseOnMember:function(f,g,e){e.css("cursor","pointer")},plugins:{user:d.plugins.userPlugins},beforeMemberAdd:function(f,g,e){return e}}},schemaController:null,getSchemaObj:function(d){return{locale:d.region,schemaId:d.schemaId,conferenceId:d.cid.real,podiums:d.podiums,flags:d.type===c.conferencePlugin.CONFERENCE_TYPE.WEBINAR?c.conferenceSchemaPlugin.FLAGS.WEBINAR:c.conferenceSchemaPlugin.FLAGS.NONE,events:{onSuccessInit:function(e){d.plugins.schemaController=e;d.containers.schemaContainer.enablePluginBtn(d);d.containers.schemaContainer.setSchemaTitle(d,e.getCurrentSchemaShortDescription());d.plugins.participantsPlugin.participants.setMax(d.plugins.participantsPlugin,parseInt(d.plugins.schemaController.getCurrentMaxParticipants()));d.plugins.participantsPlugin.containers.memberList.refreshList(d.plugins.participantsPlugin)}}}},init:function(d){if(d.plugins.memberListPlugin!==null){if(d.plugins.userPlugin!==null){d.plugins.memberListPlugin.setUserPlugin(d.plugins.userPlugin)}}if(d.plugins.participantsPlugin!==null){d.plugins._initParticipantsPlugin(d)}},_initParticipantsPlugin:function(d){if(d.plugins.userPlugin!==null){d.plugins.participantsPlugin.setUserPlugin(d.plugins.userPlugin)}if(d.plugins.memberListPlugin!==null){d.plugins.participantsPlugin.setMemberListPlugin(d.plugins.memberListPlugin)}if(d.plugins.addByIdPlugin!==null){d.plugins.participantsPlugin.setAddByIdPlugin(d.plugins.addByIdPlugin)}},_onParticipantsPluginCreated:function(g,f){if(g.action===c.conferencePlugin.CURRENT_ACTION.EDIT){if(g.plugins.schedulePlugin.schedule==="none"){f.setInvitationsStatus(f,c.conferencePlugin.INVITATIONS_STATUSES.SCHEDULE_NONE)}else{f.setInvitationsStatus(f,c.conferencePlugin.INVITATIONS_STATUSES.OK)}}else{f.setInvitationsStatus(f,c.conferencePlugin.INVITATIONS_STATUSES.NOT_SAVE)}function d(l,k,h){var j=20;if(!l){l=0}var m=g.template_id===""?{cid:g.cid.real,page:l,limit:j}:{template_id:g.template_id,page:l,limit:j};c.getJSON(g.handlers.participantsList,m).then(function(o){var n=c.Deferred();if(o.status){n.resolve(o)}else{n.reject(o.error)}return n.promise()}).done(function(n){if(n.count<=0){return}c.each(n.list,function(p,o){o.id=p;f.addParticipant(f,o,{},true)});if(n.nextPageId){d(n.nextPageId)}else{k?k():null;h?h():null;g.containers.participantsContainer._openParticipantsPluginBtn.removeClass("disabled")}}).fail(function(){h?h():null;g.containers.participantsContainer._openParticipantsPluginBtn.removeClass("disabled")})}function e(j,h){c.getJSON(g.handlers.getOperatorsGroups).done(function(l){if(!l.status){return}if(!l.list||typeof l.list!=="object"){return}for(var k=0;k<l.list.length;k++){f.operatorsGroups.list[l.list[k]]=l.list[k]}f.operatorsGroups._isListLoaded=true;if(typeof j==="function"){j()}}).always(function(){if(typeof h==="function"){h()}})}e(function(){},function(){if(g.action===c.conferencePlugin.CURRENT_ACTION.EDIT||g.template_id!==""){d()}})}},getSchedule:function(d){console.log(d.plugins);console.log(this.plugins)},beforeAppend:function(d){},onCreated:function(d){},onCancel:function(d){},onInvitationsCancelSend:function(d){},onInvitationsSuccessSend:function(d){},onInvitationsFailedSend:function(d){},strToTimestamp:function(d){if(typeof(d)!=="string"){return 0}var e=d.split(":");return(parseInt(e[0])*60+parseInt(e[1]))*60},onTemplateSave:function(k){var o=_("New template");var e=_("Topic");var h=_("Enter template name");var j=k.name;var n=c('<div id="template-modal"></div>');var p=c("<div></div>");var l=c("<label></label>");var g=c('<input id="template-name" type="text">');l.text(e);l.css("float","left");l.css("margin-top","5px");l.css("margin-bottom","3px");var f="template-modal-create";g.attr("placeholder",h);g.val(j);g.keyup(function(q){if(q.keyCode===13){c("#"+f).click()}});g.css("float","left");g.css("clear","left");g.css("width","100%");g.css("border-radius","5px");g.css("padding-bottom","2px");g.css("padding-top","2px");function d(s){var r=c("#template-modal-create");var q=s.value.length===0;r.prop("disabled",q);if(q){r.addClass("ui-state-disabled")}else{r.removeClass("ui-state-disabled")}g.css("border-color",q?"red":"gray")}g.keyup(function(){d(this)});g.change(function(){d(this)});n.append(p);n.append(l);n.append(g);n.dialog({height:192,width:480,modal:true,draggable:true,resizable:false,title:o,close:function(){n.remove()},buttons:[{text:_("Cancel"),click:function(){c(this).dialog("close")}},{text:_("Create"),id:f,click:function(){var x=null;var B=k.plugins.schedulePlugin.getSchedule(k.plugins.schedulePlugin);var u=k.plugins.participantsPlugin.getParticipants(k.plugins.participantsPlugin,true);var q=[];c.each(u,function(D){var C=u[D];q.push({id:C.id,display_name:C.displayName})});function z(E,F){var D=E.getTimezoneOffset();var C=E.getTime()-(F+D)*60*1000;var G=(new Date()).getTime()+D*60*1000;console.log(C,new Date(C),G,new Date(G));C=C<=G?G:C;return Math.trunc(C/1000)}switch(B.type){default:case"none":x={type:-1};break;case"once":x={type:1,start_time:z(B.START_DATE.value,parseInt(B.TIME_ZONE)),duration:k.strToTimestamp(B.DURATION),time_offset:B.TIME_ZONE};break;case"weekly":var s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];x={type:0,time:B.START_TIME.raw,days:c.map(B.DAY_OF_WEEK,function(C){return s[C]}),duration:k.strToTimestamp(B.DURATION),time_offset:B.TIME_ZONE};break}var A={topic:k.containers.name.val(k),owner:k.owner,type:k.schemaId,description:k.description,invitations:q,max_podiums:k.podiums,max_participants:k.plugins.schemaController.getCurrentMaxParticipants(),schedule:x,allow_guests:k.type,recording:k.enableRecording.thisConference,multicast_enable:k.containers.udp.status(k),multicast_address:k.containers.udp.address(k),rights:{guest:{chat_send:k.containers.guestAccess.allowMsg(k),audio_send:k.containers.guestAccess.allowAudio(k),video_send:k.containers.guestAccess.allowVideo(k)}}};for(field_name in A){var y=A[field_name];y=["string","array"].indexOf(typeof(y))!==-1&&y.length>0||["string","array"].indexOf(typeof(y))===-1?y:undefined;A[field_name]=y}var r={name:g.val(),object:A};function w(){Server.setServerMessage(_("Error while adding template"),Server.MESSAGE_TYPE.ERROR,2000)}c.ajax({method:"POST",url:k.handlers.conferenceTemplatesControllerUrl,dataType:"json",data:r,success:function(C){if(typeof(C.template)!==undefined){Server.setServerMessage(_("Template added"),Server.MESSAGE_TYPE.NOTE,2000);c.ajax({method:"POST",url:k.handlers.setTemplateUserTimeZone,dataType:"json",data:{template_id:C.template.id,user_timezone:B.TIME_ZONE},success:function(D){if(D.result==="ok"){return}w()},error:function(){w()}});return}w()},error:function(C){w()}});c(this).dialog("close")}}]});var m=c("#template-modal-create");if(c("#template-name").val().length===0){m.addClass("ui-state-disabled")}else{m.removeClass("ui-state-disabled")}},onSave:function(j){var d=j.containers.name.val(j);if(d===null||d.length===0){j.containers.name._showError(j);return}d=d.replace(/<\/?[^>]+>/gi,"");if(j.owner===undefined||j.owner===null){j.containers.owner.showError(j);return false}else{if(j.owner.length===0){j.containers.owner.showError(j);return false}}if(j.cid.value!==j.containers.cid._field.val()){var o=j.containers.cid._field.val();if(!o.match(j.cid.regexp)){j.containers.cid._errorText.text(_("Invalid ID"));j.containers.cid._field.addClass("errorInput");j.containers.cid._errorText.show();j.containers.cid._errorText.focus();return}}if(!j.containers.udp.isValid(j)&&j.containers.udp._checkbox.is(":checked")){j.containers.udp._error.show();j.containers.udp._addressField.focus();return}var f={};if(j.plugins.participantsPlugin!==null){var l=j.plugins.participantsPlugin.getParticipants(j.plugins.participantsPlugin,true);f.participants={};f.guests={};f.operators=[];c.each(l,function(s,u){f.guests[s]=u.displayName;if(u.isOperator&&!u.isOwner&&!u.hasOperatorsGroup){f.operators.push(s)}});if(j.plugins.participantsPlugin.isInvitationEnabled(j.plugins.participantsPlugin)){f.send_invite_mail=1}}function k(s){var u=s.split(":");return(parseInt(u[0])*60+parseInt(u[1]))*60}if(j.plugins.schedulePlugin!==null){var m=j.plugins.schedulePlugin.getSchedule(j.plugins.schedulePlugin);switch(m.type){default:case"none":f.invitation_type=-1;f.hide_invitation_type=-1;break;case"once":f.invitation_type=1;f["auto-start-conference"]=1;f.hide_invitation_type=1;f.duration=k(m.DURATION);break;case"monthly":f.invitation_type=0;f["auto-start-conference"]=1;f.hide_invitation_type=-1;break;case"weekly":f.invitation_type=0;f["auto-start-conference"]=1;f.hide_invitation_type=0;f.day=m.DAY_OF_WEEK;f.duration=k(m.DURATION);break}if(m.type!=="weekly"){var h=m.START_DATE;if(h!==null&&h!==undefined&&h.raw){var p=h.raw.split(" ");f.date=p[0];f["time-field"]=p[1]}}else{var g=m.START_TIME;if(g&&g.raw){f["time-field"]=g.raw}}f.time_zone=m.TIME_ZONE}f.subtype=j.schemaId;f.podiums=j.podiums;f.max_participants=j.plugins.schemaController.getCurrentMaxParticipants();if(j.type===c.conferencePlugin.CONFERENCE_TYPE.CONFERENCE&&j.containers.udp.status(j)){var q=j.containers.udp.address(j);f.type=1;if(q.length!==0){f.intercom_ip=q}}else{if(j.rtsp.status&&j.rtsp.preset){f.rtsp=1;f.preset=j.rtsp.preset}}f.cid=j.cid.value;f.key=j.cid.real;f.topic=d;f.description=j.description;f.enableRecording=j.enableRecording.thisConference;if(j.type===c.conferencePlugin.CONFERENCE_TYPE.WEBINAR){f.alias=j.cid.alias;f.allowSendAudio=j.containers.guestAccess.allowAudio(j)?1:0;f.allowSendVideo=j.containers.guestAccess.allowVideo(j)?1:0;f.allowSendMsg=j.containers.guestAccess.allowMsg(j)?1:0}var e=j.owner;if(e!==null){f.owner=j.owner}else{f.owner=""}f["gconf-edit"]="ok";var r=null;if(j.action===c.conferencePlugin.CURRENT_ACTION.CREATE){f.webTtype=j.type;r=j.handlers.applyCreate}else{if(j.action===c.conferencePlugin.CURRENT_ACTION.EDIT){r=j.handlers.applyEdit}}if(r===null){return}var n=j.containers.statusDialog.get(j);n.dialog("open");j.containers.statusDialog.setWait(j);c.post(r,f,function(s){},"json").done(function(s){if(s.status===true){j.containers.statusDialog.setSaved(j);j.onSuccessSave(j)}else{if(s.hasOwnProperty("errors")){j.containers.statusDialog.setCustomError(j,s.errors.join(";<br/>"))}else{if(s.hasOwnProperty("errorId")){j.containers.statusDialog.setError(j,s.errorId)}else{if(s.hasOwnProperty("error")){j.containers.statusDialog.setCustomError(j,s.error)}else{j.containers.statusDialog.setCustomError(j,_("Error"))}}}j.onFailSave(j)}}).fail(function(u,w,s){n.dialog("option","title",_("Error"));j.containers.statusDialog.setStatus(w);j.onFailSave(j)})},onSuccessSave:function(e){if(e.action===c.conferencePlugin.CURRENT_ACTION.CREATE){var d=e.plugins.participantsPlugin;if(d===null){e.onSaveRedirect(e);return}if(d.participants.count(d)<=0||e.plugins.schedulePlugin.schedule==="none"){e.onSaveRedirect(e);return}e.onInvitationsCancelSend=function(f){f.onSaveRedirect(f)};e.containers.sendInvitationsDialog.get(e).dialog("open")}else{e.onSaveRedirect(e)}},onFailSave:function(d){},log:function(){if(!this.debug){return}if(arguments.length<1){return}if(arguments.length>1){console.log.apply(console,arguments)}else{console.debug(arguments[0])}},groupLog:function(){if(!this.debug){return}if(arguments.length<2){return}var l=arguments[0];if(typeof l!=="object"){return}var e=l.name?l.name:"";var j=l.collapsed===false?false:true;var h=l.fields?l.fields:new Array();var g=l.type==="error"?"error":"log";if(j&&g!=="error"){console.groupCollapsed(e)}else{console.group(e)}for(var f=1,d=0;f<arguments.length;f++,d++){if(h[d]!==undefined){console[g](h[d]+":",arguments[f])}else{console[g](arguments[f])}}console.trace();console.groupEnd()}};c.fn.conferencePlugin=function(f){var d=this.data("conferencePlugin");if(d===undefined||d===false){var d=c.extend(true,{},b);c.extend(true,d,c.conferencePlugin);c.extend(true,d,f);d.prefix=generateUniqueId(d.prefix)+"_";d.parentObject=this;d.plugins.init(d);var e=d.main(d);d.beforeAppend(d);this.empty();this.append(e);this.data("conferencePlugin",d);d.onCreated(d,f)}return d}})(jQuery);(function(b){var a=function(){b.extend(a.prototype,c)};a.prototype.get=function(){var d=b('<div class="ui-weekpicker-wrapper" id="dayOfWeekContainerWrapper" >');d.append(this.getContainer());d.append('<br class="clear" />');d.append("<br/>");return d};var c={locale:{monday:_("Monday"),tuesday:_("Tuesday"),wednesday:_("Wednesday"),thursday:_("Thursday"),friday:_("Friday"),saturday:_("Saturday"),sunday:_("Sunday"),mon:_("mon"),tue:_("tue"),wed:_("wed"),thu:_("thu"),fri:_("fri"),sat:_("sat"),sun:_("sun")},holidays:true,sundayFirst:true,fieldName:"weekday",weekdays:{monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6},weekdaysList:["mon","tue","wed","thu","fri","sat","sun"],getContainer:function(){var d=b('<div class="ui-weekpicker" id="dayOfWeekContainer">');var g=this.actionButton.container;g.append(this.actionButton.downArrow);d.append(g);var e=this.description;e.text(_("no selection"));d.append(e.container);var f=this.createList();d.append(f);d.append('<br class="clear"/>');this._addActions();return d},createList:function(){var d=this;this.list.container=b('<div class="option-list hidden">');if(this.listHeight!==null&&typeof this.listHeight==="number"){this.list.container.css("height",this.listHeight+"px")}var e=b("<ul>");b.each(this.weekdays,function(g,h){var j=b('<input type="checkbox" name="'+d.fieldName+'[]"  value="'+h+'" />');var f=b("<li></li>");f.append(j);f.append("<span>"+d.locale[g]+"</span>");e.append(f);f.click(function(k){if(k.target.nodeName.toLowerCase()!=="input"){j.trigger("click")}});j.change(function(){d._updateDescription(j);d.onChange(j.val())})});this.list.container.append(e);return this.list.container},actionButton:{container:b('<div class="btn-arrow"></div>'),downArrow:b('<div class="down-arrow">&nbsp;</div>'),upArrow:b('<div class="up-arrow">&nbsp;</div>')},description:{container:b('<div class="descr"><span></span></div>'),text:function(d){if(d===undefined){return this.container.find("span").text()}else{this.container.find("span").text(d);return d}}},getDays:function(){var d=this;var f=this.list.container.find(":checked");var e=[];b.each(f,function(g,h){var j=parseInt(h.value);if(d.sundayFirst){if(j===6){j=0}else{j++}}e.push(j)});return e},setDays:function(f){if(this.sundayFirst){f.push(f[0]);f=f.slice(1)}var d=this.list.container;var e=d.find(":checkbox");b.each(e,function(g,j){var h=f[j.value];if(h===undefined){return true}if(h===0||h===-1||h===false){j.checked=false}else{j.checked=true}});this.description.text(this._createDescription(e))},list:{container:null,show:function(d){b.weekpicker.beforeShow();this.container.show();this.visible=true;d.actionButton.container.empty();d.actionButton.container.append(d.actionButton.upArrow);b(document).bind("click",function(e){d.list._documentHide(e,d)});b.weekpicker.onShow()},hide:function(d){b.weekpicker.beforeClose();this.container.hide();this.visible=false;d.actionButton.container.empty();d.actionButton.container.append(d.actionButton.downArrow);b(document).unbind("click",this._documentHide);b.weekpicker.onClose()},_documentHide:function(d,f){var e=b(d.target);if(e.parents("#dayOfWeekContainerWrapper").length>0||e.is(f.actionButton.downArrow)||e.is(f.actionButton.upArrow)){return}f.list.hide(f)},visible:false},_addActions:function(){var d=this;this.actionButton.container.add(this.description.container).click(function(){if(d.list.visible){d.list.hide(d)}else{d.list.show(d)}})},_updateDescription:function(){var e=this.list.container.find(":checkbox");var d=this._createDescription(e);this.description.text(d)},_createDescription:function(f){var d=this;var e=[];b.each(f,function(h,j){j=b(j);if(j.is(":checked")){var k=j.prop("value");var g=d.weekdaysList[k];if(g===undefined){g=k}else{g=d.locale[g]}e.push(g)}});if(e.length>0){return e.join(", ")}else{return _("no selection")}},beforeShow:function(){},onShow:function(){},beforeClose:function(){},onClose:function(){},onChange:function(d){},listHeight:null};b.weekpicker=new a();b.fn.weekpicker=function(d){if(this.data("weekPickerInit")!==true){if(d!==undefined&&d!==null&&typeof d==="object"){b.extend(true,b.weekpicker,d)}this.data("weekPickerInit",true);this.append(b.weekpicker.get())}return b.weekpicker}})(jQuery);(function(b){var c=function(){};c.prototype.init=function(d){if(d!==null&&d!==undefined&&typeof d==="object"){b.extend(true,a,d)}};c.prototype.bind=function(d,f){var e=d.searchByIdPlugin(f);return e};var a={prefix:"sbid",cssPrefix:"sbid_",searchTimeout:400,fakeUsers:true,handler:"/admin/handler/getUserById",member:{},buttons:{},getContainer:function(d){if(d.container._rendered===null){d.container._rendered=d.container._render(d)}return d.container._rendered},container:{_render:function(g){var d=b('<div class="'+g.cssPrefix+'searchById">');var e=b('<input class="'+g.cssPrefix+'lightGray" maxlength="128" type="text" />');e.val(_("Enter user ID"));e.focusin(function(){if(e.val()===_("Enter user ID")){e.val("");g.container._searchString=""}e.removeClass(g.cssPrefix+"lightGray")});e.focusout(function(){if(e.val().length===0){e.val(_("Enter user ID"));e.addClass(g.cssPrefix+"lightGray")}});function k(){if(g.container._searchString===e.val()){return}g.container._searchString=e.val();if(g.container._searchString.length===0){g.container._dataContainer.empty();g.container._dataStatusContainer.text(_("User data is not available"));g.container._dataContainer.append(g.container._dataStatusContainer);g.btnContainer.triggerSearchFieldEmpty(g);return}g.search(g);if(g.container._waitingForSearch){return}g.onStartSearch(g);g.btnContainer.triggerSearchStarted(g);g.container._dataContainer.empty();g.container._dataContainer.append(g.container._waitContainer);g.container._waitingForSearch=true}e.on("input",function(n){k()});g.container._idField=e;var j=b('<div class="'+g.cssPrefix+'searchBlock">');j.append(e);d.append(j);var m=b('<div class="'+g.cssPrefix+'userData">');d.append(m);g.container._dataContainer=m;var f=b('<div class="'+g.cssPrefix+'dataStatus">');f.text(_("User data is not available"));m.append(f);g.container._dataStatusContainer=f;if(countObject(g.buttons)>0){var h=b('<div class="'+g.cssPrefix+'buttons">');d.append(h);var l=g.btnContainer.get(g);h.append(b('<div class="'+g.cssPrefix+'inner">').append(l))}g.container._waitContainer=b('<div class="'+g.cssPrefix+'wait"><img src="/img/spinner.gif" alt="wait" /></div>');return d},clear:function(d){d.container._idField.val(_("Enter user ID"));d.container._idField.addClass(d.cssPrefix+"lightGray");d.container._searchString="";d.container._waitingForSearch=false;d.container._dataContainer.empty();d.container._dataStatusContainer.text(_("User data is not available"));d.container._dataContainer.append(d.container._dataStatusContainer)},_idField:null,_waitContainer:null,_dataContainer:null,_dataStatusContainer:null,_searchString:null,_waitingForSearch:false,_rendered:null},btnContainer:{get:function(d){if(d.btnContainer._rendered===null){d.btnContainer._rendered=d.btnContainer._render(d)}return d.btnContainer._rendered},_render:function(e){var d=b("<ul>");b.each(e.buttons,function(h,g){var f=b("<li id="+e.prefix+"btn_"+h+">");f.text((!g.hasOwnProperty("text")?h:g.text));if(g.hasOwnProperty("title")){f.prop("title",g.title)}if(g.hasOwnProperty("click")){f.click(function(){if(g.locked!==true){g.click(e,b(this),g)}})}d.append(f);g._rendered=f;if(g.hasOwnProperty("onRendered")){g.onRendered(e,f,g)}});return d},_rendered:null,getButton:function(d,e){if(!d.buttons.hasOwnProperty(e)){return null}return d.buttons[e]},triggerSearchStarted:function(d){b.each(d.buttons,function(f,e){if(!e.hasOwnProperty("onSearchStarted")){return true}e.onSearchStarted(d,e._rendered,e)})},triggerSearchFieldEmpty:function(d){b.each(d.buttons,function(f,e){if(!e.hasOwnProperty("onSearchFieldEmpty")){return true}e.onSearchFieldEmpty(d,e._rendered,e)})},triggerSearchFinished:function(f,d,e){b.each(f.buttons,function(h,g){if(!g.hasOwnProperty("onSearchStarted")){return true}g.onSearchFinished(f,g._rendered,d,e,g)})},lockAll:function(d){b.each(d.buttons,function(f,e){e.locked=true;if(!e.hasOwnProperty("onLock")){return true}e.onLock(d,e._rendered,e)})},unlockAll:function(d){b.each(d.buttons,function(f,e){e.locked=false;if(!e.hasOwnProperty("onUnlock")){return true}e.onUnlock(d,e._rendered,e)})}},userContainer:{get:function(e,g,f){if(e.plugins.user===null){return b("<div>")}var d=e.plugins.user.createUser(g,b.extend(true,e.userContainer.getCreateUserObj(e),f));e.plugins.user.updateMemberStatus(g);return d},getCreateUserObj:function(d){return{prefix:d.prefix,nameLength:d.userContainer._nameVisibleLength,idLength:d.userContainer._idVisibleLength,groupsLength:d.userContainer._groupsVisibleLength,lineBreak:true,noBorder:true}},updateUserStatus:function(g,d,e){var f=e.obj;if(!f.member.hasOwnProperty("id")){return}g.updateMemberStatus(f.member)},setDefaultUserStatus:function(f,d){var e=d.obj;if(!e.member.hasOwnProperty("id")){return}f.setDefaultMemberStatus(e.member)},_nameVisibleLength:40,_idVisibleLength:50,_groupsVisibleLength:50},getDefaultFakeUser:function(f,d){var e={};e.id=d;e.displayName=d;e.groups=Array();if(d.indexOf(f.plugins.user.USER_ID_PREFIX.SIP)===0){e.type=f.plugins.user.USER_TYPE.SIP}else{if(d.indexOf(f.plugins.user.USER_ID_PREFIX.H323)===0){e.type=f.plugins.user.USER_TYPE.H323}else{if(d.indexOf(f.plugins.user.USER_ID_PREFIX.TEL)===0){e.type=f.plugins.user.USER_TYPE.TEL}else{e.type=f.plugins.user.USER_TYPE.UNKNOWN}}}return e},successSearch:function(h,g,f){h.container._waitingForSearch=false;h.container._dataContainer.empty();if(g.status===true){g.type=h.plugins.user.USER_TYPE.USER;h.member=g;var e=h.userContainer.get(h,g);h.container._dataContainer.append(e);h.onFinishSearch(h,true,h.container._searchString);h.btnContainer.triggerSearchFinished(h,true,h.container._searchString)}else{if(!h.fakeUsers){h.container._dataStatusContainer.text(_("User not found"));h.container._dataContainer.append(h.container._dataStatusContainer);h.onFinishSearch(h,false,h.container._searchString);h.btnContainer.triggerSearchFinished(h,false,h.container._searchString)}else{var d=h.getDefaultFakeUser(h,f);h.member=d;var e=h.userContainer.get(h,d);h.container._dataContainer.append(e);h.onFinishSearch(h,true,h.container._searchString);h.btnContainer.triggerSearchFinished(h,true,h.container._searchString)}}},failSearch:function(d){d.container._waitingForSearch=false;d.container._dataContainer.empty();d.container._dataStatusContainer.text(_("User data is not available"));d.container._dataContainer.append(d.container._dataStatusContainer);d.onFinishSearch(d,false,d.container._searchString);d.btnContainer.triggerSearchFinished(d,false,d.container._searchString)},search:function(d){clearTimeout(d._searchTimeoutFn);d.member={};d._searchTimeoutFn=setTimeout(function(){if(d.container._searchString.length===0){return}d.loadUser(d,d.container._searchString,d.successSearch,d.failSearch,null)},d.searchTimeout)},loadUser:function(j,f,e,h,d,g){if(g!==false&&j._loadUserXHR!==null){j._loadUserXHR.abort()}j._loadUserXHR=b.getJSON(j.handler,{id:f}).done(function(k){if(e!==undefined&&e!==null){e(j,k,f)}}).fail(function(m,k,l){if(h!==undefined&&h!==null){h(j,f,m,k,l)}}).always(function(){if(d!==undefined&&d!==null){d(j,f)}})},_loadUserXHR:null,_searchTimeoutFn:null,onCreated:function(d,e){},onStartSearch:function(d){},onFinishSearch:function(f,d,e){},plugins:{user:null,_initUserPlugin:function(d){d.plugins.user.addUpdateListener(d.userContainer.updateUserStatus,{obj:d});d.plugins.user.addErrorListener(d.userContainer.setDefaultUserStatus,{obj:d})}}};b.fn.searchByIdPlugin=function(e){var d=this.data("searchByIdPlugin");if(d===undefined||d===false){var d=b.extend(true,{},a);b.extend(true,d,b.searchByIdPlugin);b.extend(true,d,e);d.prefix=generateUniqueId(d.prefix)+"_";d.parentObject=this;this.append(d.getContainer(d));this.data("searchByIdPlugin",d);if(d.plugins.user!==null){d.plugins._initUserPlugin(d)}d.onCreated(d,e)}return d};b.searchByIdPlugin=new c()})(jQuery);var User=function(c,b){var a=$.extend(true,{},getOriginalUserObject_v1());$.extend(true,User.prototype,a);if(c!==null&&typeof c==="object"){$.extend(true,User.prototype,c)}this.prefix=generateUniqueId(this.prefix)+"_";if(b===true){this.start()}};User.prototype.NO_GROUP_ID="@no_group";User.prototype.USER_TYPE={UNKNOWN:-1,USER:1,USER_IN_CONTACTS:2,SIP:3,H323:4,TEL:5,RTSP:6,GUEST:7};User.prototype.OWNER_TYPE={GROUP:1,USER:2};User.prototype.USER_ID_PREFIX={SIP:"#sip",H323:"#h323",RTSP:"#rtsp",TEL:"#tel"};function getOriginalUserObject_v1(){var a={userStatusTimeout:tcm.usersStatusUpdate,refindStatusServerUrl:1200000,refindStatusSeverUrlError:20000,statusServersHandler:tcm.status_update_url,generateSecretKeyHandler:tcm.generate_secret_key_url,statusSeviceStarted:false,STATUS:{NOT_ACTIVE:-2,INVALID:-1,OFFLINE:0,ONLINE:1,BUSY:2,MULTIHOST:5},STATUS_NAMES:{"-2":"notActive","-1":"invalid","0":"offline","1":"online","2":"busy","5":"multihost"},STATUS_I18N_NAMES:{online:_("Online"),offline:_("Offline"),notActive:_("Inactive"),invalid:_("Invalid user"),busy:_("Busy"),multihost:_("Group conference owner")},prefix:"mgr",cssPrefix:"mgr_",debug:false,DEFAULT_STATUS:0,lastStatusResult:{},listeners:[],errorListeners:[],addUpdateListener:function(c,b){var d={listener:c,eventData:b};this.listeners.push(d);this.groupLog({name:"addUpdateListener",fields:["listener","event data","listeners list"]},c,b,this.listeners)},addErrorListener:function(c,b){var d={listener:c,eventData:b};this.errorListeners.push(d);this.groupLog({name:"addErrorListener",fields:["listener","event data","listeners list"]},c,b,this.errorListeners)},callError:function(c){for(var b=0;b<c.errorListeners.length;b++){var d=c.errorListeners[b];d.listener(c,d.eventData)}this.groupLog({name:"callError()",fields:["listeners"]},c.listeners)},callUpdate:function(c){for(var b=0;b<c.listeners.length;b++){var d=c.listeners[b];d.listener(c,c.lastStatusResult,d.eventData)}this.groupLog({name:"callUpdate()",fields:["listeners"]},c.listeners)},start:function(){this.log("start user status updating");this.statusSeviceStarted=true;this.updateUserStatus(this)},stop:function(){this.log("Stop user status updating");clearTimeout(this.updateUserStatusTimeout);this.updateUserStatusTimeout=null;this.statusUrl=null;if(this.statusRequestXHR!==null){this.statusRequestXHR.abort()}this.statusSeviceStarted=false},updateUserStatus:function(b){if(!this.statusSeviceStarted){return}clearTimeout(b.updateUserStatusTimeout);b.updateUserStatusTimeout=null;if(b.statusUrl===null){b.findRuningStatusServer(b,function(e,c,d){e.lastStatusResult=e._removeServerNameFromStatuses(e,d);e.callUpdate(e);e.updateUserStatusTimeout=setTimeout(function(){e.updateUserStatus(e)},e.userStatusTimeout)},function(){b.updateUserStatusTimeout=setTimeout(function(){b.updateUserStatus(b)},b.refindStatusSeverUrlError);b.callError(b)})}else{b.makeStatusRequest(b,b.statusUrl,function(d,c){d.lastStatusResult=d._removeServerNameFromStatuses(d,c);d.callUpdate(d);d.updateUserStatusTimeout=setTimeout(function(){d.updateUserStatus(d)},d.userStatusTimeout)},function(c){c.callError(c);c.statusUrl=null;clearTimeout(c.updateStatusUrlTimeout);c.updateUserStatusTimeout=setTimeout(function(){c.updateUserStatus(c)},1000)})}},findRuningStatusServer:function(d,e,b){d.statusUrl=null;clearTimeout(d.updateStatusUrlTimeout);var c=function(k,j,g){var f=j[g];var h=j.length;k.makeStatusRequest(k,f,function(m,l){m.statusUrl=f;if(e!==undefined&&e!==null){e(m,f,l)}m.updateStatusUrlTimeout=setTimeout(function(){m.findRuningStatusServer(m)},m.refindStatusServerUrl)},function(l){g++;if(g===h){if(b!==undefined&&b!==null){b(l)}}else{l.updateStatusUrlTimeout=setTimeout(function(){c(l,j,g)},100)}})};d.getStatusURL(d,function(g,f){c(g,f,0)},function(f){clearTimeout(f.updateUserStatusTimeout);clearTimeout(f.updateStatusUrlTimeout);f.updateUserStatusTimeout=setTimeout(function(){f.updateUserStatus(f)},f.userStatusTimeout);f.callError(f)})},getStatusURL:function(d,b,c){$.ajax({dataType:"json",type:"POST",cache:false,data:{r:Math.random()},url:d.statusServersHandler}).done(function(f,g,e){a.groupLog({name:"Success getStatusURL request!",fields:["answer","jqXHR","successCallback","failCallback"]},f,e,b,c);if(f.urls&&b!==undefined&&b!==null){b(d,f.urls)}}).fail(function(f,g,e){a.groupLog({name:"Fail getStatusURL request!",fields:["jqXHR","textStatus","errorThrow",,"successCallback","failCallback"],type:"error"},f,g,e,b,c);if(c!==undefined&&c!==null){c(d)}})},makeStatusRequest:function(d,c,e,b){this.log("send status reuest...");d.statusRequestXHR=$.jsonp({url:c,callbackParameter:"callback",callback:"vp_status",dataType:"jsonp",timeout:1000,success:function(g,f,h){a.groupLog({name:"Success status request!",fields:["answer","jqXHR","successCallback","failCallback"]},g,h,e,b);e(d,g)},error:function(g,h,f){a.groupLog({name:"Fail status request!",fields:["jqXHR","textStatus","errorThrow",,"successCallback","failCallback"],type:"error"},g,h,f,e,b);b(d)}}).always(function(){d.statusRequestXHR=null})},_removeServerNameFromStatuses:function(c,b){$.each(b,function(d,f){var g=d.lastIndexOf("@");if(g<1){return true}var e=d.substring(0,g);b[e]=f;delete b[d]});return b},statusUrl:null,updateStatusUrlTimeout:null,updateUserStatusTimeout:null,statusRequestXHR:null,createUser:function(d,c){if(!d.hasOwnProperty("type")){d.type=this.USER_TYPE.USER}if(!d.hasOwnProperty("login")){d.login=d.id}if(!d.hasOwnProperty("displayName")){d.displayName=d.login}var b=this.memberContainer.get(this,d,c);this.groupLog({name:"createUser (id : '"+d.id+"'; dn : '"+d.displayName+"')",fields:["member","createParams","container"]},d,c,b);return b},updateMemberStatus:function(c){var b=c.id.toLowerCase();if(this.lastStatusResult.hasOwnProperty(b)){c.status=this.lastStatusResult[b];this.memberContainer.updateStatus(this,c)}},updateListStatuses:function(c){this.groupLog({name:"Recivied request to update list statuses"},c);var b=this;$.each(c,function(d,f){var e=d.toLowerCase();if(b.lastStatusResult.hasOwnProperty(e)){if(f.status!==b.lastStatusResult[e]){f.status=b.lastStatusResult[e];b.memberContainer.updateStatus(b,f)}}else{if(f.status!==undefined&&f.status!==b.STATUS.OFFLINE){f.status=b.STATUS.OFFLINE;b.memberContainer.updateStatus(b,f)}}})},setDefaultMemberStatus:function(b){b.status=this.DEFAULT_STATUS;this.memberContainer.updateStatus(this,b)},setDefaultListStatuses:function(c){var b=this;$.each(c,function(d,e){e.status=b.DEFAULT_STATUS;b.memberContainer.updateStatus(b,e)})},memberContainer:{get:function(h,g,f){var k=h.memberContainer;if(!g.hasOwnProperty("htmlId")){g.htmlId=generateUniqueId((f.prefix===undefined?h.prefix:f.prefix)+"member")}else{var j=$("#"+g.htmlId);if(j.length!==0){return j}}if(f.cssPrefix===undefined){f.cssPrefix=h.cssPrefix}var d=$('<div class="'+f.cssPrefix+'member" id="'+g.htmlId+'"></div>');if(f.lineBreak===true){d.addClass(f.cssPrefix+"fixedMember")}if(f.noBorder===true){d.addClass(f.cssPrefix+"noBorder")}if(g.disabled===true){d.addClass(f.cssPrefix+"disabled");d.append($('<div class="'+f.cssPrefix+'fade"></div>'))}if(!g.hasOwnProperty("displayName")||(typeof g.displayName!=="string"&&typeof g.displayName!=="number")){g.displayName=g.login}d.append(k._createMemberIcon(h,g,f));var b=escapeHtml(g.displayName.toString());var e=escapeHtml(g.login.toString());var l=$('<div class="'+f.cssPrefix+'memberInfo">');l.append('<div id="'+g.htmlId+'_displayName" class="'+f.cssPrefix+'displayName" title="'+b+'">'+b+"</div>");l.append(k._userStatusContainer(h,g,f));l.append('<div id="'+g.htmlId+'_id" class="'+f.cssPrefix+'uid" title="'+e+'">'+e+"</div>");l.append('<div class="clear"></div>');d.append(l);d.append(k._groupsContainer(h,g,f));return d},_userStatusContainer:function(e,h,g){var c=$('<div class="'+g.cssPrefix+'status">');var d=h.status;if(d===undefined){d=e.DEFAULT_STATUS}var b=e.STATUS_NAMES[d];if(b===undefined){b="offline"}var f=e.STATUS_I18N_NAMES[b];if(f===undefined){f=b}c.append('<div title="'+f+'" id="'+h.htmlId+'_status" class="'+b+'">');return c},_groupsContainer:function(f,h,g){var d=$('<div id="'+h.htmlId+'_groups" class="'+g.cssPrefix+'groups clear"></div>');var b=h.groups;var c=[];if(b!==undefined){$.each(b,function(k,j){if((k===0||k==="0"||k===f.NO_GROUP_ID)&&(j===f.NO_GROUP_ID||j==="")){return true}c.push(j)})}if(b===undefined){if(h.ownerType===User.prototype.OWNER_TYPE.GROUP&&h.type===User.prototype.USER_TYPE.UNKNOWN){c.push(h.ownerDisplayName)}}if(c.length===0){c.push(_("Without group"))}var e=c.join(", ");d.text(e);d.prop("title",e);return d},_createMemberIcon:function(e,j,g){var c=$('<div class="'+g.cssPrefix+'memberIcon"></div>');switch(j.type){case e.USER_TYPE.USER:case e.USER_TYPE.USER_IN_CONTACTS:var b=j.id.toString();var f=encodeURIComponent(b.replace(/[\/\\]/g,"%5"));var h=$('<div class="'+g.cssPrefix+'memberDefault"></div>');h.attr("title",j.displayName);var d=$('<img src="/api/v4/users/'+f+'/avatar" />');d.attr("alt",j.displayName);d.load(function(){h.addClass("loaded")});h.append(d);c.append(h);break;case e.USER_TYPE.SIP:c.append('<div class="'+g.cssPrefix+'memberSIP"></div>');break;case e.USER_TYPE.H323:c.append('<div class="'+g.cssPrefix+'memberH323"></div>');break;case e.USER_TYPE.TEL:c.append('<div class="'+g.cssPrefix+'memberTEL"></div>');break;case e.USER_TYPE.GUEST:c.append('<div class="'+g.cssPrefix+'memberGuest"></div>');break;case e.USER_TYPE.UNKNOWN:default:c.append('<div class="'+g.cssPrefix+'memberUnknown"></div>');break}return c},updateStatus:function(e,g){var c=$("#"+g.htmlId+"_status");if(c.length!==1){return}var b=g.status;var d=e.STATUS_NAMES[b];if(d===undefined){d="offline"}var f=e.STATUS_I18N_NAMES[d];if(f===undefined){f=d}c.removeAttr("class");c.attr("class",d);c.prop("title",f);a.groupLog({name:"statusUpdated (userId : "+g.id+")",fields:["status","statusName","memberData"]},b,f,g)}},log:function(){if(!this.debug){return}if(arguments.length<1){return}if(arguments.length>1){console.log.apply(console,arguments)}else{console.debug(arguments[0])}},groupLog:function(){if(!this.debug){return}if(arguments.length<2){return}var h=arguments[0];if(typeof h!=="object"){return}var c=h.name?h.name:"";var g=h.collapsed===false?false:true;var f=h.fields?h.fields:[];var e=h.type==="error"?"error":"log";if(g&&e!=="error"){console.groupCollapsed(c)}else{console.group(c)}for(var d=1,b=0;d<arguments.length;d++,b++){if(f[b]!==undefined){console[e](f[b]+":",arguments[d])}else{console[e](arguments[d])}}console.trace();console.groupEnd()}};return a}(function(c){var a=function(){};a.prototype.init=function(e){if(e!==undefined&&typeof e==="object"&&e!==null){c.extend(true,b,e)}};a.prototype.bind=function(f,e){return e.presetManagerPlugin(f)};a.prototype.setConferencePlugin=function(e){d.plugins.conferencePlugin=e};c.presetManagerPlugin=new a();var b={dialogContainer:null,prefix:"prst",popupHeight:c(window).height()-c(window).height()*40/100,confPage:false,adminEmail:null,region:"ru",presetList:{},logo:{cdnvideo:"/images/cdnvideo.jpg",wowza:"/images/wowza.png",youtube:"/images/youtube.png"},wowzaInstructionLink:null,youtubeInstructionLink:null,rtsp:{status:false,allowed:true,announce:false,inactiveReceiverTimeout:60,rtpOverTcp:0,defaultVideoCodec:"H264",defaultAudioCodec:"MP3",retires:0,retryDelay:10,preset:null,announceURL:null,videoCodecList:{H264:"H264",VP8:"VP8"},audioCodecList:{MP3:"MP3",PCM:"L16",G711U:"G711Ulaw64k",G711A:"G711Alaw64k",AAC:"AAC"}},locale:{publishFromCDNvideoTitle:"Вещание через облако CDNVideo",publishFromCDNvideoDesc:"Ведущий отечественный сервис по доставке контента и организации трансляций. Мы автоматически создадим для вас учётную запись и всё настроим. Обратите внимание, что услуга трансляции предоставляется согласно условиям использования и тарифам сервиса CDNvideo.",otherServiceTitle:"Вещание через сторонние сервисы и продукты",otherServiceDesc:"Мы подготовили несколько шаблонов настроек для организации трансляции через другие популярные решения. Выберите подходящий для вас вариант и следуйте инструкциям.",manualSettingsTitle:"Ручная настройка",manualSettingsDesc:"Если вы не боитесь аббревиатур RTSP Push или RTSP Pull, то вам сюда. Весь процесс настройки вещания в ваших руках.",autoSetting:"Настроить автоматически",createCDNvideoAccount:"Создать новую учетную запись автоматически",existCDNvideoAccount:"У меня уже есть аккаунт",login:"Логин",password:"Пароль",publishUrl:"URL Publish",hostServer:"Host Server",primaryServer:"Primary Server",hostPort:"Host Port",application:"Application",streamName:"Stream Name",textTune:"Настроить",textAddConfig:"Добавить конфигурацию",textShowAddSettings:"Показать дополнительные настройки",textHideAddSettings:"Скрыть дополнительные настройки",btnCreate:"Создать",btnSave:"Сохранить",btnDelete:"Удалить",btnCancel:"Отмена",btnBack:"&#8592;&nbsp;Назад",btnAddPreset:"Добавить шаблон",textServiceStream:"Сервис вещания:",textInstruction:"Следуйте нашей инструкции",textOnlyInConfPage:"Вещание данным способом необходимо настраивать индивидуально для каждой видеоконференции.",textPullOnlyInConfPage:"Вещание данным способом необходимо настраивать индивидуально для каждой видеоконференции. Здесь вы можете задать дополнительные настройки.",textCopyLink:"Скопируйте ссылку на трансляцию:",textConfiguration:"Конфигурация",entryHostServer:"Введите Host-Server",entryHostPort:"Введите Host-Port",entryApplication:"Введите Application",entryStreamName:"Введите Stream-Name",entryLogin:"Введите логин",entryPassword:"Введите пароль",entryPublishUrl:"Введите URL Publish",manualPush:"Ручная настройка - Publish",manualPull:"Ручная настройка - Pull",videoCodec:"Видеокодек",audioCodec:"Аудиокодек",rtpOverTcp:"Отправить исходящие RTP потоки через TCP",inactiveReceiverTimeout:"Время ожидания ответа от сервера:",retries:"Количество повторных попыток",retryDelay:"Задержка повторных попыток",streaming:"Вещание",presetList:"Список шаблонов",emailEntryCDN:"На данный e-mail будет заведена запись в сервисе CDN:",textCDNvideoAgree:'Нажимая кнопку "Создать", я принимаю <a href="http://cdnvideo.ru/docs/Dogovor_oferta_CDNvideo.pdf" target="_blank">правила пользования сервисом</a>',errorField:"Неверный формат поля <b>%s</b>",titleCreateNewConfig:"Создать новую конфигурацию",titleSelectConfig:"Выбрать конфигурацию для вещания",textStreamingConfiguration:"Конфигурация для вещания:",textConfigurationAlreadyExists:"Данная конфигурация уже существует",selectedPreset:"Выбран шаблон",btnApply:"Применить",btnDisable:"Отключить вещание",btnClose:"Закрыть",textConfigStream:"Конфигурация для вещания:",addNewConfig:"Добавить новую конфигурацию",outsideBroadcasting:"Вещать на внешней странице конференции",usePlayerCode:"Вы можете использовать код плеера для вещания на вашем сайте.",CDNvideoPlayerBlock:"HTML-код плеера",CDNvideoIframe:"HTML для встраивания",textTurnOn:"Включить",textChangeCnf:"Изменить настройки конфигурации",textCopyStreamLink:"Скопируйте ссылку на трансляцию:",authentication:"Аутентификация",templateName:"Название шаблона",textWowzaServerHelp:"Название трансляции в панели управления Wowza будет соответствовать ID конференции",textWowzaCloudHelp:"Данный шаблон трансляции может быть использован только в одной из одновременно запущенных конференций",textNotAvailablePlayerCode:"HTML-код плеера станет доступен после создания конференции",question:"Вопрос",presetWillBeDeleted:"Шаблон будет <b>удалён</b>. Вы уверены?",serverUrl:"URL-адрес сервера",streamKey:"Название/ключ трансляции"},handlers:{savePreset:"/admin/conferences/savePreset",deletePreset:"/admin/conferences/deletePreset",createCDNvideoAccount:"/admin/conferences/createCDNvideoAccount",getPresetList:"/admin/conferences/getPresetList",prepareCDNvideoPresetsState:"/admin/conferences/prepareCDNvideoPresetsState",checkCDNvideoAccountExist:"/admin/conferences/checkCDNvideoAccountExist",getCDNvideoIframe:"/admin/handler/getCDNvideoIframe"},plugins:{conferencePlugin:null},init:function(f,e){d=this;this.presetTools.getPresetList(f,e)},main:function(){return d.containers.get()},containers:{_rendered:null,get:function(){if(d.containers._rendered===null){d.containers._rendered=d.containers._render()}return d.containers._rendered},_render:function(){var e=c('<div id="presetManager"></div>');d.containers.streamingDialog.get();if(!d.confPage){var f=d.presetTools.renderPresetList();e.append(f)}else{d.rtsp.preset=d.plugins.conferencePlugin.rtsp.preset;e.append(d.containers.presetBroadcast.get())}return e},streamingDialog:{_dialogContainer:null,_rendered:null,get:function(){if(d.containers.streamingDialog._rendered===null){d.containers.streamingDialog._rendered=d.containers.streamingDialog._render()}return d.containers.streamingDialog._rendered},_render:function(){d.containers.streamingDialog._dialogContainer=c("<div>");d.containers.streamingDialog._dialogContainer.append(d.containers.streamingDialog.main());d.containers.streamingDialog._dialogContainer.dialog({title:d.locale.streaming,autoOpen:false,modal:false,draggable:true,resizable:false,dialogClass:"presetManager",width:750,height:550});return d.containers.streamingDialog._dialogContainer},main:function(){var e=c("<div>");e.append(d.containers.initCDNvideoBlock());e.append(d.containers.initOtherServiceBlock());e.append(d.containers.initManualBlock());return e},close:function(){d.containers.streamingDialog._dialogContainer.dialog("close")},open:function(){d.containers.streamingDialog._dialogContainer.dialog("open")}},initCDNvideoBlock:function(){var f=c("<div>",{id:"cdnvideo-stream-form","class":"stream-block"});var k=c("<h2>").text(d.locale.publishFromCDNvideoTitle);var h=c("<table>");var j=c("<tr>");j.append(c("<td>",{style:"width:90px"}).append(c("<img>",{src:d.logo.cdnvideo,"class":"CDNvideoLogo"})));j.append(c("<td>").text(d.locale.publishFromCDNvideoDesc));var g=c("<input>",{type:"button",value:d.locale.autoSetting}).addClass("btn cdnvideo");var e=c("<a>",{href:"#"}).text(d.locale.existCDNvideoAccount);j.append(c("<td>").append(g).append(c("<div>",{"class":"cdn-already-exist"}).append(e)));e.click(function(){d.containers.CDNvideoAuthForm.init().dialog("open")});g.click(function(){d.containers.CDNvideoRegForm.init().dialog("open")});h.append(j);f.append(k).append(h);return f},initOtherServiceBlock:function(){var e=c("<div>",{id:"other-stream-form","class":"stream-block"});var k=c("<h2>").text(d.locale.otherServiceTitle);var h=c("<table>");var j=c("<tr>");var g=c("<td>",{"class":"logo"}).append(c("<img>",{src:d.logo.wowza,width:90})).append(c("<img>",{src:d.logo.youtube,width:90}));j.append(g);j.append(c("<td>",{"class":"desc"}).text(d.locale.otherServiceDesc));var f=c("<input>",{type:"button",value:d.locale.textAddConfig,"class":"btn"});j.append(c("<td>").append(f));f.click(function(){d.containers.wowzaServerForm.init().dialog("open")});h.append(j);e.append(k).append(h);return e},initManualBlock:function(){var e=c("<div>",{id:"manual-stream-form","class":"stream-block"});var j=c("<h2>").text(d.locale.manualSettingsTitle);var g=c("<table>");var h=c("<tr>");h.append("<td>",{colspan:2,"class":"desc"}).text(d.locale.manualSettingsDesc);var f=c("<input>",{type:"button",value:d.locale.textTune,"class":"btn"});h.append(c("<td>").append(f));g.append(h);e.append(j);e.append(g);f.click(function(){d.containers.manualPushForm.init().dialog("open")});return e},presetBroadcast:{_button:null,_rendered:null,get:function(){if(d.containers.presetBroadcast._rendered===null){d.containers.presetBroadcast._rendered=d.containers.presetBroadcast.init()}return d.containers.presetBroadcast._rendered},init:function(){var h=c("<div>");var f=c("<a>",{href:"#",id:"selectPreset"});var g=d.containers.presetBroadcast.playerCode.get();d.containers.presetBroadcast.playerCode.hide();if(d.rtsp.preset&&d.presetList[d.rtsp.preset]){var e=d.presetTools.getPresetTitle(d.rtsp.preset);f.text(d.locale.selectedPreset+" "+e);f.click(function(){d.containers.presetSelect.init().dialog("open")});if(d.presetList[d.rtsp.preset].provider_type===d.containers.CDNvideoAuthForm._provider){d.containers.presetBroadcast.playerCode.show()}}else{f.text(d.locale.textTurnOn);f.click(function(){if(c.isEmptyObject(d.presetList)){d.containers.streamingDialog.open()}else{d.containers.presetSelect.init().dialog("open")}})}d.containers.presetBroadcast._button=f;h.append(f).append(g);return h},playerCode:{_rendered:null,_link:null,_container:null,get:function(){if(d.containers.presetBroadcast.playerCode._rendered===null){d.containers.presetBroadcast.playerCode._rendered=d.containers.presetBroadcast.playerCode.init()}return d.containers.presetBroadcast.playerCode._rendered},init:function(){var f=c("<div>",{style:"margin-top:10px;"});f.append(c("<p>").text(d.locale.usePlayerCode));var e=c("<a>",{id:d.prefix+"getCode",href:"#"});var g=d.containers.presetSelect.CDNvideoPlayerBlock.cdnvideoIframe.get();e.click(function(){var h=d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer.get();h.append(g).dialog("open")});d.containers.presetBroadcast.playerCode._link=e;f.append(e.text(d.locale.CDNvideoPlayerBlock));d.containers.presetBroadcast.playerCode._container=f;return f},disable:function(){d.containers.presetBroadcast.playerCode._link.attr("title",d.locale.textNotAvailablePlayerCode).unbind("click").addClass("disabled").click(function(){var e=c('<div id="dialog" title="'+d.locale.modalTitle+'"><p>'+d.locale.textNotAvailablePlayerCode+"</p></div>");e.dialog({modal:true,draggable:true,resizable:false,buttons:{Ok:function(){c(this).dialog("close")}}})})},hide:function(){d.containers.presetBroadcast.playerCode._container.hide()},show:function(){d.containers.presetBroadcast.playerCode._container.show()}}},presetSelect:{_dialogContainer:null,_select:null,_youtubeBlock:null,_editPresetBlock:null,init:function(){var h=c("<div>");h.append(c("<p>").addClass("validateTips"));d.containers.presetSelect._dialogContainer=d.containers.popup.presetSelectForm.get();var f=d.containers.presetSelect.wowzaStreamNameInfo.get();var g=d.containers.presetSelect.announceUrl.get();var e=d.containers.presetSelect.selectService();h.append(e).append(g).append(f);d.containers.presetSelect._dialogContainer.html(h);if(!d.rtsp.preset){d.containers.popup.presetSelectForm.hideButton()}return d.containers.presetSelect._dialogContainer},close:function(){d.containers.presetSelect._dialogContainer.dialog("close")},selectService:function(){var o=c("<table>",{id:d.prefix+"selectedPreset"});var l=c("<h2>").text(d.locale.textStreamConfig);o.append(l);var j=c("<tr>");var m=c("<select>");var f=false;c.each(d.presetList,function(u,s){var q=d.presetTools.getPresetTitle(s.id);var r=c("<option>",{value:u,"data-provider":s.provider_type}).text(q);if(!c.isEmptyObject(d.presetList)&&d.presetList[d.rtsp.preset]&&u===d.presetList[d.rtsp.preset].id){r.attr({selected:true});f=true}m.append(r)});m.append(c("<option>",{value:"","data-provider":0}).text(d.locale.addNewConfig));m.change(function(){var q=c("option:selected",this).val();if(q){d.containers.presetSelect.prepareSelectedPreset(q)}else{d.containers.presetSelect.close();d.containers.streamingDialog.open()}});d.containers.presetSelect._select=m;var n=c("<div>",{id:d.prefix+"editPresetBlock"});var e=c("<a>",{href:"#"}).text(d.locale.textChangeCnf);e.on("click",function(){d.containers.presetSelect._dialogContainer.dialog("close");d.presetTools.editPreset(m.val())});n.append(e);d.containers.presetSelect._editPresetBlock=n;var h=c("<div>",{id:d.prefix+"youtubeBlock","class":"none"});var p=c("<img>",{src:d.logo.youtube,"class":"youtubeLogo"});var g=c("<a>",{href:d.youtubeInstructionLink,target:"_blank","class":"youtubeLink"}).text(d.locale.textInstruction);h.append(p).append(g);d.containers.presetSelect._youtubeBlock=h;if(!f){var k=m.find(":selected").val();if(k){d.containers.presetSelect.prepareSelectedPreset(k)}}j.append(c("<td>").append(m)).append(c("<td>").append(n).append(h));o.append(j);return o},prepareSelectedPreset:function(e){var e=d.presetList[e];var f=e.provider_type;d.containers.presetSelect.showEditLink();if(f===d.containers.manualPullForm._provider){d.containers.presetSelect.announceUrl.show()}else{d.containers.presetSelect.announceUrl.hide()}if(f===d.containers.wowzaServerForm._provider){d.containers.presetSelect.wowzaStreamNameInfo.show()}else{d.containers.presetSelect.wowzaStreamNameInfo.hide()}},showYoutubeLink:function(){d.containers.presetSelect._editPresetBlock.hide();d.containers.presetSelect._youtubeBlock.show()},showEditLink:function(){d.containers.presetSelect._youtubeBlock.hide();d.containers.presetSelect._editPresetBlock.show()},announceUrl:{_container:null,get:function(){var g=c("<table>",{id:d.prefix+"announceUrlBlock","class":"none"});var h=c("<tr>");var e=d.presetTools.getAnnounceUrl();var f=c("<input>",{id:d.prefix+"announceUrl",type:"text","class":"announceUrl disabled",value:e,readonly:true,onclick:"this.select()"});h.append(c("<td>").append(c("<p>").text(d.locale.textCopyStreamLink)).append(f));g.append(h);d.containers.presetSelect.announceUrl._container=g;return g},show:function(){d.containers.presetSelect.announceUrl._container.show()},hide:function(){d.containers.presetSelect.announceUrl._container.hide()}},wowzaStreamNameInfo:{_container:null,get:function(){var e=c("<table>",{id:d.prefix+"wowzaStreamNameInfoBlock","class":"none"});var f=c("<tr>");f.append(c("<td>").append(c("<p>").html(d.locale.textWowzaServerHelp+": <b>"+d.plugins.conferencePlugin.cid.real+"</b>")));e.append(f);d.containers.presetSelect.wowzaStreamNameInfo._container=e;return e},show:function(){d.containers.presetSelect.wowzaStreamNameInfo._container.show()},hide:function(){d.containers.presetSelect.wowzaStreamNameInfo._container.hide()}},CDNvideoPlayerBlock:{_container:null,get:function(){var g=c("<table>",{id:d.prefix+"CDNvideoPlayerBlock","class":""});var j=c("<input>",{id:d.prefix+"rtpOverTcp",type:"checkbox",checked:true});j.on("click",function(){if(this.checked){}else{}});var f=c("<label>").append(j).append(d.locale.outsideBroadcasting);g.append(c("<tr>").append(c("<td>").append(f)));g.append(c("<tr>").append(c("<td>").append(c("<div>").text(d.locale.usePlayerCode))));var e=c("<a>",{id:d.prefix+"getCode",href:"#"});var h=d.containers.presetSelect.CDNvideoPlayerBlock.cdnvideoIframe.get();e.click(function(){var k=d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer.get();k.append(h).dialog("open")});g.append(c("<tr>").append(c("<td>").append(e.text(d.locale.CDNvideoPlayerBlock))));d.containers.presetSelect.CDNvideoPlayerBlock._container=g;return g},show:function(){if(d.containers.presetSelect.CDNvideoPlayerBlock._container){d.containers.presetSelect.CDNvideoPlayerBlock._container.show()}},hide:function(){if(d.containers.presetSelect.CDNvideoPlayerBlock._container){d.containers.presetSelect.CDNvideoPlayerBlock._container.hide()}},htmlPlayer:{_dialogContainer:null,_rendered:null,get:function(){if(d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._rendered===null){d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._rendered=d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._render()}return d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._rendered},_render:function(){d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._dialogContainer=c("<div>",{id:"presetSelect"});d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._dialogContainer.dialog({title:d.locale.CDNvideoPlayerBlock,autoOpen:false,modal:false,draggable:true,resizable:false,dialogClass:"playerCode",width:450,height:350,buttons:{close:{text:d.locale.btnClose,id:d.prefix+"btnClose",click:function(){c(this).dialog("close")}}}});return d.containers.presetSelect.CDNvideoPlayerBlock.htmlPlayer._dialogContainer}},cdnvideoIframe:{_rendered:null,get:function(){if(d.containers.presetSelect.CDNvideoPlayerBlock.cdnvideoIframe._rendered===null){d.containers.presetSelect.CDNvideoPlayerBlock.cdnvideoIframe._rendered=d.containers.presetSelect.CDNvideoPlayerBlock.cdnvideoIframe._render()}return d.containers.presetSelect.CDNvideoPlayerBlock.cdnvideoIframe._rendered},_render:function(){var f=c("<tr>");var e=c("<td>");var h=c('<textarea id="'+d.prefix+'cdnvideoIframe" class="fullBlock grayBlock stbtn" onclick="this.select()" readonly="readonly" style="width:420px;height:225px;border:1px solid grey;"></textarea>');var g=d.presetList[d.rtsp.preset];if(g&&g.provider_type==d.containers.CDNvideoAuthForm._provider){c.ajax({url:d.handlers.getCDNvideoIframe,type:"POST",dataType:"json",data:{cid:d.plugins.conferencePlugin.cid.real,login:g.username,password:g.password},beforeSend:function(){h.text("processing..")}}).then(function(l,m,k){var j=c.Deferred();if(l.error){return j.reject(l,m,k)}return j.resolve(l,m,k)}).done(function(j){if(j.success){h.val(j.success)}}).fail(function(j){d.presetTools.sendMessage(j.error,true)})}e.html(h);f.append(e);return f}}}},CDNvideoAuthForm:{_dialogContainer:null,_login:null,_password:null,_provider:"cdnvideo",_providerTitle:"CDNvideo",_applyButton:null,init:function(g){var f=c("<div>",{"class":"CDNvideoAuthForm"});f.append(c("<p>").addClass("validateTips"));if(!g){d.containers.CDNvideoAuthForm._dialogContainer=d.containers.popup.presetForm.get();f.append(d.containers.CDNvideoAuthForm.selectService.get())}else{d.containers.CDNvideoAuthForm._dialogContainer=d.containers.popup.presetEditForm.get()}f.append(d.containers.CDNvideoAuthForm.body.get());d.containers.additionalSettings.get();d.containers.CDNvideoAuthForm._dialogContainer.html(f);var e=d.containers.CDNvideoAuthForm._dialogContainer.dialog("option","buttons");e.save.click=function(){d.presetTools.disableApplyButton(g);var h=d.containers.CDNvideoAuthForm.validate();if(h){d.presetTools.saveCDNvideoPreset(d.presetObject._login.val(),d.presetObject._password.val(),g)}else{d.presetTools.enableApplyButton(g)}};d.containers.CDNvideoAuthForm._dialogContainer.dialog("option","buttons",e);d.containers.popup.presetForm.prepareButtons(g);return d.containers.CDNvideoAuthForm._dialogContainer},selectService:{get:function(){var k=c("<div>");var j=c("<table>");var h=c('<col width="40%"><col width="10%">');j.append(h);var g=c("<h2>").text(d.locale.textServiceStream);var l=c("<tr>");var e=c("<select>",{disabled:true}).append(c("<option>").text(d.containers.CDNvideoAuthForm._providerTitle));var f=c("<a>",{href:"#"}).text(d.locale.createCDNvideoAccount);l.append(c("<td>").append(e));f.click(function(){d.containers.CDNvideoRegForm.init().dialog("open")});l.append(c("<td>",{style:"width:90px"}).append(c("<img>",{src:d.logo.cdnvideo,"class":"CDNvideoLogo"}))).append(c("<td>").append(c("<span>",{"class":"createCDN"}).append(f)));j.append(l);k.append(g).append(j);return k}},body:{get:function(){var h=c("<table>");var g=c('<col width="40%"><col width="60%">');h.append(g);var j=c("<tr>");var e=c("<input>",{id:d.prefix+"login",type:"text",value:d.adminEmail});d.containers.CDNvideoAuthForm._login=e;var f=c("<input>",{id:d.prefix+"password",type:"password",value:"",placeholder:""});d.containers.CDNvideoAuthForm._password=f;j.append(c("<td>").append(c("<p>").text(d.locale.login+":")).append(e)).append(c("<td>",{colspan:2}).append(c("<p>").text(d.locale.password+":")).append(f));h.append(j);return h}},validate:function(){var e=true;d.presetObject._login=d.containers.CDNvideoAuthForm._login;d.presetObject._password=d.containers.CDNvideoAuthForm._password;d.presetObject._provider=d.containers.CDNvideoAuthForm._provider;d.presetObject._name=d.containers.CDNvideoAuthForm._providerTitle+" ("+d.presetObject._login.val()+")";var f=c([]).add(d.presetObject._login).add(d.presetObject._password);f.removeClass("ui-state-error");e=d.presetTools.checkPresetExist(d.presetObject._provider,d.presetObject._name);e=e&&checkLength(d.presetObject._login,d.locale.login,1,255);e=e&&checkRegexp(d.presetObject._login,d.presetTools._emailRegex,d.locale.errorField.replace("%s",d.locale.login));e=e&&checkLength(d.presetObject._password,d.locale.password,1,255);if(!e){(d.presetObject._login).focus(function(){c(this).removeClass("ui-state-error")});(d.presetObject._password).focus(function(){c(this).removeClass("ui-state-error")})}return e}},CDNvideoRegForm:{_dialogContainer:null,_login:null,_password:null,_provider:"cdnvideo",_providerTitle:"CDNvideo",init:function(){d.containers.CDNvideoRegForm._dialogContainer=d.containers.popup.presetForm.get();var f=c("<div>",{"class":"CDNvideoRegForm"});f.append(c("<p>").addClass("validateTips")).append(d.containers.CDNvideoRegForm.selectService.get()).append(d.containers.CDNvideoRegForm.body.get());var e=d.containers.CDNvideoRegForm._dialogContainer.dialog("option","buttons");e.save.click=function(){d.presetTools.disableApplyButton();var g=d.containers.CDNvideoRegForm.validate();if(g){d.presetTools.createCDNvideoAccount()}else{d.presetTools.enableApplyButton()}};d.containers.CDNvideoRegForm._dialogContainer.html(f);d.containers.CDNvideoRegForm._dialogContainer.dialog("option","buttons",e);d.containers.popup.presetForm.prepareButtons(false);return d.containers.CDNvideoRegForm._dialogContainer},selectService:{get:function(){var k=c("<div>");var j=c("<table>");var h=c('<col width="40%"><col width="10%">');j.append(h);var g=c("<h2>").text(d.locale.textServiceStream);var l=c("<tr>");var e=c("<select>",{disabled:true}).append(c("<option>").text(d.containers.CDNvideoAuthForm._providerTitle));var f=c("<a>",{href:"#"}).text(d.locale.existCDNvideoAccount);l.append(c("<td>").append(e));f.click(function(){d.containers.CDNvideoAuthForm.init().dialog("open")});l.append(c("<td>",{style:"width:100%"}).append(c("<img>",{src:d.logo.cdnvideo,"class":"CDNvideoLogo"}))).append(c("<td>").append(c("<span>",{"class":"createCDN"}).append(f)));j.append(l);k.append(g).append(j);return k}},body:{get:function(){var h=c("<table>");var g=c('<col width="40%"><col width="60%">');h.append(g);var k=c("<tr>");var e=c("<input>",{id:d.prefix+"login",type:"text",value:d.adminEmail});d.containers.CDNvideoRegForm._login=e;var j=c("<input>",{type:"checkbox",id:"agree",value:"",checked:true});j.click(function(){if(!this.checked){c(".btnCreate").attr("disabled",true)}else{c(".btnCreate").removeAttr("disabled")}});var f=c("<label>");f.append(j).append(d.locale.textCDNvideoAgree);k.append(c("<td>",{colspan:3}).append(c("<p>").text(d.locale.emailEntryCDN)).append(e).append(c("<p>").append(f)));h.append(k);return h}},validate:function(){var e=true;d.presetObject._provider=d.containers.CDNvideoRegForm._provider;d.presetObject._login=d.containers.CDNvideoRegForm._login;d.presetObject._name=d.containers.CDNvideoRegForm._providerTitle+" ("+d.presetObject._login.val()+")";e=checkRegexp(d.presetObject._login,d.presetTools._emailRegex,d.locale.errorField.replace("%s",d.locale.login));e=e&&d.presetTools.checkPresetExist(d.presetObject._provider,d.containers.CDNvideoRegForm._login.val());return e}},manualPushForm:{_dialogContainer:null,_provider:"manualPush",_providerTitle:"manualPush",_name:null,_login:null,_password:null,_announceUrl:null,init:function(h){var g=c("<div>",{"class":"manualPushForm"});g.append(c("<p>").addClass("validateTips"));if(!h){d.containers.manualPushForm._dialogContainer=d.containers.popup.presetForm.get();var e=d.containers.manualPushForm.selectService.get();e.change(function(){d.containers.manualPullForm.init().dialog("open")});g.append(e)}else{d.containers.manualPushForm._dialogContainer=d.containers.popup.presetEditForm.get()}g.append(d.containers.manualPushForm.body.get()).append(d.containers.authentication.get()).append(d.containers.additionalSettings.get());d.containers.manualPushForm._dialogContainer.html(g);var f=d.containers.manualPushForm._dialogContainer.dialog("option","buttons");f.save.click=function(){var j=d.containers.manualPushForm.validate();if(j){d.presetTools.savePreset(h)}};d.containers.manualPushForm._dialogContainer.dialog("option","buttons",f);d.containers.popup.presetForm.prepareButtons(h);return d.containers.manualPushForm._dialogContainer},selectService:{get:function(){var h=c("<div>");var g=c("<table>");var f=c("<h2>").text(d.locale.textServiceStream);g.append(f);var j=c("<tr>");var e=c("<select>");e.append(c("<option>",{selected:true}).text(d.locale.manualPush)).append(c("<option>").text(d.locale.manualPull));j.append(c("<td>").append(e));g.append(j);h.append(f).append(g);return h}},body:{get:function(){var h=c("<table>");var f=c('<col width="40%"><col width="60%">');h.append(f);var j=c("<tr>");var e=c("<input>",{id:d.prefix+"templateName",type:"text",value:""});d.containers.manualPushForm._name=e;j.append(c("<td>").append(c("<p>").text(d.locale.templateName+":")).append(e));h.append(j);j=c("<tr>");var g=c("<input>",{id:d.prefix+"announceUrl",name:"url",type:"text",value:"",placeholder:""}).addClass("announceUrl");d.containers.manualPushForm._announceUrl=g;j.append(c("<td>",{colspan:"2"}).append(c("<p>").text(d.locale.publishUrl+":")).append(g));h.append(j);return h}},validate:function(){var e=true;d.presetObject._name=d.containers.manualPushForm._name.val();d.presetObject._announceUrl=d.containers.manualPushForm._announceUrl;d.presetObject._provider=d.containers.manualPushForm._provider;var f=c([]).add(d.containers.manualPushForm._name).add(d.presetObject._login).add(d.presetObject._password).add(d.presetObject._announceUrl);f.removeClass("ui-state-error");e=checkLength(d.containers.manualPushForm._name,d.locale.templateName,1,255);e=e&&d.presetTools.checkPresetExist(d.presetObject._provider,d.containers.manualPushForm._name.val());e=e&&d.presetTools.validateAnnounceUrl(d.presetObject._announceUrl,d.locale.publishUrl);if(d.containers.authentication._field.prop("checked")){e=e&&checkLength(d.presetObject._login,d.locale.login,1,255);e=e&&checkLength(d.presetObject._password,d.locale.password,1,255)}return e}},manualPullForm:{_dialogContainer:null,_name:null,_provider:"manualPull",_providerTitle:"manualPull",_announceUrl:null,init:function(h){var g=c("<div>");g.append(c("<p>").addClass("validateTips"));if(!h){d.containers.manualPullForm._dialogContainer=d.containers.popup.presetForm.get();var e=d.containers.manualPullForm.selectService.get();e.change(function(){d.containers.manualPushForm.init().dialog("open")});g.append(e)}else{d.containers.manualPullForm._dialogContainer=d.containers.popup.presetEditForm.get()}g.append(d.containers.manualPullForm.body.get()).append(d.containers.additionalSettings.get(true));d.containers.manualPullForm._dialogContainer.html(g);var f=d.containers.manualPullForm._dialogContainer.dialog("option","buttons");f.save.click=function(){var j=d.containers.manualPullForm.validate();if(j){d.presetTools.savePreset(h)}};d.containers.manualPullForm._dialogContainer.dialog("option","buttons",f);d.containers.popup.presetForm.prepareButtons(h);return d.containers.manualPullForm._dialogContainer},selectService:{get:function(){var h=c("<div>");var g=c("<table>");var f=c("<h2>").text(d.locale.textServiceStream);g.append(f);var j=c("<tr>");var e=c("<select>");e.append(c("<option>").text(d.locale.manualPush)).append(c("<option>",{selected:true}).text(d.locale.manualPull));j.append(c("<td>").append(e));if(!d.confPage){j.append(c("<td>").append(c("<p>").text(d.locale.textPullOnlyInConfPage)))}g.append(j);h.append(f).append(g);return h}},body:{get:function(){var h=c("<table>");var f=c('<col width="40%"><col width="60%">');h.append(f);var j=c("<tr>");var e=c("<input>",{id:d.prefix+"templateName",type:"text",value:""});d.containers.manualPullForm._name=e;j.append(c("<td>").append(c("<p>").text(d.locale.templateName+":")).append(e));h.append(j);j=c("<tr>");if(d.confPage){d.containers.manualPullForm._announceUrl=d.presetTools.getAnnounceUrl();var g=c("<input>",{id:d.prefix+"announceUrl",type:"text","class":"announceUrl disabled",value:d.containers.manualPullForm._announceUrl,readonly:true,onclick:"this.select()"});d.presetObject._announceUrl=g;j.append(c("<td>").append(c("<p>").text(d.locale.textCopyLink)).append(g))}h.append(j);return h}},validate:function(){var e=true;d.presetObject._name=d.containers.manualPullForm._name.val();d.presetObject._provider=d.containers.manualPullForm._provider;e=checkLength(d.containers.manualPullForm._name,d.locale.templateName,1,255);e=e&&d.presetTools.checkPresetExist(d.presetObject._provider,d.containers.manualPullForm._name.val());return e}},wowzaServerForm:{_dialogContainer:null,_name:null,_login:null,_password:null,_host:null,_port:null,_application:null,_provider:"wowzaServer",_providerTitle:"Wowza Streaming Engine",_announceUrl:null,init:function(g){var f=c("<div>",{"class":"wowzaServerForm"});f.append(c("<p>").addClass("validateTips"));if(!g){d.containers.wowzaServerForm._dialogContainer=d.containers.popup.presetForm.get();f.append(d.containers.wowzaServerForm.selectService.get())}else{d.containers.wowzaServerForm._dialogContainer=d.containers.popup.presetEditForm.get()}f.append(d.containers.wowzaServerForm.body.get()).append(d.containers.authentication.get()).append(d.containers.additionalSettings.get());d.containers.additionalSettings.enableRtpOverTcp(0);d.containers.additionalSettings.codecs.audioCodec.set("AAC");d.containers.wowzaServerForm._dialogContainer.html(f);var e=d.containers.wowzaServerForm._dialogContainer.dialog("option","buttons");e.save.click=function(){var h=d.containers.wowzaServerForm.validate();if(h){d.presetTools.savePreset(g)}};d.containers.wowzaServerForm._dialogContainer.dialog("option","buttons",e);d.containers.popup.presetForm.prepareButtons(g);return d.containers.wowzaServerForm._dialogContainer},infoMsg:{get:function(){var e=c("<table>");e.append(c("<tr>").append(c("<td>").text(d.locale.textWowzaServerHelp)));return e}},selectService:{get:function(){var j=c("<div>");var f=c("<h2>").text(d.locale.textServiceStream);var h=c("<table>",{"class":"selectService"});var k=c("<tr>");var e=c("<select>");var g={wowzaServer:d.containers.wowzaServerForm._providerTitle,wowzaCloud:d.containers.wowzaCloudForm._providerTitle,youtube:d.containers.youtubeForm._providerTitle};c.each(g,function(m,n){var l=c("<option>");if(m===d.containers.wowzaServerForm._provider){l.attr("selected",true)}e.append(l.text(n))});k.append(c("<td>").append(e));e.change(function(){if(c(this).val()===d.containers.youtubeForm._providerTitle){d.containers.youtubeForm.init().dialog("open")}else{d.containers.wowzaCloudForm.init().dialog("open")}});h.append(k).append(c("<tr>").append(c("<td>").text(d.locale.textWowzaServerHelp)));j.append(f).append(h);return j}},body:{get:function(){var j=c("<table>");var h=c('<col width="40%">');j.append(h);var k=c("<tr>");var e=c("<input>",{id:d.prefix+"templateName",type:"text",value:""});d.containers.wowzaServerForm._name=e;k.append(c("<td>").append(c("<p>").text(d.locale.templateName+":")).append(e));j.append(k);k=c("<tr>");var g=c("<input>",{id:d.prefix+"hostServer",type:"text",value:"",placeholder:"","class":"announceUrl"});g.blur(function(){var m=d.presetTools.safeInputClearSpaces(c(this).val());c(this).val(m)});d.containers.wowzaServerForm._host=g;k.append(c("<td>",{colspan:2}).append(c("<p>").text(d.locale.hostServer+":")).append(g));j.append(k);k=c("<tr>");var l=c("<input>",{id:d.prefix+"hostPort",type:"text",value:"",placeholder:""});d.containers.wowzaServerForm._port=l;l.on("keyup blur",function(){var m=d.presetTools.safeIntInput(l.val());l.val(m)});k.append(c("<td>").append(c("<p>").text(d.locale.hostPort+":")).append(l));var f=c("<input>",{id:d.prefix+"application",type:"text",value:"",placeholder:""});f.blur(function(){var m=d.presetTools.safeInputClearSpaces(c(this).val());c(this).val(m)});d.containers.wowzaServerForm._application=f;k.append(c("<td>").append(c("<p>").text(d.locale.application+":")).append(f));j.append(k);return j}},validate:function(){var j=true,m="rtsp://",h=d.containers.wowzaServerForm._host,e=d.containers.wowzaServerForm._port,f=d.containers.wowzaServerForm._application,l="%stream%";d.presetObject._name=d.containers.wowzaServerForm._name.val();d.presetObject._provider=d.containers.wowzaServerForm._provider;var k=c([]).add(d.presetObject._name).add(d.presetObject._login).add(d.presetObject._password).add(h).add(e).add(f);k.removeClass("ui-state-error");j=checkLength(d.containers.wowzaServerForm._name,d.locale.templateName,1,255);j=j&&d.presetTools.checkPresetExist(d.presetObject._provider,d.containers.wowzaServerForm._name.val());j=j&&d.presetTools.validServerHost(h,d.locale.hostServer);j=j&&checkLength(e,d.locale.hostPort,1,5);j=j&&checkRegexp(e,/^\d+$/,d.locale.errorField.replace("%s",d.locale.hostPort));j=j&&checkInt(e,d.locale.hostPort,1,65536);j=j&&checkLength(f,d.locale.application,1,255);if(d.containers.authentication._field.prop("checked")){j=j&&checkLength(d.presetObject._login,d.locale.login,1,255);j=j&&checkLength(d.presetObject._password,d.locale.password,1,255)}var g=c("<input>").val(m+h.val()+":"+e.val()+"/"+f.val()+"/"+l);d.presetObject._announceUrl=g;return j}},wowzaCloudForm:{_dialogContainer:null,_name:null,_login:null,_password:null,_host:null,_port:null,_stream:null,_provider:"wowzaCloud",_providerTitle:"Wowza Streaming Cloud",_announceUrl:null,init:function(g){var f=c("<div>",{"class":"wowzaCloudForm"});f.append(c("<p>").addClass("validateTips"));if(!g){d.containers.wowzaCloudForm._dialogContainer=d.containers.popup.presetForm.get();f.append(d.containers.wowzaCloudForm.selectService.get())}else{d.containers.wowzaCloudForm._dialogContainer=d.containers.popup.presetEditForm.get()}f.append(d.containers.wowzaCloudForm.body.get()).append(d.containers.authentication.get()).append(d.containers.additionalSettings.get());d.containers.additionalSettings.enableRtpOverTcp(0);d.containers.additionalSettings.codecs.audioCodec.set("AAC");d.containers.wowzaCloudForm._dialogContainer.html(f);var e=d.containers.wowzaCloudForm._dialogContainer.dialog("option","buttons");e.save.click=function(){var h=d.containers.wowzaCloudForm.validate();if(h){d.presetTools.savePreset(g)}};d.containers.wowzaCloudForm._dialogContainer.dialog("option","buttons",e);d.containers.popup.presetForm.prepareButtons(g);return d.containers.wowzaCloudForm._dialogContainer},selectService:{get:function(){var l=c("<div>");var f=c("<h2>").text(d.locale.textServiceStream);var k=c("<table>",{"class":"selectService"});var h=c('<col width="40%"><col width="3%">');k.append(h);var m=c("<tr>");var e=c("<select>");var g={wowzaServer:d.containers.wowzaServerForm._providerTitle,wowzaCloud:d.containers.wowzaCloudForm._providerTitle,youtube:d.containers.youtubeForm._providerTitle};c.each(g,function(o,p){var n=c("<option>");if(o===d.containers.wowzaCloudForm._provider){n.attr("selected",true)}e.append(n.text(p))});m.append(c("<td>").append(e)).append(c("<td>").append(c("<img>",{src:d.logo.wowza,width:80})));var j=c("<a>",{href:d.wowzaInstructionLink,target:"_blank"}).text(d.locale.textInstruction);m.append(c("<td>").append(j));e.change(function(){if(c(this).val()===d.containers.youtubeForm._providerTitle){d.containers.youtubeForm.init().dialog("open")}else{d.containers.wowzaServerForm.init().dialog("open")}});k.append(m).append(c("<tr>").append(c("<td>",{colspan:3}).text(d.locale.textWowzaCloudHelp)));l.append(f).append(k);return l}},body:{get:function(){var h=c("<table>");var g=c('<col width="40%">');h.append(g);var j=c("<tr>");var e=c("<input>",{id:d.prefix+"templateName",type:"text",value:""});d.containers.wowzaCloudForm._name=e;j.append(c("<td>").append(c("<p>").text(d.locale.templateName+":")).append(e));h.append(j);j=c("<tr>");var k=c("<input>",{id:d.prefix+"primaryServer",type:"text",value:"",placeholder:"","class":"announceUrl"});k.blur(function(){var m=d.presetTools.safeInputClearSpaces(c(this).val());c(this).val(m)});d.containers.wowzaCloudForm._host=k;j.append(c("<td>",{colspan:2}).append(c("<p>").text(d.locale.primaryServer+":")).append(k));h.append(j);j=c("<tr>");var l=c("<input>",{id:d.prefix+"hostPort",type:"text",value:"",placeholder:""});d.containers.wowzaCloudForm._port=l;l.on("keyup blur",function(){var m=d.presetTools.safeIntInput(c(this).val());c(this).val(m)});j.append(c("<td>").append(c("<p>").text(d.locale.hostPort+":")).append(l));var f=c("<input>",{id:d.prefix+"streamName",type:"text",value:"",placeholder:""});f.blur(function(){var m=d.presetTools.safeInputClearSpaces(c(this).val());c(this).val(m)});d.containers.wowzaCloudForm._stream=f;j.append(c("<td>").append(c("<p>").text(d.locale.streamName+":")).append(f));h.append(j);return h}},splitUrl:function(){var g=new RegExp("(.+://)([^:/?]*)/(.[^/]+)");var f=d.containers.wowzaCloudForm._host.val().match(g);var e=[];if(f){e.scheme=f[1];e.host=f[2];e.application=f[3]}return e},validate:function(k){var j=true,h=d.containers.wowzaCloudForm._host,e=d.containers.wowzaCloudForm._port,m=d.containers.wowzaCloudForm._stream;d.presetObject._name=d.containers.wowzaCloudForm._name.val();d.presetObject._provider=d.containers.wowzaCloudForm._provider;var l=c([]).add(d.presetObject._name).add(d.presetObject._login).add(d.presetObject._password).add(h).add(e).add(m);l.removeClass("ui-state-error");j=checkLength(d.containers.wowzaCloudForm._name,d.locale.templateName,1,255);j=j&&d.presetTools.checkPresetExist(d.presetObject._provider,d.containers.wowzaCloudForm._name.val());j=j&&d.presetTools.validPrimaryServer(h,d.locale.primaryServer);j=j&&checkLength(e,d.locale.hostPort,1,5);j=j&&checkRegexp(e,/^\d+$/,d.locale.errorField.replace("%s",d.locale.hostPort));j=j&&checkInt(e,d.locale.hostPort,1,65536);j=j&&checkLength(m,d.locale.streamName,1,255);j=j&&checkRegexp(m,/^[^\s]+$/,d.locale.errorField.replace("%s",d.locale.streamName));var g=d.containers.wowzaCloudForm.splitUrl(h.val());var f=g.scheme+g.host+":"+e.val()+"/"+g.application+"/"+m.val();d.containers.wowzaCloudForm._announceUrl=c("<input>").val(f);d.presetObject._announceUrl=d.containers.wowzaCloudForm._announceUrl;if(d.containers.authentication._field.prop("checked")){j=j&&checkLength(d.presetObject._login,d.locale.login,1,255);j=j&&checkLength(d.presetObject._password,d.locale.password,1,255)}return j}},youtubeForm:{_dialogContainer:null,_provider:"youtube",_providerTitle:"Youtube",_name:null,_announceUrl:null,_server_url:null,_stream_key:null,init:function(g){var f=c("<div>");f.append(c("<p>").addClass("validateTips"));if(!g){d.containers.youtubeForm._dialogContainer=d.containers.popup.presetForm.get();f.append(d.containers.youtubeForm.selectService.get())}else{d.containers.youtubeForm._dialogContainer=d.containers.popup.presetEditForm.get()}f.append(d.containers.youtubeForm.body.get()).append(d.containers.additionalSettings.get(true));d.containers.youtubeForm._dialogContainer.html(f);var e=d.containers.youtubeForm._dialogContainer.dialog("option","buttons");e.save.click=function(){var h=d.containers.youtubeForm.validate();if(h){d.presetTools.savePreset(g)}};d.containers.youtubeForm._dialogContainer.dialog("option","buttons",e);d.containers.popup.presetForm.prepareButtons(g);return d.containers.youtubeForm._dialogContainer},selectService:{get:function(){var k=c("<div>");var f=c("<h2>").text(d.locale.textServiceStream);var j=c("<table>",{"class":"selectService"});var h=c('<col width="40%"><col width="3%">');j.append(h);var l=c("<tr>");var e=c("<select>");var g={wowzaServer:d.containers.wowzaServerForm._providerTitle,wowzaCloud:d.containers.wowzaCloudForm._providerTitle,youtube:d.containers.youtubeForm._providerTitle};c.each(g,function(n,o){var m=c("<option>");if(n===d.containers.youtubeForm._provider){m.attr("selected",true)}e.append(m.text(o))});l.append(c("<td>").append(e)).append(c("<td>").append(c("<img>",{src:d.logo.youtube,width:60}))).append(c("<td>").append(c("<a>",{href:d.youtubeInstructionLink,target:"_blank"}).text(d.locale.textInstruction)));e.change(function(){if(c(this).val()===d.containers.wowzaCloudForm._providerTitle){d.containers.wowzaCloudForm.init().dialog("open")}else{d.containers.wowzaServerForm.init().dialog("open")}});j.append(l);k.append(f).append(j);return k}},body:{get:function(){var h=c("<table>");var j=c("<tr>");var f=c("<input>",{id:d.prefix+"templateName",type:"text",value:""});d.containers.youtubeForm._name=f;j.append(c("<td>").append(c("<p>").text(d.locale.templateName+":")).append(f));h.append(j);var j=c("<tr>");var e=c("<input>",{id:d.prefix+"serverUrl",type:"text",value:"",placeholder:""});d.containers.youtubeForm._server_url=e;j.append(c("<td>",{colspan:2}).append(c("<p>").text(d.locale.serverUrl+":")).append(e));var g=c("<input>",{id:d.prefix+"streamKey",type:"password",value:"",placeholder:""});d.containers.youtubeForm._stream_key=g;j.append(c("<td>",{colspan:2}).append(c("<p>").text(d.locale.streamKey+":")).append(g));h.append(j);return h}},validate:function(){d.presetObject._name=d.containers.youtubeForm._name.val();d.presetObject._provider=d.containers.youtubeForm._provider;var g=checkLength(d.containers.youtubeForm._name,d.locale.templateName,1,255);g=g&&d.presetTools.checkPresetExist(d.presetObject._provider,d.containers.youtubeForm._name.val());var e=d.containers.youtubeForm._server_url,h=d.containers.youtubeForm._stream_key;var f=c("<input>").val(e.val().trim("/")+"/"+h.val());d.presetObject._announceUrl=f;return g}},additionalSettings:{_showLink:null,_table:null,get:function(e){var h=c("<div>");var g=c("<table>",{id:"addSettings"});d.containers.additionalSettings._table=g;var f=c('<col width="30%"><col width="70%">');g.append(f);d.containers.additionalSettings._showLink=c("<a>",{href:"#","class":"add-settings show-settings"}).text(d.locale.textShowAddSettings);d.containers.additionalSettings._showLink.click(function(){if(c(this).hasClass("show-settings")){d.containers.additionalSettings.show()}else{d.containers.additionalSettings.hide()}});g.append(d.containers.additionalSettings.codecs.get());if(e===undefined){g.append(d.containers.additionalSettings.rtpOverTcp.get()).append(d.containers.additionalSettings.inactiveReceiverTimeout.get()).append(d.containers.additionalSettings.retries.get()).append(d.containers.additionalSettings.retryDelay.get());d.containers.additionalSettings.rtpOverTcp.disable()}h.append(d.containers.additionalSettings._showLink).append(g);d.containers.additionalSettings.hide();return h},codecs:{get:function(){var e=c("<tr>");e.append(d.containers.additionalSettings.codecs.videoCodec.get()).append(d.containers.additionalSettings.codecs.audioCodec.get());return e},videoCodec:{_field:null,get:function(){var f=c("<td>");var e=c("<select>",{name:"videoCodec",id:"videoCodec"});c.each(d.rtsp.videoCodecList,function(g,h){e.append(c("<option>",{value:h}).text(g))});d.containers.additionalSettings.codecs.videoCodec._field=e;d.presetObject._videoCodec=e;f.append(c("<p>").text(d.locale.videoCodec)).append(e);return f}},audioCodec:{_field:null,get:function(){var f=c("<td>");var e=c("<select>",{name:"audioCodec",id:"audioCodec"});c.each(d.rtsp.audioCodecList,function(g,h){e.append(c("<option>",{value:h}).text(g))});d.containers.additionalSettings.codecs.audioCodec._field=e;d.presetObject._audioCodec=e;f.append(c("<p>").text(d.locale.audioCodec)).append(e);return f},set:function(e){d.containers.additionalSettings.codecs.audioCodec._field.val(e)}}},rtpOverTcp:{_field:null,get:function(){var e=c("<tr>");var h=c("<td>",{colspan:"3"});var g=c("<input>",{id:d.prefix+"rtpOverTcp",type:"checkbox",checked:false});d.containers.additionalSettings.rtpOverTcp._field=g;d.presetObject._rtpOverTcp=g;g.on("click",function(){if(this.checked){d.containers.additionalSettings.inactiveReceiverTimeout.enable()}else{d.containers.additionalSettings.inactiveReceiverTimeout.disable()}});var f=c("<label>").append(g).append(d.locale.rtpOverTcp);h.append(f);e.append(h);return e},disable:function(){d.containers.additionalSettings.rtpOverTcp._field.prop("checked",false);d.containers.additionalSettings.inactiveReceiverTimeout.disable()},enable:function(){d.containers.additionalSettings.rtpOverTcp._field.prop("checked",true);d.containers.additionalSettings.inactiveReceiverTimeout.enable()}},inactiveReceiverTimeout:{_field:null,get:function(){var f=c("<tr>");var g=c("<td>").text(d.locale.inactiveReceiverTimeout);f.append(g);var e=c("<input>",{id:d.prefix+"inactiveReceiverTimeout",type:"text",value:d.rtsp.inactiveReceiverTimeout});e.keyup(function(){var h=d.presetTools.safeIntInput(e.val());e.val(h)});d.containers.additionalSettings.inactiveReceiverTimeout._field=e;d.presetObject._inactiveReceiverTimeout=e;f.append(c("<td>").append(e));return f},disable:function(){d.containers.additionalSettings.inactiveReceiverTimeout._field.prop("disabled",true)},enable:function(){d.containers.additionalSettings.inactiveReceiverTimeout._field.removeProp("disabled")}},retries:{_field:null,get:function(){var f=c("<tr>");var g=c("<td>").text(d.locale.retries);f.append(g);var e=c("<input>",{id:d.prefix+"retries",type:"text",value:0});e.keyup(function(){var h=d.presetTools.safeIntInput(e.val());e.val(h)});d.containers.additionalSettings.retries._field=e;d.presetObject._retries=e;f.append(c("<td>").append(e));return f}},retryDelay:{_field:null,get:function(){var f=c("<tr>");var g=c("<td>").text(d.locale.retryDelay);f.append(g);var e=c("<input>",{id:d.prefix+"retryDelay",type:"text",value:10});e.keyup(function(){var h=d.presetTools.safeIntInput(e.val());e.val(h)});d.containers.additionalSettings.retryDelay._field=e;d.presetObject._retryDelay=e;f.append(c("<td>").append(e));return f}},enableRtpOverTcp:function(e){d.containers.additionalSettings.rtpOverTcp.enable();d.containers.additionalSettings.inactiveReceiverTimeout._field.val(e)},show:function(){d.containers.additionalSettings._showLink.text(d.locale.textHideAddSettings).removeClass("show-settings").addClass("hide-settings");d.containers.additionalSettings._table.show()},hide:function(){d.containers.additionalSettings._showLink.text(d.locale.textShowAddSettings).removeClass("hide-settings").addClass("show-settings");d.containers.additionalSettings._table.hide()}},authentication:{_field:null,get:function(){var h=c("<div>");var g=c("<table>");var f=c('<col width="40%"><col width="60%">');g.append(f);var k=c("<tr>");var j=c("<input>",{id:d.prefix+"authentication",type:"checkbox",checked:false});d.containers.authentication._field=j;j.on("click",function(){if(this.checked){d.containers.authentication.authFields.show()}else{d.containers.authentication.authFields.hide()}});var e=c("<label>").append(j).append(d.locale.authentication);k.append(c("<td>").append(e));g.append(k).append(d.containers.authentication.authFields.get());h.append(g);return h},authFields:{_login:null,_password:null,_container:null,get:function(){var g=c("<tr>",{"class":"none"});var e=c("<input>",{id:d.prefix+"login",name:"login",type:"text",value:"",placeholder:""});d.containers.authentication.authFields._login=e;d.presetObject._login=e;var f=c("<input>",{id:d.prefix+"password",name:"password",type:"password",value:"",placeholder:""});d.containers.authentication.authFields._password=f;d.presetObject._password=f;g.append(c("<td>").append(c("<p>").text(d.locale.login+":")).append(e)).append(c("<td>").append(c("<p>").text(d.locale.password+":")).append(f));d.containers.authentication.authFields._container=g;return g},show:function(){d.containers.authentication.authFields._container.show()},hide:function(){d.containers.authentication.authFields._container.hide()}}},popup:{presetForm:{_dialogContainer:null,_rendered:null,get:function(){if(d.containers.popup.presetForm._rendered===null){d.containers.popup.presetForm._rendered=d.containers.popup.presetForm.init()}return d.containers.popup.presetForm._rendered},init:function(){d.containers.popup.presetForm._dialogContainer=c("<div>",{id:"presetForm"});d.containers.popup.presetForm._dialogContainer.dialog({title:d.locale.titleCreateNewConfig,autoOpen:false,modal:false,draggable:true,resizable:false,dialogClass:"presetForm",width:750,minHeight:400,buttons:{save:{text:d.locale.btnCreate,id:d.prefix+"btnCreate","class":"btnCreate",click:function(){}}},create:function(){c(this).css("maxHeight",d.popupHeight)},open:function(){d.containers.streamingDialog.close()}});return d.containers.popup.presetForm._dialogContainer},prepareButtons:function(e){if(!e){d.containers.popup.presetForm._dialogContainer.parent().find(".ui-dialog-buttonset").css("float","right");d.containers.popup.presetForm.addBtnBack()}else{d.containers.popup.presetEditForm._dialogContainer.parent().find(".ui-dialog-buttonset").css("float","none")}},addBtnBack:function(){var e=c("<span>",{id:"btnBack","class":"btnBack",html:d.locale.btnBack});var f=d.containers.popup.presetForm._dialogContainer.parent().find(".ui-dialog-buttonpane");f.find(".btnBackBlock").remove();f.prepend(c('<span class="btnBackBlock">').append(e));e.click(function(){d.containers.popup.presetForm.close()})},fixButtonsStyle:function(){d.containers.popup.presetForm._dialogContainer.parent().find(".ui-dialog-buttonset").css("float","right")},close:function(){d.containers.popup.presetForm._dialogContainer.dialog("close");d.containers.streamingDialog.open()}},presetEditForm:{_dialogContainer:null,_rendered:null,get:function(){if(d.containers.popup.presetEditForm._rendered===null){d.containers.popup.presetEditForm._rendered=d.containers.popup.presetEditForm.init()}return d.containers.popup.presetEditForm._rendered},init:function(){d.containers.popup.presetEditForm._dialogContainer=c("<div>",{id:"presetEditForm"});d.containers.popup.presetEditForm._dialogContainer.dialog({autoOpen:false,modal:false,draggable:true,resizable:false,dialogClass:"presetForm",width:750,minHeight:350,buttons:{"delete":{text:d.locale.btnDelete,id:d.prefix+"btnDelete","class":"btnDelete",click:function(){}},cancel:{text:d.locale.btnCancel,id:d.prefix+"btnCancel","class":"btnCancel",click:function(){c(this).dialog("close")}},save:{text:d.locale.btnSave,id:d.prefix+"btnSave","class":"btnSave",click:function(){}}},create:function(){c(this).css("maxHeight",d.popupHeight)},close:function(){d.presetObject._id=null;d.presetObject._name=null;d.presetObject._login=null;d.presetObject._password=null;d.presetObject._announceUrl=null;d.presetObject._provider=null;d.presetObject._rtpOverTcp=null;d.presetObject._inactiveReceiverTimeout=null;d.presetObject._videoCodec=null;d.presetObject._audioCodec=null}});d.containers.popup.presetEditForm.fixButtonsStyle();return d.containers.popup.presetEditForm._dialogContainer},fixButtonsStyle:function(){d.containers.popup.presetEditForm._dialogContainer.parent().find(".ui-dialog-buttonset").css("float","none")}},presetSelectForm:{_dialogContainer:null,_rendered:null,get:function(){if(d.containers.popup.presetSelectForm._rendered===null){d.containers.popup.presetSelectForm._rendered=d.containers.popup.presetSelectForm.init()}return d.containers.popup.presetSelectForm._rendered},init:function(){d.containers.popup.presetSelectForm._dialogContainer=c("<div>",{id:"presetSelect"});d.containers.popup.presetSelectForm._dialogContainer.dialog({title:d.locale.titleSelectConfig,autoOpen:false,modal:false,draggable:true,resizable:false,dialogClass:"presetForm",width:750,minHeight:350,buttons:{disable:{text:d.locale.btnDisable,id:d.prefix+"btnDisable","class":"btnDisable",click:function(){c(this).dialog("close");d.onBroadcastDisable();d.presetTools.disableBroadcast()}},apply:{text:d.locale.btnApply,id:d.prefix+"btnApply","class":"btnApply",click:function(){c(this).dialog("close");var e=d.containers.presetSelect._select.val();d.presetTools.selectPreset(e)}}}});d.containers.popup.presetSelectForm.fixButtonsStyle();return d.containers.popup.presetSelectForm._dialogContainer},hideButton:function(){d.containers.popup.presetSelectForm._dialogContainer.parent().find(".ui-dialog-buttonset .btnDisable").hide()},showButton:function(){if(d.containers.popup.presetSelectForm._dialogContainer===null){return}d.containers.popup.presetSelectForm._dialogContainer.parent().find(".ui-dialog-buttonset .btnDisable").show()},fixButtonsStyle:function(){d.containers.popup.presetSelectForm._dialogContainer.parent().find(".ui-dialog-buttonset").css("float","none")}},removeDialog:{_rendered:null,get:function(){if(d.containers.popup.removeDialog._rendered===null){d.containers.popup.removeDialog._rendered=d.containers.popup.removeDialog.init()}return d.containers.popup.removeDialog._rendered},init:function(){var e=c("<div>");e.append(c("<span>").html(d.locale.presetWillBeDeleted));e.dialog({title:d.locale.question,autoOpen:false,position:["center","center"],modal:true,resizable:false,dialogClass:"dialog-question-form",width:300,height:150,buttons:{"delete":{text:d.locale.btnDelete,click:function(){}},cancel:{text:d.locale.btnCancel,click:function(){c(this).dialog("close")}}}});return e},show:function(g){var e=d.containers.popup.removeDialog.get();e.dialog("open");var f=e.dialog("option","buttons");f["delete"].click=function(){g(e)};e.dialog("option","buttons",f)}}}},presetObject:{_id:null,_name:null,_login:null,_password:null,_announceUrl:null,_provider:null,_rtpOverTcp:null,_inactiveReceiverTimeout:null,_videoCodec:null,_audioCodec:null,_retries:null,_retryDelay:null},presetTools:{getPresetList:function(f,e){c.ajax({url:d.handlers.getPresetList,type:"GET",dataType:"json"}).done(function(g){if(g.preset_list){d.presetList=g.preset_list}f()}).fail(function(g){e(g)})},checkPresetExist:function(g,f){var e=true;c.each(d.presetList,function(h,j){if(g===j.provider_type){if(f===undefined||f===j.name){e=false;return false}}});if(!e&&d.presetObject._id){e=true}if(!e){d.presetTools.updateTips(d.locale.textConfigurationAlreadyExists)}return e},getCDNvideoPresetState:function(e){c.ajax({url:d.handlers.prepareCDNvideoPresetsState,type:"POST",dataType:"json",data:{preset_list:e},success:function(f){if(!f.error){e=f.success;c.each(e,function(h,j){if(j.state){var g=c("#preset-"+j.id);g.html(j.state);g.css("color",j.allowed?"green":"red")}})}},error:function(){d.presetTools.sendMessage(d.locale.error,true)}})},createCDNvideoAccount:function(){c.ajax({url:d.handlers.createCDNvideoAccount,type:"POST",dataType:"json",data:{login:d.containers.CDNvideoRegForm._login.val()}}).then(function(g,h,f){d.presetTools.enableApplyButton();var e=c.Deferred();if(g.error){return e.reject(g,h,f)}return e.resolve(g,h,f)}).done(function(e){if(e.success){d.presetObject._password=c("<input>").val(e.success.password);d.presetTools.savePreset()}}).fail(function(e){d.presetTools.updateTips(e.error)})},saveCDNvideoPreset:function(e,f,g){c.ajax({url:d.handlers.checkCDNvideoAccountExist,type:"POST",dataType:"json",data:{login:e,password:f}}).then(function(k,l,j){d.presetTools.enableApplyButton(g);var h=c.Deferred();if(k.error){return h.reject(k,l,j)}return h.resolve(k,l,j)}).done(function(h){if(h.success){d.presetTools.savePreset(g)}}).fail(function(h){d.presetTools.updateTips(h.error)})},safeIntInput:function(e){return e.replace(/\D/ig,"")},safeInputClearSpaces:function(e){return e.replace(/\s/ig,"")},validateAnnounceUrl:function(h,g){var f=true;var k=/^((https?|rtsp):\/\/)?(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)(:[0-9]+)?(\/[\w\.\-?=]*)*\/?$/;var j=/^((https?|rtsp):\/\/)?([\w\.-]+)\.([a-z]{2,6}\.?)(:[0-9]+)?(\/[\w\.\-?=]*)*\/?$/;var e;if(k.test(h.val())){e=k}else{e=j}f=f&&(checkLength(h,g,1,255));f=f&&(checkRegexp(h,e,d.locale.errorField.replace("%s",g),punycode.toASCII));return f},validServerHost:function(f,g){var h=true;f.val(f.val().replace(/^rtsp:\/\//,"").replace(/:\d+$/,""));var k=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/;var j=/^([\w\.-]+)\.([a-z]{2,6}\.?)$/;var e;if(k.test(f.val())){e=k}else{e=j}h=h&&(checkLength(f,g,1,255));h=h&&(checkRegexp(f,e,d.locale.errorField.replace("%s",g),punycode.toASCII));return h},validPrimaryServer:function(g,f){var h=true;var k=/^rtsp:\/\/(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)(\/[\w\.-]*)*\/?$/;var j=/^rtsp:\/\/([\w\.-]+)\.([a-z]{2,6}\.?)(\/[\w\.-]*)*\/?$/;var e;if(k.test(g.val())){e=k}else{e=j}h=h&&(checkLength(g,f,1,255));h=h&&(checkRegexp(g,e,d.locale.errorField.replace("%s",f),punycode.toASCII));return h},getAnnounceUrl:function(){var e="";if(d.plugins.conferencePlugin.outsideUrl&&d.plugins.conferencePlugin.cid.value){e="rtsp://"+d.plugins.conferencePlugin.outsideUrl+d.plugins.conferencePlugin.cid.value.replace(/\\/g,"/")}return e},renderPresetList:function(){var j=c("<div>",{id:"broadcast"});var e=c("<fieldset>",{id:"fieldset-preset-list"});var f=c("<legend>").text(d.locale.presetList);var h=c("<table>",{"class":"table-body"});d.presetTools.renderPresetTableLines(h);e.append(f).append(h);j.append(e);var g=c("<a>",{"class":"button"});g.text(d.locale.btnAddPreset);g.click(function(){d.containers.streamingDialog.open()});e.append(g);return j},renderPresetTableLines:function(n){n.empty();if(Object.keys(d.presetList).length>0){for(var m in d.presetList){var g=d.presetTools.getPresetTitle(m);var e=d.presetList[m];var k=c("<a>",{href:"#",id:e.id,"data-provider":e.provider_type}).text(g);k.bind("click",function(){d.presetTools.editPreset(c(this).attr("id"))});var j=c("<span>").append(k);var l=c("<span>",{id:"preset-"+e.id}).text(e.state);var h=c("<tr>");h.append(c("<td>").append(j).append(l));n.append(h)}d.presetTools.getCDNvideoPresetState(d.presetList)}else{var f=c("<span>").text(d.locale.textEmptyList);var h=c("<tr>",{"class":"empty-tr"});h.append(c("<td>").append(f));n.append(h)}},savePreset:function(k){var j=(d.presetObject._login?d.presetObject._login.val():"");var l=d.presetObject._password?d.presetObject._password.val():"";var o=d.presetObject._announceUrl?d.presetObject._announceUrl.val():"";var f=d.presetObject._rtpOverTcp&&d.presetObject._rtpOverTcp.prop("checked")?1:0;var e=d.presetObject._videoCodec&&d.presetObject._videoCodec.val()?d.presetObject._videoCodec.val():d.rtsp.defaultVideoCodec;var p=d.presetObject._audioCodec&&d.presetObject._audioCodec.val()?d.presetObject._audioCodec.val():d.rtsp.defaultAudioCodec;var h=f?d.presetObject._inactiveReceiverTimeout.val():d.rtsp.inactiveReceiverTimeout;var g=d.presetObject._retries?d.presetObject._retries.val():d.rtsp.retries;var n=d.presetObject._retryDelay?d.presetObject._retryDelay.val():d.rtsp.retryDelay;var m={identifier:d.presetObject._id,name:d.presetObject._name,login:j,password:l,url:o,provider:d.presetObject._provider,videoCodec:e,audioCodec:p,rtpOverTcp:f,inactiveReceiverTimeout:h,retries:g,retryDelay:n};c.ajax({url:d.handlers.savePreset,type:"POST",dataType:"json",data:m,beforeSend:function(){d.presetTools.disableApplyButton(k)}}).then(function(s,u,r){d.presetTools.enableApplyButton(k);var q=c.Deferred();if(s.error){return q.reject(s,u,r)}return q.resolve(s,u,r)}).done(function(r){if(k===undefined){d.containers.popup.presetForm._dialogContainer.dialog("close")}else{d.containers.popup.presetEditForm._dialogContainer.dialog("close")}d.presetList=r.preset_list;if(!d.confPage){var q=c(".table-body");d.presetTools.renderPresetTableLines(q);d.rtsp.preset=r.preset_id}else{d.presetTools.selectPreset(r.preset_id);d.containers.presetBroadcast._button.unbind().bind("click",function(){d.containers.presetSelect.init().dialog("open")})}d.presetTools.sendMessage(r.success)}).fail(function(q){d.presetTools.updateTips(q.error);d.presetTools.disableApplyButton(k)})},deletePreset:function(e){if(d.presetList[e]!=="undefined"){c.ajax({url:d.handlers.deletePreset,type:"POST",dataType:"json",data:{preset_id:e},success:function(f){if(f.success){delete d.presetList[e];d.containers.popup.presetEditForm._dialogContainer.dialog("close");d.presetTools.sendMessage(f.success);if(!d.confPage){var g=c(".table-body");d.presetTools.renderPresetTableLines(g)}else{if(d.rtsp.preset==e){d.onPresetDelete(d.rtsp.preset);d.presetTools.disableBroadcast()}}}else{d.presetTools.sendMessage(f.error,true)}},error:function(){d.presetTools.sendMessage(d.local.error,true)}})}},editPreset:function(l){if(d.presetList[l]!=="undefined"){d.presetObject._id=l;var n=d.presetList[l];if(n.provider_type===d.containers.manualPushForm._provider){d.containers.manualPushForm.init(true).dialog("open");d.containers.manualPushForm._name.val(n.name);d.containers.manualPushForm._announceUrl.val(n.url)}else{if(n.provider_type===d.containers.manualPullForm._provider){d.containers.manualPullForm.init(true).dialog("open");d.containers.manualPullForm._name.val(n.name)}else{if(n.provider_type===d.containers.CDNvideoAuthForm._provider){d.containers.CDNvideoAuthForm.init(true).dialog("open");d.containers.CDNvideoAuthForm._login.val(n.username);d.containers.CDNvideoAuthForm._password.val(n.password)}else{if(n.provider_type===d.containers.wowzaServerForm._provider){d.containers.wowzaServerForm.init(true).dialog("open");d.containers.wowzaServerForm._name.val(n.name);var j=d.presetTools.parseUrl(n.url);if(j){d.containers.wowzaServerForm._host.val(j.host);d.containers.wowzaServerForm._port.val(j.port);d.containers.wowzaServerForm._application.val(j.application)}}else{if(n.provider_type===d.containers.wowzaCloudForm._provider){d.containers.wowzaCloudForm.init(true).dialog("open");d.containers.wowzaCloudForm._name.val(n.name);var j=d.presetTools.parseUrl(n.url);if(j){d.containers.wowzaCloudForm._host.val(j.scheme+j.host+"/"+j.application);d.containers.wowzaCloudForm._port.val(j.port);d.containers.wowzaCloudForm._stream.val(j.stream)}}else{if(n.provider_type===d.containers.youtubeForm._provider){d.containers.youtubeForm.init(true).dialog("open");d.containers.youtubeForm._name.val(n.name);var j=n.url.split("/");var f=j.length;if(f>0){d.containers.youtubeForm._stream_key.val(j.pop());d.containers.youtubeForm._server_url.val(j.join("/"))}}}}}}}var k=d.containers.popup.presetEditForm._dialogContainer.dialog("option","buttons");k["delete"].click=function(){d.containers.popup.removeDialog.show(function(p){p.dialog("close");d.presetTools.deletePreset(l)})};if(n.provider_type!==d.containers.CDNvideoAuthForm._provider){var e=n.enabled_codecs.split(" ");if(e.length){var g=e[0];var o=e[1]}d.containers.additionalSettings.codecs.videoCodec._field.val(g?g:d.rtsp.defaultVideoCodec);d.containers.additionalSettings.codecs.audioCodec._field.val(o?o:d.rtsp.defaultAudioCodec);if(n.provider_type!==d.containers.manualPullForm._provider&&n.provider_type!==d.containers.youtubeForm._provider){var m=n.rtp_over_tcp==="1"?true:false;d.containers.additionalSettings.rtpOverTcp._field.prop("checked",m);d.containers.additionalSettings.inactiveReceiverTimeout._field.val(n.inactive_receiver_timeout);if(n.rtp_over_tcp!=="0"){d.containers.additionalSettings.rtpOverTcp.enable()}else{d.containers.additionalSettings.rtpOverTcp.disable()}d.containers.additionalSettings.retries._field.val(n.retries);d.containers.additionalSettings.retryDelay._field.val(n.retry_delay)}if(n.username&&n.password){d.containers.authentication._field.prop("checked",true);d.containers.authentication.authFields.show();d.containers.authentication.authFields._login.val(n.username);d.containers.authentication.authFields._password.val(n.password)}}var h=d.presetTools.getPresetTitle(n.id);d.containers.popup.presetEditForm._dialogContainer.dialog("option","buttons",k);d.containers.popup.presetEditForm._dialogContainer.dialog("option","title",d.locale.textConfiguration+" "+h)}},selectPreset:function(f){d.rtsp.preset=f;var e=d.presetTools.getPresetTitle(d.rtsp.preset);d.containers.presetBroadcast._button.text(d.locale.selectedPreset+" "+e);if(d.presetList[d.rtsp.preset].provider_type===d.containers.CDNvideoAuthForm._provider){d.containers.presetBroadcast.playerCode.show();d.containers.presetBroadcast.playerCode.disable()}else{d.containers.presetBroadcast.playerCode.hide()}d.containers.popup.presetSelectForm.showButton();d.onPresetSave(d.rtsp.preset)},disableBroadcast:function(){d.rtsp.preset=null;d.containers.presetBroadcast._button.text(d.locale.textTurnOn);d.containers.presetBroadcast.playerCode.hide();d.containers.presetBroadcast._button.unbind().bind("click",function(){if(c.isEmptyObject(d.presetList)){d.containers.streamingDialog.open()}else{d.containers.presetSelect.init().dialog("open")}});d.containers.popup.presetSelectForm.hideButton()},getPresetTitle:function(e){var g="";var f=d.presetList[e];if(f.provider_type===d.containers.manualPushForm._provider){g=d.locale.manualPush+" ("+f.name+")"}else{if(f.provider_type===d.containers.manualPullForm._provider){g=d.locale.manualPull+" ("+f.name+")"}else{if(f.provider_type===d.containers.CDNvideoAuthForm._provider||f.provider_type===d.containers.youtubeForm._provider){g=f.name}else{if(f.provider_type===d.containers.wowzaServerForm._provider){g=d.containers.wowzaServerForm._providerTitle+" ("+f.name+")"}else{if(f.provider_type===d.containers.wowzaCloudForm._provider){g=d.containers.wowzaCloudForm._providerTitle+" ("+f.name+")"}}}}}return g},parseUrl:function(e){var g=new RegExp("(.+://)([^:/?]*)(?::([0-9]+))?/(.[^/]+)/(.[^/]+)?");var f=e.match(g);var e=[];if(f){e.scheme=f[1];e.host=f[2];e.port=f[3];e.application=f[4];e.stream=f[5]}return e},sendMessage:function(f,e){if(e){c(document).trigger("display-header-error",{message:f})}else{c(document).trigger("display-header-messages",{message:f})}},updateTips:function(e){updateTips(e)},getApplyButton:function(g){if(g){var f=d.containers.popup.presetEditForm._dialogContainer.parent().find(".ui-dialog-buttonpane");var e=f.find(".btnSave")}else{var f=d.containers.popup.presetForm._dialogContainer.parent().find(".ui-dialog-buttonpane");var e=f.find(".btnCreate")}return e},disableApplyButton:function(f){var e=d.presetTools.getApplyButton(f);e.attr("disabled",true);c(".validateTips").empty()},enableApplyButton:function(f){var e=d.presetTools.getApplyButton(f);e.removeAttr("disabled")},_emailRegex:/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i},onPresetSave:function(){},onPresetDelete:function(){},onBroadcastDisable:function(){}},d;c.fn.presetManagerPlugin=function(g){var f=this.data("presetManagerPlugin");if(f===undefined||f===false){var f=c.extend(true,{},b);c.extend(true,f,g);f.prefix=generateUniqueId(f.prefix)+"_";var e=this;f.init(function(){e.append(f.main());e.data("presetManagerPlugin",f)},function(h){console.error(h.error)})}return f}})(jQuery);(function(a){a.fn.extensionsPopup=function(b){this.click(function(){window.setTimeout(function(){a.getJSON("/admin/web/extension",{ext:b},function(c){showPopup(c)})},0);return false})}})(jQuery);function showPopup(c){var b=$('<div class="extDialog"></div>');if(c.img){c.img="/images/extensions/"+c.img;$(b).append('<img src="'+c.img+'" height="255" width="255"/>')}if($.type(c.text)!=="array"){$(b).append("<p>"+c.text+"</p>")}else{for(var a in c.text){$(b).append("<p>"+c.text[a]+"</p>")}}if(c.displayButton||c.displayLink){var d=$("<div>",{"class":"buttons"});if(c.displayButton&&c.buttonName){d.append('<a href="'+c.buttonHref+'" target="_blank" rel="noopener" class="button btn_green">'+c.buttonName+"</a>")}if(c.displayLink&&c.linkHref){d.append('<a href="'+c.linkHref+'" target="_blank" rel="noopener" class="'+(!c.displayButton?"button btn_green":"")+'">'+c.linkName+"</a>")}$(b).append(d)}$(b).append('<br clear="left"/>');b.dialog({modal:true,title:c.title,minWidth:600,close:function(){b.remove()}})};